<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Processor_SDK_Linux_Automotive_Software_Developers_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 08:36:50 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Processor SDK Linux Automotive Software Developers Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Processor_SDK_Linux_Automotive_Software_Developers_Guide","wgTitle":"Processor SDK Linux Automotive Software Developers Guide","wgCurRevisionId":237122,"wgRevisionId":237122,"wgArticleId":42748,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["PROCESSOR-SDK","Automotive","IPC, BIOS, Linux","Pages with broken file links","OpenCV","Software","Processor SDK Linux Automotive","Software User Guides"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Processor_SDK_Linux_Automotive_Software_Developers_Guide","wgRelevantArticleId":42748,"wgRequestId":"ed43a30b8f52bb57f796fbc2","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Processor_SDK_Linux_Automotive_Software_Developers_Guide rootpage-Processor_SDK_Linux_Automotive_Software_Developers_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Processor SDK Linux Automotive Software Developers Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="background-color: RGB(238,29,35); padding: 10px;">
<p><a href="File_Ti_stk_1c_rev_rgb_png.html" class="image" title="Ti stk 1c rev rgb png.png"><img alt="Ti stk 1c rev rgb png.png" src="https://processors.wiki.ti.com/images/3/39/Ti_stk_1c_rev_rgb_png.png" width="200" height="47" /></a> 
</p>
</div> 
<p><font size="2">Last updated: <b>12/13/2019</b></font> 
</p><p>Welcome to the DRA7xx Processor SDK Linux Automotive Software Developer's Guide.
</p><p>Thank you for choosing the DRA7xx EVM for your application. The purpose of this guide is to get you going with developing software for the DRA7xx on a Linux development host only.
</p><p><span style="color:red"> <b>NOTE!</b> </span> This is a <span style="color:blue"> live Wiki page that gets updated for every release </span>. For the Software Developers Guide that is specific to the release you are using, please refer to the SW Dev Guide link in <a rel="nofollow" class="external text" href="Category_Processor_SDK_Linux_Automotive.html">Processor SDK Linux Automotive Landing Page</a>
</p><p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1"><a href="#Starting_your_software_development"><span class="tocnumber">2</span> <span class="toctext">Starting your software development</span></a>
<ul>
<li class="toclevel-2"><a href="#Host_Setup"><span class="tocnumber">2.1</span> <span class="toctext">Host Setup</span></a></li>
<li class="toclevel-2"><a href="#Code_Composer_Studio"><span class="tocnumber">2.2</span> <span class="toctext">Code Composer Studio</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Repo_tool_Usage"><span class="tocnumber">3</span> <span class="toctext">Repo tool Usage</span></a>
<ul>
<li class="toclevel-2"><a href="#Starting_source_code_development_using_repo_tool"><span class="tocnumber">3.1</span> <span class="toctext">Starting source code development using repo tool</span></a></li>
<li class="toclevel-2"><a href="#How_to_get_updates"><span class="tocnumber">3.2</span> <span class="toctext">How to get updates</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Building_Yocto_Filesystem"><span class="tocnumber">4</span> <span class="toctext">Building Yocto Filesystem</span></a>
<ul>
<li class="toclevel-2"><a href="#Modifying_source_code_and_rebuilding_a_component"><span class="tocnumber">4.1</span> <span class="toctext">Modifying source code and rebuilding a component</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Processor_SDK_Linux_Automotive_software_overview"><span class="tocnumber">5</span> <span class="toctext">Processor SDK Linux Automotive software overview</span></a></li>
<li class="toclevel-1"><a href="#Running_Examples"><span class="tocnumber">6</span> <span class="toctext">Running Examples</span></a>
<ul>
<li class="toclevel-2"><a href="#Running_OMAP_DRM_DSS_Examples"><span class="tocnumber">6.1</span> <span class="toctext">Running OMAP DRM DSS Examples</span></a></li>
<li class="toclevel-2"><a href="#Graphics_Demos_from_Command_Line"><span class="tocnumber">6.2</span> <span class="toctext">Graphics Demos from Command Line</span></a>
<ul>
<li class="toclevel-3"><a href="#Finding_Connector_ID"><span class="tocnumber">6.2.1</span> <span class="toctext">Finding Connector ID</span></a></li>
<li class="toclevel-3"><a href="#Finding_Plane_ID"><span class="tocnumber">6.2.2</span> <span class="toctext">Finding Plane ID</span></a></li>
<li class="toclevel-3"><a href="#kmscube"><span class="tocnumber">6.2.3</span> <span class="toctext">kmscube</span></a></li>
<li class="toclevel-3"><a href="#kmscube_with_video"><span class="tocnumber">6.2.4</span> <span class="toctext">kmscube with video</span></a></li>
<li class="toclevel-3"><a href="#Wayland.2FWeston"><span class="tocnumber">6.2.5</span> <span class="toctext">Wayland/Weston</span></a>
<ul>
<li class="toclevel-4"><a href="#Running_weston_clients"><span class="tocnumber">6.2.5.1</span> <span class="toctext">Running weston clients</span></a></li>
<li class="toclevel-4"><a href="#Running_multimedia_with_Wayland_sink"><span class="tocnumber">6.2.5.2</span> <span class="toctext">Running multimedia with Wayland sink</span></a></li>
<li class="toclevel-4"><a href="#Exiting_weston"><span class="tocnumber">6.2.5.3</span> <span class="toctext">Exiting weston</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Using_IVI_shell_feature"><span class="tocnumber">6.2.6</span> <span class="toctext">Using IVI shell feature</span></a>
<ul>
<li class="toclevel-4"><a href="#Running_weston.E2.80.99s_sample_client_applications_with_ivi-shell"><span class="tocnumber">6.2.6.1</span> <span class="toctext">Running weston’s sample client applications with ivi-shell</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#IMG_PowerVR_Demos"><span class="tocnumber">6.2.7</span> <span class="toctext">IMG PowerVR Demos</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Using_the_PowerVR_Tools"><span class="tocnumber">6.3</span> <span class="toctext">Using the PowerVR Tools</span></a>
<ul>
<li class="toclevel-3"><a href="#PVRTune"><span class="tocnumber">6.3.1</span> <span class="toctext">PVRTune</span></a></li>
<li class="toclevel-3"><a href="#PVRTrace"><span class="tocnumber">6.3.2</span> <span class="toctext">PVRTrace</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Testing_DSS_WB_pipeline"><span class="tocnumber">6.4</span> <span class="toctext">Testing DSS WB pipeline</span></a>
<ul>
<li class="toclevel-3"><a href="#Memory_to_Memory_.28M2M.29"><span class="tocnumber">6.4.1</span> <span class="toctext">Memory to Memory (M2M)</span></a></li>
<li class="toclevel-3"><a href="#Capture"><span class="tocnumber">6.4.2</span> <span class="toctext">Capture</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Running_aplay_and_arecord_application"><span class="tocnumber">6.5</span> <span class="toctext">Running aplay and arecord application</span></a></li>
<li class="toclevel-2"><a href="#Running_GC320_application"><span class="tocnumber">6.6</span> <span class="toctext">Running GC320 application</span></a></li>
<li class="toclevel-2"><a href="#Running_viddec3test_application"><span class="tocnumber">6.7</span> <span class="toctext">Running viddec3test application</span></a></li>
<li class="toclevel-2"><a href="#Running_a_gstreamer_pipeline"><span class="tocnumber">6.8</span> <span class="toctext">Running a gstreamer pipeline</span></a></li>
<li class="toclevel-2"><a href="#Running_VIP.2FVPE.2FCAL_application"><span class="tocnumber">6.9</span> <span class="toctext">Running VIP/VPE/CAL application</span></a>
<ul>
<li class="toclevel-3"><a href="#Video_Input_Port"><span class="tocnumber">6.9.1</span> <span class="toctext">Video Input Port</span></a></li>
<li class="toclevel-3"><a href="#Camera_Adapter_Layer"><span class="tocnumber">6.9.2</span> <span class="toctext">Camera Adapter Layer</span></a></li>
<li class="toclevel-3"><a href="#Supported_cameras"><span class="tocnumber">6.9.3</span> <span class="toctext">Supported cameras</span></a>
<ul>
<li class="toclevel-4"><a href="#Running_dmabuftest"><span class="tocnumber">6.9.3.1</span> <span class="toctext">Running dmabuftest</span></a></li>
<li class="toclevel-4"><a href="#Capturing_from_OV10633_onboard_camera"><span class="tocnumber">6.9.3.2</span> <span class="toctext">Capturing from OV10633 onboard camera</span></a></li>
<li class="toclevel-4"><a href="#Capturing_from_OV10635_Vision_board_camera"><span class="tocnumber">6.9.3.3</span> <span class="toctext">Capturing from OV10635 Vision board camera</span></a></li>
<li class="toclevel-4"><a href="#Capturing_through_TVP_decoder"><span class="tocnumber">6.9.3.4</span> <span class="toctext">Capturing through TVP decoder</span></a></li>
<li class="toclevel-4"><a href="#Capturing_through_LVDS_camera"><span class="tocnumber">6.9.3.5</span> <span class="toctext">Capturing through LVDS camera</span></a></li>
<li class="toclevel-4"><a href="#Capturing_through_OV10640.2FOV490_CSI_camera.2FISP"><span class="tocnumber">6.9.3.6</span> <span class="toctext">Capturing through OV10640/OV490 CSI camera/ISP</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Video_Processing_Engine.28VPE.29"><span class="tocnumber">6.9.4</span> <span class="toctext">Video Processing Engine(VPE)</span></a>
<ul>
<li class="toclevel-4"><a href="#File_to_File"><span class="tocnumber">6.9.4.1</span> <span class="toctext">File to File</span></a></li>
<li class="toclevel-4"><a href="#File_to_Display"><span class="tocnumber">6.9.4.2</span> <span class="toctext">File to Display</span></a></li>
<li class="toclevel-4"><a href="#VIP-VPE-Display"><span class="tocnumber">6.9.4.3</span> <span class="toctext">VIP-VPE-Display</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Running_DSS_application"><span class="tocnumber">6.10</span> <span class="toctext">Running DSS application</span></a>
<ul>
<li class="toclevel-3"><a href="#Testing_with_FPDLink_Display_setup"><span class="tocnumber">6.10.1</span> <span class="toctext">Testing with FPDLink Display setup</span></a>
<ul>
<li class="toclevel-4"><a href="#Current_H.2FW_setup"><span class="tocnumber">6.10.1.1</span> <span class="toctext">Current H/W setup</span></a></li>
<li class="toclevel-4"><a href="#Legacy_H.2FW_setup"><span class="tocnumber">6.10.1.2</span> <span class="toctext">Legacy H/W setup</span></a></li>
<li class="toclevel-4"><a href="#HW_Modifications_required"><span class="tocnumber">6.10.1.3</span> <span class="toctext">HW Modifications required</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Gsttestplayer"><span class="tocnumber">6.11</span> <span class="toctext">Gsttestplayer</span></a>
<ul>
<li class="toclevel-3"><a href="#Running_gsttestplayer"><span class="tocnumber">6.11.1</span> <span class="toctext">Running gsttestplayer</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Running_IPC_examples"><span class="tocnumber">6.12</span> <span class="toctext">Running IPC examples</span></a>
<ul>
<li class="toclevel-3"><a href="#User_space_sample_application"><span class="tocnumber">6.12.1</span> <span class="toctext">User space sample application</span></a></li>
<li class="toclevel-3"><a href="#RPMsg_client_sample_application"><span class="tocnumber">6.12.2</span> <span class="toctext">RPMsg client sample application</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Running_basic_Wifi_tests"><span class="tocnumber">6.13</span> <span class="toctext">Running basic Wifi tests</span></a></li>
<li class="toclevel-2"><a href="#Running_basic_Bluetooth_tests"><span class="tocnumber">6.14</span> <span class="toctext">Running basic Bluetooth tests</span></a></li>
<li class="toclevel-2"><a href="#How_to_bring_up_the_GNSS_driver_and_sample_application"><span class="tocnumber">6.15</span> <span class="toctext">How to bring up the GNSS driver and sample application</span></a></li>
<li class="toclevel-2"><a href="#Supported_Boot_modes"><span class="tocnumber">6.16</span> <span class="toctext">Supported Boot modes</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Booting_EVM_with_different_modes"><span class="tocnumber">7</span> <span class="toctext">Booting EVM with different modes</span></a>
<ul>
<li class="toclevel-2"><a href="#Choosing_the_correct_device_tree"><span class="tocnumber">7.1</span> <span class="toctext">Choosing the correct device tree</span></a>
<ul>
<li class="toclevel-3"><a href="#Identifying_LCD_Panels"><span class="tocnumber">7.1.1</span> <span class="toctext">Identifying LCD Panels</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Choosing_the_correct_bootloader_config"><span class="tocnumber">7.2</span> <span class="toctext">Choosing the correct bootloader config</span></a></li>
<li class="toclevel-2"><a href="#Using_QSPI_Boot"><span class="tocnumber">7.3</span> <span class="toctext">Using QSPI Boot</span></a>
<ul>
<li class="toclevel-3"><a href="#Supported_boot_modes_2"><span class="tocnumber">7.3.1</span> <span class="toctext">Supported boot modes</span></a>
<ul>
<li class="toclevel-4"><a href="#QSPI_Production_Boot_Mode"><span class="tocnumber">7.3.1.1</span> <span class="toctext">QSPI Production Boot Mode</span></a>
<ul>
<li class="toclevel-5"><a href="#SYS_BOOT_Switch_Settings"><span class="tocnumber">7.3.1.1.1</span> <span class="toctext">SYS BOOT Switch Settings</span></a></li>
<li class="toclevel-5"><a href="#Memory_Layout_of_QSPI_Flash"><span class="tocnumber">7.3.1.1.2</span> <span class="toctext">Memory Layout of QSPI Flash</span></a></li>
<li class="toclevel-5"><a href="#Build_kernel_uImage_for_QSPI_boot_mode"><span class="tocnumber">7.3.1.1.3</span> <span class="toctext">Build kernel uImage for QSPI boot mode</span></a></li>
<li class="toclevel-5"><a href="#Flashing_the_Image_to_QSPI_from_Linux_kernel"><span class="tocnumber">7.3.1.1.4</span> <span class="toctext">Flashing the Image to QSPI from Linux kernel</span></a></li>
</ul>
</li>
<li class="toclevel-4"><a href="#QSPI_Development_Boot_Mode"><span class="tocnumber">7.3.1.2</span> <span class="toctext">QSPI Development Boot Mode</span></a>
<ul>
<li class="toclevel-5"><a href="#SYS_BOOT_Switch_Settings_2"><span class="tocnumber">7.3.1.2.1</span> <span class="toctext">SYS BOOT Switch Settings</span></a></li>
<li class="toclevel-5"><a href="#Flashing_UBoot_to_QSPI_from_Linux_kernel"><span class="tocnumber">7.3.1.2.2</span> <span class="toctext">Flashing UBoot to QSPI from Linux kernel</span></a></li>
<li class="toclevel-5"><a href="#Flashing_UBoot_to_QSPI_from_UBoot"><span class="tocnumber">7.3.1.2.3</span> <span class="toctext">Flashing UBoot to QSPI from UBoot</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2"><a href="#Using_eMMC_Boot"><span class="tocnumber">7.4</span> <span class="toctext">Using eMMC Boot</span></a>
<ul>
<li class="toclevel-3"><a href="#Partitioning_and_formatting_eMMC"><span class="tocnumber">7.4.1</span> <span class="toctext">Partitioning and formatting eMMC</span></a></li>
<li class="toclevel-3"><a href="#Partitioning_and_formatting_eMMC_from_Host_PC_through_USB"><span class="tocnumber">7.4.2</span> <span class="toctext">Partitioning and formatting eMMC from Host PC through USB</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Booting_Secure_DRA7xx_Devices_SD.2FeMMC"><span class="tocnumber">7.5</span> <span class="toctext">Booting Secure DRA7xx Devices SD/eMMC</span></a></li>
<li class="toclevel-2"><a href="#USB_DRD_.28Dual_Role_Device.29_Support"><span class="tocnumber">7.6</span> <span class="toctext">USB DRD (Dual Role Device) Support</span></a></li>
<li class="toclevel-2"><a href="#Device_Firmware_Upgrade_.28DFU.29"><span class="tocnumber">7.7</span> <span class="toctext">Device Firmware Upgrade (DFU)</span></a>
<ul>
<li class="toclevel-3"><a href="#DFU_Supported_Devices_in_u-boot"><span class="tocnumber">7.7.1</span> <span class="toctext">DFU Supported Devices in u-boot</span></a></li>
<li class="toclevel-3"><a href="#SPL-DFU_support_.28USB_Peripheral_boot_mode.29"><span class="tocnumber">7.7.2</span> <span class="toctext">SPL-DFU support (USB Peripheral boot mode)</span></a></li>
<li class="toclevel-3"><a href="#DFU_Usage_from_u-boot"><span class="tocnumber">7.7.3</span> <span class="toctext">DFU Usage from u-boot</span></a>
<ul>
<li class="toclevel-4"><a href="#Flashing_rawemmc_partition"><span class="tocnumber">7.7.3.1</span> <span class="toctext">Flashing rawemmc partition</span></a></li>
<li class="toclevel-4"><a href="#Update_existing_MLO_and_u-boot.img_of_eMMC_boot_partition_.28vfat.29"><span class="tocnumber">7.7.3.2</span> <span class="toctext">Update existing MLO and u-boot.img of eMMC boot partition (vfat)</span></a></li>
<li class="toclevel-4"><a href="#Update_existing_boot_and_rootfs_partition_.28ext4.29_of_eMMC"><span class="tocnumber">7.7.3.3</span> <span class="toctext">Update existing boot and rootfs partition (ext4) of eMMC</span></a>
<ul>
<li class="toclevel-5"><a href="#Steps_to_create_boot_.28vfat.29_and_rootfs_.28ext4.29_raw_disk_image"><span class="tocnumber">7.7.3.3.1</span> <span class="toctext">Steps to create boot (vfat) and rootfs (ext4) raw disk image</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3"><a href="#Flashing.2FUpgrading_custom_file_to_eMMC_vfat.2Fext4_partition"><span class="tocnumber">7.7.4</span> <span class="toctext">Flashing/Upgrading custom file to eMMC vfat/ext4 partition</span></a>
<ul>
<li class="toclevel-4"><a href="#Adding_a_custom_file_to_DFU_configuration"><span class="tocnumber">7.7.4.1</span> <span class="toctext">Adding a custom file to DFU configuration</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Using_dfu-utils_from_Windows_PC_Host"><span class="tocnumber">7.7.5</span> <span class="toctext">Using dfu-utils from Windows PC Host</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#IPC"><span class="tocnumber">8</span> <span class="toctext">IPC</span></a>
<ul>
<li class="toclevel-2"><a href="#Unloading_and_loading_remotecores_at_runtime"><span class="tocnumber">8.1</span> <span class="toctext">Unloading and loading remotecores at runtime</span></a></li>
<li class="toclevel-2"><a href="#Changing_the_remotecore_binary_at_runtime"><span class="tocnumber">8.2</span> <span class="toctext">Changing the remotecore binary at runtime</span></a></li>
<li class="toclevel-2"><a href="#Loading_firmware_during_initial_boot_without_using_udev"><span class="tocnumber">8.3</span> <span class="toctext">Loading firmware during initial boot without using udev</span></a></li>
<li class="toclevel-2"><a href="#Handling_the_IPU_bitbanding_region"><span class="tocnumber">8.4</span> <span class="toctext">Handling the IPU bitbanding region</span></a>
<ul>
<li class="toclevel-3"><a href="#IPC_specifics"><span class="tocnumber">8.4.1</span> <span class="toctext">IPC specifics</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1"><a href="#Using_the_Late_attach_functionality"><span class="tocnumber">9</span> <span class="toctext">Using the Late attach functionality</span></a>
<ul>
<li class="toclevel-2"><a href="#Configuring_U-Boot"><span class="tocnumber">9.1</span> <span class="toctext">Configuring U-Boot</span></a></li>
<li class="toclevel-2"><a href="#Building_the_Linux_kernel_device_tree"><span class="tocnumber">9.2</span> <span class="toctext">Building the Linux kernel device tree</span></a></li>
<li class="toclevel-2"><a href="#Boot_setup"><span class="tocnumber">9.3</span> <span class="toctext">Boot setup</span></a></li>
<li class="toclevel-2"><a href="#Confirming_Late_attach_functionality"><span class="tocnumber">9.4</span> <span class="toctext">Confirming Late attach functionality</span></a></li>
<li class="toclevel-2"><a href="#Customizing_Early_Boot_for_a_Usecase"><span class="tocnumber">9.5</span> <span class="toctext">Customizing Early Boot for a Usecase</span></a></li>
<li class="toclevel-2"><a href="#Validation_and_Limitations"><span class="tocnumber">9.6</span> <span class="toctext">Validation and Limitations</span></a></li>
<li class="toclevel-2"><a href="#Debug_guide"><span class="tocnumber">9.7</span> <span class="toctext">Debug guide</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#Changing_MPU_Frequency_.28DVFS.29"><span class="tocnumber">10</span> <span class="toctext">Changing MPU Frequency (DVFS)</span></a></li>
<li class="toclevel-1"><a href="#Testing_OpenCL"><span class="tocnumber">11</span> <span class="toctext">Testing OpenCL</span></a></li>
<li class="toclevel-1"><a href="#Testing_OpenCV"><span class="tocnumber">12</span> <span class="toctext">Testing OpenCV</span></a></li>
<li class="toclevel-1"><a href="#Ducati_performance_measurement"><span class="tocnumber">13</span> <span class="toctext">Ducati performance measurement</span></a>
<ul>
<li class="toclevel-2"><a href="#Changes_to_be_done_in_ipumm_Makefile"><span class="tocnumber">13.1</span> <span class="toctext">Changes to be done in ipumm Makefile</span></a></li>
</ul>
</li>
<li class="toclevel-1"><a href="#SOC_Performance_monitoring_tools"><span class="tocnumber">14</span> <span class="toctext">SOC Performance monitoring tools</span></a>
<ul>
<li class="toclevel-2"><a href="#Introduction_2"><span class="tocnumber">14.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2"><a href="#Getting_started"><span class="tocnumber">14.2</span> <span class="toctext">Getting started</span></a></li>
<li class="toclevel-2"><a href="#Quick_guide_to_available_plugins"><span class="tocnumber">14.3</span> <span class="toctext">Quick guide to available plugins</span></a>
<ul>
<li class="toclevel-3"><a href="#Temperature_data"><span class="tocnumber">14.3.1</span> <span class="toctext">Temperature data</span></a></li>
<li class="toclevel-3"><a href="#Voltage_data"><span class="tocnumber">14.3.2</span> <span class="toctext">Voltage data</span></a></li>
<li class="toclevel-3"><a href="#Frequency_data"><span class="tocnumber">14.3.3</span> <span class="toctext">Frequency data</span></a></li>
<li class="toclevel-3"><a href="#CPU_Load_information"><span class="tocnumber">14.3.4</span> <span class="toctext">CPU Load information</span></a>
<ul>
<li class="toclevel-4"><a href="#Measuring_the_MPU_load"><span class="tocnumber">14.3.4.1</span> <span class="toctext">Measuring the MPU load</span></a></li>
<li class="toclevel-4"><a href="#Measuring_the_GPU_load"><span class="tocnumber">14.3.4.2</span> <span class="toctext">Measuring the GPU load</span></a></li>
</ul>
</li>
<li class="toclevel-3"><a href="#Boot_time_measurement"><span class="tocnumber">14.3.5</span> <span class="toctext">Boot time measurement</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Order_of_execution"><span class="tocnumber">14.4</span> <span class="toctext">Order of execution</span></a></li>
<li class="toclevel-2"><a href="#Config_file_format"><span class="tocnumber">14.5</span> <span class="toctext">Config file format</span></a>
<ul>
<li class="toclevel-3"><a href="#GLOBAL_section:"><span class="tocnumber">14.5.1</span> <span class="toctext">GLOBAL section:</span></a></li>
<li class="toclevel-3"><a href="#TABLE_section:"><span class="tocnumber">14.5.2</span> <span class="toctext">TABLE section:</span></a></li>
<li class="toclevel-3"><a href="#BAR_GRAPH_section:"><span class="tocnumber">14.5.3</span> <span class="toctext">BAR GRAPH section:</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Commands:"><span class="tocnumber">14.6</span> <span class="toctext">Commands:</span></a>
<ul>
<li class="toclevel-3"><a href="#TABLE_command"><span class="tocnumber">14.6.1</span> <span class="toctext">TABLE command</span></a></li>
<li class="toclevel-3"><a href="#CPULOAD_command"><span class="tocnumber">14.6.2</span> <span class="toctext">CPULOAD command</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Executing_in_debug_mode"><span class="tocnumber">14.7</span> <span class="toctext">Executing in debug mode</span></a></li>
<li class="toclevel-2"><a href="#Build_instructions"><span class="tocnumber">14.8</span> <span class="toctext">Build instructions</span></a></li>
<li class="toclevel-2"><a href="#Configuration_of_the_soc-ddr-bw-visualizer"><span class="tocnumber">14.9</span> <span class="toctext">Configuration of the soc-ddr-bw-visualizer</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-2"><a href="#Additional_Procedures"><span class="tocnumber">15</span> <span class="toctext">Additional Procedures</span></a>
<ul>
<li class="toclevel-2"><a href="#Build_Environment_Setup"><span class="tocnumber">15.1</span> <span class="toctext">Build Environment Setup</span></a>
<ul>
<li class="toclevel-3"><a href="#Cross_Compiler_setup"><span class="tocnumber">15.1.1</span> <span class="toctext">Cross Compiler setup</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Rebuilding_the_SDK_components"><span class="tocnumber">15.2</span> <span class="toctext">Rebuilding the SDK components</span></a></li>
<li class="toclevel-2"><a href="#Creating_your_own_Linux_kernel_image"><span class="tocnumber">15.3</span> <span class="toctext">Creating your own Linux kernel image</span></a></li>
<li class="toclevel-2"><a href="#Using_the_statistics_collector_.28bandwidth_application.29"><span class="tocnumber">15.4</span> <span class="toctext">Using the statistics collector (bandwidth application)</span></a>
<ul>
<li class="toclevel-3"><a href="#Target_side"><span class="tocnumber">15.4.1</span> <span class="toctext">Target side</span></a></li>
<li class="toclevel-3"><a href="#Host_side"><span class="tocnumber">15.4.2</span> <span class="toctext">Host side</span></a></li>
</ul>
</li>
<li class="toclevel-2"><a href="#Setting_up_Tera_Term"><span class="tocnumber">15.5</span> <span class="toctext">Setting up Tera Term</span></a></li>
</ul>
</li>
</ul>
</div>
 
<p><br />
</p>
<h1><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Some commands are to be executed on the Linux development host, some on the Linux target and some on the u-boot (bootloader) prompt. The following conventions are used to distinguish the commands on a host and on the target:
</p>
<pre><b>host $</b> &lt;this command is to be executed on the host&gt;
<b>target #</b> &lt;this command is to be executed on the target&gt;
<b>u-boot&#160;:&gt;</b> &lt;this command is to be executed on the u-boot prompt&gt;
</pre>
<p><b>Note!</b> All instructions in this guide are for <a rel="nofollow" class="external text" href="http://releases.ubuntu.com/14.04/">Ubuntu 14.04</a> on 64-bit machine. At this time, this is the only supported Linux host distribution for development.
</p>
<h1><span class="mw-headline" id="Starting_your_software_development">Starting your software development</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Setup up ARM linux development Environment on the host. Please refer to this link to see how to set one up.
</p><p><a rel="nofollow" class="external text" href="How_to_Build_a_Ubuntu_Linux_host_under_VirtualBox.html">Configuration of ARM Linux development Environment</a>
</p><p><b>Step 1: </b> Install the Processor SDK Linux Automotive release on the host machine.
</p>
<ul><li>Download the Processor SDK Linux Automotive installer.</li>
<li>If necessary make the installer executable manually by executing:</li></ul>
<pre><b>host $</b> chmod +x ti-processor-sdk-linux-automotive-dra7xx-evm-06.00.00.03-installer.bin
</pre>
<ul><li>Execute the installer on the host and follow the instructions:</li></ul>
<pre><b>host $</b> ./ti-processor-sdk-linux-automotive-dra7xx-evm-06.00.00.03-installer.bin
</pre>
<p><b>Step 2: </b> Setup the INSTALL_DIR environment variable to the location where the Processor SDK Linux Automotive is installed (the following assumes that Processor SDK Linux Automotive was installed at default location):
</p>
<pre><b>host $</b> export INSTALL_DIR="${HOME}/ti-processor-sdk-linux-automotive_dra7xx-evm_06_00_00_03"
</pre>
<p><b> Step 3: </b> Setup the Processor SDK Linux Automotive on host<br />
</p>
<h4><span class="mw-headline" id="Host_Setup">Host Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<dl><dt><ul><li>Ubuntu</li></ul></dt></dl>
<p>The recommended Linux distribution is Ubuntu 14.04 or Ubuntu 16.04.
</p><p>The following build host packages are required for Ubuntu. The following command will install the required tools on the Ubuntu Linux distribution.
</p><p>For Ubuntu 14.04 and 16.04, please run the following:
</p>
<pre>$ sudo apt-get install git build-essential python diffstat texinfo gawk chrpath dos2unix wget unzip socat doxygen libc6:i386 libncurses5:i386 libstdc++6:i386 libz1:i386
</pre>
<p><br />
The build also requires that <code>bash</code> is configured as the default system shell. The following steps will configure Ubuntu to use <code>bash</code> instead of the default <code>dash</code>.
</p>
<pre>$ sudo dpkg-reconfigure dash

(Select "no" when prompted)
</pre>
<h4><span class="mw-headline" id="Code_Composer_Studio">Code Composer Studio</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color:red"> <b>NOTE!</b> </span> This step is required only if you want to use Code Composer Studio IDE. In the latest Processor SDK Linux Automotive releases, M4/DSP firmware image build is handled as part of SDK Yocto build. 
</p><p><br />
</p><p>Code Composer Studio 6.1.3.00034 must be downloaded manually and placed into either the downloads directory, or placed on a mirror. Please see <a rel="nofollow" class="external text" href="http://software-dl.ti.com/ccs/esd/documents/ccs_downloads.html#Code_Composer_Studio_Version_6_Downloads">CCS v6 Download</a> for details and download the Linux off-line installation tarball, e.g., CCS6.1.3.00034_linux.tar.gz.
</p><p><br />
</p>
<div style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><b>NOTE</b><br /><br />If the CCS Linux tarball is copied to tisdk/downloads directory, please also run "touch tisdk/downloads/CCS6.1.3.00034_linux.tar.gz.done". </div>
<p><br />
</p><p><br />
The Processor SDK Linux Automotive comes with a script for setting up your Ubuntu 14.04 LTS development host. It is an interactive script, but if you accept the defaults by pressing return you will use the recommended settings. This is recommended for first time users. Note that this script requires ethernet access as it will update your Ubuntu Linux development host with the packages required to develop using the Processor SDK Linux Automotive.
<br />
<b>Note: Please make sure that the proxy settings are done for http, https, git, ftp and wget before proceeding further.</b> <br />
Execute the script in the Processor SDK Linux Automotive release directory using:
</p>
<pre><b>host $</b> cd ${INSTALL_DIR}
<b>host $</b> ./setup.sh
</pre>
<p>The setup script would perform the following operations:
</p>
<ol><li>Installs all the necessary package on the host for the SDK.</li>
<li>Prepares the UART terminal to communicate with the target over Debug USB on Minicom. If you want to use a windows host for connecting to the target instead, see the <a href="#Setting_up_Tera_Term">#Setting_up_Tera_Term</a> section</li>
<li>Setups the linaro cross compiler</li>
<li>Installs the dependencies for the repo tool.</li>
<li>Initialize the repo by pointing it to Processor SDK Linux Automotive release manifest location.</li></ol>
<p>To start minicom on your Linux development host execute <i>minicom -w</i> (or Tera Term on Windows).
</p><p><b>Step 4: </b> Prepare SD card <br />
To install the release image, you need a µSD Card (at least 4GB) with 2 partitions:
</p>
<ul><li>boot (vfat) partition.</li>
<li>rootfs (ext4 or ext3) partition.</li></ul>
<p>The following procedure prepares the sdcard: (however, the user can choose to do it manually as well)
</p>
<ul><li>Plug an SD card reader to your PC and insert a µSD card. It must be at least 4GB size.</li>
<li>Identify which device corresponds to the SD card reader. <tt>sudo fdisk -l</tt> command can help you find out where the µSD Card is mapped. We will call it <tt>/dev/sdY</tt> here.</li></ul>
<pre>Note&#160;: If you are using NFS file system, then edit ${INSTALL_DIR}/board-support/pre-built-images/uenv.txt, add <b>"ip=dhcp"</b> in bootargs.
</pre>
<ul><li>Re-format your µSD card with this script mksdboot.sh from the bin directory in the Processor SDK Linux Automotive</li></ul>
<pre>$ sudo ${INSTALL_DIR}/bin/mksdboot.sh --device <tt>/dev/sdY</tt> --sdk <tt>${INSTALL_DIR}</tt>
</pre>
<p>The above script would prepare the SD card with the prebuilt images and yocto filesystem for SD boot.
</p><p><b>Step 5: </b>  Booting the board <br />
To boot the board with the above created SD card, refer to the <b>Quick Start Guide</b> at the Processor SDK Linux Automotive download location <i><a rel="nofollow" class="external text" href="http://software-dl.ti.com/infotainment/esd/jacinto6/processor-sdk-linux-automotive/latest/index_FDS.html">Link</a></i> to setup the board.<br />
Then, power cycle the board and login with username as <b>root</b>.
</p><p><br />
</p><p><br />
</p>
<h1><span class="mw-headline" id="Repo_tool_Usage">Repo tool Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Starting_source_code_development_using_repo_tool">Starting source code development using repo tool</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The Processor SDK Linux Automotive release uses the repo tool to effectively manage the different components.<br />
</p><p><b>NOTE&#160;:</b>
</p><p><b>1: The first step to the repo tool is the repo initialization and this is done as part of the $INSTALL_DIR/setup.sh script</b>
</p><p><b>2: The repo tool is downloaded into the bin folder in the Processor SDK Linux Automotive directory. Please ensure that this path is updated in the environment variable as shown below</b>
</p>
<pre><b>host $</b>  export PATH=${INSTALL_DIR}/bin:$PATH
</pre>
<p>The Processor SDK Linux Automotive release contains a helper script that sets up the development environment. Run the script as shown below:
</p>
<pre><b>host $</b> cd ${INSTALL_DIR}
<b>host $</b> ./bin/fetch-sources.sh
</pre>
<p>The script does the following:
</p>
<ul><li>Check for the repo tool.</li>
<li>Perform repo sync</li>
<li>Create a branch called <b>dev</b></li>
<li>Checkout the branch <b>dev</b></li></ul>
<p>It is expected that the development is done on the <b>dev</b> branch.
</p><p><br />
</p>
<h2><span class="mw-headline" id="How_to_get_updates">How to get updates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_starting&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If there are changes in the remote repositories, it could be fetched using the same script.<br />
However, please make note of these important points.
</p><p>1. The script will fetch the latest changes, and switch back to the <b>dev</b> branch.<br />
2. The new updates from the remote, will be available in the master branch.<br />
3. The decision on whether to merge the changes to the local branch or merge the local branch to the master is left to the developer
</p><p><br />
</p>
<h1><span class="mw-headline" id="Building_Yocto_Filesystem">Building Yocto Filesystem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_building_yocto_fs&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Please ensure that the setup.sh script is run as described in <a href="#Starting_your_software_development">Starting your software development</a> section and answer 'yes' to fetch-sources prompt. <br />
Before building the filesystem, <b>ensure that the svn, http, ftp and git proxies are set correctly</b>. Refer to the following link for these settings <a rel="nofollow" class="external free" href="https://wiki.yoctoproject.org/wiki/Working_Behind_a_Network_Proxy">https://wiki.yoctoproject.org/wiki/Working_Behind_a_Network_Proxy</a>.
</p><p>Add the Linaro cross-compile toolchain path in the PATH environment variable.
</p>
<pre><b>host $</b> export PATH=&lt;<i>Path to Linaro cross-compile toolchain</i>&gt;/bin:$PATH
</pre>
<p>Run this command to as a one-time setup for the yocto build
</p>
<pre><b>host $</b> cd $INSTALL_DIR
</pre>
<pre> <b>NOTE:</b>
 # Prior to running the setup-yocto.sh script, make sure that GCC Linaro cross compiler installation path and the CCS binary is downloaded into a particular directory
 # Update the ./bin/setup-yocto.sh file to indicate this path, the default path is set to /sdk/tools and this may vary on every machine. 
 <b></b>
</pre>
<pre><b>host $</b> ./bin/setup-yocto.sh
</pre>
<p>For building core sdk , run the build-core-sdk.sh passing machine name as an argument.
</p>
<pre><b>host $</b> cd yocto-layers
</pre>
<p>Create a downloads directory (if building using Yocto for the first time), where the Yocto build will place the downloads. Note the path of the directory.
</p>
<pre><b>host $</b> mkdir downloads
</pre>
<p><b>NOTE: Please pass the same downloads directory path to the following build-script when prompted</b>
</p>
<pre><b>host $</b> ./build-core-sdk.sh dra7xx-evm
</pre>
<p>These scripts will build the tisdk-rootfs-image.
</p><p>After build is complete the generated images can be found in yocto-layers/build/arago-tmp-external-linaro-toolchain/deploy/images/
</p>
<table class="wikitable" style="text-align:center; width:700px; height:200px;">
<caption>Generated images
</caption>
<tbody><tr>
<th>Image name
</th>
<th>Description
</th></tr>
<tr>
<th>tisdk-rootfs-image-&lt;<i>MACHINE-NAME</i>&gt;-&lt;<i>DATE</i>&gt;.rootfs.tar.gz
</th>
<td>This is the filesystem tarball. Copy and extract it on the rootfs partition of the boot media.
</td></tr>
<tr>
<th>zImage-<i>&lt;MACHINE-NAME&gt;</i>.bin
</th>
<td>zImage for the machine. Copy as zImage in /boot folder of the rootfs partition.
</td></tr>
<tr>
<th>zImage-<i>&lt;MACHINE-NAME&gt;</i>.dtb
</th>
<td>Copy dra7-evm.dtb in boot partition. Or choose to copy the appropriate dtb based on the display and additional boards that are connected.
</td></tr>
<tr>
<th>u-boot-<i>&lt;MACHINE-NAME&gt;</i>.img
</th>
<td>Copy as u-boot.img in boot partition.
</td></tr></tbody></table>
<p>Note: The build does not generate a uenv.txt. You need to copy it from the prebuilt binaries in the release.
</p>
<h2><span class="mw-headline" id="Modifying_source_code_and_rebuilding_a_component">Modifying source code and rebuilding a component</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_building_yocto_fs&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Once the Yocto setup is complete developers would like to modify a certain component source code and rebuild it.
The source code for the generic components like omapdrmtest can be found in ${INSTALL_DIR}/yocto-layers/build/arago-tmp-external-linaro-toolchain/work/cortexa15hf-neon-linux-gnueabi/ <br /><br />
<b>Steps to rebuild:</b> <br /><br />
1. Modify the source of the component in its work area <br /><br />
2. cd to yocto-layers
</p>
<pre>  <b>host $</b> cd ${INSTALL_DIR}/yocto-layers
</pre>
<p>3. export PATH if not done previously:
</p>
<pre>  <b>host $</b> export PATH=&lt;<i>Path to Linaro cross-compile toolchain</i>&gt;/bin:$PATH
</pre>
<p>4. Run one/combination of the folowing tasks: <br /><br />
a. To configure and compile with the latest changes in the work area:
</p>
<pre>  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c configure &lt;<i>RECIPE-NAME</i>&gt;
  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c compile &lt;<i>RECIPE-NAME</i>&gt;
</pre>
<p>For example, if the omapdrmtest source is modified and you want to generate only the binaries for dra7xx-evm, the compile task should suffice:
</p>
<pre>  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c compile omapdrmtest
</pre>
<p>The binaries will be present in the same folder as the source files. <br /><br />
b. To generate .ipk package in addition to the binaries, following additional tasks need to be run after above steps:
</p>
<pre>  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c install &lt;<i>RECIPE-NAME</i>&gt;
  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c package &lt;<i>RECIPE-NAME</i>&gt;
  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c package_write_ipk &lt;<i>RECIPE-NAME</i>&gt;
</pre>
<p>This will generate .ipk packages for the recipe. They can be found in the deploy-ipks folder of the work area of the recipe.<br />
The .ipk packages can be copied and installed on the target by:
</p>
<pre>  <b>target $</b> opkg install &lt;<i>PACKAGE-NAME</i>&gt;
</pre>
<p>This approach is useful in the case of recipes that generate a large number of binaries, that are difficult to copy manually, like gst-plugins-bad.<br /><br />
c. During building and debugging the kernel or kernel modules, the compile_kmodules task needs to be executed that generates kernel modules.
</p>
<pre>  <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; -f -c compile_kmodules &lt;<i>RECIPE-NAME</i>&gt;
</pre>
<p>For a complete set of tasks that a specific recipe executes during its build, please refer to the log.task_order in the temp folder of the component. <br />
Pass the relevant tasks to build-specific-recipe.sh for required outcome.<br /><br />
</p><p>5. For a robust solution , once the change in source area is tested with the above steps, please update the recipe. <br /><br />
a. create a patch of the change<br />
b. copy it in the folder where the recipe is present <br />
c. add the patch name in the SRC_URI variable in the recipe <br /><br />
The build-specific-recipe.sh recognizes the change in the recipe and builds it if required. <br />
</p><p>To build a specific component after recipe is updated, use the build-specific-recipe.sh
</p>
<pre><b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; &lt;<i>RECIPE NAME</i>&gt;
</pre>
<p>For example to build omapdrmtest:
</p>
<pre> <b>host $</b> ./build-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; omapdrmtest
</pre>
<p>MACHINE-NAME can be either omap5-evm or dra7xx-evm
</p><p>To clean a specific component:
</p>
<pre><b>host $</b> ./clean-specific-recipe.sh &lt;<i>MACHINE-NAME</i>&gt; &lt;<i>RECIPE NAME</i>&gt;
</pre>
<h1><span class="mw-headline" id="Processor_SDK_Linux_Automotive_software_overview">Processor SDK Linux Automotive software overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_stackoverview&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div class="center"><div class="floatnone"><a href="File_Glsdk_omap5_software_overview.html" class="image"><img alt="Glsdk omap5 software overview.jpg" src="https://processors.wiki.ti.com/images/0/0d/Glsdk_omap5_software_overview.jpg" width="775" height="599" /></a></div></div> 
<center><b>Processor SDK Linux Automotive Software Stack</b></center>
<p>The Processor SDK Linux Automotive contains many software components. Several components are developed by the open source community (white). A few components that leverage HW acceleration in SoC are developed by Texas Instruments. TI contributes, and sometimes even maintains, some of these open source community projects, but the support model is different from a project developed solely by TI.
</p>
<h1><span class="mw-headline" id="Running_Examples">Running Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Running_OMAP_DRM_DSS_Examples">Running OMAP DRM DSS Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The drmclone, drmextended, and modetest examples demonstrates how to create a CRTC (i.e. FB) and display planes (overlays) on the CRTC.
Additionally, drmtest demonstrates similar functionality as the previously mentioned demos, along with dynamic plane updates for 2 CRTCs.
</p><p>Retrieve the omapdrm-tests source 
</p>
<pre> git clone <a rel="nofollow" class="external free" href="https://github.com/tomba/omapdrm-tests.git">https://github.com/tomba/omapdrm-tests.git</a>
 cd omapdrm-tests
</pre>
<p>Run (or example planescale)
</p>
<pre>./planescale
</pre>
<h2><span class="mw-headline" id="Graphics_Demos_from_Command_Line">Graphics Demos from Command Line</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The graphics driver and userspace libraries and binaries are distributed along with the SDK. 
</p><p><br />
Graphic demos can also run from command line. In order to do so, exit Weston by pressing Ctrl-Alt-Backspace from the keyboard which connects to the EVM. Then, if the LCD screen stays in "Please wait...", press Ctrl-Alt-F1 to go to the command line on LCD console. After that, the command line can be used from serial console, SSH console, or LCD console.
| 
Graphic demos can also run from command line. In order to do so, exit Weston by pressing Ctrl-Alt-Backspace from the keyboard which connects to the EVM. Then, if the LCD screen stays in "Please wait...", press Ctrl-Alt-F1 to go to the command line on LCD console. After that, the command line can be used from serial console, SSH console, or LCD console.
</p><p><br />
Please make sure the  board is connected to atleast one display before running these demos.
</p>
<h3><span class="mw-headline" id="Finding_Connector_ID">Finding Connector ID</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Modetest_find_connector_id&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span><b>Note:</b></span> Most of the applications used in the Demos would require the user to pass a connector id.
A connector id is a number that is assigned to each of the display devices connected to the system. 
To get the list of the display devices connected and the corresponding connector id one can use the <b>modetest</b> application (shipped with the file system) as mentioned below:
</p>
<pre>  <b>target #</b>  modetest
</pre>
<p>Look for the display device for which the connector ID is required - such as HDMI, LCD etc.
</p><p><br />
</p>
<pre>Connectors:
id      encoder status          type    size (mm)       modes   encoders
4       3       connected       HDMI-A  480x270         20      3
  modes:
        name refresh (Hz) hdisp hss hse htot vdisp vss vse vtot)
  1920x1080 60 1920 2008 2052 2200 1080 1084 1089 1125 flags: phsync, pvsync; type: preferred, driver
...
16      15      connected       unknown 0x0             1       15
  modes:
        name refresh (Hz) hdisp hss hse htot vdisp vss vse vtot)
  800x480 60 800 1010 1040 1056 480 502 515 525 flags: nhsync, nvsync; type: preferred, driver</pre>
<p>Usually, LCD is assigned 16 (800x480), and HDMI is assigned 4 (multiple resolutions).
| 
</p>
<pre>Connectors:
id  encoder status      type    size (mm)   modes   encoders
4   3   connected   unknown 0x0     1   3
  modes:
    name refresh (Hz) hdisp hss hse htot vdisp vss vse vtot)
  1280x800 60 1280 1328 1360 1404 800 804 811 823 flags: nhsync, nvsync; type: preferred, driver
...
16  11  connected   HDMI-A  700x390     31  11
  modes:
    name refresh (Hz) hdisp hss hse htot vdisp vss vse vtot)
  1280x720 60 1280 1390 1430 1650 720 725 730 750 flags: phsync, pvsync; type: preferred, driver</pre>
<p>Usually LCD is assigned 4 (800x480), HDMI is assigned 16 (multiple resolutions).
</p>
<h3><span class="mw-headline" id="Finding_Plane_ID">Finding Plane ID</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Modetest_find_connector_id&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To find the Plane ID, run the modetest command:
</p>
<pre>  <b>target #</b>  modetest
</pre>
<p>Look for the section called Planes. (Sample truncated output of the Planes section is given below)
</p>
<pre>Planes:
id      crtc    fb      CRTC x,y        x,y     gamma size
19      0       0       0,0             0,0     0
 formats: RG16 RX12 XR12 RA12 AR12 XR15 AR15 RG24 RX24 XR24 RA24 AR24 NV12 YUYV UYVY
 props:
 ...
20      0       0       0,0             0,0     0
 formats: RG16 RX12 XR12 RA12 AR12 XR15 AR15 RG24 RX24 XR24 RA24 AR24 NV12 YUYV UYVY
 props:
 ...
</pre>
<h3><span class="mw-headline" id="kmscube">kmscube</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Run kmscube on default display (HDMI):
</p>
<pre>  <b>target #</b> kmscube
</pre>
<p><br />
</p><p>Run kmscube on default display (LCD):
</p>
<pre>  <b>target #</b> kmscube
</pre>
<p>Run kmscube on secondary display (HDMI):
</p>
<pre>  <b>target #</b> kmscube -c &lt;connector-id&gt;
  <b>target #</b> kmscube -c 16 #Usually, the connector id for HDMI is 16.
</pre>
<p>Run kmscube on all connected displays (LCD &amp; HDMI &amp; FPDLink(optional)):
</p>
<pre>  <b>target #</b> kmscube -a
</pre>
<p><br />
</p><p>Run kmscube on default display (HDMI):
</p>
<pre>  <b>target #</b> kmscube
</pre>
<p>Run kmscube on secondary display (LCD):
</p>
<pre>  <b>target #</b> kmscube -c &lt;connector-id&gt;
  <b>target #</b> kmscube -c 16 #Usually, the connector id for LCD is 16.
</pre>
<p>Run kmscube on all connected displays (LCD &amp; HDMI):
</p>
<pre>  <b>target #</b> kmscube -a
</pre>
<h3><span class="mw-headline" id="kmscube_with_video">kmscube with video</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This demo allows a video frame to be applied as a texture onto the surface of the kmscube. The user can invoke the demo by following the syntax below:
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube --connector &lt;connector_number&gt;
</pre>
<p>This feature is not supported on OMAP5 based releases.
</p><p><br />
Run kmscube with video on default display (LCD):
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube
</pre>
<p>Run kmscube with video on secondary display (HDMI):
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube --connector 16 #Usually, the connector id for HDMI is 16.
</pre>
<p><br />
</p><p>Run kmscube with video on default display (HDMI):
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube
</pre>
<p>Run kmscube with video on secondary display (LCD):
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube --connector 16 #Usually, the connector id for HDMI is 16.
</pre>
<p><br />
Additionally, to change the field of view of the rotating cube, the user can specify the same on the command line like below:
</p>
<pre>  <b>target #</b> viddec3test &lt;path_to_the_file&gt; --kmscube --connector &lt;connector_number&gt; --fov &lt;number&gt;
</pre>
<h3><span id="Wayland/Weston"></span><span class="mw-headline" id="Wayland.2FWeston">Wayland/Weston</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>Wayland/Weston version brings in the multiple display support in extended desktop mode and the ability to drag-and-drop windows from one display to the other.
</pre>
<p><br />
To execute the demos, the graphics driver must be initialized by running start weston, if this has not been done earlier.
</p>
<pre>  <b>target #</b> /etc/init.d/weston start
</pre>
<p><br />
To launch weston without using systemd init scripts, do the following:
</p><p><br />
On all connected displays (LCD, HDMI and FPDLink):
</p>
<pre>  <b>target #</b> weston --tty=1 --backend=drm-backend.so
</pre>
<p><br />
</p><p><br />
On default display (HDMI):
</p>
<pre>  <b>target #</b> weston --tty=1 --connector=4
</pre>
<p>On secondary display (LCD):
</p>
<pre>  <b>target #</b> weston --tty=1 --connector=16
</pre>
<p>On all connected displays (LCD and HDMI):
</p>
<pre>  <b>target #</b> weston --tty=1
</pre>
<p><br />
</p><p>By default, the screensaver timeout is configured to 300 seconds. <br />
</p><p>The user can change the screensaver timeout using a command line option
</p>
<pre> --idle-time=&lt;number of seconds&gt;
</pre>
<p>To disable the screen timeout and to configure weston configured to display on all connectors, use the option with "0" as the input:
</p>
<pre> --idle-time=0
</pre>
<p><br />
The filesystem comes with a preconfigured <b>weston.ini</b> file which will be located in
</p><p><b>/etc/weston.ini</b>
|
<b>/etc/weston.ini</b><br />
</p><p><br />
</p>
<h4><span class="mw-headline" id="Running_weston_clients">Running weston clients</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Weston client examples can run from the command line on serial port console or SSH console.
After launching weston, the user should be able to use the keyboard and the mouse for various controls.<br />
</p>
<pre>       <b>#</b> /usr/bin/weston-flower
       <b>#</b> /usr/bin/weston-clickdot
       <b>#</b> /usr/bin/weston-cliptest
       <b>#</b> /usr/bin/weston-dnd
       <b>#</b> /usr/bin/weston-editor
       <b>#</b> /usr/bin/weston-eventdemo
       <b>#</b> /usr/bin/weston-image /usr/share/weston/terminal.png
       <b>#</b> /usr/bin/weston-resizor
       <b>#</b> /usr/bin/weston-simple-egl
       <b>#</b> /usr/bin/weston-simple-shm
       <b>#</b> /usr/bin/weston-simple-touch
       <b>#</b> /usr/bin/weston-smoke
       <b>#</b> /usr/bin/weston-info
       <b>#</b> /usr/bin/weston-terminal
</pre>
<p>|
There is one icon on the top right hand corner of the weston desktop window which has been configured for
</p>
<ul><li>weston-terminal</li></ul>
<p>Clicking this icon should launch the applications on the Weston Desktop.
</p><p>It is possible to add other icons by editing the weston.ini file.
</p><p>There are several other applications that are included in the default filesystem. To invoke these applications, the user should launch the weston-terminal (top right hand corner of the desktop) and then invoke the client apps as described below from within the terminal window:
</p>
<pre>       <b>wayland sh #</b> /usr/bin/weston-flower
       <b>wayland sh #</b> /usr/bin/weston-clickdot
       <b>wayland sh #</b> /usr/bin/weston-cliptest
       <b>wayland sh #</b> /usr/bin/weston-dnd
       <b>wayland sh #</b> /usr/bin/weston-editor
       <b>wayland sh #</b> /usr/bin/weston-eventdemo
       <b>wayland sh #</b> /usr/bin/weston-image /usr/share/weston/terminal.png
       <b>wayland sh #</b> /usr/bin/weston-resizor
       <b>wayland sh #</b> /usr/bin/weston-simple-egl
       <b>wayland sh #</b> /usr/bin/weston-simple-shm
       <b>wayland sh #</b> /usr/bin/weston-simple-touch
       <b>wayland sh #</b> /usr/bin/weston-smoke
       <b>wayland sh #</b> /usr/bin/weston-info
       <b>wayland sh #</b> /usr/bin/weston-terminal
</pre>
<p><br />
</p>
<h4><span class="mw-headline" id="Running_multimedia_with_Wayland_sink">Running multimedia with Wayland sink</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The GStreamer video sink for Wayland is the waylandsink. To use this video-sink for video playback:
</p>
<pre>  <b>target #</b> gst-launch-1.0 playbin uri=file://&lt;<i>path-to-file-name</i>&gt; video-sink=waylandsink
</pre>
<p><br />
</p>
<h4><span class="mw-headline" id="Exiting_weston">Exiting weston</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-8" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Terminate all Weston clients before exiting Weston. If you have invoked Weston from the serial console, exit Weston by pressing Ctrl-C. 
</p><p>It is also possible to invoke Weston from the native console, exit Weston by using pressing Ctrl-Alt-Backspace.
</p>
<h3><span class="mw-headline" id="Using_IVI_shell_feature">Using IVI shell feature</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-9" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The SDK also has support for configuring weston ivi-shell. The default shell that is configured in the SDK is the desktop-shell. <br />
</p><p>To change the shell to ivi-shell, the user will have to add the following lines into the /etc/weston.ini. 
</p><p><i>To switch back to the desktop-shell can be done by commenting these lines in the /etc/weston.ini (comments begin with a '#' at the start of line).</i>
</p>
<pre>[core]
shell=ivi-shell.so

[ivi-shell]
ivi-module=ivi-controller.so
ivi-input-module=ivi-input-controller.so
</pre>
<p>After the above configuration is completed, we can restart weston by running the following commands
</p>
<pre>target# /etc/init.d/weston stop
target# /etc/init.d/weston start
</pre>
<p><b>NOTE:</b> When weston starts with ivi-shell, the default background is black, this is different from the desktop-shell that brings up a window with background.
</p><p>With ivi-shell configured for weston, wayland client applications use ivi-application protocol to be managed by a central HMI window management. The wayland-ivi-extension provides ivi-controller.so to manage properties of surfaces/layers/screens and it also provides the ivi-input-controller.so to manage the input focus on a surface.  <br />
</p><p>Applications must support the ivi-application protocol to be managed by the HMI central controller with an unique numeric ID. <br />
</p><p>Some important references to wayland-ivi-extension can be found at the following links: 
<a rel="nofollow" class="external free" href="https://at.projects.genivi.org/wiki/display/WIE/01.+Quick+start">https://at.projects.genivi.org/wiki/display/WIE/01.+Quick+start</a>
<a rel="nofollow" class="external free" href="https://at.projects.genivi.org/wiki/display/PROJ/Wayland+IVI+Extension+Design">https://at.projects.genivi.org/wiki/display/PROJ/Wayland+IVI+Extension+Design</a>
</p><p><br />
</p>
<h4><span id="Running_weston’s_sample_client_applications_with_ivi-shell"></span><span class="mw-headline" id="Running_weston.E2.80.99s_sample_client_applications_with_ivi-shell">Running weston’s sample client applications with ivi-shell</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-10" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>All the sample client applications in the weston package like weston-simple-egl, weston-simple-shm, weston-flower etc also have support for ivi-shell. The SDK includes the application called layer-add-surfaces which is part of the wayland-ivi-extension. This application allows the user to invoke the various functionalities of the ivi-shell and control the applications.
</p><p>The following is an example sequence of commands and the corresponding effect on the target. 
</p><p>After launching the weston with the ivi-shell, please run the below sequence of commands:
</p>
<pre>target# weston-simple-shm &amp;

</pre>
<p>At this point nothing is displayed on the screen, some additional commands are required.
</p>
<pre>target# layer_add_surfaces 0 1000 2 &amp;
</pre>
<p>This command creates a layer with ID 1000 and to add maximum 2 surfaces to this layer on the screen 0 (which is usually the LCD). <br />
At this point, the user can see weston-simple-shm running on LCD. This also prints the numericID (surfaceID) to which client’s surface is mapped as shown below:
</p>
<pre> CreateWithDimension: layer ID (1000), Width (1280), Height (800)
 SetVisibility     &#160;: layer ID (1000), ILM_TRUE
 layer: 1000 created
 surface               &#160;: 10369 created
 SetDestinationRectangle: surface ID (10369), Width (250), Height (250)
 SetSourceRectangle    &#160;: surface ID (10369), Width (250), Height (250)
 SetVisibility         &#160;: surface ID (10369), ILM_TRUE
 layerAddSurface       &#160;: surface ID (10369) is added to layer ID (1000)
</pre>
<p>Here 10369 is the number to which weston-simple-shm application’s surface is mapped. <br />
</p><p>User can launch one more client application which allows layer_add_surfaces to add second surface to the layer 1000 as shown below.
</p>
<pre>target# weston-flower &amp;
</pre>
<p>User can control the properties of the above surfaces using LayerManagerControl as shown below to set the position, resize, opacity and visibility respectively.
</p>
<pre>target# LayerManagerControl set surface 10369 position 100 100
target# LayerManagerControl set surface 10369 destination region 150 150 300 300
target# LayerManagerControl set surface 10369 opacity 0.5
target# LayerManagerControl set surface 10369 visibility 1
</pre>
<pre>target# LayerManagerControl  help  
</pre>
<p>The help option prints all possible control operations with the LayerManagerControl binary, please refer to the available options.
</p>
<h3><span class="mw-headline" id="IMG_PowerVR_Demos">IMG PowerVR Demos</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-11" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The Processor SDK Linux Automotive filesystem comes packaged with example OpenGLES applications. Both DRM and Wayland based applications are packaged as part of the filesystem. 
</p><p>The examples running on <b>Wayland</b> can be invoked using the below commands.
</p>
<pre> target # /usr/bin/SGX/demos/Wayland/OGLES2ChameleonMan
 target # /usr/bin/SGX/demos/Wayland/OGLES2Navigation
</pre>
<p>The examples running on <b>DRM/KMS</b> can be invoked using the below commands.
</p>
<pre> target # /usr/bin/SGX/demos/Raw/OGLES2ChameleonMan
 target # /usr/bin/SGX/demos/Raw/OGLES2Navigation
</pre>
<p>After you see the output on the display interface, hit <i>q</i> to terminate the application.
</p>
<h2><span class="mw-headline" id="Using_the_PowerVR_Tools">Using the PowerVR Tools</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-12" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Please refer to <a rel="nofollow" class="external free" href="http://community.imgtec.com/developers/powervr/graphics-sdk/">http://community.imgtec.com/developers/powervr/graphics-sdk/</a> for additional details on the tools and detailed documentation.</b>
</p><p>The target file system includes tools such as PVRScope and PVRTrace recorder libraries from Imagination PowerVR SDK to profile and trace SGX activities. In addition, it also includes PVRPerfServerDeveloper toolfor Jacinto6 platform. <br />
</p>
<h3><span class="mw-headline" id="PVRTune">PVRTune</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-13" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>PVRPerfServerDeveloper tool can be used along with the PVRTune running on the PC to gather data on the SGX loading and activity threads.
You can invoke the tool with the below command:
</p>
<pre>target # /opt/img-powervr-sdk/PVRHub/PVRPerfServer/PVRPerfServerDeveloper
</pre>
<h3><span class="mw-headline" id="PVRTrace">PVRTrace</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_graphics_demos&amp;action=edit&amp;section=T-14" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The default filesystem contains helper scripts to obtain the PVRTrace of the graphics application. This trace can then be played back on the PC using the PVRTrace Utility.
</p><p>To start tracing, use the below commands as reference:
</p>
<pre>target # cp /opt/img-powervr-sdk/PVRHub/Scripts/start_tracing.sh ~/.
target # ./start_tracing.sh &lt;log-filename&gt; &lt;application-to-be-traced&gt;
</pre>
<p>Example:
</p>
<pre>target # ./start_tracing.sh westonapp weston-simple-egl
</pre>
<p>The above command will do the following:
</p>
<ol><li>Setup the required environment for the tracing</li>
<li>Create a directory under the current working directory called pvrtrace</li>
<li>Launch the application specified by the user</li>
<li>Start tracing the PVR Interactions and record the same to the log-filename</li></ol>
<p>To end the tracing, user can invoke the Ctrl-C and the trace file path will be displayed.
</p><p>The trace file can then be transferred to a PC and we can visualize the application using the host side PVRTrace utility.
Please refer to the link at the beginning of this section for more details.
</p>
<h2><span class="mw-headline" id="Testing_DSS_WB_pipeline">Testing DSS WB pipeline</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_dss_wb&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="Memory_to_Memory_(M2M)"></span><span class="mw-headline" id="Memory_to_Memory_.28M2M.29">Memory to Memory (M2M)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_dss_wb&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol style="list-style-type: decimal;">
<li><p>Identify the WB pipeline M2M device.</p>
<pre># ls /sys/class/video4linux/
Video0 video10 video11
# cat  /sys/class/video4linux/video10/name
omapwb-m2m</pre></li>
<li><p>Look at list of formats supported.</p>
<pre># v4l2-ctl -d /dev/video10 --list-formats
ioctl: VIDIOC_ENUM_FMT
        Index      &#160;: 0
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'NV12'
        Name       &#160;: Y/CbCr 4:2:0

        Index      &#160;: 1
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'YUYV'
        Name       &#160;: YUYV 4:2:2

        Index      &#160;: 2
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'UYVY'
        Name       &#160;: UYVY 4:2:2

        Index      &#160;: 3
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'XR24'
        Name       &#160;: 32-bit BGRX 8-8-8-8</pre></li>
<li><p>Use <code>v4l2-ctl</code> command to test the input output. Below command converts from NV12 to YUYV using WB pipeline in M2M mode.</p>
<pre># v4l2-ctl -d /dev/video10 --set-fmt-video-out=width=1920,height=1080,pixelformat=NV12  \
--stream-from=test/BigBuckBunny_1920_1080_24fps_100frames.nv12 \
--set-fmt-video=width=1920,height=1080,pixelformat=YUYV \
--stream-to=out/video_test_file.yuyv --stream-mmap=3 --stream-out-mmap=3 --stream-count=70 --stream-poll</pre></li></ol>
<h3><span class="mw-headline" id="Capture">Capture</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_dss_wb&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol style="list-style-type: decimal;">
<li><p>Identify the WB pipeline capture device.</p>
<pre># ls /sys/class/video4linux/
Video0 video10 video11
# cat  /sys/class/video4linux/video11/name
omapwb-cap</pre></li>
<li><p>Look at list of formats supported.</p>
<pre># v4l2-ctl -d /dev/video11 --list-formats
ioctl: VIDIOC_ENUM_FMT
        Index      &#160;: 0
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'NV12'
        Name       &#160;: Y/CbCr 4:2:0

        Index      &#160;: 1
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'YUYV'
        Name       &#160;: YUYV 4:2:2

        Index      &#160;: 2
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'UYVY'
        Name       &#160;: UYVY 4:2:2

        Index      &#160;: 3
        Type       &#160;: Video Capture Multiplanar
        Pixel Format: 'XR24'
        Name       &#160;: 32-bit BGRX 8-8-8-8
</pre></li>
<li><p>Use <code>v4l2-ctl</code> command to test the input output. Below command converts from NV12 to YUYV using WB pipeline in M2M mode.</p>
<pre># v4l2-ctl -d /dev/video11 -i 0 --set-fmt-video=pixelformat=NV12 \
--stream-to=/test/video_test_file.yuv --stream-mmap=6 --stream-count=10 --stream-poll
Video input set to 0 (CRTC#0 - LCD1: ok)
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 7.84 fps
&lt;
# v4l2-ctl -d /dev/video11 -i 1 --set-fmt-video=pixelformat=NV12 --stream-to=/test/video
_test_file.yuv --stream-mmap=6 --stream-count=10 --stream-poll
Video input set to 1 (CRTC#1 - DIGIT/TV: ok)
&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt; 8.65 fps</pre></li></ol>
<h2><span class="mw-headline" id="Running_aplay_and_arecord_application">Running aplay and arecord application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_aplay_arecord&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Audio playback is supported on HDMI and via headset. By default, the audio playback takes place on the HDMI. To listen to audio via the HDMI, run the aplay application
</p>
<pre>  <b>target #</b>  aplay &lt;path_to_example_audio&gt;.wav
</pre>
<p>If playback is required via headset, please make sure that the following amixer settings are done for the corresponding card (check the card no. by running the command cat /proc/asound/cards, assuming the card 1 is for headset here):
</p>
<pre>  <b>target #</b>  amixer cset -c 1 name='Headset Left Playback' 1
  <b>target #</b>  amixer cset -c 1 name='Headset Right Playback' 1
  <b>target #</b>  amixer cset -c 1 name='Headset Playback Volume' 12
  <b>target #</b>  amixer cset -c 1 name='DL1 PDM Switch' 1
  <b>target #</b>  amixer cset -c 1 name='Sidetone Mixer Playback' 1
  <b>target #</b>  amixer cset -c 1 name='SDT DL Volume' 120
  <b>target #</b>  amixer cset -c 1 name='DL1 Mixer Multimedia' 1
  <b>target #</b>  amixer cset -c 1 name='DL1 Media Playback Volume' 110
  <b>target #</b>  amixer sset -c 1 'Analog Left',0 'Aux/FM Left'
  <b>target #</b>  amixer sset -c 1 'Analog Right',0 'Aux/FM Right'
  <b>target #</b>  amixer sset -c 1 'Aux FM',0 7
  <b>target #</b>  amixer sset -c 1 'AUDUL Media',0 149
  <b>target #</b>  amixer sset -c 1 'Capture',0 4
  <b>target #</b>  amixer sset -c 1 MUX_UL00,0 AMic0
  <b>target #</b>  amixer sset -c 1 MUX_UL01,0 AMic1
  <b>target #</b>  amixer sset -c 1 'AMIC UL',0 120
</pre>
<p>Once these settings are done, one could do playback via headset using aplay by the following command:
</p>
<pre>  <b>target #</b>  aplay -Dplughw:1,0 &lt;path_to_example_audio&gt;.wav
</pre>
<p><br />
To playback/record on the evm via headset/mic, please make sure the following amixer settings are done:
</p>
<ul><li>For playback via headset, enter the following at prompt <b>target#</b></li></ul>
<pre>  amixer sset 'Left DAC Mux',0 'DAC_L2'
  amixer sset 'Right DAC Mux',0 'DAC_R2'
  amixer cset name='HP Playback Switch' On
  amixer cset name='Line Playback Switch' Off
  amixer cset name='PCM Playback Volume' 127
</pre>
<p>Once these settings are successful, use aplay application for playback:
</p>
<pre>  <b>target #</b>  aplay &lt;path_to_example_audio&gt;.wav
</pre>
<p><br />
</p>
<ul><li>For recording via Mic In</li></ul>
<pre>  amixer cset name='Left PGA Mixer Mic3L Switch' On
  amixer cset name='Right PGA Mixer Mic3L Switch' On
  amixer cset name='Left PGA Mixer Line1L Switch' off
  amixer cset name='Right PGA Mixer Line1R Switch' off
  amixer cset name='PGA Capture Switch' on
  amixer cset name='PGA Capture Volume' 6
</pre>
<p>Once these settings are successful, use arecord to record
</p>
<pre>  <b>target #</b>  arecord -r 44.1 &gt; &lt;path_to_example_audio&gt;.wav
</pre>
<p><br />
</p><p>To playback/record on the evm via Line Out/ Line In, please make sure the following amixer settings are done:
</p>
<ul><li>For playback via Line Out, enter the following at prompt <b>target#</b></li></ul>
<pre>  amixer cset name='Line Playback Switch' On
  amixer cset name='PCM Playback Volume' 127
</pre>
<p>Once these settings are successful, use aplay application for playback, e.g.,
</p>
<pre>  <b>target #</b>  aplay &lt;path_to_example_audio&gt;.wav
</pre>
<p><br />
</p>
<ul><li>For recording via Line In</li></ul>
<pre>  amixer cset name='Left PGA Mixer Mic2L Switch' On
  amixer cset name='Right PGA Mixer Mic2L Switch' On
  amixer cset name='Left PGA Mixer Line1L Switch' On
  amixer cset name='Right PGA Mixer Line1R Switch' On
  amixer cset name='PGA Capture Switch' On
  amixer cset name='PGA Capture Volume' 50
</pre>
<p>Once these settings are successful, use arecord to record, e.g.,
</p>
<pre>  <b>target #</b>  arecord -r 44100 -c 2 -f S16_LE &lt;path_to_example_audio&gt;.wav
</pre>
<h2><span class="mw-headline" id="Running_GC320_application">Running GC320 application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_viddec3test&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>GC320 is a 2D Graphic accelerator in DRA7xx. This IP can be utilized for the usecases like alpha blending, overlaying, bitBlit, color conversion, scaling, rotation etc.
</p><p>SDK provides two sample GC320 testcases in the root filesystem.  Before running the test, the gc320 kernel module needs to be inserted into system.
</p><p>On 1.5GB RAM configuration
</p>
<pre>  <b>target#</b> insmod /lib/modules/4.4.xx-gyyyyyyyy/extra/galcore.ko baseAddress=0x80000000 physSize=0x60000000
</pre>
<p>On 2GB RAM configuration
</p>
<pre>   <b>target#</b> insmod /lib/modules/4.4.xx-gyyyyyyyy/extra/galcore.ko baseAddress=0x80000000 physSize=0x80000000
</pre>
<p>Now follow these instrctions to execute the applications
</p>
<pre>  <b>target#</b> cd /usr/bin/GC320/tests/unit_test
  <b>target#</b> export LD_LIBRARY_PATH=$PWD
  <b>target#</b> ./runtest.sh
</pre>
<p>This script executes two sample unit test cases of filling rectangles and GC320 rendered results will be stored in .bmp file in a directory "result" under /usr/bin/GC320/tests/unit_test.
</p><p>Note: To run all GC320 unit testcases, clone ti-gc320-test package from <a rel="nofollow" class="external free" href="git://git.ti.com/graphics/ti-gc320-test.git">git://git.ti.com/graphics/ti-gc320-test.git</a>&#160;: branch:ti-5.0.11.p7, rebuild test application, libraries etc and install the package on target.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Running_viddec3test_application">Running viddec3test application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_viddec3test&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>viddec3test is a demo application for decoder/video playback using hardware accelerators. 
The application currently runs on the kms display. The application requires the connector information for display. One can get the information of the display connected to the board by running the <i>modetest</i> application in the filesystem, as described above. To execute the application "modetest" make sure the display is connected to the board.
</p><p><b>Running a decode on a display</b>
</p><p>To run a hardware decode on a display connected to the board, execute the following command:
</p>
<pre>  <b>target #</b>  viddec3test -s &lt;connector_id&gt;:&lt;display resolution&gt; filename --fps 30

e.g.: target # viddec3test -s 4:1920x1080 file.h264 --fps 30
</pre>
<p><br />
<b>Running single decode on dual displays</b>
</p><p>To run the output of a single decode on the dual displays. Please make sure both the displays are connected and get the information about the connectors and the resolution associated with it for both the displays from the <i>modetest</i> application.
</p>
<pre>  <b>target #</b>  viddec3test -s &lt;connector_id_1&gt;:&lt;display resolution&gt; -s &lt;connector_id_2&gt;:&lt;display resolution&gt; filename --fps 30
     e.g.: target # viddec3test -s 4:1920x1080 -s 12:1024x768 file.h264 --fps 30
</pre>
<p><br />
<b>Running dual decode on dual displays</b>
</p><p>One can also run  a dual decode and display their output on two different displays. Please make sure both the displays are connected and get the information about the connectors and the resolution associated with it for both the displays from the <i>modetest</i> application.
</p>
<pre>  <b>target #</b> viddec3test -s &lt;connector_id_1&gt;:&lt;display resolution&gt; filename1 -s &lt;connector_id_2&gt;:&lt;display resolution&gt; filename2
    e.g.: target # viddec3test -s 4:1920x1080 file1.h264 -- -s 12:1024x768 file2.h264
</pre>
<h2><span class="mw-headline" id="Running_a_gstreamer_pipeline">Running a gstreamer pipeline</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_gstreamer&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>GStreamer v1.14.4 is supported  in Processor SDK 
|
in Processor SDK Linux Automotive 6.00
</p><p><br />
Gstreamer pipelines can also run from command line. In order to do so, exit Weston by pressing Ctrl-Alt-Backspace from the keyboard which connects to the EVM. Then, if the LCD screen stays in "Please wait...", press Ctrl-Alt-F1 to go to the command line on LCD console. After that, the command line can be used from serial console, SSH console, or LCD console.
</p><p><br />
One can run an audio video file using the gstreamer playbin from the console. Currently, the supported Audio/video sink is kmssink, waylandsink and alsassink. 
</p><p><br />
</p>
<pre>kmssink:
  <b>target #</b>  gst-launch playbin2 uri=file:///&lt;path_to_file&gt; video-sink=kmssink audio-sink="alsasink device=hw:1,0"
</pre>
<pre>waylandsink:  
  1. refer <a href="#Wayland.2FWeston">#Wayland/Weston</a> to start the weston
  2. <b>target #</b> gst-launch playbin2 uri=file:///&lt;path_to_file&gt; video-sink=waylandsink audio-sink="alsasink device=hw:1,0"
</pre>
<pre>dri2videosink:
  1. refer <a href="#X_Server">#X_Server</a> to start the X11
  2. <b>target #</b> gst-launch playbin2 uri=file:///&lt;path_to_file&gt; video-sink=dri2videosink audio-sink="alsasink device=hw:1,0"  
</pre>
<p>| 
<br />
</p>
<pre>kmssink:
  <b>target #</b>  gst-launch-1.0 playbin uri=file:///&lt;path_to_file&gt; video-sink=kmssink audio-sink=alsasink
</pre>
<pre>waylandsink:
  1. refer <a href="#Wayland.2FWeston">#Wayland/Weston</a> to start the weston
  2. <b>target #</b>  gst-launch-1.0 playbin uri=file:///&lt;path_to_file&gt; video-sink=waylandsink audio-sink=alsasink
</pre>
<p><br />
The following pipelines show how to use vpe for scaling and color space conversion.
<br />
</p>
<pre>  1. Decode-&gt; Scale-&gt;Display
     <b>target #</b> gst-launch-1.0 -v filesrc location=example_h264.mp4&#160;! qtdemux&#160;! h264parse&#160;! \
 ducatih264dec&#160;! vpe&#160;! 'video/x-raw, format=(string)NV12, width=(int)720, height=(int)480'&#160;! kmssink
</pre>
<pre>  2. Color space conversion:
     <b>target #</b> gst-launch-1.0 -v videotestsrc&#160;! 'video/x-raw, format=(string)YUY2, width= \
 (int)1280, height=(int)720'&#160;! vpe&#160;! 'video/x-raw, format=(string)NV12, width=(int)720, height=(int)480' \
&#160;! kmssink
</pre>
<pre>Note: 
  1. While using playbin for playing the stream, vpe plugin is automatically picked up. However vpe cannot be used with playbin for scaling.
For utilizing scaling capabilities of vpe, using manual pipeline given above is recommended.
  2. Waylandsink and Kmssink uses the cropping metadata set on buffers and does not require vpe plugin for cropping
</pre>
<p><br />
The following pipelines show how to use v4l2src and ducatimpeg4enc elements to capture video from VIP and encode captured video respectively.
<br />
</p>
<pre>Capture and Display Fullscreen
  <b>target #</b>  gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)YUY2, width=(int)1280, height=(int)720'&#160;! vpe num-input-buffers=8&#160;! queue&#160;! kmssink
</pre>
<pre>Note:
 The following pipelines can also be used for NV12 capture-display usecase. 
 Dmabuf is allocated by v4l2src if io-mode=4 and by kmssink and imported by v4l2src if io-mode=5
 <b>target #</b> gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)NV12, width=(int)1280, height=(int)720'&#160;! kmssink
 <b>target #</b> gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=5&#160;! 'video/x-raw, \
format=(string)NV12, width=(int)1280, height=(int)720'&#160;! kmssink
</pre>
<p><br />
</p>
<pre>Capture and Display to a window in wayland
  1. refer <a href="#Wayland.2FWeston">#Wayland/Weston</a> to start the weston
  2. <b>target #</b>  gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)YUY2, width=(int)1280, height=(int)720'&#160;! vpe num-input-buffers=8&#160;! queue&#160;! waylandsink
</pre>
<pre>Note:
 The following pipelines can also be used for NV12 capture-display usecase. Dmabuf is allocated by v4l2src 
 if io-mode=4 and by waylandsink and imported by v4l2src if io-mode=5.
 Waylandsink supports both shm and drm. A new property use-drm is added to specify drm allocator based bufferpool to be used.
 When using ducati or vpe plugins, use-drm is set in caps as true.
 <b>target #</b> gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)NV12, width=(int)1280, height=(int)720'&#160;! waylandsink use-drm=true
 <b>target #</b> gst-launch-1.0 v4l2src device=/dev/video1 num-buffers=1000 io-mode=5&#160;! 'video/x-raw, \
format=(string)NV12, width=(int)1280, height=(int)720'&#160;! waylandsink use-drm=true
</pre>
<p><br />
</p>
<pre>Capture and Encode into a MP4 file.
  <b>target #</b>  gst-launch-1.0 -e v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)YUY2, width=(int)1280, height=(int)720, framerate=(fraction)30/1'&#160;! vpe num-input-buffers=8&#160;! \
queue&#160;! ducatimpeg4enc bitrate=4000&#160;! queue&#160;! mpeg4videoparse&#160;! qtmux&#160;! filesink location=x.mp4
</pre>
<pre>Note:
  The following pipeline can be used in usecases where vpe processing is not required.
  <b>target #</b> gst-launch-1.0 -e v4l2src device=/dev/video1 num-buffers=1000 io-mode=5&#160;! 'video/x-raw, \
format=(string)NV12, width=(int)1280, height=(int)720, framerate=(fraction)30/1'&#160;! ducatimpeg4enc bitrate=4000&#160;! \
queue&#160;! mpeg4videoparse&#160;! qtmux&#160;! filesink location=x.mp4
</pre>
<pre>Capture and Encode and Display in parallel.
  <b>target #</b>  gst-launch-1.0 -e v4l2src device=/dev/video1 num-buffers=1000 io-mode=4&#160;! 'video/x-raw, \
format=(string)YUY2, width=(int)1280, height=(int)720, framerate=(fraction)30/1'&#160;! vpe num-input-buffers=8&#160;! tee name=t &#160;! \
 queue&#160;! ducatimpeg4enc bitrate=4000&#160;! queue&#160;! mpeg4videoparse&#160;! qtmux&#160;! filesink location=x.mp4 t.&#160;! queue&#160;! kmssink
</pre>
<p><br />
|
</p>
<h2><span id="Running_VIP/VPE/CAL_application"></span><span class="mw-headline" id="Running_VIP.2FVPE.2FCAL_application">Running VIP/VPE/CAL application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h4><span class="mw-headline" id="Video_Input_Port">Video Input Port</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Video Input Port is used to capture video frames from BT56/ BT601 Camera. Currently the VIP driver supports following features.
</p><p><br />
For more information on VIP driver and other features, please refer to <b><a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Foundational_Components_Kernel_Drivers.html#vip">http://processors.wiki.ti.com/index.php/Processor_SDK_VIP_Driver</a></b>
</p>
<ul><li>Standard V4L2 capture driver</li>
<li>Supports single planar buffers</li>
<li>Supports MMAP buffering method</li>
<li>Supports DMABUF based buffering method</li>
<li>Supports V4L2 endpoint standard way of specifying camera nodes</li>
<li>Supports captures upto 60FPS</li>
<li>Multi instance capture - All slices, ports supported</li>
<li>Capture from a YUYV camera(8bit)</li>
<li>NV12 capture format</li></ul>
<h4><span class="mw-headline" id="Camera_Adapter_Layer">Camera Adapter Layer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Camera Adapter Layer is used to capture video from CSI Camera. Currently the CAL driver supports following features.
</p>
<ul><li>Standard V4L2 capture driver</li>
<li>Supports single planar buffers</li>
<li>Supports MMAP buffering method</li>
<li>Supports DMABUF based buffering method</li>
<li>Supports V4L2 endpoint standard way of specifying camera nodes (CSI bindings)</li>
<li>Multi instance capture - 4data lane phy0 + 2data lane phy1</li></ul>
<h4><span class="mw-headline" id="Supported_cameras">Supported cameras</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Camera Adapter Layer is used to capture video from CSI Camera. Currently the CAL driver supports following features.
Processor SDK Linux Automotive release supports following sensors/cameras/video inputs:-
</p>
<ul><li>OV10633 sensor - YUYV sensor connected on J6 EVM</li>
<li>OV10635 sensor - YUYV sensor on Vision board</li>
<li>OV10635 sensor - YUYV sensor connected through LVDS</li>
<li>TVP5158 decoder - Support for decoding single channel analog video</li>
<li>OV10640/OV490 - 720p CSI2 raw camera connected to OV490 ISP in YUYV format</li></ul>
<p>Processor SDK supports following sensors/cameras
</p>
<ul><li>mt9t111 camera sensor</li></ul>
<p><br />
</p>
<pre> <span style="color:blue"> <b>Note: This release of PSDKLA with kernel 4.19, supports only OV10633 sensor.</b>
        <b>OV10635 sensor capture on Vision Board and LVDS Capture are supported with VisionSDK v3.8.</b> 
        <b>FPDLink serializer and deserializer support is also not available with this release.</b>
        <b>JAMR board support is not validated with this release</b>
        <b>CSI2 capture not validated with this release</b>
</span></pre>
<p><br />
</p>
<h6><span class="mw-headline" id="Running_dmabuftest">Running dmabuftest</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>dmabuftest is a user space application which demonstrates capture  display loopback.
It can support multiple captures at the same time
</p><p>Video buffers are allocated by libdrm and they are shared to VIP through dmabuf.
</p><p>It interfaces with the VIP through standard v4l2 ioctls.
</p><p>Filesystem from release has dmabuftest app preinstalled.
</p><p>To capture and display on the LCD screen, run following command
</p>
<pre><b>target#</b> dmabuftest -s 4:800x480 -d /dev/video1 -c 1280x720@YUYV
</pre>
<pre><b>target#</b> dmabuftest -s 16:800x480 -d /dev/video1 -c 1280x720@YUYV
</pre>
<p><br />
To capture and display on the HDMI display, run following command
</p>
<pre><b>target#</b> dmabuftest -s 32:1920x1200 -d /dev/video1 -c 1280x720@YUYV
</pre>
<pre><b>target#</b> dmabuftest -s 4:1920x1080 -d /dev/video1 -c 1280x720@YUYV
</pre>
<p><br />
To capture video in NV12 format, run following command 
</p>
<pre><b>target#</b> dmabuftest -s 32:1920x1200 -d /dev/video1 -c 1280x720@<b>NV12</b>
</pre>
<pre><b>target#</b> dmabuftest -s 16:800x480 -d /dev/video1 -c 1280x720@<b>NV12</b>
</pre>
<p><br />
To capture and display on KMScube backend (Video on a rotating cube), run following command
</p>
<pre><b>target#</b> dmabuftest --kmscube --fov 20 -d /dev/video1 -c 1280x720@YUYV
<b>This feature is currently not supported</b>
</pre>
<p>To capture and display on wayland backend (Video in a wayland client window), run following command
</p>
<pre><b>target#</b> dmabuftest -w 640x480 --pos 100x400 /dev/video1 -c 1280x720@YUYV
</pre>
<p><br />
</p>
<h6><span class="mw-headline" id="Capturing_from_OV10633_onboard_camera">Capturing from OV10633 onboard camera</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Linux kernel driver for OV1063x cameras support OV10633 sensor.
</p><p>Video capture can be verified from the OV10633 sensor as follows
</p>
<ul><li>Connect OV10633 sensor to the Leopard Imaging port on the J6 EVM</li>
<li>Reboot the board and enable i2c2 as given above</li>
<li>I2C device on Bus 2 slave address 0x37 should be probed successfully</li>
<li>VIP should register a V4L2 video device (e.g. /dev/video1) using this i2c device</li>
<li>Run dmabuftest with '1280x720@YUYV' as capture format</li></ul>
<h6><span class="mw-headline" id="Capturing_from_OV10635_Vision_board_camera">Capturing from OV10635 Vision board camera</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Linux kernel driver for OV1063x cameras support OV10635 sensor.
</p><p>Video capture can be verified from the OV10635 sensor as follows
</p>
<ul><li>Connect OV10635 sensor to the OVcam port on the Vision board</li>
<li>Change the SW3 switch setting on Vision board as SW3[1-8] = 01010101</li>
<li>Reboot the board and enable i2c2 as given above</li>
<li>I2C device on Bus 2 slave address 0x30 should be probed successfully</li>
<li>VIP should register a V4L2 video device (e.g. /dev/video1) using this i2c device</li>
<li>Run dmabuftest with '1280x720@YUYV' as capture format</li></ul>
<h6><span class="mw-headline" id="Capturing_through_TVP_decoder">Capturing through TVP decoder</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-8" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Linux kernel supports TVP5158 NTSC/PAL decoder.
</p><p>TVP5158 decoder is a TI chip which can decode upto 4 channels of NTSC/PAL analog video and multiplex it.
</p><p>Video capture from 1 channel TVP5158 can be verified as follows.
</p>
<ul><li>Connect analog camera to the Vin1 port of the JAMR3 board</li>
<li>Change the SW2 switch setting on JAMR board as SW2[1-2] = [OFF, ON] - This is to select i2c4 for the IO expander</li>
<li>Reboot the board and enable i2c2 as given above</li>
<li>I2C device on Bus 2 slave address 0x58 should be probed successfully</li>
<li>VIP should register a V4L2 video device (e.g. /dev/video1) using this i2c device</li>
<li>Run dmabuftest with capture format of the analog camera (e.g. '720x240@YUYV')</li></ul>
<h6><span class="mw-headline" id="Capturing_through_LVDS_camera">Capturing through LVDS camera</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-9" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>LVDS camera is also a camera connected through a serializer and deserializer
</p><p>Linux kernel has driver for FPDlink serializers and deserializers
</p><p>For interfacing every LVDS camera with J6, an I2C slave for ser, deser and camera is needed.
By default, all of the device tree nodes are disabled.
</p><p>Following table shows mapping between all LVDS cameras on multi deserializer duaghter card for Vision Board.
</p>
<pre>LVDS camera    Camera address alias    Serializer address alias    Derializer address    VIP port
</pre>
<pre>cam1           0x38                    0x74                        0x60                  Vin1a(VIP1 slice0 port A)
cam2           0x39                    0x75                        0x64                  Vin2a(VIP1 slice1 port A)
cam3           0x3A                    0x76                        0x68                  Vin3a(VIP2 slice0 port A)
cam4           0x3B                    0x77                        0x6C                  Vin5a(VIP3 slice0 port A)
cam5           0x3C                    0x78                        0x61                  Vin4b(VIP2 slice1 port B)
cam6           0x3D                    0x79                        0x69                  Vin6a(VIP3 slice1 port A)
</pre>
<p>Video capture from LVDS camera can be verified as follows.
</p>
<ul><li>Connect a LVDS camera to cam1/2/3/4 port of Multides board.</li>
<li>Change the SW3 switch setting on Vision board as SW3[1-8] = 00100101</li>
<li>I2C device on Bus 2 slave address (e.g. 0x38 for cam1) should be probed successfully</li>
<li>VIP should register a V4L2 video device (e.g. /dev/video1) using this i2c device</li>
<li>Run dmabuftest with '1280x720@YUYV' as capture format</li></ul>
<p><br />
</p>
<h6><span id="Capturing_through_OV10640/OV490_CSI_camera/ISP"></span><span class="mw-headline" id="Capturing_through_OV10640.2FOV490_CSI_camera.2FISP">Capturing through OV10640/OV490 CSI camera/ISP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-10" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Linux kernel supports CSI capture from OV10640 RAW camera and OV490 ISP.
</p><p>CAL works on the CSI2 protocol and supports both raw and YUYV capture. It is verified with the OV10640 raw camera and OV490 ISP.
TI-EVM has support for capturing via two CSI phys. - phy0 (4data lanes) and phy1 (2data lanes)
</p><p>Video capture from OV490 can be verified as follows.
</p>
<ul><li>Connect OV10640 camera to the OV490 board</li>
<li>Connect the OV490 board to the TI-EVM via the CSI2 dual 490 adaptor board</li>
<li>I2C device on Bus 4 slave address 0x24 should be probed successfully</li>
<li>VIP should register a V4L2 video device (e.g. /dev/video1) using this i2c device</li>
<li>Run dmabuftest with capture format of the analog camera (e.g. '1280x720@YUYV')</li></ul>
<h4><span id="Video_Processing_Engine(VPE)"></span><span class="mw-headline" id="Video_Processing_Engine.28VPE.29">Video Processing Engine(VPE)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-11" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>VPE supports Scalar, Colour Space Conversion and Deinterlace.It uses V4L2 mem2mem API.
</p><p>Supported Input formats: nv12, yuyv, uyvy
</p><p>Supported Output formats: nv12, yuyv, uyvy, rgb24, bgr24, argb24, abgr24
</p><p>Not Supported formats: yuv444, yvyu, vyuy, nv16, nv61, nv21
</p>
<h6><span class="mw-headline" id="File_to_File">File to File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-12" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<pre> test-v4l2-m2m

 Usage:
 &lt;SRCfilename&gt; &lt;SRCWidth&gt; &lt;SRCHeight&gt; &lt;SRCFormat&gt; &lt;DSTfilename&gt; &lt;DSTWidth&gt; &lt;DSTHeight&gt; &lt;DSTformat&gt; &lt;interlace&gt; &lt;translen&gt;
</pre>
<p>Note:
</p><p>&lt;interlace&gt;&#160;: set 1, If input is interlaced and want deinterlaced(progressive) output. output height should be twice of input height.
</p><p><br />
<i> Deinterlace(DI):- </i>
</p>
<pre><b>target#</b> test-v4l2-m2m /dev/video0 frame-176-144-nv12-inp.yuv 176 144 nv12 progressive_output.nv12 176 288 nv12 1 1
</pre>
<p><i> Scalar(SC):- </i>
</p>
<pre><b>target#</b> test-v4l2-m2m /dev/video0 frame-176-144-nv12-inp.yuv 176 144 nv12 frame-1920-1080-nv12-out.nv12 1920 1080 nv12 0 1
</pre>
<p><i> Colour Space Conversion(CSC):- </i>
</p>
<pre><b>target#</b> test-v4l2-m2m /dev/video0 frame-720-240-yuyv-inp.yuv 720 240 yuyv frame-720-240-argb32-out.argb32 720 240 argb32 0 1
</pre>
<p><i> SC+CSC+DI:- </i>
</p>
<pre><b>target#</b> test-v4l2-m2m /dev/video0 frame-720-240-yuyv-inp.yuv 720 240 yuyv frame-1920-1080-rgb24-dei-out.rgb24 1920 1080 rgb24 1 1
</pre>
<h6><span class="mw-headline" id="File_to_Display">File to Display</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-13" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<pre> filevpedisplay

 Usage:
 &lt;src_filename&gt; &lt;src_w&gt; &lt;src_h&gt; &lt;src_format&gt; &lt;dst_w&gt; &lt;dst_h&gt; &lt;dst_format&gt; &lt;top&gt; &lt;left&gt; &lt;w&gt; &lt;h&gt; &lt;inter&gt; &lt;trans&gt; -s &lt;conn_id&gt;:&lt;mode&gt;
</pre>
<p><br />
Input without crop:
</p>
<pre><b>target#</b> filevpedisplay frame-176-144-nv12-inp.yuv 176 144 nv12 800 480 yuyv 0 0 176 144 0 1 -s 4:800x480
</pre>
<p>Input with crop:
</p>
<pre><b>target#</b> filevpedisplay frame-176-144-nv12-inp.yuv 176 144 nv12 800 480 yuyv 16 32 128 128 0 1 -s 4:800x480
</pre>
<p><br />
</p><p>Input without crop:
</p>
<pre><b>target#</b> filevpedisplay frame-176-144-nv12-inp.yuv 176 144 nv12 800 480 yuyv 0 0 176 144 0 1 -s 16:800x480
</pre>
<p>Input with crop:
</p>
<pre><b>target#</b> filevpedisplay frame-176-144-nv12-inp.yuv 176 144 nv12 800 480 yuyv 16 32 128 128 0 1 -s 4:1280x720
</pre>
<p><br />
</p>
<h6><span class="mw-headline" id="VIP-VPE-Display">VIP-VPE-Display</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_VIP_VPE&amp;action=edit&amp;section=T-14" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h6>
<p>Camera captures the frames, which are processed by VPE(SC, CSC, Dei) then displays on LCD/HDMI.
</p>
<pre> capturevpedisplay

 Usage:
 &lt;src_w&gt; &lt;src_h&gt; &lt;src_format&gt; &lt;dst_w&gt; &lt;dst_h&gt; &lt;dst_format&gt; &lt;inter&gt; &lt;trans&gt; -s &lt;conn_id&gt;:&lt;mode&gt;
</pre>
<p><br />
</p>
<pre><b>target#</b> capturevpedisplay 640 480 yuyv 320 240 uyvy 0 1 -s 4:640x480
</pre>
<p><br />
</p>
<pre><b>target#</b> capturevpedisplay 640 480 yuyv 320 240 uyvy 0 1 -s 4:1280x720
</pre>
<h2><span class="mw-headline" id="Running_DSS_application">Running DSS application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_DSS&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>DSS applications are omapdrm based. These will demonstrate the clone mode, extended mode, overlay window, z-order and alpha blending features.
To demonstrate clone and extended mode, HDMI display must be connected to board.
Application requires the supported mode information of connected displays and plane ids. One can get these information by running the <i>modetest</i> application in the filesystem.
</p>
<pre>  <b>target #</b>  modetest
</pre>
<p><br />
DSS application is omapdrm based. This will demonstrate the z-order and alpha blending features.
HDMI display must be connected to board. Application requires the supported mode information of connected display and plane ids. One can get these information by running the <i>modetest</i> application in the filesystem.
</p>
<pre>  <b>target #</b>  modetest
</pre>
<p><br />
<b>Running drmclone application</b>
</p><p>This displays same test pattern on both LCD and HDMI (clone). Overlay window also displayed on LCD.
To test clone mode, execute the following command:
</p>
<pre>  <b>target #</b>  drmclone -l &lt;lcd_w&gt;x&lt;lcd_h&gt; -p &lt;plane_w&gt;x&lt;plane_h&gt;:&lt;x&gt;+&lt;y&gt; -h &lt;hdmi_w&gt;x&lt;hdmi_h&gt;
</pre>
<pre>e.g.: target # drmclone -l 1280x800 -p 320x240:0+0 -h 640x480
</pre>
<p>We can change position of overlay window by changing x+y values. eg. 240+120 will show @ center
</p><p><b>Running drmextended application</b>
</p><p>This displays different test pattern on LCD and HDMI. Overlay window also displayed on LCD.
To test extended mode, execute the following command:
</p>
<pre>  <b>target #</b> drmextended -l &lt;lcd_w&gt;x&lt;lcd_h&gt; -p &lt;plane_w&gt;x&lt;plane_h&gt;:&lt;x&gt;+&lt;y&gt; -h &lt;hdmi_w&gt;x&lt;hdmi_h&gt;
</pre>
<pre>e.g.: target # drmextended -l 1280x800 -p 320x240:0+0 -h 640x480
</pre>
<p><b>Running drmzalpha application</b>
</p><p><i>Z-order:</i>
</p><p>It determines, which overlay window appears on top of the other.
</p><p>Range: 0 to 3
</p>
<div style="text-align: left; direction: ltr; margin-left: 1em;">
<p>lowest value for bottom
</p><p>highest value for top
</p>
</div>
<p><i>Alpha Blend:</i>
</p><p>It determines transparency level of image as a result of both global alpha &amp; pre multiplied alpha value.
</p><p>Global alpha range: 0 to 255
</p>
<div style="text-align: left; direction: ltr; margin-left: 1em;">
<p>0   - fully transparent
</p><p>127 - semi transparent
</p><p>255 - fully opaque
</p>
</div>
<p>Pre multipled alpha value: 0 or 1
</p>
<div style="text-align: left; direction: ltr; margin-left: 1em;">
<p>0 - source is not premultiply with alpha
</p><p>1 - source is premultiply with alpha
</p>
</div>
<p>To test drmzalpha, execute the following command:
</p>
<pre>  <b>target #</b> drmzalpha -s &lt;crtc_w&gt;x&lt;crtc_h&gt; -w &lt;plane1_id&gt;:&lt;z_val&gt;:&lt;glo_alpha&gt;:&lt;pre_mul_alpha&gt; -w &lt;plane2_id&gt;:&lt;z_val&gt;:&lt;glo_alpha&gt;:&lt;pre_mul_alpha&gt;
</pre>
<pre>e.g.: target # drmzalpha -s 1280x800 -w 19:1:255:1 -w 20:2:255:1
</pre>
<p><br />
To test drmzalpha, execute the following command:
</p>
<pre>  <b>target #</b> drmzalpha -s &lt;crtc_w&gt;x&lt;crtc_h&gt; -w &lt;plane1_id&gt;:&lt;z_val&gt;:&lt;glo_alpha&gt;:&lt;pre_mul_alpha&gt; -w &lt;plane2_id&gt;:&lt;z_val&gt;:&lt;glo_alpha&gt;:&lt;pre_mul_alpha&gt;

e.g.: target # drmzalpha -s 640x480 -w 15:1:255:1 -w 16:2:255:1
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Testing_with_FPDLink_Display_setup">Testing with FPDLink Display setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_DSS&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span style="color:red"> <b>NOTE!</b> </span> Support for FPDLink display is available upto K4.4 releases. PSDKLA6.0x release with k4.19 doesn't have support for FPDLInk. Check the release notes to see whether FPDLink is supported on the Processor SDK Linux Automotive release you are using.
</p><p><br />
</p><p>For information on debugging FPDLink integration, please refer to <a href="Processor_SDK_Linux_Automotive_Display_FAQ.html#Debugging_FPDLink_integration" title="Processor SDK Linux Automotive Display FAQ"> Debugging FPDLink integration</a>
</p>
<h4><span id="Current_H/W_setup"></span><span class="mw-headline" id="Current_H.2FW_setup">Current H/W setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_DSS&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>FPDLink display is currently supported with Spectrum Digital FPDLink display part number 703840-0001. This display includes a 1280x800 AUO LCD panel with Goodix touch screen connected over a DS90UB924Q1 deserializer.
</p><p>To validate FPDLink with the current HW setup, below hardware is required.
</p>
<ul><li>DRA7xx EVM + 12V supply for the EVM.</li>
<li>FPDLink Cable between DRA7xx and FPDLink display</li>
<li>12 V power supply for the FPDLink display if using a J6/J6 Eco/J6 Entry EVM. J6 Plus EVM supplies power to the display over FPDLink. Power supply for display is not required in this case.</li></ul>
<p>The picture below shows the overall setup.
</p><p><a href="File_DRA7xx_FPDLink_AUO_SD_setup.html" class="image"><img alt="DRA7xx FPDLink AUO SD setup.png" src="https://processors.wiki.ti.com/images/e/ec/DRA7xx_FPDLink_AUO_SD_setup.png" width="780" height="432" /></a>
</p><p>Kernel Config modifications are not necessary as AUO panel support and fpdlink support are built into the kernel.
</p><p>To test the FPDLink display,
</p>
<ol><li>Use the device tree <code>dra7-evm-fpd-auo-g101evn01.0.dtb</code> to boot.</li>
<li>Add <code>omapdrm.num_crtc=2</code> to the kernel boot arguments. The above device tree will enable both HDMI and FPDlink LCD.</li>
<li>Power on the EVM and the check the modetest output. You should see two connectors now, one for HDMI and another for FPDLink.</li></ol>
<h4><span id="Legacy_H/W_setup"></span><span class="mw-headline" id="Legacy_H.2FW_setup">Legacy H/W setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_DSS&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>Please note that support for the below FPDLink hardware will be deprecated with the next release. This is due to availability of the single board FPDLink display listed above.</b>
</p><p>To validate FPDLink with the legacy HW setup, below hardware is required.
</p>
<ul><li>DRA7xx EVM + 12V supply for the EVM.</li>
<li>FPDLink Cable between DRA7xx and De-serilzer board (DS90UB928Q).</li>
<li>5V power supply for De-serializer board.</li>
<li>LCD Adapter board (DS90UH928Q) that sits on De-serializer board.</li>
<li>LCD Adapter cable which is between LCD panel and the Adapter board.</li>
<li>12V power supply for LCD Adapter board.</li>
<li>The actual LCD panel (LG101(10.1in) or AUO (7.1 in))</li></ul>
<p>The picture below shows the overall setup.
</p><p><a href="File_DRA7xx_FPDLink_setup.html" class="image"><img alt="DRA7xx FPDLink setup.png" src="https://processors.wiki.ti.com/images/9/92/DRA7xx_FPDLink_setup.png" width="1388" height="961" /></a>
</p><p>Kernel Config is not necessary as the supported panels and fpdlink are built into the kernel.
</p><p>To test the FPDLink display,
</p>
<ol><li>Use the device tree <code>dra7-evm-fpd-lg.dtb</code> to boot.</li>
<li>Add <code>omapdrm.num_crtc=2</code> to the kernel boot arguments. The above device tree will enable both HDMI and FPDlink LCD.</li>
<li>Power on the EVM and the check the modetest output. You should see two connectors now, one for HDMI and another for FPDLink.</li></ol>
<h4><span class="mw-headline" id="HW_Modifications_required">HW Modifications required</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_DSS&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>With the Rev B J6 Plus EVM's, a board modification is required to supply the pixel clock to the FPDLink connector. The modification required is shown in the below image.
</p><p><a href="File_DRA76x_FPDLink_Board_mod.html" class="image"><img alt="DRA76x FPDLink Board mod.png" src="https://processors.wiki.ti.com/images/b/be/DRA76x_FPDLink_Board_mod.png" width="574" height="585" /></a>
</p><p>}}
</p>
<h2><span class="mw-headline" id="Gsttestplayer">Gsttestplayer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_gsttestplayer&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>gsttestplayer is a gstreamer test application useful for testing some features not testable with gst-launch-1.0 such as:
</p>
<ol><li>Seek - Seeking to random points in a stream</li>
<li>Trick play  - Playback at different speeds (fast forward, rewind)</li>
<li>Pause, Resume</li>
<li>Playing multiple streams simultaneously in the same process, in a loop or one after another.</li></ol>
<h3><span class="mw-headline" id="Running_gsttestplayer">Running gsttestplayer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_gsttestplayer&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Command line options:
</p>
<pre>  <b>target #</b> gsttestplayer -h
        Usage: gsttestplayer &lt;options&gt;
                -s &lt;sinkname&gt;    Specify the video sink name to be used, default: kmssink
                -n               Do not use VPE, implies no scaling
                -r &lt;width&gt;x&lt;height&gt; Resize the output to widthxheight, no scaling if left blank
                -a               Play with no A/V Sync
                -c &lt;cmds file&gt;   Non-interactive mode, reading commands from &lt;cmds file&gt;
                --help-gst                        Show GStreamer Options
</pre>
<p>Example: To use waylandsink and resize the output video to 800x400.
</p>
<pre>  <b>target #</b> gsttestplayer -s waylandsink -r 800x400
</pre>
<p>In normal mode, when -c option is not used, the application enters an command prompt at which the user enter various commands. Type "help" to print out the list of possible commands:
</p>
<pre>  <b>target #</b> gsttestplayer -s waylandsink -r 800x400
        Scaling output to 800x400
        Using videosink=waylandsink
        <b>&lt;Enter ip&gt;</b> help
        Commands available:
        start  &lt;instance num&gt; &lt;filename/capture device&gt;
        stop   &lt;instance num&gt;
        pause  &lt;instance num&gt;
        resume &lt;instance num&gt;
        seek   &lt;instance num&gt; &lt;seek to time in seconds&gt; &lt;optional: playback speed&gt;
        sleep  &lt;sleep time in seconds&gt;
        msleep &lt;sleep time in milliseconds&gt;
        rewind &lt;line number&gt;
        exit
        <b>&lt;Enter ip&gt;</b>
</pre>
<p>Example commands:
</p>
<pre><i>start 0 KMS_MPEG4_D1.MP4</i>  # Start playing the file "KMS_MPEG4_D1.MP4", using instance 0.
<i>start 1 NTSC_h264.mp4</i>     # Start playing the file "NTSC_h264.mp4" (simultaneously) using instance 1.
<i>stop 0</i>                    # Stop playback of instance 0.
<i>seek 0 0 2</i>                # Seek to "0"th second mark of the stream playing in instance 0,
                          #  and start playing back at speed 2x.
<i>seek 0 300 -1</i>             # Seek to "300"th second mark of the stream playing in instance 0,
                          #  and start playing back reserve at speed 1x.
<i>start 2 /dev/video1</i>       # Start capturing from /dev/video1 using the v4l2src plugin
</pre>
<p>All these commands could be put into a text file and given as input to gsttestplayer with the "-c" option. In this case, gsttestplayer runs non-interactively, reading commands from the text file one line after another. The commands <i>sleep</i> and <i>rewind</i> are useful for this mode, to introduce delays or to create a loop respectively.
</p><p>Notes:
</p>
<ol><li>This application plays video only. Audio path is not used.</li>
<li>The input filename should have the correct file extension to indicate the type of file. The supported extensions are "mp4", "avi", "ts", "asf" &amp; "wmv".</li>
<li>The input filename should contain the string "264", "mpeg2", "mpeg4" or "vc1"/"wmv" to indicate which video codec should be used for decoding - H.264, MPEG-2, MPEG-4 or Windows Media Video.</li>
<li>If the input filename is a video device which matches /dev/videoX pattern, v4l2src plugin would be used for video capture instead of playback.</li>
<li>Decode and capture can be run in parallel depending on the sink being used.</li></ol>
<h2><span class="mw-headline" id="Running_IPC_examples">Running IPC examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Processor SDK Linux Automotive includes IPC examples are part of the target filesystem.
</p>
<h3><span class="mw-headline" id="User_space_sample_application">User space sample application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>MessageQ is the user space API provided for IPC. The sample application for MessageQ consists of an application &quot;MessageQApp&quot; running on the A15 and corresponding binaries running on the remotecore. The below table shows the paths under which the remotecore binaries can be found on the target filesystem. To ensure that these binaries are loaded by the kernel, please symbolic link them to the location shown in the below table.
</p>
<table class="wikitable">
<tbody><tr>
<th>Core
</th>
<th>Binary path on target relative to /lib/firmware
</th>
<th>Binary should be symlinked to
</th></tr>
<tr>
<td>DSP2
</td>
<td>./ipc/ti_platforms_evmDRA7XX_dsp2/messageq_single.xe66
</td>
<td>/lib/firmware/dra7-dsp2-fw.xe66
</td></tr>
<tr>
<td>IPU2
</td>
<td>./ipc/ti_platforms_evmDRA7XX_ipu2/messageq_single.xem4
</td>
<td>/lib/firmware/dra7-ipu2-fw.xem4
</td></tr>
<tr>
<td>IPU1
</td>
<td>./ipc/ti_platforms_evmDRA7XX_ipu1/messageq_single.xem4
</td>
<td>/lib/firmware/dra7-ipu1-fw.xem4
</td></tr>
<tr>
<td>DSP1
</td>
<td>./ipc/ti_platforms_evmDRA7XX_dsp1/messageq_single.xe66
</td>
<td>/lib/firmware/dra7-dsp1-fw.xe66
</td></tr></tbody></table>
<p>Boot the target and ensure that the lad daemon is running. Use the <code>ps</code> command to check if the lad daemon is already running. If not, please start the lad daemon.
</p>
<pre>target # /usr/bin/lad_dra7xx</pre>
<p>Start the MessageQApp
</p>
<pre>target # /usr/bin/MessageQApp &lt;number of messages&gt; &lt;core id&gt;</pre>
<p>The core id to be used is 1,2,3,4 for IPU2,IPU1,DSP2 and DSP1 respectively.
</p>
<pre>target # MessageQApp 10 3
Using numLoops: 10; procId&#160;: 3
Entered MessageQApp_execute
Local MessageQId: 0x80
Remote queueId  [0x30080]
Exchanging 10 messages with remote processor DSP2...
MessageQ_get #1 Msg = 0xb6400468
MessageQ_get #2 Msg = 0xb6400468
MessageQ_get #3 Msg = 0xb6400468
MessageQ_get #4 Msg = 0xb6400468
MessageQ_get #5 Msg = 0xb6400468
MessageQ_get #6 Msg = 0xb6400468
MessageQ_get #7 Msg = 0xb6400468
MessageQ_get #8 Msg = 0xb6400468
MessageQ_get #9 Msg = 0xb6400468
MessageQ_get #10 Msg = 0xb6400468
Exchanged 10 messages with remote processor DSP2
Sample application successfully completed!
Leaving MessageQApp_execute
</pre>
<p><br />
</p><p><br />
</p><p><br />
</p>
<h3><span class="mw-headline" id="RPMsg_client_sample_application">RPMsg client sample application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>RPMsg is the kernel space IPC and the building block for the user space MessageQ IPC API. The below wiki page illustrates how to build and run an rpmsg Linux kernel space client to communicate with a slave processor (e.g. DSP, IPU, etc) using IPC's RPMsg module.
</p><p><a rel="nofollow" class="external text" href="RPMsg_Kernel_Client_Application.html">RPMsg_Kernel_Client_Application</a>
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Running_basic_Wifi_tests">Running basic Wifi tests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To run this test, you would need to have the Wilink COM module connected to the EVM.
</p><p>Check if the wlan0 interface is showing up:
</p>
<pre>target # ifconfig -a
</pre>
<p>Bring up the wlan0 inteface:
</p>
<pre>target # ifconfig wlan0 up
</pre>
<p>Search for the available Wifi networks:
</p>
<pre>target # iw wlan0 scan | grep -i ssid
</pre>
<h2><span class="mw-headline" id="Running_basic_Bluetooth_tests">Running basic Bluetooth tests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To run this test, you would need to have the Wilink COM module connected to the EVM. Make sure that this module supports the Bluetooth.
</p>
<pre>target # hciconfig hci0 up
target # hciconfig -a
</pre>
<p>Turn on the Bluetooth on the device that you want to pair and make it discoverable, then run the following command:
</p>
<pre>target # hcitool scan
</pre>
<h2><span class="mw-headline" id="How_to_bring_up_the_GNSS_driver_and_sample_application">How to bring up the GNSS driver and sample application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_running_examples&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>WL8 GNSS driver that is compatible with SDK is now available as part of the click wrap license at the following location. <a rel="nofollow" class="external free" href="http://www.ti.com/tool/wilink-sw">http://www.ti.com/tool/wilink-sw</a>
</p><p>Users are requested to register and obtain the package.
</p><p>The package contains the driver source and the required documentation.
</p><p>The document "Bring up manual for WiLink8 GNSS driver on Linux" is the starting point that contains the instructions for compiling and trying the sample application.
</p><p><b>NOTE: These instructions are known to work if the user starts with the Processor SDK Linux Automotive installer and compiles the Linux kernel using the instructions provided in the Software Developers Guide. </b>
</p>
<h2><span class="mw-headline" id="Supported_Boot_modes">Supported Boot modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Supported_bootmodes&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The same U-Boot image shipped with the SDK can be used to boot the system in following different modes based on the boot switch settings:
</p>
<ul><li>MMC/SD</li>
<li>eMMC</li>
<li>Uart</li>
<li>QSPI</li>
<li>NAND</li></ul>
<h1><span class="mw-headline" id="Booting_EVM_with_different_modes">Booting EVM with different modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Supported_bootmodes&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Choosing_the_correct_device_tree">Choosing the correct device tree</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Supported_bootmodes&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Booting Linux kernel needs to have a kernel image(zImage) and device tree blob(DTB) file.
DTB file describes the hierarchy of the devices, and also describes various parameters about the devices.
</p><p>Depending on which CPU board and application board you are trying to boot, there are different set of devices.
For each permutation, there is a different DTB file describing all devices on baseboard as well as application board.
</p><p>Release filesystem comes with most commonly used permutations of device trees.
Following table shows the name of the device tree file to be used for each of the combination.
</p>
<table width="80%" cellspacing="0" cellpadding="5" border="1">
<caption><b>Device tree file (DTB) options</b>
</caption>
<tbody><tr style="background: rgb(221,255,221) 0% 50%">
<th>Board
</th>
<th>DTB name
</th></tr>
<tr>
<td>J6 EVM + 10inch LG LCD
</td>
<td>dra7-evm-lcd-lg.dtb    (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6 EVM + 10inch OSD LCD
</td>
<td>dra7-evm-lcd-osd.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6 EVM + Vision app board
</td>
<td>dra7-evm-vision.dtb
</td></tr>
<tr>
<td>J6eco EVM upto revision C
</td>
<td>dra72-evm-revc.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6eco EVM revision C + 10inch standard OSD panel
</td>
<td>dra72-evm-revc-lcd-osd101t2045.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6eco EVM revision C + 10inch new OSD panel
</td>
<td>dra72-evm-revc-lcd-osd101t2587.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6entry EVM
</td>
<td>dra71-evm.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6entry EVM + 10inch AUO LCD panel
</td>
<td>dra71-evm-lcd-auo-g101evn01.0.dtb   (Base board DTB works for JAMR3 as well)
</td></tr>
<tr>
<td>J6Plus EVM (HDMI only)
</td>
<td>dra76-evm.dtb
</td></tr>
<tr>
<td>J6Plus EVM + FPDLink display
</td>
<td>dra76-evm-fpd-auo-g101evn01.0.dtb    (Board modication required)
</td></tr></tbody></table>
<p>U-boot tries to detect the platform (J6/J6eco) and choose the appropriate dtb.  For the DRA7xx boards, it only detects the baseboard.  If you are using a stackup of baseboard plus LCD, then you must manually specify the proper dtb by defining fdtfile inside uenv.txt.  For example, if you were using J6 EVM + 10inch LG LCD then you would add the following line to uenv.txt:
</p>
<pre>fdtfile=dra7-evm-lcd-lg.dtb
</pre>
<h3><span class="mw-headline" id="Identifying_LCD_Panels">Identifying LCD Panels</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Supported_bootmodes&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<table class="wikitable">

<tbody><tr>
<th>Panel name</th>
<th>Resolution</th>
<th>Images</th>
<th>Remarks
</th></tr>
<tr>
<td>LG LCD</td>
<td>1280x800</td>
<td><a href="https://processors.wiki.ti.com/images/e/e6/Lcd-lg-front.jpg" class="internal" title="Lcd-lg-front.jpg">Media:lcd-lg-front.jpg</a>, <a href="https://processors.wiki.ti.com/images/a/ad/Lcd-lg-reverse.jpg" class="internal" title="Lcd-lg-reverse.jpg">Media:lcd-lg-reverse.jpg</a>, <a href="https://processors.wiki.ti.com/images/c/c8/Lcd-lg-push-button.jpg" class="internal" title="Lcd-lg-push-button.jpg">Media:lcd-lg-push-button.jpg</a></td>
<td>Has a circular hole on top for mounting camera. Has push buttons on the side. Device tree files end with lcd-lg.dtb
</td></tr>
<tr>
<td>OSD Panel</td>
<td>1920x1200</td>
<td><a href="https://processors.wiki.ti.com/images/2/28/Osd_2045_forward.jpg" class="internal" title="Osd 2045 forward.jpg">Media:osd_2045_forward.jpg</a>, <a href="https://processors.wiki.ti.com/images/7/77/Osd_2045_reverse.jpg" class="internal" title="Osd 2045 reverse.jpg">Media:osd_2045_reverse.jpg</a></td>
<td>Back has notation "OSD 1080P Touch Display I/F board". Serial number start with OSD_. Device tree files end with lcd-osd.dtb or lcd-osd101t2045.dtb
</td></tr>
<tr>
<td>New OSD Panel</td>
<td>1920x1200</td>
<td>TBD</td>
<td>Device tree files end with lcd-osd101t2587.dtb
</td></tr>
<tr>
<td>AUO Panel</td>
<td>1280x800</td>
<td><a href="https://processors.wiki.ti.com/images/a/ab/Auo-forward.jpg" class="internal" title="Auo-forward.jpg">Media:Auo-forward.jpg</a>, <a href="https://processors.wiki.ti.com/images/4/42/Auo_notation_reverse.jpg" class="internal" title="Auo notation reverse.jpg">Media:Auo_notation_reverse.jpg</a></td>
<td>Serial numbers on the back start with AU. Device tree files have AUO in name.
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Choosing_the_correct_bootloader_config">Choosing the correct bootloader config</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Supported_bootmodes&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>All the padmux is performed from the first stage bootloader (MLO) instead of the kernel.
Also, the bootloader takes care of configuring all the required PADs as well as the <b>IOdelay</b> configuration.
Depending on the use case, boot loader needs to know the required pads to be configured at the boot time.
Kernel would know the device information from DTB file but bootloader does not know which DTB file would be
used by the kernel.
</p><p>For this reason, we need to rebuild the bootloader (MLO) with a different config so that the appropriate PAD and IODELAY
configuration is performed as required by the use case. Release prebuilt bootloader works for most of the use cases.
</p><p><b>When using vision use cases, rebuild the bootloader with extra Kconfig CONFIG_TARGET_DRA7XX_EVM_VISION enabled</b>
</p><p><br />
</p>
<h2><span class="mw-headline" id="Using_QSPI_Boot">Using QSPI Boot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>QSPI is a serial peripheral interface like SPI the major difference being the support for Quad read, uses 4 data lines for read compared to 2 lines used by the traditional SPI.
</p>
<h3><span class="mw-headline" id="Supported_boot_modes_2">Supported boot modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>QSPI Production Boot mode</li>
<li>QSPI Development Boot mode</li></ul>
<h4><span class="mw-headline" id="QSPI_Production_Boot_Mode">QSPI Production Boot Mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This boot mode also called as 'spl_early_boot' in Processor SDK Linux Automotive.
</p>
<ul><li>In this boot mode SPL(first stage of Uboot) directly boots the Linux kernel.</li>
<li>The executables - MLO, dtb, uImage &amp; IPU are stored in QSPI flash memory. Refer the "Memory Layout" section for offset details.</li>
<li>eMMC partition 2 contains the filesystem &amp; is mounted as rootfs.</li>
<li>Build MLO and u-boot.img.</li></ul>
<p>Note: By continuous press of character 'c' key on keyboard and resetting the EVM, SPL will load u-boot and enter into second stage boot loader.
</p>
<h5><span class="mw-headline" id="SYS_BOOT_Switch_Settings">SYS BOOT Switch Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>change the boot switches to QSPI boot mode as:
</p>
<pre>SW2[5:0] = 110110 for development (jump to u-boot)
SW2[5:0] = 110111 for production mode (jump to MLO-&gt;kernel)
Also
SW5.4 = 0 (OFF)
</pre>
<p><br />
</p>
<h5><span class="mw-headline" id="Memory_Layout_of_QSPI_Flash">Memory Layout of QSPI Flash</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<pre>+----------------+ 0x00000
|      MLO       |
|                |
+----------------+ 0x040000
|   u-boot.img   |
|                |
+----------------+ 0x140000
|   DRA7-evm.dtb |
+----------------+ 0x1c0000
|   u-boot env   |
+----------------+ 0x1d0000
|   u-boot env   |
|    (backup)    |
+----------------+ 0x1e0000
|                |
|     uImage     |
|                |
|                |
+----------------+ 0x9e0000
|                |
|     IPU exe    |
|                |
+----------------+
</pre>
<p><br />
</p>
<h5><span class="mw-headline" id="Build_kernel_uImage_for_QSPI_boot_mode">Build kernel uImage for QSPI boot mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In 'spl_early_boot' mode, While building kernel uImage, set CONFIG_CMDLINE bootargs appropriately and set rootfs=/dev/mmcblk0p2 (eMMC device)
and set kernel CONFIG_CMDLINE bootargs @menuconfig-&gt;Boot options-&gt;"Default kernel command string". 
</p><p>for example:
</p>
<pre> CONFIG_CMDLINE = "elevator=noop console=ttyO0,115200n8 root=&lt;rootfs&gt; rw rootwait earlyprintk fixrtc omapdrm.num_crtc=2 consoleblank=0  cma=64M rootfstype=ext4";
 where &lt;rootfs&gt; can be /dev/mmcblk0p2 for eMMC or /dev/mmcblk1p2 for mmc/sd.
</pre>
<p>alternate option: 
Add the bootargs in chosen node in DTB file, using fdtput utility.
</p>
<pre>  #fdtput -v -t s &lt;DTB-FILE-PATH&gt; "/chosen" bootargs "elevator=noop console=ttyO0,115200n8 root=&lt;rootfs&gt; rw rootwait earlyprintk fixrtc omapdrm.num_crtc=2 consoleblank=0  cma=64M rootfstype=ext4"
 where &lt;rootfs&gt; can be /dev/mmcblk0p2 for eMMC or /dev/mmcblk1p2 for mmc/sd.
</pre>
<p><br />
</p>
<h5><span class="mw-headline" id="Flashing_the_Image_to_QSPI_from_Linux_kernel">Flashing the Image to QSPI from Linux kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The mk-qspi-boot.sh will be available at home direcotry of "Processor SDK Linux Automotive" filesystem. The mk-qspi-boot.sh runs on the target. The scripts reads the binaries (MLO, u-boot.img, kernel/dtb, ipu images) from MMC/SD and flashes into QSPI flash memory at appropriate partition described in above table. Also format &amp; creates rootfs partition in eMMC and copies the filesystem the eMMC rootfs parition. 
</p>
<pre>Usage:
target#mk-qspi-boot.sh --device1 &lt;mtd-device&gt; --device2 &lt;eMMC-device&gt; --bootmode

--device1 - devfs entry for qspi flash as char device node
			e.g /dev/mtd

--device2 - devfs entry for eMMC flash as block device node
			e.g /dev/mmcblk0

--bootmode - 'spl_early_boot' &amp; 'two_stage_boot'
			 spl_early_boot - ROM=&gt;SPL=&gt;uImage
			 two_stage_boot - ROM=&gt;SPL=&gt;u-boot.img=&gt;uImage
e.g
target#: mk-qspi-boot.sh --device1 /dev/mtd --device2 /dev/mmcblk0 --bootmode spl_early_boot

Note: Defualt DTB is dra7-evm-lcd-osd.dtb. Do change DTB in script if you want to boot the board with different device tree.
You can modify the mk-qspi-boot.sh, make sure "emmc_dev" and "main_dev" in mk-qspi-boot.sh point to appropriate "/dev/mmcblkX" device node and 
also set DTB_FILE_PATH, UIMAGE_FILE_PATH and IPU_FILE_PATH point to correct source. 
</pre>
<p><br />
</p>
<h4><span class="mw-headline" id="QSPI_Development_Boot_Mode">QSPI Development Boot Mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-8" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This boot mode also called as 'two_stage_boot' in "Processor SDK Linux Automotive"
</p>
<ul><li>In this boot mode SPL(first stage of Uboot) brings-up u-boot.img(second part of u-boot).</li>
<li>The second stage of u-boot, then, loads &amp; boots the Linux kernel.</li>
<li>Build MLO and u-boot.img for QSPI boot mode (use "dra7xx_evm_defconfig").</li>
<li>Only MLO and u-boot.img are stored in QSPI flash memory.</li>
<li>DTB &amp; uImage are stored in MMC/SD boot parition.</li>
<li>The rootfs is mounted from MMC/SD partition 2</li></ul>
<p>Note: By continuous press of character 'c' key on keyboard and resetting the EVM, SPL will load u-boot and enter into second stage boot loader.
</p>
<h5><span class="mw-headline" id="SYS_BOOT_Switch_Settings_2">SYS BOOT Switch Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-9" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>change the boot switches to QSPI boot mode as:
</p>
<pre>SW2[5:0] = 100110 for development (jump to u-boot)
SW2[5:0] = 100111 for production mode (single stage)
Also,
SW5.4 = 0 (OFF)
</pre>
<p><br />
</p>
<h5><span class="mw-headline" id="Flashing_UBoot_to_QSPI_from_Linux_kernel">Flashing UBoot to QSPI from Linux kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-10" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The mk-qspi-boot.sh will be available at home direcotry of Processor SDK Linux Automotive filesystem. The mk-qspi-boot.sh runs on the target . It reads the executables from MMC/SD &amp; flashes into QSPI flash memory for 'two_stage_boot'
</p>
<pre> For Usage of mk-spi-boot.sh refer to above section "Flashing_Image_to_QSPI_from_Linux"
</pre>
<p>Also QSPI flash can be accessed from kernel through MTD device.
</p><p>Following commands demonstrate how to flash MLO and u-boot from SD card to QSPI.
</p>
<pre>target# mount /dev/mmcblk1p1 /mnt
target# cat /proc/mtd
target# flash_erase -N /dev/mtd0 0 4
target# flash_erase -N /dev/mtd1 0 16
target# mtd_debug write /dev/mtd0 0x0 $(ls -l /mnt/MLO {{!}} awk '{ print $5 }') /mnt/MLO
target# mtd_debug write /dev/mtd1 0x0 $(ls -l /mnt/u-boot.img {{!}} awk '{ print $5 }') /mnt/u-boot.img
</pre>
<p><br />
</p>
<h5><span class="mw-headline" id="Flashing_UBoot_to_QSPI_from_UBoot">Flashing UBoot to QSPI from UBoot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_QSPI_Boot&amp;action=edit&amp;section=T-11" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>UBoot can be flashed to QSPI from any boot mode, here we are using MMC boot mode as an example<br />
Boot from SD card and at the U-Boot prompt, Choose the mmc card to read from
</p>
<pre>uboot# mmc dev 0
uboot# mmc0 is current device
</pre>
<ul><li>Probe the flash to see if there is a device connected,</li></ul>
<p><span style="color:blue">NOTE: Do NOT copy-paste the commands, please type them at the prompt</span>
</p>
<pre> # sf probe 0
 SF: Detected S25FL256S with page size 64 KiB, total 32 MiB, mapped at 5c000000
</pre>
<ul><li>Erase flash before writing the bin</li></ul>
<p><span style="color:blue">NOTE: Do NOT copy-paste the commands, please type them at the prompt</span>
</p>
<pre> # sf erase &lt;offset&gt; +&lt;size&gt;
 where,
  offset - qspi flash offset address start from 0.
  size   - erase region size. This is automatically rounded up to the block size.
 # sf write &lt;memory address&gt; &lt;offset&gt; &lt;len&gt;
 where,
   memory-address - source data to read from
   offset - qspi offset location to write
   len    - length of the data to be written
</pre>
<ul><li>Load the MLO (to offset 0x0) and u-boot.img(to offset 0x40000) to QSPI flash</li></ul>
<pre>Flashing MLO to QSPI
uboot# fatload mmc 0 0x82000000 MLO.qspi
uboot# sf erase 0 +${filesize}
uboot# sf write 0x82000000 0x0 ${filesize}

Flashing u-boot.img to QSPI
uboot# fatload mmc 0 0x83000000 u-boot.img
uboot# sf erase 40000 60000;
uboot# sf write 0x83000000 0x40000 0x60000
</pre>
<ul><li>Build kernel to create uImage and dtb files. Load the uImage(to offset 0x1e0000) and DTB files (to offset 0x140000) to QSPI flash</li></ul>
<pre>Flashing kernel(uImage) to QSPI
uboot# fatload mmc 0 0x82000000 uImage
uboot# sf erase 1e0000 500000;
uboot# sf write 82000000 1e0000 500000;

Flashing dtb file to QSPI
uboot# fatload mmc 0 0x83000000 &lt;dtb file&gt;
uboot# sf erase 140000 20000;
uboot# sf write 0x83000000 0x140000 0x20000
</pre>
<p>After reset, you should be able to boot from QSPI flash.
</p><p><span style="color:blue"></span>
</p>
<h2><span class="mw-headline" id="Using_eMMC_Boot">Using eMMC Boot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_EMMC_Boot&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>eMMC boot method is the same as MMC/SD flashing and booting procedure. Format MMC/SD card and create boot/rootfs partition (refer to Software development setup section).
</p>
<pre>$ sudo ${INSTALL_DIR}/bin/mksdboot.sh --device /dev/sdY --sdk ${INSTALL_DIR}
</pre>
<p>The MMC/SD boot partition contains MLO,u-boot.img and uenv.txt. The rootfs partition contains ext4 file system with kernel &amp; DTBs in rootfs/boot directory. Formatting of eMMC device can be done by using mk-eMMC-boot.sh script. Boot the EVM with MMC/SD boot mode first and then run the mk-eMMC-boot.sh script to create the eMMC partitions.
</p>
<h4><span class="mw-headline" id="Partitioning_and_formatting_eMMC">Partitioning and formatting eMMC</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_EMMC_Boot&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>Boot kernel using MMC/SD boot mode (refer to Software development setup section).</li>
<li>mount the MMC/SD boot partition, create uenv-emmc.txt.</li></ul>
<pre> # mount /dev/mmcblk1p1 /mnt
 # cp /mnt/uenv.txt /mnt/uenv-emmc.txt
 Note: edit /mnt/uenv-emmc.txt and set rootfs=/dev/mmcblk0p2 in bootargs.
</pre>
<ul><li>consider /dev/mmcblk0 is eMMC device, then use the following script to partition the eMMC device.The mk-eMMC-boot.sh will create boot, rootfs partition on eMMC device and copy the all files from MMC/SD card to eMMC.</li></ul>
<p>Note: Edit mk-eMMC-boot.sh script file and make sure "mmc_dev" point to appropriate MMC/SD device node (/dev/mmcblkX).
</p>
<pre> #./mk-eMMC-boot.sh --device /dev/mmcblk0
</pre>
<ul><li>reboot EVM to u-boot prompt, and set environment variables "mmcdev" and the "bootpart" point to eMMC device.</li></ul>
<pre>  #env default -a
  #setenv bootpart 1:2
  #setenv mmcdev 1
  #saveenv
</pre>
<ul><li>Set boot switches to EMMC boot mode.</li></ul>
<pre>Set SW2[7..0] = 00111000
</pre>
<ul><li>Remove MMC/SD card and reboot the EVM, now should boot from eMMC device.</li></ul>
<p><br />
</p>
<h4><span class="mw-headline" id="Partitioning_and_formatting_eMMC_from_Host_PC_through_USB">Partitioning and formatting eMMC from Host PC through USB</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:GLSDK_Using_EMMC_Boot&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The ums (USB Mass Storage feature) command in U-Boot can be used to expose the MMC as USB storage drive (/dev/sdX) to Host PC. 
</p><p>Syntax: ums &lt;usb controller instance&gt; mmc &lt;mmc-instance&gt;
</p>
<ul><li>Setup: Connect USB0 port of the EVM to Ubuntu host PC.</li></ul>
<p>From U-boot prompt
</p>
<ul><li>Exposing MMC/SD as storage media</li></ul>
<pre> =&gt; ums 0 mmc 0 
</pre>
<ul><li>Exposing eMMC as storage media</li></ul>
<pre>=&gt; ums 0 mmc 1 
</pre>
<p>This command will expose the mmc device as storage device (/dev/sdX) to Ubuntu PC, further user can mount and partition, format and copy the files to device.
</p><p><br />
</p>
<h2><span id="Booting_Secure_DRA7xx_Devices_SD/eMMC"></span><span class="mw-headline" id="Booting_Secure_DRA7xx_Devices_SD.2FeMMC">Booting Secure DRA7xx Devices SD/eMMC</span></h2>
<p>This section has been updated and moved to this link: <a rel="nofollow" class="external free" href="Processor_SDK_Linux_HS_Support.html">http://processors.wiki.ti.com/index.php/Processor_SDK_Linux_HS_Support</a>
</p>
<h2><span id="USB_DRD_(Dual_Role_Device)_Support"></span><span class="mw-headline" id="USB_DRD_.28Dual_Role_Device.29_Support">USB DRD (Dual Role Device) Support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:USB_DRD_SUPPORT&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The USB ports has capable of switching between device mode or host mode dynamically without removal of the USB cable.
</p>
<ul><li>make sure dr_mode property in DTB is set to "otg" for DRD support.</li>
<li>mount the debugfs node</li></ul>
<pre># mount -t debugfs debugfs /mnt
</pre>
<ul><li>load the gadget module.</li></ul>
<pre> # modprobe &lt;gadget.ko&gt;
</pre>
<ul><li>To switch between host mode for USB1 and USB2 port.</li></ul>
<pre> # echo "host" &gt; /mnt/48890000.usb/mode 
 # echo "host" &gt; /mnt/488d0000.usb/mode 
</pre>
<ul><li>To switch between host mode for USB1 and USB2 port.</li></ul>
<pre> # echo "device" &gt; /mnt/48890000.usb/mode 
 # echo "device" &gt; /mnt/48890000.usb/mode 
</pre>
<p>Note: The role switching can be done dynamically based on board USB-ID (SW1 switch on TI-EVM). 
</p>
<pre># If host-type (A-type) usb cable is connected, the port switched to host mode.
# If device-type (B-type) usb cable is connected, the port switched to device mode.
</pre>
<p>Note: 
</p>
<ul><li>Refer <a rel="nofollow" class="external text" href="Template_GLSDK_USB_DRD.html#Introduction">DRD support</a> for more information.</li>
<li>Refer <a rel="nofollow" class="external text" href="Template_GLSDK_USB_DRD.html#Driving_VBUS_using_GPIO">drive-vbus-using-gpio</a> in order to drive the vbus using gpio.</li></ul>
<h2><span id="Device_Firmware_Upgrade_(DFU)"></span><span class="mw-headline" id="Device_Firmware_Upgrade_.28DFU.29">Device Firmware Upgrade (DFU)</span></h2>
<p>The Device Firmware Upgrade (DFU) feature is used to program or flash the firmware to memory devices such as eMMC/MMCSD/QSPI/NOR/NAND/RAM devices. The u-boot has DFU support for eMMC, MMC/SD, QSPI and RAM devices. 
</p>
<h3><span class="mw-headline" id="DFU_Supported_Devices_in_u-boot">DFU Supported Devices in u-boot</span></h3>
<ul><li>eMMC</li>
<li>MMC/SD</li>
<li>RAM</li>
<li>QSPI</li></ul>
<h3><span id="SPL-DFU_support_(USB_Peripheral_boot_mode)"></span><span class="mw-headline" id="SPL-DFU_support_.28USB_Peripheral_boot_mode.29">SPL-DFU support (USB Peripheral boot mode)</span></h3>
<p>This method is used to flash the binary images from ubuntu Host PC (using dfu-utils tool) to EVM over usb interface using Device Firmware Update (DFU) feature. This is used to flash the eMMC, or QSPI to fresh/factory boards. <br />
</p>
<ul><li>Use default "dra7xx_evm_defconfig" to build spl/u-boot-spl.bin, u-boot.img.</li></ul>
<pre> # make dra7xx_evm_defconfig
</pre>
<ul><li>select SPL-&gt;DFU support from menuconfig-&gt;"Boot Images"-&gt;"Enable SPL with DFU to load binares to memory device"</li>
<li>Build spl/u-boot-spl.bin and u-boot.img</li></ul>
<pre> # make
</pre>
<ul><li>Set SYSBOOT SW2 switch to USB Peripheral boot mode</li></ul>
<pre> SW2[7..0] = 0000000
</pre>
<ul><li>Connect EVM Superspeed port (USB1 port) to PC (Ubuntu) through USB cable.</li>
<li>From Ubuntu PC, load spl/u-boot-spl.bin to EVM. Issue below command and reset the board.</li></ul>
<pre>$ sudo ./usbboot -S spl/u-boot-spl.bin
</pre>
<ul><li>Load the u-boot.img to RAM.</li></ul>
<pre># sudo dfu-util -l
</pre>
<pre>Found DFU: [0451:d022] devnum=0, cfg=1, intf=0, alt=0, name="kernel"
Found DFU: [0451:d022] devnum=0, cfg=1, intf=0, alt=1, name="fdt"
Found DFU: [0451:d022] devnum=0, cfg=1, intf=0, alt=2, name="ramdisk"
</pre>
<pre>$ sudo dfu-util c 1 -i 0 -a 0 -D "u-boot.img" -R
</pre>
<ul><li>Now EVM will boot to u-boot prompt.</li></ul>
<h3><span class="mw-headline" id="DFU_Usage_from_u-boot">DFU Usage from u-boot</span></h3>
<p>Use default "dra7xx_evm_defconfig" to build MLO and u-boot.img.
</p>
<pre>make dra7xx_evm_defconfig
make 
</pre>
<p>Connect the EVM with Ubuntu Host through micro USB device cable (USB1 port on EVM). 
</p>
<ul><li>From target u-boot prompt</li></ul>
<p>Reset the default environment variable
</p>
<pre># env default -a 
</pre>
<p>set the dfu_alt_info environment variable to emmc dfu settings
</p>
<pre># setenv dfu_alt_info ${dfu_alt_info_emmc}
</pre>
<ul><li>Run DFU command chosing eMMC as memory device</li></ul>
<p>dfu &lt;usb controller number&gt; mmc &lt;1-eMMC, 0-mmc/sd&gt;
</p>
<pre># dfu 0 mmc 1
set_config: high speed config #1: usb_dnload
</pre>
<ul><li>From PC host side (Ubuntu)</li></ul>
<p>To list the available partition to load the file.
</p>
<pre># sudo dfu-util -l
dfu-util 0.5
(C) 2005-2008 by Weston Schmidt, Harald Welte and OpenMoko Inc.
(C) 2010-2011 Tormod Volden (DfuSe support)
This program is Free Software and has ABSOLUTELY NO WARRANTY
dfu-util does currently only support DFU version 1.0
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=0, name="rawemmc"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=1, name="boot"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=2, name="rootfs"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=3, name="MLO"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=4, name="MLO.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=5, name="u-boot.img.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=6, name="spl-os-args.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=7, name="spl-os-image.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=8, name="spl-os-args"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=9, name="spl-os-image"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=10, name="u-boot.img"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=11, name="uEnv.txt
</pre>
<p>The above list shows list of dfu partitions or file name. 
</p>
<h4><span class="mw-headline" id="Flashing_rawemmc_partition">Flashing rawemmc partition</span></h4>
<p>The "rawemmc" partition is used to update the disk image to raw eMMC sector 0. This is used to flash the eMMC to fresh boards. Please refer to section <i>Using USB peripheral boot mode</i>
</p>
<h4><span id="Update_existing_MLO_and_u-boot.img_of_eMMC_boot_partition_(vfat)"></span><span class="mw-headline" id="Update_existing_MLO_and_u-boot.img_of_eMMC_boot_partition_.28vfat.29">Update existing MLO and u-boot.img of eMMC boot partition (vfat)</span></h4>
<p>This method is used to update the MLO/u-boot.img files in boot(vfat) partion of eMMC
</p>
<ul><li>To update the MLO file</li></ul>
<pre>#sudo dfu-util -D MLO -c 1 -i 0 -a 3
</pre>
<ul><li>To update the u-boot.img file</li></ul>
<pre>#sudo dfu-util -D u-boot.img -c 1 -i 0 -a 10
</pre>
<h4><span id="Update_existing_boot_and_rootfs_partition_(ext4)_of_eMMC"></span><span class="mw-headline" id="Update_existing_boot_and_rootfs_partition_.28ext4.29_of_eMMC">Update existing boot and rootfs partition (ext4) of eMMC</span></h4>
<p>This method is used to update the existing boot partition (vfat) or rootfs partition (ext4) images in eMMC
</p>
<ul><li>To update the boot partition disk image</li></ul>
<pre>#sudo dfu-util -D boot.img -c 1 -i 0 -a 1
</pre>
<ul><li>To update the rootfs partition disk image</li></ul>
<pre>#sudo dfu-util -D rootfs.img -c 1 -i 0 -a 2
</pre>
<h5><span id="Steps_to_create_boot_(vfat)_and_rootfs_(ext4)_raw_disk_image"></span><span class="mw-headline" id="Steps_to_create_boot_.28vfat.29_and_rootfs_.28ext4.29_raw_disk_image">Steps to create boot (vfat) and rootfs (ext4) raw disk image</span></h5>
<p>In order to create raw boot and rootfs disk image along with partition structure follow the steps mentioned below. 
</p>
<ol><li>Insert the mmc/sd card to Ubuntu PC, the size of sdcard shall be less than or equal to size of eMMC populated in EVM.</li>
<li>Prepare mmc/sd card mentioned in step4 of <a rel="nofollow" class="external text" href="DRA7xx_Processor_SDK_Linux_Automotive_Software_Developers_Guide.html#Starting_your_software_development">Processor SDK Linux Automotive User Guide</a>. By default the mksdboot.sh script creates two partitions, 64MB of boot partition with vfat filesystem and remaining size of sd card with rootfs partition with ext4 filesystem.</li>
<li>After sd card is created with boot and rootfs partition, mount the sdcard to update uenv.txt and overwrite uenv.txt by uenv-emmc.txt in "boot" partition. Copy any additional files required to boot/rootfs partition.</li></ol>
<pre> #mount /dev/sdY1 /media/boot
 #mount /dev/sdY2 /media/rootfs
 #cp /media/boot/uenv-emmc.c /media/boot/uenv.txt
 #sync
</pre>
<p>Create the vfat raw boot disk image along with partition structure <br />
</p>
<pre>#dd if=/dev/&lt;sdY1&gt; of=boot.img bs=1M &amp;
</pre>
<p>Create the ext4 raw rootfs disk image along with partition structure <br />
</p>
<pre>#dd if=/dev/&lt;sdY2&gt; of=rootfs.img bs=1M &amp;
</pre>
<h3><span id="Flashing/Upgrading_custom_file_to_eMMC_vfat/ext4_partition"></span><span class="mw-headline" id="Flashing.2FUpgrading_custom_file_to_eMMC_vfat.2Fext4_partition">Flashing/Upgrading custom file to eMMC vfat/ext4 partition</span></h3>
<p>1. If eMMC device is not partitoned, then first the eMMC device must be partitioned to vfat or ext4 filesystem. Refer<a rel="nofollow" class="external text" href="File_Flashing_binariesto_the_factory_boards_using_Device_Firmware_Upgrade(DFU).html">Flashing_binaries_to_the_factory_boards_using_Device_Firmware_Upgrade_(DFU).pdf</a> <br />
2. Once the eMMC device has been partitioned to vfat/ext4, user can write into existing file or partition. For example as shown in above list of dfu interfaces, user can upgrade the MLO or u-boot.img file from ubuntu PC. The alternate interface number 3 need to selected for upgrading MLO, and 10 need to selected for u-boot.img. <br />
</p>
<pre>#sudo dfu-util -D MLO -c 1 -i 0 -a 3
#sudo dfu-util -D u-boot.img -c 1 -i 0 -a 10
</pre>
<h4><span class="mw-headline" id="Adding_a_custom_file_to_DFU_configuration">Adding a custom file to DFU configuration</span></h4>
<p>1. Add a custom/new file to the root directory of existing rootfs(ext4) or boot(vfat) partition of sdcard and flash the filesystem raw disk images to eMMC. For example consider the file zImage, dra7-evm-lcd10.dtb is added to root directory of rootfs(ext4) and README file in boot(vfat) partition. Make sure file read/write permission is set.<br />
2. From u-boot source repository, edit the file include/configs/dra7xx_evm.h, add a new entry to DFU_ALT_INFO_EMMC macro. <br />
</p>
<pre>#define DFU_ALT_INFO_EMMC \
       "dfu_alt_info_emmc=" \
       "rawemmc raw 0 3751936;" \
       "boot part 1 1;" \
       "rootfs part 1 2;" \
       "MLO fat 1 1;" \
       <b>"ZImage ext4 1 2;" \</b>
       <b>"dra7-evm-lcd10.dtb ext4 1 2;" \</b>
       <b>"README fat 1 1;" \</b>
       "MLO.raw raw 0x100 0x100;" \
       "u-boot.img.raw raw 0x200 0x400;" \
       "spl-os-args.raw raw 0x80 0x80;" \
       "spl-os-image.raw raw 0x900 0x2000;" \
       "spl-os-args fat 1 1;" \
       "spl-os-image fat 1 1;" \
       "u-boot.img fat 1 1;" \
       "uEnv.txt fat 1 1\0"
</pre>
<p>3. Compile the u-boot to create MLO, u-boot.img and load MLO/u-boot.img to EVM <br />
4. Execute "dfu-util -l" from PC host, the new interfaces added will be listed<br />
</p>
<pre>#sudo dfu-util -l
dfu-util 0.5
(C) 2005-2008 by Weston Schmidt, Harald Welte and OpenMoko Inc.
(C) 2010-2011 Tormod Volden (DfuSe support)
This program is Free Software and has ABSOLUTELY NO WARRANTY
dfu-util does currently only support DFU version 1.0
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=0, name="rawemmc"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=1, name="boot"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=2, name="rootfs"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=3, name="MLO"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=4, name="zImage"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=5, name="dra7-evm-lcd10.dtb"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=6, name="README"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=7, name="MLO.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=8, name="u-boot.img.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=9, name="spl-os-args.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=10, name="spl-os-image.raw"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=11, name="spl-os-args"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=12, name="spl-os-image"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=13, name="u-boot.img"
Found DFU: [0403:bd00] devnum=0, cfg=1, intf=0, alt=14, name="uEnv.txt"
</pre>
<p>6. Now you can upgrade the new added files by chosing the respective alternate interface number (alt=&lt;number&gt;)  <br />
</p>
<pre>Upgrade the zImage
#sudo dfu-util -c 1 -i 0 -a 4 -D zImage

Upgrade the dra7-evm-lcd10.dtb
#sudo dfu-util -c 1 -i 0 -a 4 -D dra7-evm-lcd10.dtb

</pre>
<h3><span class="mw-headline" id="Using_dfu-utils_from_Windows_PC_Host">Using dfu-utils from Windows PC Host</span></h3>
<p>Follow the below steps to install the dfu-tools.<br />
1. Download the dfu-utils <a rel="nofollow" class="external text" href="http://dfu-util.sourceforge.net/releases/">dfu-util-0.6-win32.zip.bz2</a> and unzip to some folder (say c:\dfu) <br />
2. Download the <a rel="nofollow" class="external text" href="https://sourceforge.net/projects/libwdi/files/zadig/">zdaig application</a> and execute zdaig application, install winUSB driver.<br />
3. Go through DFU section mentioned above for setup the EVM for DFU.<br />
</p>
<pre>Note: For flashing fresh boards, refer to peripheral usb boot mode section.
The initial bootloader (u-boot-spl.bin) shall be loaded to EVM using usbboot tool running from Ubuntu Host PC. 
For more details refer <a rel="nofollow" class="external text" href="File_Flashing_binariesto_the_factory_boards_using_Device_Firmware_Upgrade(DFU).html">Flashing_binaries_to_the_factory_boards_using_Device_Firmware_Upgrade_(DFU).pdf</a>
</pre>
<p>4. Connect the EVM (running DFU) to windows PC through superspeed usb cable. Windows host will detect the EVM as "download gadget". <br />
5. Copy required binary files to flash c:\dfu folder. Open command prompt and execute dfu-util.exe.<br />
</p>
<pre>c:\dfu&gt; dfu-util –l   
This will list all dfu interfaces
</pre>
<p>6. Follow DFU section mentioned above for flashing the binaries to eMMC.<br />
</p>
<pre>c:\dfu&gt; dfu-util -D &lt;file-name&gt; -c 1 -i 0 -a &lt;alt number&gt;
</pre>
<p><br />
</p>
<h1><span class="mw-headline" id="IPC">IPC</span></h1>
<p>The table below shows the remote cores and their corresponding definitions in the kernel dtsi files (<code>${INSTALL_DIR}/board-support/linux/arch/arm/boot/dts/dra7.dtsi, and dra74x.dtsi</code>), as well as the argument to be used in the loading/unloading commands.
</p>
<table border="1" cellpadding="4" cellspacing="0" style="border:#c9c9c9 1px solid; margin: 1em 1em 1em 0; border-collapse: collapse;">
<tbody><tr>
<td align="center" style="background:#f0f0f0;"><b>Remote Core</b>
</td>
<td align="center" style="background:#f0f0f0;"><b>Definition in dtsi  file</b>
</td>
<td align="center" style="background:#f0f0f0;"><b>Argument in loading/unloading</b>
</td></tr>
<tr>
<td>IPU1</td>
<td>ipu@58820000</td>
<td>58820000.ipu
</td></tr>
<tr>
<td>IPU2</td>
<td>ipu@55020000</td>
<td>55020000.ipu
</td></tr>
<tr>
<td>DSP1</td>
<td>dsp@40800000</td>
<td>40800000.dsp
</td></tr>
<tr>
<td>DSP2</td>
<td>dsp@41000000</td>
<td>41000000.dsp
</td></tr></tbody></table>
<p>For example, the argument of <code>55020000.ipu</code> corresponds to IPU2 as can be seen from <code>dra7.dtsi</code>.
</p>
<pre>   ipu2: ipu@55020000 {
        compatible = &quot;ti,dra7-rproc-ipu&quot;;</pre>
<p>In the sections below, <code>55020000.ipu</code> will be used as the example. For a specific use case, please select the corresponding argument which is applicable.
</p>
<h2><span class="mw-headline" id="Unloading_and_loading_remotecores_at_runtime">Unloading and loading remotecores at runtime</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_ipc&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>It is possible to unload and reload a remotecore at runtime from Linux using the <code>sysfs</code> interface. 
</p>
<pre>target $ cd /sys/bus/platform/drivers/omap-rproc/ 
target $ echo 55020000.ipu &gt; unbind 
target $ echo 55020000.ipu &gt; bind
</pre>
<p>The <code>echo 55020000.ipu &gt; unbind</code> command tears down the communication channels between the A15 and the remotecore and unloads the remotecore. Any application level shutdown that needs to be performed needs to be handled by the system integrator.
</p><p>The <code>echo 55020000.ipu &gt; bind</code> loads the appropriate firmware binary onto the remotecore.
</p>
<h2><span class="mw-headline" id="Changing_the_remotecore_binary_at_runtime">Changing the remotecore binary at runtime</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_ipc&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To change the remotecore binary at runtime
</p>
<ol><li>Unload the remotecore using <code>unbind</code>.</li>
<li>Change the remotecore binary in the firmware folder. Default location is <code>/lib/firmware</code> on the target filesystem.</li>
<li>Load the remotecore using <code>bind</code>.</li></ol>
<pre>target $ cd /sys/bus/platform/drivers/omap-rproc/
target $ echo 55020000.ipu &gt; unbind
target $ cp /home/root/new-binary.xem4 /lib/firmware/dra7-ipu2-fw.xem4
target $ echo 55020000.ipu &gt; bind</pre>
<p>If it is desirable to avoid overwriting the existing remote binaries, the method of symbolic links can be used instead of direct copy. For example, Processor SDK provides two types of DSP remotecore binaries: one for DSPDCE (dra7-dsp1-fw.xe66.dspdce-fw) and another one for OpenCL (dra7-dsp1-fw.xe66.opencl-monitor). dra7-dsp1-fw.xe66 is created as a symbolic link by default pointing to the OpenCL binary. When it is needed to switch to DSPDCE, the symbolic link of dra7-dsp1-fw.xe66 can be updated pointing to dra7-dsp1-fw.xe66.dspdce-fw.
</p>
<pre>target $ cd /sys/bus/platform/drivers/omap-rproc/
target $ echo 40800000.dsp &gt; unbind
target $ rm /lib/firmware/dra7-dsp1-fw.xe66
target $ ln -s /lib/firmware/dra7-dsp1-fw.xe66.dspdce-fw /lib/firmware/dra7-dsp1-fw.xe66
target $ echo 40800000.dsp &gt; bind</pre>
<p>After the switch, copycodectest application can be run to verify that DSPDCE firmware is loaded. This application fills the input buffer with a number entered as the argument and after process the output buffer is tested for the same pattern.
</p><p>usage: copycodectest pattern.
</p><p>Example:
</p>
<pre> target # copycodectest 123
</pre>
<p>Sample console output:
</p>
<pre>  root@am57xx-evm:~# copycodectest 123
  0x22070: Opening Engine..
  Created dsp_universalCopy
  Fill input buffer with pattern 123
  Verifing the UniversalCopy algorithm
  copycodectest executed successfully
</pre>
<h2><span class="mw-headline" id="Loading_firmware_during_initial_boot_without_using_udev">Loading firmware during initial boot without using udev</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_ipc&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>During the default  boot, firmware is supplied to the kernel by <code>udev</code>. Starting the <code>udev</code> service on boot causes a few seconds increase in boot time. In cases where a quick boot is required, the user may not start the <code>udev</code> service in boot. In such cases, firmware can be supplied to the kernel using the sysfs interface. An example script is shown below.
</p>
<pre>FW_NAMES=&quot;dra7-dsp1-fw.xe66 dra7-dsp2-fw.xe66 dra7-ipu1-fw.xem4 dra7-ipu2-fw.xem4&quot;
for FW in $FW_NAMES&#160;; do
    echo 1 &gt; /sys/class/firmware/$FW/loading
    cat /lib/firmware/$FW &gt; /sys/class/firmware/$FW/data
    echo 0 &gt; /sys/class/firmware/$FW/loading
done</pre>
<h2><span class="mw-headline" id="Handling_the_IPU_bitbanding_region">Handling the IPU bitbanding region</span></h2>
<p>The ARM Cortex-M4 memory map includes a bit-banding region of memory from 0x4000:0000 to 0x400F:FFFF and 0x4200:0000 to 0x43FF:FFFF. Here is a Cortex-M4 memory map picture from ARM:
</p><p><a rel="nofollow" class="external free" href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0553a/CHDBIJJE.html">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0553a/CHDBIJJE.html</a>
</p><p>Many Vayu components running on the IPUs, including IPC, must access peripherals physically located in this bit-banding region. As a result, these accesses must be performed indirectly using a virtual memory address, mapped using the IPU's AMMU.
</p><p>Many of the components aligned on mapping this memory using one Large AMMU page that maps 512M of physical memory beginning at 0x4000:0000 to virtual memory beginning at 0x6000:0000. Then the components (by default) access the peripherals using the 0x6XXX:XXXX address space.
</p>
<h3><span class="mw-headline" id="IPC_specifics">IPC specifics</span></h3>
<p>IPC follows the convention of, by default, accessing memory physically located at 0x4XXX:XXXX using virtual memory at 0x6XXX:XXXX. You can see an example of this here - note the mailbox addresses configured here are in the 06XXX:XXXX range:
</p><p><a rel="nofollow" class="external free" href="http://git.ti.com/cgit/cgit.cgi/ipc/ipcdev.git/tree/packages/ti/sdo/ipc/family/vayu/InterruptIpu.xs">http://git.ti.com/cgit/cgit.cgi/ipc/ipcdev.git/tree/packages/ti/sdo/ipc/family/vayu/InterruptIpu.xs</a>
</p><p>In that same file, you can see that these addresses are configurable, and the default 0x6XXX:XXXX addresses are only used if other addresses haven't already been configured by the system integrator (e.g. in a .cfg script). Users can override these default mailbox addresses using the ti.sdo.ipc.family.vayu.InterruptIpu module's mailboxBaseAddr[] array, documented here:
</p><p><a rel="nofollow" class="external free" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/ipc/latest/docs/cdoc/ti/sdo/ipc/family/vayu/InterruptIpu.html#metamailbox.Base.Addr">http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/ipc/latest/docs/cdoc/ti/sdo/ipc/family/vayu/InterruptIpu.html#metamailbox.Base.Addr</a>
</p>
<h1><span class="mw-headline" id="Using_the_Late_attach_functionality">Using the Late attach functionality</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><span style="color:red"> <b>NOTE!</b> </span> This version of PSDKLA release supports Early Boot / Late Attach of remoteproc cores IPU1, IPU2, DSP1 and DSP2. 
</p><p><br />
</p><p>To satisfy the startup time requirements of specific use cases, one
may need the boot loader to boot a remote core before booting the A15
with the linux kernel. The kernel then attaches to the already booted
remote core for further communication. We refer to this feature as the
&quot;Early Boot - Late Attach&quot; functionality. The &quot;Early
Boot&quot; functionality is provided by the boot loader. The
&quot;Late Attach&quot; functionality is a feature of the Linux
Kernel. This functionality was added to Processor SDK - Linux Automotive from v3.01.
</p><p>Below are the steps required to test early boot late attach functionality.
</p>
<h2><span class="mw-headline" id="Configuring_U-Boot">Configuring U-Boot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Please apply this patch <a rel="nofollow" class="external free" href="File_0001-u-boot-configs-Enable-configs-for-Early-boot-support.html">http://processors.wiki.ti.com/index.php/File:0001-u-boot-configs-Enable-configs-for-Early-boot-support.zip</a> on U-boot repository in board-support to enable Early Boot of remoteproc cores.
</p><p>and rebuild u-boot using the configuration <code>dra7xx_evm_config</code>.
</p>
<h2><span class="mw-headline" id="Building_the_Linux_kernel_device_tree">Building the Linux kernel device tree</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Linux kernel contains the &quot;Late Attach&quot; feature builtin. The feature is enabled or disabled on a per remote core basis at boot time through device tree node attributes. To enable &quot;Late Attach&quot; for a remote core, 2 attributes need to be set on the remote core and each of the timer, mmu nodes used by the remotecore. These two attributes are
</p>
<ol><li><code>ti,no-idle-on-init</code></li>
<li><code>ti,no-reset-on-init</code>.</li></ol>
<p>These two attributes together signal to the kernel that
</p>
<ol><li>Late attach feature is in use for the remote core.</li>
<li>The remotecore and other nodes have been configured and are in use before the kernel boot. These should not be reset or idled during kernel boot.</li></ol>
<p>The Linux kernel tree delivered with Processor SDK Linux Automotive includes a dts file that shows how to enable late attach feature for IPU2 on a DRA7xx evm . This file was built in the following manner. The timers used by IPU2 are found from <code>$PSDKLA/board-support/linux/arch/arm/boot/dts/dra7-evm.dts</code>
</p>
<pre>&amp;ipu2 {
    status = &quot;okay&quot;;
    memory-region = &lt;&amp;ipu2_cma_pool&gt;;
    mboxes = &lt;&amp;mailbox6 &amp;mbox_ipu2_legacy&gt;;
    timers = &lt;&amp;timer3&gt;;
    watchdog-timers = &lt;&amp;timer4&gt;, &lt;&amp;timer9&gt;;
};</pre>
<p>The MMU used by IPU2 can be found from <code>$PSDKLA/board-support/linux/arch/arm/boot/dts/dra7.dtsi</code>.
</p>
<pre>        ipu2: ipu@55020000 {
            compatible = &quot;ti,dra7-rproc-ipu&quot;;
            reg = &lt;0x55020000 0x10000&gt;;
            reg-names = &quot;l2ram&quot;;
            ti,hwmods = &quot;ipu2&quot;;
            iommus = &lt;&amp;mmu_ipu2&gt;;
            ti,rproc-standby-info = &lt;0x4a008920&gt;;
            status = &quot;disabled&quot;;
        };</pre>
<p>IPU2 uses <code>timer3</code> to supply the OS tick and <code>timer4</code> and <code>timer9</code> as watchdog timers. IPU2 also uses an MMU referred to as <code>mmu_ipu2</code> in the device tree. All of these nodes including the IPU2 node need to have the three attributes described above set.
</p><p>We also reserve a small region of memory(1 MB) for U-Boot to store the pagetables of the MMU's for the DSP's and the IPU's. The memory reservation prevents the kernel from reusing the memory.
</p>
<pre>&amp;reserved_mem {
	mmu-early-page-tables@95700000 {
		reg = &lt;0x0 0x95700000 0x0 0x100000&gt;;
		no-map;
		status = "okay";
	};
};
</pre>
<p>The file <code>$PSDKLA/board-support/linux/arch/arm/boot/dts/dra7-evm-late-attach.dts</code> has the full example. This file is structured such that it includes an existing configuration first
</p>
<pre>#include &quot;dra7-evm.dts&quot;</pre>
<p>and then sets only the attributes required for enabling late attach functionality for each remoteproc with the inclusion of dtsi files. Here dra7-ipu-common-early-boot.dtsi sets late-attach functionality for both IPU1 and IPU2, dra7-dsp-common-early-boot.dtsi sets late-attach functionality for DSP1 and dra74x-dsp-common-early-boot.dtsi sets late-attach functionality for DSP2.
</p>
<pre> #include "dra7-ipu-common-early-boot.dtsi"
 #include "dra7-dsp-common-early-boot.dtsi"
 #include "dra74x-dsp-common-early-boot.dtsi"
</pre>
<p>If Late attach is not required for a specific core, delete the firmware from boot partition and remove the late-attach attributes for that cores in the dts and rebuild the dtb. Late attach can be enabled for other hardware configurations by choosing a different base <code>.dts</code> file. e.g. If the EVM has an OSD lcd instead of 10&quot; LCD, you can change the include to &quot;dra7-evm-lcd-osd.dts&quot; instead of &quot;dra7-evm-lcd10.dts&quot;.
</p><p>Build the <code>.dtb</code> file and use it for linux boot instead of the regular dtb file.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Boot_setup">Boot setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Messageq_single firmwares from ipc have been used to validate Early-Boot-Late-Attach functionality.
</p>
<ol><li>Configure the EVM for boot from SD card.</li>
<li>Use the MLO and u-boot.img built above with the early boot functionality enabled.</li>
<li>Use the dtb file built with the late attach functionality enabled.</li>
<li>Sybolic link IPC firmware in lib/firmware of the rootfs with the command <code> ln -s ipc/ti_platforms_evmDRA7XX_ipu2/messageq_single.xem4 dra7-ipu2-fw.xem4 </code> and follow the same for other 3 firmwares.</li></ol>
<table class="wikitable">
<tbody><tr>
<th>Core
</th>
<th>Binary path on target relative to /lib/firmware
</th>
<th>Binary should be symlinked to
</th></tr>
<tr>
<td>DSP2
</td>
<td>./ipc/ti_platforms_evmDRA7XX_dsp2/messageq_single.xe66
</td>
<td>/lib/firmware/dra7-dsp2-fw.xe66
</td></tr>
<tr>
<td>IPU2
</td>
<td>./ipc/ti_platforms_evmDRA7XX_ipu2/messageq_single.xem4
</td>
<td>/lib/firmware/dra7-ipu2-fw.xem4
</td></tr>
<tr>
<td>IPU1
</td>
<td>./ipc/ti_platforms_evmDRA7XX_ipu1/messageq_single.xem4
</td>
<td>/lib/firmware/dra7-ipu1-fw.xem4
</td></tr>
<tr>
<td>DSP1
</td>
<td>./ipc/ti_platforms_evmDRA7XX_dsp1/messageq_single.xe66
</td>
<td>/lib/firmware/dra7-dsp1-fw.xe66
</td></tr></tbody></table>
<p>Copy the IPU1, IPU2, DSP1 and DSP2 binaries into the boot partition of the SD card. 
</p><p>Boot the board and test the IPU2 functionality with this command 
</p>
<pre>root@dra7xx-evm:~#MessageQApp 10 1 </pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Confirming_Late_attach_functionality">Confirming Late attach functionality</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>There is no default indication of whether late attach feature is in use or not. This is by design as use of late attach should be invisible to the user. For debug purposes, enable the <code>DEBUG</code> flag on <code>drivers/remoteproc/omap_remoteproc.c</code> during kernel compilation. If late attach functionality is in use, additional traces will now show up in the dmesg logs.
</p><p>With messsageq_single firmwares provided with this release, timestamp is taken, when remoteproc core started up and entered main. Execute this command
</p>
<pre>root@dra7xx-evm:~#cat /sys/kernel/debug/remoteproc/remoteproc1/trace0</pre> 
<p>shows
</p>
<pre>[0][      0.000] Watchdog enabled: TimerBase = 0x6883e000 SMP-Core = 0 Freq = 19200000
[0][      0.000] Watchdog enabled: TimerBase = 0x688e6000 SMP-Core = 1 Freq = 19200000
[0][      0.000] Watchdog_restore registered as a resume callback
[0][      0.000] 18 Resource entries at 0x3000
[0][      0.000] messageq_single.c:main: MultiProc id = 1
[0][      0.000] Time at startup()  is 30172 ticks
[0][      0.000] Time at main()  is 30293 ticks
[0][      0.000] registering rpmsg-proto:rpmsg-proto service on 61 with HOST
[0][      0.000] tsk1Fxn: created MessageQ: SLAVE_IPU2; QueueID: 0x10080
[0][      0.000] Awaiting sync message from host...
</pre>
<p>When the core is bootstrapped from u-boot, the values of 'Time at startup()' and 'Time at main()' should be below 60,000 ticks since it typically takes less than 2s to load the firmware. These values are above 500,000 when the firmware is bootstrapped from kernel. Eary-Boot and Late-Attach validation can be verified for other cores IPU1, DSP1 and DSP2 also same way with messageq_single firmwares.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Customizing_Early_Boot_for_a_Usecase">Customizing Early Boot for a Usecase</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The Early boot code in U-Boot does the necessary configuration to bring up a remotecore. This includes the timers and the MMUs. It does not configure any other peripherals by default. Some usecases may require additional peripheral configuration before running the remotecore. U-Boot includes placeholder functions that can be populated for this purpose. These can be found in the file <code>$GLSDK/board-support/u-boot/board/ti/dra7xx/evm.c</code>.
</p>
<pre>/*
 * If the remotecore binary expects any peripherals to be setup before it has
 * booted, configure them here.
 *
 * These functions are left empty by default as their operation is usecase
 * specific.
 */

u32 ipu1_config_peripherals(u32 core_id, struct rproc *cfg)
{
    return 0;
}

u32 ipu2_config_peripherals(u32 core_id, struct rproc *cfg)
{
    return 0;
}

u32 dsp1_config_peripherals(u32 core_id, struct rproc *cfg)
{
    return 0;
}

u32 dsp2_config_peripherals(u32 core_id, struct rproc *cfg)
{
    return 0;
}</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Validation_and_Limitations">Validation and Limitations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Late attach functionality has been validated for all the remotecores IPU2,IPU1,DSP1 and DSP2. However there is the following limitation.
</p>
<ul><li>U-Boot has only been updated to load remotecore binaries from the  boot partition of the SD card or eMMC. If you desire to load  remotecore binaries from other media (e.g. QSPI), the code to load the binaries needs to be added to U-Boot.</li></ul>
<h2><span class="mw-headline" id="Debug_guide">Debug guide</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_late_attach&amp;action=edit&amp;section=T-8" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A more detailed user guide of Early Boot and Late Attach functionality can be found at <a href="Early_Boot_and_Late_Attach_in_Linux.html" title="Early Boot and Late Attach in Linux">Early Boot and Late Attach in Linux</a>
</p>
<h1><span id="Changing_MPU_Frequency_(DVFS)"></span><span class="mw-headline" id="Changing_MPU_Frequency_.28DVFS.29">Changing MPU Frequency (DVFS)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_Pm_dvfs&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>DRA7xx supports running MPU (CPU0/1) at more than one frequency. 
<br />User may chose to run at different frequencies based on performance requirements for the application/use-case targeted.<br />
The Data Manual contains all the frequencies supported by the Hardware and the Processor SDK Linux_Automotive Datasheet available with current release contains details of supported frequencies in the Software.<br />
Please refer to the following wiki for details on how to change CPU frequency and voltage <a rel="nofollow" class="external text" href="GLSDK_DRA7xx_PM_DVFS_User_Guide.html">DVFS UserGuide</a>
</p>
<h1><span class="mw-headline" id="Testing_OpenCL">Testing OpenCL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_opencv_opencl&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><span style="color:red"> <b>NOTE!</b> </span> Support for OpenCL is available only upto K4.4 releases. Check the release notes to see if this feature is available on the Processor SDK Linux Automotive release you are using.
</p><p><br />
</p><p>OpenCL is supported in the SDK from the 3.02 release. To test OpenCL, please follow the below steps.
</p>
<ol style="list-style-type: decimal;">
<li><p>OpenCL requires reserving areas of memory to allow transfer of data between A15 and DSP. To reserve memory, apply the below kernel patch, rebuild the device tree file and boot with the updated device tree.</p>
<p><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38240">http://review.omapzoom.org/38240</a> <code>dra7xx: dts: reserve memory for opencl</code></p></li>
<li><p>Ensure that the OpenCL firmware is loaded to the DSP. In the default PSDKLA filesystem, OpenCL firmware is not loaded by default. Follow the below steps to select the right firmware and reboot.</p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm:~# cd /lib/firmware/
root@dra7xx-evm:/lib/firmware# ls -la *dsp*-fw.xe66                                                                  
lrwxrwxrwx    1 1000     pulse           55 Feb 13  2017 dra7-dsp1-fw.xe66 -&gt; ipc/ti_platforms_evmDRA7XX_dsp1/test_omx_dsp1_vayu.xe66
lrwxrwxrwx    1 1000     pulse           55 Feb 13  2017 dra7-dsp2-fw.xe66 -&gt; ipc/ti_platforms_evmDRA7XX_dsp2/test_omx_dsp2_vayu.xe66
root@dra7xx-evm:/lib/firmware# rm dra7-dsp1-fw.xe66 dra7-dsp2-fw.xe66
root@dra7xx-evm:/lib/firmware# ln -s dra7-dsp1-fw.xe66.opencl-monitor dra7-dsp1-fw.xe66
root@dra7xx-evm:/lib/firmware# ln -s dra7-dsp2-fw.xe66.opencl-monitor dra7-dsp2-fw.xe66                              
root@dra7xx-evm:/lib/firmware# ls -la *dsp*-fw.xe66                                                                  
lrwxrwxrwx    1 root     root            32 Feb 24  2017 dra7-dsp1-fw.xe66 -&gt; dra7-dsp1-fw.xe66.opencl-monitor
lrwxrwxrwx    1 root     root            32 Feb 24  2017 dra7-dsp2-fw.xe66 -&gt; dra7-dsp2-fw.xe66.opencl-monitor
</p>
root@dra7xx-evm:/lib/firmware# sync&lt;/source&gt;</li>
<li><p>Ensure that the cmemk module is inserted in the kernel.</p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm:~# lsmod | grep cmemk
</p>
cmemk                  35110  2&lt;/source&gt;</li>
<li><p>Ensure that CMEM memory reservations are in effect. <a rel="nofollow" class="external text" href="http://downloads.ti.com/mctools/esd/docs/opencl/memory/ddr-partition.html">Link</a></p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm:~# cat /proc/iomem | grep -i cmem
40500000-405fffff&#160;: CMEM
</p>
a0000000-abffffff&#160;: CMEM&lt;/source&gt;</li>
<li><p>OpenCL examples are present in the filesystem in <code>/usr/share/ti/examples/opencl</code>. The examples are prebuilt and can be executed on the target.</p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm:/usr/share/ti/examples/opencl# ls
Makefile         dgemm            float_compute    monte_carlo      offline_embed    sgemm            vecadd_openmp
buffer           dsplib_fft       make.inc         null             ooo_callback     simple           vecadd_openmp_t
ccode            edmamgr          matmpy           offline          platforms        vecadd
</p><p>root@dra7xx-evm:/usr/share/ti/examples/opencl# cd platforms/
root@dra7xx-evm:/usr/share/ti/examples/opencl/platforms# ls
Makefile       Makefile.rtos  main.cpp       main.o         platforms
</p><p>root@dra7xx-evm:/usr/share/ti/examples/opencl/platforms# ./platforms 
PLATFORM: TI AM57x
Version: OpenCL 1.1 TI product version 01.01.11.2 (Feb 19 2017 21:41:17)
Vendor&#160;: Texas Instruments, Inc.
Profile: FULL_PROFILE
</p>
<pre>   DEVICE: TI Multicore C66 DSP
   Type      &#160;: ACCELERATOR
   CompUnits &#160;: 2
   Frequency &#160;: 0.6 GHz
   Glb Mem   &#160;:  163840 KB
   GlbExt1 Mem:       0 KB
   GlbExt2 Mem:       0 KB
   Msmc Mem  &#160;:    1024 KB
   Loc Mem   &#160;:     128 KB
   Max Alloc &#160;:  147456 KB
</pre>
<p>root@dra7xx-evm:/usr/share/ti/examples/opencl/platforms# cd ../vecadd
root@dra7xx-evm:/usr/share/ti/examples/opencl/vecadd# ./vecadd
DEVICE: TI Multicore C66 DSP
</p><p>Offloading vector addition of 8192K elements...
</p><p>Kernel Exec&#160;: Queue  to Submit: 13 us
Kernel Exec&#160;: Submit to Start&#160;: 120 us
Kernel Exec&#160;: Start  to End  &#160;: 33010 us
</p><p>Success!
&lt;/source&gt;
</p>
<p>Full instructions on building OpenCL examples are here.</p>
<p><a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/examples/build_and_run.html">http://downloads.ti.com/mctools/esd/docs/opencl/examples/build_and_run.html</a></p>
<p>Instructions on testing OpenCL examples are here. This page also includes a description of each example and the functionality demonstrated by each example.</p>
<p><a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/examples/overview.html">http://downloads.ti.com/mctools/esd/docs/opencl/examples/overview.html</a></p></li></ol>
<p>Information on environment variables controlling the OpenCL runtime are described in the below link. The number of DSP's used for OpenCL and which DSP is used for OpenCL offloading can also be controlled using environment variables described in the below link.
</p><p><a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/environment_variables.html">http://downloads.ti.com/mctools/esd/docs/opencl/environment_variables.html</a>
</p>
<h1><span class="mw-headline" id="Testing_OpenCV">Testing OpenCV</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_opencv_opencl&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><span style="color:red"> <b>NOTE!</b> </span> Support for OpenCV is available only upto K4.4 releases. Check the release notes to see if this feature is available on the Processor SDK Linux Automotive release you are using.
</p><p><br />
</p><p>The 3.02 release also supports OpenCV. OpenCV is accelerated by using the C66x DSP's through OpenCL. <b>Please follow the steps to validate OpenCL before running the OpenCV tests</b>
</p>
<ol style="list-style-type: decimal;">
<li><p>Download OpenCV test data from <a rel="nofollow" class="external free" href="https://github.com/Itseez/opencv_extra/archive/master.zip">https://github.com/Itseez/opencv_extra/archive/master.zip</a> unzip this file in <code>/usr/share/OpenCV</code>. This will create a directory <code>opencv_extra-master</code> with the below contents.</p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm # ls /usr/share/OpenCV/opencv_extra-master/
3d  android_manager_internal_docs  classifiers  gpu_demos_pack  learning_opencv_v2  README.md  testdata&lt;/source&gt;
</p>
<p>The testsuite expects the <code>testdata</code> folder in <code>/usr/share/OpenCV</code>. Create a symbolic link to the <code>testdata</code> folder in <code>/usr/share/OpenCV</code> or move the <code>testdata</code> to the required location.</p>
&lt;source lang="bash"&gt;root@dra7xx-evm:/usr/share/OpenCV# ln -s opencv_extra-master/testdata .&lt;/source&gt;</li>
<li><p>Run the tests with the following commands</p>
<p>&lt;source lang="bash"&gt;root@dra7xx-evm:/usr/share/OpenCV# cd titestsuite/
root@dra7xx-evm:/usr/share/OpenCV/titestsuite# ls
runtests          setupEnv.sh       test_core_ocl     test_imgproc_ocl
root@dra7xx-evm:/usr/share/OpenCV/titestsuite# source setupEnv.sh 
root@dra7xx-evm:/usr/share/OpenCV/titestsuite# ./runtests&lt;/source&gt;
</p>
<p>The tests run for ~70 mins on DRA75x platform which has 2 DSP's. Processing is offloaded transparently to the DSP where possible.</p></li></ol>
<p>For more information on OpenCV and accelerating OpenCV using the C66x DSP's via OpenCL, please refer to the below links.
</p>
<ol><li><a rel="nofollow" class="external text" href="OpenCV.html">TI Processors Wiki OpenCV page</a></li>
<li><a rel="nofollow" class="external text" href="OpenCV.html#OpenCV_OpenCL_related_framework_details:_how_to_add_new_DSP_kernel">How to add a new DSP Kernel</a></li>
<li><a rel="nofollow" class="external text" href="OpenCV.html#Creating_OpenCL_C_kernel_optimized_for_C66_core">Creating OpenCL C Kernel optimized for C66 core</a></li></ol>
<p>OpenCV can be rebuilt and installed via the yocto pacakge opencv.
</p>
<h1><span class="mw-headline" id="Ducati_performance_measurement">Ducati performance measurement</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_opencv_opencl&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Ducati performance is assessed by factors like IVA use, IVA fps, cpu load etc. To obtain these values changes are required in ipumm.
</p>
<h4><span class="mw-headline" id="Changes_to_be_done_in_ipumm_Makefile">Changes to be done in ipumm Makefile</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Psdkla_opencv_opencl&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ol><li>Open the Makefile in ipumm (under component-sources of installer).</li>
<li>Set PROFILER to ENABLE (by default it's DISABLE).</li>
<li>Make sure that TRACELEVEL is set to 0 during performance measurement (High trace level effects the performance and will not give the best results).</li>
<li>Open ipumm/src/ti/utils/profile.c and set kpi_control=7(default it is set to 0)</li>
<li>Change directory to parent directory of component-sources.</li>
<li>Run make ipumm</li>
<li>dra7-ipu2-fw.xem4 is created in ipumm directory. Copy this to the /lib/firmware of rootfs and reboot</li>
<li>Execute video decode usecase with gstreamer or viddec3test.</li>
<li>Execute cat /sys/kernel/debug/remoteproc/remoteproc1/trace0 . Traces will show the iva load, fps achieved, average and Peak MHz etc.</li></ol>
<h1><span class="mw-headline" id="SOC_Performance_monitoring_tools">SOC Performance monitoring tools</span></h1>
<p><span style="color:red"> <b>NOTE!</b> </span> Support for SoC performance monitoring tool is available only upto K4.4 releases. Check the release notes to see if this feature is available on the Processor SDK Linux Automotive release you are using.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Introduction_2">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<hr />
<p>The SOC Performance monitoring tools are a set of tools that are included in the default filesystem that allow the user to visualize various SOC parameters real-time on the screen.<br />
Currently, there are two tools and a suite of scripts and utilities to use them.
</p>
<ol><li>soc-performance-monitor</li>
<li>soc-ddr-bw-visualize</li></ol>
<p>Both these applications are Wayland applications and need to be invoked after running Weston. <br />
</p><p>These tools bring in the capability to visualize the following:
</p>
<ol><li>DDR BW Utilization
<ol><li>Overall DDR BW Usage</li>
<li>Split of the traffic between the two EMIF's</li>
<li>A real time "top" like functionality that depicts the list of "Top 6" initiators generating the traffic.</li></ol></li>
<li>Voltage of the various rails</li>
<li>Frequency of the various cores</li>
<li>Temperature (read from on die temperature sensors)</li>
<li>CPU Load information of the various processor cores including the GPU and DSP.</li>
<li>Boot time results (requires rebuild of u-boot and kernel), refer instructions below.</li>
<li>Power plot (Will be available soon. Note that this requires board modification on the EVM)</li></ol>
<div class="floatnone"><a href="File_Updated_screen_shot_of_soc_performance_monitoring_tools.html" class="image" title="SOC_PERF_Screenshot"><img alt="SOC_PERF_Screenshot" src="https://processors.wiki.ti.com/images/1/16/Updated_screen_shot_of_soc_performance_monitoring_tools.png" width="750" height="420" /></a></div>
<p><br />
</p>
<h2><span class="mw-headline" id="Getting_started">Getting started</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<hr />
<ul><li>Prepare the card with root filesystem provided with the installer.</li>
<li>Boot up</li>
<li>Start weston <br /></li></ul>
<pre>target #  /etc/init.d/weston start
</pre>
<ul><li>Copy the required scripts into a temporary folder (this is to allow you to experiment with the settings later)</li></ul>
<pre>target # mkdir temp
target # cd temp
target # cp /etc/glsdkstatcoll/* .
target # cp /etc/visualization_scripts/* .
</pre>
<ul><li>You should see the following file in the directory after the above operation.</li></ul>
<pre>target # ls -al
drwxr-xr-x    2 root     root          4096 Mar 22 18:01 .
drwxr-xr-x    3 root     root          4096 Mar 22 18:01 ..
-rw-r--r--    1 root     root           114 Mar 22 18:01 config.ini
-rw-r--r--    1 root     root           265 Mar 22 18:01 dummy_boot_time_results.sh
-rw-r--r--    1 root     root           419 Mar 22 18:01 dummy_cpu_load.sh
-rw-r--r--    1 root     root           899 Mar 22 18:01 getFrequency.sh
-rw-r--r--    1 root     root          2293 Mar 22 18:01 getTemp.sh
-rw-r--r--    1 root     root           371 Mar 22 18:01 getVoltage.sh
-rw-r--r--    1 root     root           254 Mar 22 18:01 initiators.cfg
-rw-r--r--    1 root     root           143 Mar 22 18:01 list-boot-times.sh
-rw-r--r--    1 root     root           367 Mar 22 18:01 send_boot_times_to_monitor.sh
-rw-r--r--    1 root     root           496 Mar 22 18:01 soc_performance_monitor.cfg
-rw-r--r--    1 root     root           133 Mar 22 18:01 start_visualization_test.sh
</pre>
<ul><li>Running the soc-performance-monitor, this tool has two pre-requisites.</li></ul>
<ol><li>The name of the fifo configured in the file soc_performance_monitor.cfg needs to be created</li>
<li>The file soc_performance_monitor.cfg should be present in the current directory. This should be done in the above steps.</li></ol>
<ul><li>Creating the fifo (mentioned in the soc_performance_monitor.cfg)</li></ul>
<pre>target # mkfifo /tmp/socfifo
</pre>
<ul><li>Run the tool for various performance metrics</li></ul>
<pre>target # soc-performance-monitor &amp;
</pre>
<ul><li>Run the tool for DDR BW Visualization</li></ul>
<pre>target # mkfifo /tmp/statcollfifo
target # soc-ddr-bw-visualizer &amp;
</pre>
<p>The following sections will talk about the how to populate the data into tools and further controls that are possible.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Quick_guide_to_available_plugins">Quick guide to available plugins</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Plugins are the entities (scripts/native binaries) that can be used to send commands to the SOC Performance Monitoring tools. <br />
</p><p>The main intent of this is to separate the visualization engine from the data collection part and allow full configuration of the application.
</p><p>When the application (soc-performance-monitor) is invoked, it starts up with the default data which is set to zero. To populate the real values, the user can use the scripts provided in the prebuilt filesystem.
</p>
<h3><span class="mw-headline" id="Temperature_data">Temperature data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The temperature data is read from the on-die temperature registers and sent to the visualization tool.
The file system comes with a script that does this functionality.
</p>
<pre>target # sh getTemp.sh
</pre>
<p>Invoking the above command will populate the temperature table with the current temperature.
</p>
<h3><span class="mw-headline" id="Voltage_data">Voltage data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-5" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The voltage data is read from the omapconf utility and then parsing out the required information to be later sent to the visualization tool.
The file system comes with a script that does this functionality.
</p>
<pre>target # sh getVoltage.sh
</pre>
<p>Invoking the above command will populate the Temperature table with the configured voltage for the various rails.
</p>
<h3><span class="mw-headline" id="Frequency_data">Frequency data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-6" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The frequency data is read from the omapconf utility and then parsing out the required information to be later sent to the visualization tool.
The file system comes with a script that does this functionality.
</p>
<pre>target # sh getFrequency.sh
</pre>
<p>Invoking the above command will populate the Frequency table with the configured frequency for the various cores.
</p>
<h3><span class="mw-headline" id="CPU_Load_information">CPU Load information</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-7" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The CPU load information need individual plugin modules for each of the cores. This is envisioned to be different for different systems.
The default filesystem contains the plugins required for reading the MPU(A15) and the GPU(SGX544 MP2). 
Other plugins for measuring the loads for the IPU1, IPU2, DSP1 and DSP2 will be available at a later time.
</p>
<h4><span class="mw-headline" id="Measuring_the_MPU_load">Measuring the MPU load</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-8" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The filesystem is populated with a binary which is called "mpuload" that reads the /proc/stat interface and derives the load.
The user can run the utility in the background with the 
</p>
<pre>target # mpuload FIFO <time>

Example usage:

target # mpuload /tmp/socfifo 1000 &amp;
</time></pre>
<p>After running this binary the MPU load in the Bar Graph of the CPU load will be updated dynamically at an interval of 1 second.
</p>
<h4><span class="mw-headline" id="Measuring_the_GPU_load">Measuring the GPU load</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-9" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The filesystem is populated with a binary called as "pvrscope" that reads the SGX registers via a library called libPVRScopeDeveloper.a
This utility invokes the APIs provided by IMG as part of the Imagination PowerVR SDK and then populates the required FIFO.
</p><p>Usage instructions:
</p>
<pre>target # pvrscope &lt;option&gt; &lt;time_seconds&gt;

options: 
          -f    write into the FIFO (/tmp/socfifo)
          -c    output to console

time:
          1-n   specified in seconds
          0     run forever
</pre>
<p>After running this utility, the GPU load in the BAR Graph of the CPU load area will be updated at an interval of 1 second.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Boot_time_measurement">Boot time measurement</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-11" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This feature will be provided at future release.
</p>
<h2><span class="mw-headline" id="Order_of_execution">Order of execution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-12" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The performance visualization tools have to be executed in the following order.
</p>
<ul><li>Launch weston</li>
<li>Create required FIFOs</li>
<li>Configure the .cfg file to suit the required settings</li>
<li>Run the soc-performance-monitor and/or soc-ddr-bw-visualizer</li>
<li>Run the plugins to populate data</li></ul>
<h2><span class="mw-headline" id="Config_file_format">Config file format</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-13" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<hr />
<p>The config file has the following format. <br /> 
There are 3 different kinds of sections that can be defined, please refer to the particular section for more details. <br />
</p><p>The generic format is:
</p>
<pre>[SECTION_NAME]
VALUE_1
VALUE_2
..
..
VALUE_N
SPECIAL VALUE
&lt;blank line&gt;
</pre>
<p>Types of sections
</p>
<ol><li>GLOBAL</li>
<li>TABLE</li>
<li>BAR GRAPH</li></ol>
<h3><span class="mw-headline" id="GLOBAL_section:">GLOBAL section:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-14" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The SECTION_NAME is specified as GLOBAL followed by a sequence of key value pairs.
</p>
<pre>[GLOBAL]
KEY_1=VALUE_1
KEY_2=VALUE_2
..
..
KEY_n=VALUE_n
&lt;blank&gt;
</pre>
<p><b>Global configurations</b>
</p><p>The list of recognized global values are:
</p>
<ul><li>REFRESH_TIME_USECS</li>
<li>FIFO</li>
<li>MAX_HEIGHT</li>
<li>MAX_WIDTH</li>
<li>X_POS</li>
<li>Y_POS</li></ul>
<p><b>REFRESH_TIME_USECS:</b>
</p>
<ul><li>This will dictate the interval at which the utility is going to run.</li>
<li>The value is specified in micro seconds</li>
<li>This value decides a major trade-off, lower rate will increase the CPU load and GPU load.</li>
<li>The ideal value is about 100000 usecs</li></ul>
<p><b>FIFO:</b>
</p>
<ul><li>The value of this field is the named pipe or fifo that can be used to communicate with the application.</li>
<li>User would need to create a fifo (application will prompt if it doesn't exist)</li></ul>
<p><b>MAX_HEIGHT, MAX_WIDTH:</b>
</p>
<ul><li>The width and height of the application.</li>
<li>This can be adjusted based on the number of tables and bar graph entities.</li></ul>
<p><b>X_POS, Y_POS:</b>
</p>
<ul><li>Decide the starting offset of the application.</li>
<li>Note that there are commands to move the application (Refer commands section).</li></ul>
<h3><span class="mw-headline" id="TABLE_section:">TABLE section:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-15" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The section name can be one of the following:
</p>
<ul><li>BOOT_TIME</li>
<li>TEMPERATURE</li>
<li>VOLTAGE</li>
<li>FREQUENCY</li></ul>
<pre>[TABLE_NAME]
 VALUE_1
 VALUE_2
 ..
 ..
 VALUE_N
TITLE="TABLE TITLE",UNIT="unit to be displayed"
&lt;blank line&gt;
</pre>
<p>NOTE: The TITLE=list is a list of comma separated values and TITLE and UNIT are the only supported values.
</p>
<h3><span class="mw-headline" id="BAR_GRAPH_section:">BAR GRAPH section:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-16" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This section is the simplest section and does not allow much configuration other than the names and the title. <br />
It follows the following format:
</p>
<pre>[GRAPH_NAME]
 VALUE_1
 VALUE_2
 ..
 ..
 VALUE_N
 TITLE OF THE GRAPH
 &lt;blank line&gt;
</pre>
<h2><span class="mw-headline" id="Commands:">Commands:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-17" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<hr />
<p>The <b>FIFO</b> can be used to communicate with the soc-performance-monitor application and pass data from the command line or from other applications. <br />
There are a few commands that have been implemented to aid in modifying the running application via the FIFO.
</p><p>The commands in general have the following format:
</p>
<pre>"INSTRUCTION: DATA_1 ... DATA_N"
</pre>
<p>and they can be sent to the soc-performance-monitor by simply doing an echo:
</p>
<pre>echo "INSTRUCTION: DATA_1 ... DATA_N" &gt; FIFO
</pre>
<p>The currently supported list of supported commands are:
</p>
<ol><li>TABLE</li>
<li>CPULOAD</li></ol>
<p><b>NOTE: To execute a sequence of commands in a sequence, it is advised that a delay of REFRESH_TIME_USECS be inserted between two commands.</b> 
</p><p><br />
</p>
<h3><span class="mw-headline" id="TABLE_command">TABLE command</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-19" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The format of the TABLE command is:
</p>
<pre>"TABLE: ROW_NAME value unit"
</pre>
<p>When this command is issued, the tool will find a table entry with the ROW_NAME in Column 0 and then update the Column 1 of the table with "value unit" <br />
If the ROW_NAME is not found, then this command will have no effect.
Please note that this brings in a restriction that all the tables rows will need to have a unique name. In order to ensure this, the soc_performance_monitor.cfg file will have to be reviewed to ensure unique names.
</p><p>Example: To update the FREQUENCY table for MPU, the user can send the following command:
</p>
<pre>echo "TABLE: FREQ_MPU 1500 MHz" &gt; /tmp/socfifo
</pre>
<h3><span class="mw-headline" id="CPULOAD_command">CPULOAD command</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-20" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The format of the CPULOAD command is:
</p>
<pre>"CPULOAD: CORE_NAME value" &gt; FIFO

 CORE_NAME has to be one of the names specified in the soc_performance_monitor.cfg.
 value is in the range 0 to 100
</pre>
<p>Usually, the CPULOAD command is invoked through an application monitors the load of a specific core. <br />
In each system, the mechanism to retrieve the CPULOAD of a particular core can vary and it is for this reason that several plugins have been provided and serve as an example for further extension.
</p><p>Example: To update the CPULOAD table for GPU, the user can send the following command:
</p>
<pre>echo "CPULOAD: GPU 87" &gt; /tmp/socfifo
</pre>
<h2><span class="mw-headline" id="Executing_in_debug_mode">Executing in debug mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-21" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To launch the application in debug mode for very verbose data on the internal working of the tool, launch the tool with the following option:
</p>
<pre># soc-performance-monitor 1
</pre>
<h2><span class="mw-headline" id="Build_instructions">Build instructions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-22" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The full source of the tool is available and the required recipes have been updated as part of the recipes and upstreamed to meta-arago. <br />
Essentially, if the user builds the Yocto filesystem as documented in the SDG, the tool will get recompiled as part of it.
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Configuration_of_the_soc-ddr-bw-visualizer">Configuration of the soc-ddr-bw-visualizer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_soc_performance_monitoring_tools&amp;action=edit&amp;section=T-23" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Refer to <a href="#Using_the_statistics_collector_.28bandwidth_application.29">#Using_the_statistics_collector_.28bandwidth_application.29</a>
</p>
<ul><li>The total time that the tool runs is configured using config.ini.</li>
<li>To allow finer granularity of control to choose the initiators of interest, the user will have to modify the initiators.cfg.</li></ul>
<p>The tool will have to relaunched for the new settings to take effect.
</p>
<h1><span class="mw-headline" id="Additional_Procedures">Additional Procedures</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=edit&amp;section=2" title="Edit section: Additional Procedures">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Build_Environment_Setup">Build Environment Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_crosscompile&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>NOTE: From this release, each component i.e kernel, u-boot or any userspace application should be cross-compiled</b>
</p>
<h3><span class="mw-headline" id="Cross_Compiler_setup">Cross Compiler setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_crosscompile&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The cross compiler setup for the Rules.make is done as part of the setup.sh script in the SDK installation folder. The script for cross compiler ensures that the Linaro cross compiler toolchain is installed in the ${HOME} (or user specified) folder of the host machine.
<br /><b>Note:</b>Please ensure that the PATH variable is set in your machine to point to the cross compiler setup.
<br />To compile the code (if not using the top level Makefile to build kernel and u-boot), please ensure the environment variables ARCH and CROSS_COMPILE is set to arm and to the linaro cross compiler path respectively.
</p>
<h2><span class="mw-headline" id="Rebuilding_the_SDK_components">Rebuilding the SDK components</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_rebuilding&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The installer contains a top level Makefile to allow the re-building of the various components.
</p><p>Rebuild the SDK components by first entering the SDK directory using:
</p>
<pre><b>host $</b> cd ${INSTALL_DIR}
</pre>
<p>The installer Makefile has a number of build targets which allows you to rebuild the various components. For a complete list execute:
</p>
<pre><b>host $</b> make help
</pre>
<p>After that, each of the build targets listed by 'make help' can then be executed using:
</p>
<pre><b>host $</b> make &lt;target&gt;_clean
<b>host $</b> make &lt;target&gt;
<b>host $</b> make &lt;target&gt;_install
</pre>
<p>For example, to compile the Linux Kernel, you can use the following commands
</p>
<pre><b>host $</b> make linux_clean
<b>host $</b> make linux
<b>host $</b> make linux_install
</pre>
<p>In order to install the resulting binaries on your target, execute one of the "install" targets.  Where the binaries are copied is controlled by the <tt>EXEC_DIR</tt> variable 
in <tt>${INSTALL_DIR}/Rules.make</tt>.  By default, this variable is set up to point to your NFS mounted target file system when you execute the installer setup (<tt>setup.sh</tt>) script, 
but can be manually changed to fit your needs.
</p><p>You can remove all components generated files at any time using:
</p>
<pre><b>host $</b> make clean
</pre>
<p>And you can rebuild all components using:
</p>
<pre><b>host $</b> make all
</pre>
<p>You can then install all the resulting target files using:
</p>
<pre><b>host $</b> make install
</pre>
<h2><span class="mw-headline" id="Creating_your_own_Linux_kernel_image">Creating your own Linux kernel image</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_creatinglinuximage&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The pre-built Linux kernel image (zImage) provided with in the SDK installation folder is compiled with a default configuration. You may want to change this configuration for your application, or even alter the kernel source itself. This section shows you how to recompile the Linux kernel provided with the SDK, and shows you how to boot it instead of the default Linux kernel image.
</p><p><b>1.</b> If you haven't already done so, follow the instructions in <a href="#Starting_your_software_development">#Starting_your_software_development</a> to setup your build environment.
</p><p><b>2.</b> Recompile the kernel provided with the SDK by executing the following:
</p>
<pre><b>host $</b> cd ${INSTALL_DIR}
<b>host $</b> make linux_clean
<b>host $</b> make linux
<b>host $</b> make linux_install
</pre>
<p><b>3.</b> You will need a way for the boot loader (u-boot) to be able to reach your new zImage. Copy the new zImage that is generated in arch/arm/boot/ directory to the rootfs/boot folder.
</p><p><b>4.</b> Copy the exported Linux kernel modules from the EXEC_DIR to the /lib/modules directory to the root file system
</p><p><br />
</p>
<h2><span id="Using_the_statistics_collector_(bandwidth_application)"></span><span class="mw-headline" id="Using_the_statistics_collector_.28bandwidth_application.29">Using the statistics collector (bandwidth application)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_creatinglinuximage&amp;action=edit&amp;section=T-2" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><span style="color:red"> <b>NOTE!</b> </span> Support for SoC performance monitoring tool is available only upto K4.4 releases. Check the release notes to see if this feature is available on the Processor SDK Linux Automotive release you are using.
</p><p><br />
</p><p>The default filesystem includes a utility to determine the bandwidth statistics of each initiator in the J6 SoC. <br />
</p><p>This section will give an overview of how the user can use this effectively.
</p>
<h3><span class="mw-headline" id="Target_side">Target side</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_creatinglinuximage&amp;action=edit&amp;section=T-3" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The tool is called glsdkstatcoll and is present under the /usr/bin folder. This tool requires a config file as an input which is also part of the filesystem
</p><p>Copy the sample config file into your working directory:
</p>
<pre>target # cp /etc/glsdkstatcoll/* .
target # glsdkstatcoll -h
</pre>
<p>There are two levels of configuration that the tool allows:
</p>
<ol><li>Configuration of the interval and the total time can be controlled via <b>config.ini</b></li>
<li>The list of initiators can be configured using the <b>initiators.cfg</b> file.</li></ol>
<p>Note that both these files have to be present under the current directory.
</p><p>After configuration, the user can launch the tool as below:
</p>
<pre>target # glsdkstatcoll -f config.ini
</pre>
<p>The tool will run for the specified duration in seconds "TOTAL_TIME" in config.ini and will sample every "INTERVSAL_US" microseconds.
</p><p>The results from this tool will be available in statcollector.csv
</p>
<pre>target # ls -al statcollector.csv
</pre>
<h3><span class="mw-headline" id="Host_side">Host side</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_creatinglinuximage&amp;action=edit&amp;section=T-4" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To visualize this data, first install matplotlib:
</p>
<pre>host # sudo apt-get install python-matplotlib
host # git clone <a rel="nofollow" class="external free" href="git://git.ti.com/glsdk/example-applications.git">git://git.ti.com/glsdk/example-applications.git</a>
host # cd example-applications/bandwidth-tool/host
</pre>
<p>Since the analysis of the data will be done over many iterations, the user has been provided with a config file in which some basic configuration can be done.
</p>
<pre>host # vi configstat.ini # Set the IP Address of the target and also the directory where the statcollector.csv was generated
</pre>
<p>Once the above setup is completed, the data can be visualized as below:
</p>
<pre>host # python statcoll_plot.py
</pre>
<p>This will tool will do the following:
</p>
<ol><li>Fetch the file from the target</li>
<li>Figure out all the initiators that did not have any traffic and exclude them from the plot.</li>
<li>Plot the total traffic from EMIF1_SYS and EMIF2_SYS ports</li>
<li>Display the peak, average and average(active) traffic on the various ports.</li>
<li>Note that if the INTERVAL_US is other than 30000 microseconds, user will have to edit the statcoll_plot.py</li></ol>
<p>If the target does not have the Ethernet capabilities, then the file can be fetched and the same tool can be run like below:
</p>
<pre>host # python statcoll_plot.py -f &lt;name of the file&gt;
</pre>
<p>There are some further enhancements planned, they will be posted in the git place holder.
</p>
<h2><span class="mw-headline" id="Setting_up_Tera_Term">Setting up Tera Term</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Template:Glsdk_sdg_terraterm&amp;action=edit&amp;section=T-1" title="Edit section: ">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Tera Term is a commonly used terminal program on Windows. If you prefer to use it instead of Minicom, you can follow these steps to set it up.
</p><p><b>1.</b> Download Tera Term from <a rel="nofollow" class="external text" href="http://logmett.com/index.php?/download/tera-term-477-freeware.html">this location</a>, and start the application.
</p><p><b>2.</b> In the menu select <i>Setup-&gt;General...</i> and set:
</p>
<pre>Default port: COM1
</pre>
<p><b>3.</b> In the menu select <i>Setup-&gt;Serial Port...</i> and set the following:
</p>
<pre>Port:         COM1
Baud rate:    115200
Data:         8 bits
Parity:       none
Stop:         1 bit
Flow control: none
</pre>
<!-- 
NewPP limit report
Cached time: 20201130201744
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.308 seconds
Real time usage: 0.329 seconds
Preprocessor visited node count: 527/1000000
Preprocessor generated node count: 1916/1000000
Post‐expand include size: 195723/2097152 bytes
Template argument size: 361/2097152 bytes
Highest expansion depth: 5/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 11218/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   57.482      1 -total
 33.41%   19.202      1 Template:Glsdk_running_examples
 10.18%    5.851      1 Template:Glsdk_running_graphics_demos
  7.88%    4.532      1 Template:Glsdk_sdg_starting
  6.69%    3.847      1 Template:Glsdk_ipc
  5.65%    3.246      1 Template:Glsdk_soc_performance_monitoring_tools
  4.56%    2.622      1 Template:GLSDK_DFU
  4.29%    2.465      1 Template:Psdkla_late_attach
  3.77%    2.168      1 Template:GLSDK_Using_QSPI_Boot
  3.70%    2.129      1 Template:USB_DRD_SUPPORT
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:42748-0!canonical and timestamp 20201130201743 and revision id 237122
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Software Developers Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;oldid=237122">https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;oldid=237122</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_PROCESSOR-SDK.html" title="Category:PROCESSOR-SDK">PROCESSOR-SDK</a></li><li><a href="Category_Automotive.html" title="Category:Automotive">Automotive</a></li><li><a href="Category_IPC%2c_BIOS%2c_Linux.html" title="Category:IPC, BIOS, Linux">IPC, BIOS, Linux</a></li><li><a href="https://processors.wiki.ti.com/index.php?title=Category:Pages_with_broken_file_links&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with broken file links (page does not exist)">Pages with broken file links</a></li><li><a href="Category_OpenCV.html" title="Category:OpenCV">OpenCV</a></li><li><a href="Category_Software.html" title="Category:Software">Software</a></li><li><a href="Category_Processor_SDK_Linux_Automotive.html" title="Category:Processor SDK Linux Automotive">Processor SDK Linux Automotive</a></li><li><a href="Category_Software_User_Guides.html" title="Category:Software User Guides">Software User Guides</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Processor+SDK+Linux+Automotive+Software+Developers+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Processor_SDK_Linux_Automotive_Software_Developers_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Processor_SDK_Linux_Automotive_Software_Developers_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Processor_SDK_Linux_Automotive_Software_Developers_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Processor_SDK_Linux_Automotive_Software_Developers_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;oldid=237122" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Software_Developers_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 13 December 2019, at 06:00.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.308","walltime":"0.329","ppvisitednodes":{"value":527,"limit":1000000},"ppgeneratednodes":{"value":1916,"limit":1000000},"postexpandincludesize":{"value":195723,"limit":2097152},"templateargumentsize":{"value":361,"limit":2097152},"expansiondepth":{"value":5,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":11218,"limit":5000000},"timingprofile":["100.00%   57.482      1 -total"," 33.41%   19.202      1 Template:Glsdk_running_examples"," 10.18%    5.851      1 Template:Glsdk_running_graphics_demos","  7.88%    4.532      1 Template:Glsdk_sdg_starting","  6.69%    3.847      1 Template:Glsdk_ipc","  5.65%    3.246      1 Template:Glsdk_soc_performance_monitoring_tools","  4.56%    2.622      1 Template:GLSDK_DFU","  4.29%    2.465      1 Template:Psdkla_late_attach","  3.77%    2.168      1 Template:GLSDK_Using_QSPI_Boot","  3.70%    2.129      1 Template:USB_DRD_SUPPORT"]},"cachereport":{"timestamp":"20201130201744","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":301});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Processor_SDK_Linux_Automotive_Software_Developers_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 08:36:55 GMT -->
</html>
