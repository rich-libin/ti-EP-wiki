<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:04:30 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>User:DVT/UserDocumentation/DVT SoC Analyzer/DVT Event Log - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"User","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":2,"wgPageName":"User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log","wgTitle":"DVT/UserDocumentation/DVT SoC Analyzer/DVT Event Log","wgCurRevisionId":12410,"wgRevisionId":12410,"wgArticleId":2366,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log","wgRelevantArticleId":2366,"wgRequestId":"e340ac947aca55dd50142b37","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRelevantUserName":"DVT"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-2 ns-subject page-User_DVT_UserDocumentation_DVT_SoC_Analyzer_DVT_Event_Log rootpage-User_DVT skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">User:DVT/UserDocumentation/DVT SoC Analyzer/DVT Event Log</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"><span class="subpages">&lt; <a href="../../../User_DVT.html" title="User:DVT">User:DVT</a>&lrm; | <a href="../../UserDocumentation.html" title="User:DVT/UserDocumentation">UserDocumentation</a>&lrm; | <a href="../DVT_SoC_Analyzer.html" title="User:DVT/UserDocumentation/DVT SoC Analyzer">DVT SoC Analyzer</a></span></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#DVT_Event_Log_Format_for_.5BSoCAnalyzer.5D"><span class="tocnumber">1</span> <span class="toctext">DVT Event Log Format for [SoCAnalyzer]</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Target_Setup"><span class="tocnumber">1.1</span> <span class="toctext">Target Setup</span></a>
<ul>
<li class="toclevel-3 tocsection-3"><a href="#Header_File"><span class="tocnumber">1.1.1</span> <span class="toctext">Header File</span></a></li>
<li class="toclevel-3 tocsection-4"><a href="#Creating.2FConfiguring_the_log_buffer_DVTEvent_Log"><span class="tocnumber">1.1.2</span> <span class="toctext">Creating/Configuring the log buffer DVTEvent_Log</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-5"><a href="#Logging_Rules_.2F_Patterns"><span class="tocnumber">1.2</span> <span class="toctext">Logging Rules / Patterns</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#CPU_Tracking"><span class="tocnumber">1.2.1</span> <span class="toctext">CPU Tracking</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Latency"><span class="tocnumber">1.2.2</span> <span class="toctext">Latency</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Throughput"><span class="tocnumber">1.2.3</span> <span class="toctext">Throughput</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#Bandwidth"><span class="tocnumber">1.2.4</span> <span class="toctext">Bandwidth</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span id="DVT_Event_Log_Format_for_[SoCAnalyzer]"></span><span class="mw-headline" id="DVT_Event_Log_Format_for_.5BSoCAnalyzer.5D">DVT Event Log Format for [SoCAnalyzer]</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=1" title="Edit section: DVT Event Log Format for [SoCAnalyzer]">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>DVT Event Logging uses the existing DSP/BIOS logging services and enables application developers to instrument their target side application and provide more granular logs on top of what DSP/BIOS&#8217; implicit system logs provides. 
</p><p>Using a simple macro definition on target for a predefined set of event types and data types and using DSP/BIOS Log_Printf4 feature information has to be logged in a DSP/BIOS log buffer called DVTEvent_Log. 
</p><p>Log_Printf4 is a new logging API comparable to Log_Printf but is 8 words size instead of 4 words. This is to make room for 2 extra Arguments and a 2 word Timestamp inserted by DSP/BIOS.
</p><p>SoC Analyzer on host side decodes all the DSP/BIOS logs and shows them in a table view but the logs in DVTEvent_Log buffer get decoded further and to generate a set of predefined visualization for:
</p>
<ul><li>Event Tracking</li>
<li>Latency</li>
<li>Throughput</li>
<li>Bandwidth</li></ul>
<p>To achieve these visualization and analysis, SoCAnalyzer relies on target application developers to follow a pattern for logging an event.
</p><p>Note: The logs may be transferred to host by any means like:
</p>
<ul><li>DSP/BIOS LogServer over HTTP</li>
<li>CCS Socket Plugin over JTAG/TCPIP</li>
<li>Or just reside in a binary file</li></ul>
<p><br />
</p>
<table cellpadding="4" cellspacing="2" border="0" style="color:black;background-color:#ffffff;">

<tbody><tr style="color:black;background-color:#cccccc;">
<td align="left">Word0,Word1
</td>
<td align="left">Word2
</td>
<td align="left">Word3
</td>
<td align="left">Word4
</td>
<td align="left">Word5
</td>
<td align="left">Word6
</td>
<td align="left">Word7
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left">Timestamp
</td>
<td align="left">Seq #
</td>
<td align="left">Source Name
</td>
<td align="left">Even Descriptor
</td>
<td align="left">Data1
</td>
<td align="left">Data 2
</td>
<td align="left">Data 3
</td></tr></tbody></table>
<p><br />
</p><p>BIOS:             Log_Prinf4(LogBuffer, Format String, arg0, arg1, arg2, arg3)
</p><p>DVT Usage:        <i><b>Log_Printf4(&amp;DVTEvent_Log, EventSource, Event Descriptor, arg1, arg2, arg3)</b></i>
</p><p><br />
</p>
<table cellpadding="4" cellspacing="2" border="0" style="color:black;background-color:#ffffff;">

<tbody><tr style="color:black;background-color:#cccccc;">
<th align="left"><p> <b>LogPrintf4()</b> </p>
</th>
<th align="left"><p> <b>DVT Usage</b> </p>
</th>
<th align="left"><p> <b>Description</b> </p>
</th></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>Timestamp</p>
</td>
<td align="left"><p>Timestamp</p>
</td>
<td align="left"><p>Automatically inserted</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>Seq #</p>
</td>
<td align="left"><p>Seq #</p>
</td>
<td align="left"><p>Automatically inserted. (use by DVT to detect data loss)</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>LogBuffer</p>
</td>
<td align="left"><p>&amp;DVTEvent_Log</p>
</td>
<td align="left"><p>All DVT events must be logged in the DVTEvent_Log buffer ( <i><b>Note</b></i>: this log buffer must be created by the application)</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>Format String</p>
</td>
<td align="left"><p>Source Name</p>
</td>
<td align="left"><p>Name of the Source logging the event. ( <i><b>Limitation</b></i>: Name has to be a static global string). ( <i><b>Recommendation</b></i>: Use short descriptive name, e.g. TI_UART_DRV). ( <i><b>Note</b></i>: the SoCAnalyzer will further qualify the source with Instance and/or ChannelID is specified in the data field)</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>Arg0</p>
</td>
<td align="left"><p>Event Descriptor</p>
</td>
<td align="left"><p>Specifies the event and three data types. Use the DVT_DESC macro and the Event and Data Types below to specify this work</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>Arg1</p>
</td>
<td align="left"><p>Arg1</p>
</td>
<td align="left"><p>1<sup>st</sup> Data field </p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>Arg2</p>
</td>
<td align="left"><p>Arg2</p>
</td>
<td align="left"><p>2<sup>nd</sup> Data field</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>Arg3</p>
</td>
<td align="left"><p>Arg3</p>
</td>
<td align="left"><p>3<sup>rd</sup> Data field</p>
</td></tr></tbody></table>
<p><br />
</p><p>Event Desc Macro:      <i><b>DVT_DESC(EventType, Arg1Type, Arg2Type, Arg3Type)</b></i>
</p><p><strong><u>Event Types</u></strong>
</p><p><br />
</p>
<table cellpadding="4" cellspacing="2" border="0" style="color:black;background-color:#ffffff;">

<tbody><tr style="color:black;background-color:#cccccc;">
<td align="left"><p>enum</p>
</td>
<td align="left"><p>Event Type</p>
</td>
<td align="left"><p>Description</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>0</p>
</td>
<td align="left"><p>DVT_eINT</p>
</td>
<td align="left"><p>Interrupt Event. Use this only is logging that the interrupt occurred.</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>1</p>
</td>
<td align="left"><p>DVT_eINT_START</p>
</td>
<td align="left"><p>Enter Interrupt service routine</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>2</p>
</td>
<td align="left"><p>DVT_eINT_END</p>
</td>
<td align="left"><p>Exit Interrupt service routine</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>3</p>
</td>
<td align="left"><p>DVT_eFUNC</p>
</td>
<td align="left"><p>Interrupt Event. Use this only is logging that the function was called.</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>4</p>
</td>
<td align="left"><p>DVT_eFUNC_START</p>
</td>
<td align="left"><p>Enter function service routine</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>5</p>
</td>
<td align="left"><p>DVT_eFUNC_END</p>
</td>
<td align="left"><p>Exit function service routine</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>6</p>
</td>
<td align="left"><p>DVT_ePACKET_START</p>
</td>
<td align="left"><p>Start of a Packet</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>7</p>
</td>
<td align="left"><p>DVT_ePACKET_END</p>
</td>
<td align="left"><p>End of a Packet</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>8</p>
</td>
<td align="left"><p>DVT_eDATA_SND</p>
</td>
<td align="left"><p>A send event without corresponding END event</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>9</p>
</td>
<td align="left"><p>DVT_eDATA_SND_START</p>
</td>
<td align="left"><p>A send Event that has a corresponding END event</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>10</p>
</td>
<td align="left"><p>DVT_eDATA_SND_END</p>
</td>
<td align="left"><p>End of a START send event</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>11</p>
</td>
<td align="left"><p>DVT_eDATA_RCV</p>
</td>
<td align="left"><p>A receive Event without corresponding END event</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>12</p>
</td>
<td align="left"><p>DVT_eDATA_RCV_START</p>
</td>
<td align="left"><p>A receive event that has a corresponding</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>13</p>
</td>
<td align="left"><p>DVT_eDATA_RCV_END</p>
</td>
<td align="left"><p>End of a STARTVALUE event</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>14</p>
</td>
<td align="left"><p>DVT_eSMPL_COUNTER</p>
</td>
<td align="left"><p>Sample some free running counter</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>15</p>
</td>
<td align="left"><p>DVT_eEVENT</p>
</td>
<td align="left"><p>Events not explicitly defined above</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>16</p>
</td>
<td align="left"><p>DVT_eEVENT_START</p>
</td>
<td align="left"><p>The start of an event other than those above</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>17</p>
</td>
<td align="left"><p>DVT_eEVENT_END</p>
</td>
<td align="left"><p>The end of an event other than those above</p>
</td></tr></tbody></table>
<p><br />
</p><p><strong><u>Argument Types</u></strong>
</p><p><br />
</p>
<table cellpadding="4" cellspacing="2" border="0" style="color:black;background-color:#ffffff;">

<tbody><tr style="color:black;background-color:#cccccc;">
<td align="left"><p>enum</p>
</td>
<td align="left"><p>Data Type</p>
</td>
<td align="left"><p>Description</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>0</p>
</td>
<td align="left"><p>DVT_dNONE</p>
</td>
<td align="left"><p>No Data</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>1</p>
</td>
<td align="left"><p>DVT_dINST</p>
</td>
<td align="left"><p>ID for this instance of the driver. This is necessary if separate analysis is required for different instances of a multiple instance driver.</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>2</p>
</td>
<td align="left"><p>DVT_dINITIATOR</p>
</td>
<td align="left"><p>ID of the component that initiated this driver request</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>3</p>
</td>
<td align="left"><p>DVT_dMSG_ID</p>
</td>
<td align="left"><p>ID use to correlate START and END events. This is not necessary if events are sequenced, i.e. no more than 1 START is pending at any given time.</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>4</p>
</td>
<td align="left"><p>DVT_dCOUNTER</p>
</td>
<td align="left"><p>Value of a free running counter value is included</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>5</p>
</td>
<td align="left"><p>DVT_dSIZE_BYTES</p>
</td>
<td align="left"><p>Size in number of bytes</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>6</p>
</td>
<td align="left"><p>DVT_dSIZE_WORDS</p>
</td>
<td align="left"><p>Size in number of words</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>7</p>
</td>
<td align="left"><p>DVT_dPADD</p>
</td>
<td align="left"><p>Program Address</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>8</p>
</td>
<td align="left"><p>DVT_dDADD</p>
</td>
<td align="left"><p>Data address</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>9</p>
</td>
<td align="left"><p>DVT_dDATA</p>
</td>
<td align="left"><p>Some Data</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>10</p>
</td>
<td align="left"><p>DVT_dPACKET_ID</p>
</td>
<td align="left"><p>Packet ID</p>
</td></tr>
<tr style="color:black;background-color:#dddddd;">
<td align="left"><p>11</p>
</td>
<td align="left"><p>DVT_dCHANNEL_ID</p>
</td>
<td align="left"><p>Channel ID</p>
</td></tr>
<tr style="color:black;background-color:#eeeeee;">
<td align="left"><p>12</p>
</td>
<td align="left"><p>DVT_dCHANNEL_ID_INST</p>
</td>
<td align="left"><p>16 bit Channel ID, followed by 16 bit Instance</p>
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Target_Setup">Target Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=2" title="Edit section: Target Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Header_File">Header File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=3" title="Edit section: Header File">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A sample header file is included in DVT installation see:
</p>
<pre>''&lt;DVDP_Install_dir&gt;\ PSP_0_05_02\pspdrivers\inc\ psp_log.h''
</pre>
<p>Here's all that that needs to be defined in the header file for the SoCAnalyzer:
</p><p><code lang="javascript">
</code></p><code lang="javascript"><pre>  extern far LOG_Obj DVTEvent_Log;
  typedef enum {
     DVT_eINT,
     DVT_eINT_START,
     DVT_eFUNC,
     DVT_eFUNC_START,
     DVT_eFUNC_END,
     DVT_ePACKET_START,
     DVT_eDATA_SND,
     DVT_eDATA_SND_START,
     DVT_eDATA_SND_END,
     DVT_eDATA_RCV,
     DVT_eRCV_START,
     DVT_eRCV_END,
     DVT_eSMPL_COUNTER,
     DVT_eEVENT,
     DVT_eEVENT_START,
     DVT_eEVENT_END
  } PSP_logEventType;
  typedef enum {
     DVT_dNONE,
     DVT_dINST,
     DVT_dINITIATOR,
     DVT_dMSG_ID,   
     DVT_dCOUNTER,  
     DVT_dSIZE_BYTES,
     DVT_dSIZE_WORDS,
     DVT_dPADD,     
     DVT_dDATA,     
     DVT_dPACKET_ID,
     DVT_dCHANNEL_ID,
     DVT_dCHANNEL_ID_INST
  } PSP_logDataDesc;
  #define ARG1(arg1) (arg1 &lt;&lt; 8)
  #define ARG2(arg2) (arg2 &lt;&lt; 16)
  #define ARG3(arg3) (arg3 &lt;&lt; 24)
  #define CHANNELID_INSTANCEID(channelId, instanceId) ((channelId &lt;&lt; 16) | instanceId)
  #define DVT_DESC(event, arg1, arg2, arg3) (event | ARG1(arg1) | ARG2(arg2) | ARG3(arg3))
</pre></code><code lang="javascript"></code><p><code lang="javascript"></code>
</p>
<h3><span id="Creating/Configuring_the_log_buffer_DVTEvent_Log"></span><span class="mw-headline" id="Creating.2FConfiguring_the_log_buffer_DVTEvent_Log">Creating/Configuring the log buffer DVTEvent_Log</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=4" title="Edit section: Creating/Configuring the log buffer DVTEvent Log">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>DVT Event Logging uses the existing DSP/BIOS logging services and enables application developers to instrument their target side application and provide more granular logs on top of what DSP/BIOS' implicit system logs provides.
</p><p>Use standard BIOS mechanism to create a log buffer name <b>DVTEvent_Log</b>. Set buffer to appropriate size to store data for the duration required.
</p><p>e.g. of tcf file content:
</p><p><code lang="javascript">
</code></p><code lang="javascript"><pre>  /* Create LOG for the SoC Analyser: */
  bios.LOG.create("DVTEvent_Log");
  bios.LOG.instance("DVTEvent_Log").bufSeg = prog.get("DDR2");
  bios.LOG.instance("DVTEvent_Log").bufLen = 65536;
</pre></code><code lang="javascript"><pre>  /* to enable time stamp logging */
  bios.LOG.TS = true;
</pre></code><code lang="javascript"></code><p><code lang="javascript"></code>
</p>
<h2><span id="Logging_Rules_/_Patterns"></span><span class="mw-headline" id="Logging_Rules_.2F_Patterns">Logging Rules / Patterns</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=5" title="Edit section: Logging Rules / Patterns">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The [SoCAnalyzer] follows a set of basic rules to perform CPU Tracking, Latency, Bandwidth and/or Throughput analysis:
</p>
<ul><li>The Event Name is created as a composite of the Source Name, Event Type, Instance (only if present in log) and Channel_ID (only if present in log):</li></ul>
<pre>   &lt;Event_Type&gt;+&lt;Source Name&gt;+&lt;Instance&gt;+&lt;Channel_ID&gt;
</pre>
<p>Example: The following Log will result in an Event Name "INT_UART Inst:1 Ch:0"
</p>
<pre>   Log_Printf4(&amp;DVTEvent_Log, "UART", DVT_DESC(DVT_INT_eSTART, DVT_dINST, DVT_dCHANNEL_ID, DVT_dNONE), 1, 0)
</pre>
<p>If a PacketId is present, it will be used to group the related events together for Latency, Throughput and bandwidth
</p>
<pre>   &lt;Event_Type&gt;+&lt;Source Name&gt;+&lt;Instance&gt;+&lt;Channel_ID&gt;+&lt;Packet_ID&gt;
</pre>
<ul><li>START and END logs are used for CPU tracking</li>
<li>FUNC or INT START followed by a SND_STARTor RCV_START are used for Latency</li>
<li>eSIZE_BYTES in any log other than END is used for Throughput measurement</li>
<li>eSIZE_BYTES in an END log is used for Bandwidth</li></ul>
<p>See below for details on CPU Tracking, Latency, Throughput and Bandwidth analysis.
</p>
<h3><span class="mw-headline" id="CPU_Tracking">CPU Tracking</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=6" title="Edit section: CPU Tracking">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Any START and END event pairs of the same <b>Event Name</b> will automatically be displayed in the Event Tracking Graph showing when the event is running/active.
</p><p>Example: of start/end event pairs:
</p>
<pre>   DVT_eINT_START and DVT_eINT_END
   DVT_eFUNC_START and DVT_eFUNC_END
   DVT_eEVENT_START and DVT_eEVENT_END
   DVT_ePACKET_START and DVT_ePACKET_END
   DVT_eDATA_SND_START and DVT_eDATA_SND_END
   DVT_eDATA_RCV_START and DVT_eDATA_RCV_END
</pre>
<p>Example of CPU Tracking Graph:
</p><p><a href="../../../File_PeripheralTracking.html" class="image"><img alt="PeripheralTracking.jpg" src="https://processors.wiki.ti.com/images/4/45/PeripheralTracking.jpg" width="771" height="422" /></a>
</p>
<h3><span class="mw-headline" id="Latency">Latency</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=7" title="Edit section: Latency">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Latency is calculate for any <b>Event Name</b> that logs a
</p>
<pre>   DVT_eINT_START or DVT_eFUNC_START
</pre>
<p>Followed by
</p>
<pre>   DVT_eDATA_SND_START or DVT_eDATA_RCV_START
</pre>
<p>The latency is calculated as <b>SND_START/RCV_START - INT_START/FUNC_START</b>.
</p><p><a href="../../../File_Latency.html" class="image"><img alt="Latency.jpg" src="https://processors.wiki.ti.com/images/d/dd/Latency.jpg" width="775" height="425" /></a>
</p>
<h3><span class="mw-headline" id="Throughput">Throughput</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=8" title="Edit section: Throughput">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Throughput is calculated for any <b>Event Name</b> (except END log types) that logs an argument of type:
</p>
<pre>DVT_dSIZE_BYTES
</pre>
<p>Throughput is calculated as bytes/sec.
</p><p>Notes:
</p>
<ul><li><i><b>DVT_dSIZE_BYTES</b></i> logged on an END event type is ignored for throughput analysis</li>
<li><i><b>DVT_dSIZE_BYTES</b></i> should only be logged once (except if logged on an END log) per Event Name to avoid double counting.</li></ul>
<p><a href="../../../File_Throughput.html" class="image"><img alt="Throughput.jpg" src="https://processors.wiki.ti.com/images/b/b0/Throughput.jpg" width="772" height="422" /></a>
</p>
<h3><span class="mw-headline" id="Bandwidth">Bandwidth</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;section=9" title="Edit section: Bandwidth">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Bandwidth is calculated for any <b>Event Name</b> that logs an argument of the following type in a <b>DVT_SND_eEND</b> or <b>DVT_RCV_eEND</b> event:
</p>
<pre>DVT_dSIZE_BYTES
</pre>
<p>Bandwidth is calculated as the<b> # Bytes/Duration</b>. Where <b>Duration = DVT_SND_eSTART - DVT_SND_eEND or DVT_RCV_eSTART - DVT_RCV_eEND</b>.
</p>
<!-- 
NewPP limit report
Cached time: 20201201074309
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.072 seconds
Real time usage: 0.075 seconds
Preprocessor visited node count: 113/1000000
Preprocessor generated node count: 228/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 816/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:2366-0!canonical and timestamp 20201201074309 and revision id 12410
 -->
</div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;oldid=12410">https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;oldid=12410</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=User%3ADVT%2FUserDocumentation%2FDVT+SoC+Analyzer%2FDVT+Event+Log" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="../../../Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-user" class="selected"><span><a href="DVT_Event_Log.html" title="View the user page [c]" accesskey="c">User page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=User_talk:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="DVT_Event_Log.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="../../../Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="../../../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="../../../Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="../../../Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="../../../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../../../Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="../../../Special_WhatLinksHere/User_DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../../../Special_RecentChangesLinked/User_DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-contributions"><a href="../../../Special_Contributions/DVT.html" title="A list of contributions by this user">User contributions</a></li><li id="t-log"><a href="../../../Special_Log/DVT.html">Logs</a></li><li id="t-userrights"><a href="../../../Special_UserRights/DVT.html">View user groups</a></li><li id="t-specialpages"><a href="../../../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;oldid=12410" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 12 June 2009, at 14:30.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../../../Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../../../Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../../../Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="../../../Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.072","walltime":"0.075","ppvisitednodes":{"value":113,"limit":1000000},"ppgeneratednodes":{"value":228,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":816,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201201074309","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":292});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/User:DVT/UserDocumentation/DVT_SoC_Analyzer/DVT_Event_Log by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:04:35 GMT -->
</html>
