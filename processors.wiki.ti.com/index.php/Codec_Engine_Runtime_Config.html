<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Codec_Engine_Runtime_Config by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:31:54 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Codec Engine Runtime Config - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Codec_Engine_Runtime_Config","wgTitle":"Codec Engine Runtime Config","wgCurRevisionId":182033,"wgRevisionId":182033,"wgArticleId":6770,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Codec Engine"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Codec_Engine_Runtime_Config","wgRelevantArticleId":6770,"wgRequestId":"f062ab6d5e572e21481f297e","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Codec_Engine_Runtime_Config rootpage-Codec_Engine_Runtime_Config skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Codec Engine Runtime Config</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Run-Time_Configuration_Source_Files"><span class="tocnumber">2</span> <span class="toctext">Run-Time Configuration Source Files</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#1.1_C_Source_Files"><span class="tocnumber">2.1</span> <span class="toctext">1.1 C Source Files</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Linker_Command_Files_for_Linux_Builds"><span class="tocnumber">2.2</span> <span class="toctext">Linker Command Files for Linux Builds</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#WinCE_Include_Makefiles"><span class="tocnumber">2.3</span> <span class="toctext">WinCE Include Makefiles</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Runtime_Configuration_Examples"><span class="tocnumber">3</span> <span class="toctext">Runtime Configuration Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Run-time_Configuration_speech1_copy_Examples"><span class="tocnumber">3.1</span> <span class="toctext">Run-time Configuration speech1_copy Examples</span></a>
<ul>
<li class="toclevel-3 tocsection-8"><a href="#The_Application_Configuration_File"><span class="tocnumber">3.1.1</span> <span class="toctext">The Application Configuration File</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#The_Platform_Configuration_File"><span class="tocnumber">3.1.2</span> <span class="toctext">The Platform Configuration File</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Makefiles_and_Linker_Command_Files"><span class="tocnumber">3.1.3</span> <span class="toctext">Makefiles and Linker Command Files</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Run-Time_Configuration_audio1_ires_Examples"><span class="tocnumber">3.2</span> <span class="toctext">Run-Time Configuration audio1_ires Examples</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Run-Time_Configuration_video1_copy_Examples"><span class="tocnumber">3.3</span> <span class="toctext">Run-Time Configuration video1_copy Examples</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#New_APIs"><span class="tocnumber">4</span> <span class="toctext">New APIs</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Engine_getNumAlgs2.28.29.2C_Engine_getAlgInfo2.28.29"><span class="tocnumber">4.1</span> <span class="toctext">Engine_getNumAlgs2(), Engine_getAlgInfo2()</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Macros_for_Filling_in_Algorithm_and_Engine_Tables"><span class="tocnumber">4.2</span> <span class="toctext">Macros for Filling in Algorithm and Engine Tables</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#CE_DECLARE_TYPE.28.29"><span class="tocnumber">4.2.1</span> <span class="toctext">CE_DECLARE_TYPE()</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#CE_BEGIN_ALG_TABLE.28.29.2C_CE_LOCAL_ALG.28.29.2C_and_CE_END_ALG_TABLE.28.29"><span class="tocnumber">4.2.2</span> <span class="toctext">CE_BEGIN_ALG_TABLE(), CE_LOCAL_ALG(), and CE_END_ALG_TABLE()</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#CE_BEGIN_ENGINE_TABLE.28.29.2C_CE_ENGINE.28.29.2C_and_CE_END_ENGINE_TABLE.28.29"><span class="tocnumber">4.2.3</span> <span class="toctext">CE_BEGIN_ENGINE_TABLE(), CE_ENGINE(), and CE_END_ENGINE_TABLE()</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This article describes the <a href="Category_Codec_Engine.html" title="Category:Codec Engine">Codec Engine</a> Runtime Config enhancement introduced in <a href="Codec_Engine_Roadmap.html" title="Codec Engine Roadmap">CE 2.26</a>.
</p><p>As a result of XDC config, a C source file and linker command file are generated, based on the configuration in the app's .cfg file. One could take these generated files, modify them as needed, and write a makefile to build the app without the XDC configuration. The C source file could even be split into multiple source files, one containing Engine configuration, one containing platform specific configuration, another containing RMAN configuration and so on. This is essentially what we have done for the Codec Engine Runtime Config feature.
</p><p>We have facilitated this process by providing macros for building algorithm and engine tables, template RMAN and DMAN3
configuration files, template linker command files and platform configuration files. We have also enabled Codec Engine
to query an Engine's server for remote algorithms at runtime, so the algorithm tables need only contain local algorithms.
</p>
<h2><span class="mw-headline" id="Run-Time_Configuration_Source_Files">Run-Time Configuration Source Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=2" title="Edit section: Run-Time Configuration Source Files">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="1.1_C_Source_Files">1.1 C Source Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=3" title="Edit section: 1.1 C Source Files">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Codec Engine supplies several source files for run-time configuration, that can be compiled and linked with the application. These files include the following:
</p>
<ul><li><b>rtcfg.c</b> - This file contains code that would normally be auto-generated by XDC configuration, that should never need to be modified.  For example, <code>CERuntime_init()</code>, and stub functions for codec classes are in this source file.</li>
<li><b>rtcfg_linux.c</b> - This file contains Linux specific code that most likely will not need to be modified. For example, <tt>GT</tt> configuration and the Linux osal's <tt>SemMP</tt> ipc key are in this file.</li>
<li><b>rtcfg_wince.c</b> - Analogous to <b>rtcfg_linux.c</b>, but for Windows CE.</li>
<li><b>rtcfg_dman3.c</b> - This file contains DMAN3 configuration, if DMAN3 is used, and stubs for DMAN3 functions if DMAN3 is not used. If the app (or one of the app's algorithms) uses DMAN3, this file should be copied, modified as needed, and built into the app.</li>
<li><b>rtcfg_rman.c</b> - This file contains RMAN configuration. If one of the app's algorithms uses an IRES resource, this file should be copied, modified as needed, and built into the app.</li></ul>
<p>Note: <b>rtcfg.c</b> and <b>rtcfg_linux.c</b> cannot be combined into a single library due to dependencies of these files: <b>rtcfg.c</b> contains code that depends on the Codec Engine codec class libraries, which depend on the <i>ce</i> library, which depends on the <i>osal</i> library.
This dependency would require the following link order: rtcfg library, codec class libraries, <i>ce</i> library, <tt>osal</tt> library. On the other hand, the <i>osal</i> library depends on code in <b>rtcfg_linux.c</b>. This would require that the rtcfg library be linked in after the <i>osal</i> library, contrary to the previous link order requirement. Furthermore, the <code>GT_config</code> object is defined both in <b>rtcfg_linux.c</b> (and <b>rtcfg_wince.c</b>), and the Framework Components <i>gt</i> library, so linking in rtcfg_linux as a library would result in a "multiply defined symbol" link error for <code>GT_config</code>. The files <b>rtcfg_dman3.c</b> and <b>rtcfg_rman.c</b> could be built into a library and linked in by the app, as long as the app's local algorithms do not use DMAN3 or IRES resources.  In that case the app would not link in DMAN3 or RMAN libraries (or a "multiply defined symbol" linker error will occur).  Given the complications of putting these files into libraries (we would need one library per file, except that rtcfg_linux would still have to be compiled and linked in with the app because of <code>GT_config</code>), we felt it was simpler just to supply the source files that the app developer could modify if needed, and compile and link with. In the future, we could create an example that uses libraries, if there is demand.
</p><p>These source files are located in <b>ti/sdo/ce/utils/rtcfg</b>. The ones that need to be modified (for example, if DMAN3 is used), can be copied to the application's source directory, and modified as needed.  The app's makefile can use the <tt>vpath</tt> variable to locate the files that don't need modification.  The run-time configuration examples illustrate this procedure.
</p>
<h3><span class="mw-headline" id="Linker_Command_Files_for_Linux_Builds">Linker Command Files for Linux Builds</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=4" title="Edit section: Linker Command Files for Linux Builds">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In addition to the source files in <b>ti/sdo/ce/utils/rtcfg</b>, there are linker command files for Linux. You can use these
linker command files as is, or copy them to your build directory, and modify as needed. The following table lists the linker command files for available for Linux builds for several platforms, unless indicated by <b>N/A</b>.
</p>
<div style="line-height: 1.1em">
   <table border="1" cellspacing="1" cellpadding="4">
      <tbody><tr>
         <td colspan="5" bgcolor="#FFEEAA" align="center"><b>Run-time Configuration Linker Command Files (Linux)</b></td>
      </tr>
      <tr>
         <td colspan="1" bgcolor="#FFFFCC"><b>Linker Command file</b></td>
         <td bgcolor="#FFFFCC"><b>Description</b></td>
         <td bgcolor="#FFFFCC"><b>evm3530</b></td>
         <td bgcolor="#FFFFCC"><b>evmDM365</b></td>
         <td bgcolor="#FFFFCC"><b>PC</b></td>
      </tr>
      <tr>
         <td bgcolor="#CCFFCC"><b>ce_debug.cmd</b></td>
         <td bgcolor="#CCFFCC">Debug Codec Engine libraries for apps with no DSP server</td>
         <td bgcolor="#CCFFCC"><b></b></td>
         <td bgcolor="#CCFFCC"><b></b></td>
         <td bgcolor="#CCFFCC"><b></b></td>
      </tr>
      <tr>
         <td bgcolor="#EEFFEE"><b>ce_release.cmd</b></td>
         <td bgcolor="#EEFFEE">Release Codec Engine libraries for apps with no DSP server</td>
         <td bgcolor="#EEFFEE"><b></b></td>
         <td bgcolor="#EEFFEE"><b></b></td>
         <td bgcolor="#EEFFEE"><b></b></td>
      </tr>
      <tr>
         <td bgcolor="#CCFFCC"><b>ce_remote_debug.cmd</b></td>
         <td bgcolor="#CCFFCC">Debug Codec Engine libraries for apps with DSP server</td>
         <td bgcolor="#CCFFCC"></td>
         <td bgcolor="#CCFFCC"><b>N/A</b></td>
         <td bgcolor="#CCFFCC"><b>N/A</b></td>
      </tr>
      <tr>
         <td bgcolor="#EEFFEE"><b>ce_remote_release.cmd</b></td>
         <td bgcolor="#EEFFEE">Release Codec Engine libraries for apps with DSP server</td>
         <td bgcolor="#EEFFEE"></td>
         <td bgcolor="#EEFFEE"><b>N/A</b></td>
         <td bgcolor="#EEFFEE"><b>N/A</b></td>
      </tr>
      <tr>
         <td bgcolor="#CCFFCC"><b>fc_debug.cmd</b></td>
         <td bgcolor="#CCFFCC">Debug Framework Components libraries, GT disabled</td>
         <td bgcolor="#CCFFCC"></td>
         <td bgcolor="#CCFFCC"><b></b></td>
         <td bgcolor="#CCFFCC"><b></b></td>
      </tr>
      <tr>
         <td bgcolor="#EEFFEE"><b>fc_release.cmd</b></td>
         <td bgcolor="#EEFFEE">Release Framework Components libraries, GT disabled</td>
         <td bgcolor="#EEFFEE"></td>
         <td bgcolor="#EEFFEE"><b></b></td>
         <td bgcolor="#EEFFEE"><b></b></td>
      </tr>
      <tr>
         <td bgcolor="#CCFFCC"><b>fc_debug_trace.cmd</b></td>
         <td bgcolor="#CCFFCC">Debug Framework Components libraries, GT enabled</td>
         <td bgcolor="#CCFFCC"></td>
         <td bgcolor="#CCFFCC"><b></b></td>
         <td bgcolor="#CCFFCC"><b></b></td>
      </tr>
      <tr>
         <td bgcolor="#EEFFEE"><b>fc_release_trace.cmd</b></td>
         <td bgcolor="#EEFFEE">Release Framework Components libraries, GT enabled</td>
         <td bgcolor="#EEFFEE"></td>
         <td bgcolor="#EEFFEE"><b></b></td>
         <td bgcolor="#EEFFEE"><b></b></td>
      </tr>
   </tbody></table>
</div>
<p>The makefiles for the Linux run-time configuration examples use the <tt>vpath</tt> variable to locate these linker command files, so they do not need to be copied to the application's build directory, unless they need to be modified.
</p>
<h3><span class="mw-headline" id="WinCE_Include_Makefiles">WinCE Include Makefiles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=5" title="Edit section: WinCE Include Makefiles">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There are no linker command files for Windows CE builds, since the libraries are listed in the makefiles. We have provided
the following makefiles for WinCE builds, that can be included by the application's makefile:
</p>
<ul><li><b>ce_local.mk</b> - Codec Engine libraries for apps with no DSP server.</li>
<li><b>ce_remote.mk</b> - Codec Engine libraries for apps with a DSP server.</li>
<li><b>fc_libs.mk</b> - Framework Components libraries.</li></ul>
<p>These included makefiles use variables defined in the application's makefile to reference debug or release libraries.
</p>
<h2><span class="mw-headline" id="Runtime_Configuration_Examples">Runtime Configuration Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=6" title="Edit section: Runtime Configuration Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Codec Engine has the following run-time configuration examples:
</p>
<ul><li><b>audio1_ires/rtcfg_*</b> - These examples have an algorithm that uses an IRES resources, to illustrate RMAN configuration.</li>
<li><b>speech1_copy/rtcfg_*</b> - These are various examples with local and remote codecs.</li>
<li><b>video1_copy/rtcfg_*</b> - These examples have a local codec that uses DMAN3 to illustrate DMAN3 configuration.</li></ul>
<p><br />
</p>
<h3><span class="mw-headline" id="Run-time_Configuration_speech1_copy_Examples">Run-time Configuration speech1_copy Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=7" title="Edit section: Run-time Configuration speech1 copy Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <b>ti/sdo/ce/examples/apps/speech1_copy</b> directory contains the original XDC configured <i>speech1_copy</i> example, and the following sub-directories containing run-time configuration versions of this example:
</p>
<ul><li><b>rtcfg_DM365</b> - Linux example for EVM DM365 platform. There is no DSP server for this example, all algorithms are local.</li>
<li><b>rtcfg_local_evm3530_linux</b> - Linux example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_local_evm3530_wince</b> - WinCE example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_PC</b> - Linux PC example.</li>
<li><b>rtcfg_remote_evm3530_linux</b> - Linux example for EVM 3530. One algorithm runs locally on the ARM, another runs remotely on the DSP.</li>
<li><b>rtcfg_remote_evm3530_wince</b> - WinCE example for EVM 3530. One algorithm runs locally on the ARM, another runs remotely on the DSP.</li></ul>
<p>These are straight-forward examples to configure, since they do not require RMAN or DMAN3.  Each of these example sub-directories contains a makefile, a platform specific configuration file, and an application specific configuration file. For the Linux platforms, linker command files are also included.  The run-time configuration examples use the same C source files, <b>app.c</b> and <b>main_native.c</b>, as the XDC configuration version, so we have not duplicated these files in each of the <b>rtcfg*</b> sub-directories.
</p><p>These examples also compile and link the run-time configuration source files located in <b>ti/sdo/ce/utils/rtcfg</b> into the application. The makefiles use the <tt>vpath</tt> variable to locate these source files.
</p>
<h4><span class="mw-headline" id="The_Application_Configuration_File">The Application Configuration File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=8" title="Edit section: The Application Configuration File">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Each of the run-time configuration examples contains an application configuration file, called <b>app_config.c</b>. This file contains configuration code that is specific to the application, such as algorithm tables and Engine configuration.
</p><p>The <b>app_config.c</b> for <b>rtcfg_DM365</b> is listed below.  All algorithms in this example are local.
</p><p>&lt;syntaxhighlight lang='c'&gt;
</p>
<ol><li>include &lt;xdc/std.h&gt;</li></ol>
<ol><li>include &lt;ti/sdo/ce/CERuntime.h&gt;</li>
<li>include &lt;ti/xdais/ialg.h&gt;</li></ol>
<p>/* algorithm function tables */
extern IALG_Fxns SPHDEC1COPY_TI_ISPHDEC1COPY;
extern IALG_Fxns SPHENC1COPY_TI_ISPHENC1COPY;
</p><p>CE_DECLARE_TYPE(
</p>
<pre>   decoder,                       /* name */
   "ti.sdo.ce.speech1.ISPHDEC1")  /* Inheritance hierarchy */
</pre>
<p>CE_DECLARE_TYPE(
</p>
<pre>   encoder,                       /* name */
   "ti.sdo.ce.speech1.ISPHENC1")  /* Inheritance hierarchy */
</pre>
<p>CE_BEGIN_ALG_TABLE(local_table)
</p>
<pre>   CE_LOCAL_ALG(
       decoder,                      /* name used in CE_DECLARE_TYPE() */
       "mysphdec1_copy",             /* alg name */
       &amp;SPHDEC1COPY_TI_ISPHDEC1COPY, /* IAlg functions */
       NULL,                         /* DMAN3 functions */
       NULL,                         /* IRES functions */
       0,                            /* Scratch group Id */
       Engine_USECACHEDMEM_DEFAULT)  /* Memory type: cached, non-cached etc */
</pre>
<pre>   CE_LOCAL_ALG(
       encoder,                      /* name used in CE_DECLARE_TYPE() */
       "sphenc1_copy",               /* alg name */
       &amp;SPHENC1COPY_TI_ISPHENC1COPY, /* IAlg functions */
       NULL,                         /* DMAN3 functions */
       NULL,                         /* IRES functions */
       0,                            /* Scratch group Id */
       Engine_USECACHEDMEM_DEFAULT)  /* Memory type: cached, non-cached etc */
</pre>
<p>CE_END_ALG_TABLE(local_table)
</p><p>CE_BEGIN_ENGINE_TABLE(engineTab)
</p>
<pre>   CE_ENGINE(
       local_table,            /* CE_LOCAL_ALG() table name */
       "speech1_copy",         /* Engine name */
       NULL)                   /* Server name */
</pre>
<p>CE_END_ENGINE_TABLE(engineTab)
&lt;/syntaxhighlight&gt;
</p><p>In <b>app_config.c</b>, macro calls are used to set up the Engine table of local algorithms.  The first macro calls are to
<code>CE_DECLARE_TYPE()</code>. This is to set up the inheritance hierarchies for the algorithms. For example,
</p><p>&lt;syntaxhighlight lang='c'&gt;
CE_DECLARE_TYPE(
</p>
<pre>   decoder,                       /* name */
   "ti.sdo.ce.speech1.ISPHDEC1")  /* Inheritance hierarchy */
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>associates the inheritance hierarchy, <tt>"ti.sdo.ce.speech1.ISPHDEC1"</tt> with a symbol called <code>decoder</code>. The symbol name passed to <code>CE_DECLARE_TYPE()</code> can be any name (it is used internally to generate the name of a C-structure), and is used to associate the inheritance hierarchy with an algorithm.
</p><p>The algorithm table is then declared using the <code>CE_BEGIN_ALG_TABLE()</code>/<code>CE_END_ALG_TABLE()</code> macros. The name passed to these macros, in this example, <tt>local_table</tt>, is a symbol that will be used to associate the algorithm table with an engine. This name is used internally to generate the name of a C-structure.
</p><p>Inside the <code>CE_BEGIN_ALG_TABLE()</code>/<code>CE_END_ALG_TABLE()</code> macros, the local algorithms are declared using the <code>CE_LOCAL_ALG()</code> macro. The first argument to <code>CE_LOCAL_ALG()</code> is the name used in a call to the <code>CE_DECLARE_TYPE()</code> macro, to set the inheritance type of the algorithm. The second argument, <tt>"mysphdec1_copy"</tt> or <tt>"sphenc1_copy"</tt>, is the name used in <tt>app.c</tt> for algorithm creation, in this case, the name passed to <code>SPHDEC1_create()</code> or <code>SPHENC1_create()</code>.
</p><p>Finally, the Engine table is declared using <code>CE_BEGIN_ENGINE_TABLE()</code>/<code>CE_END_ENGINE_TABLE()</code>. The argument passed to these macros (in this example, <tt>engineTab</tt>) is a name that is used internally to generate the name of a C-structure. The list of Engines for this table is declared with the <code>CE_ENGINE()</code> macro. In this example, the argument <code>local_table</code>, identifies the algorithm table declared previously, with the engine. The second argument to <code>CE_ENGINE()</code>, <tt>"speech1_copy"</tt>, is the name that is used in the <code>Engine_open()</code> call of the application. The third argument is the name of the Engine's server, in this case, <tt>NULL</tt>, since the Engine has no server.
</p><p>The remote <b>speech1_copy</b> examples, <b>rtcfg_remote_evm3530_linux</b> and <b>rtcfg_remote_evm3530_wince</b>, have one local algorithm and one remote algorithm. Only the local codec is added to the algorithm table, and in this case, the Engine has a server, <b>all.x64P</b>.  Below is the Engine configuration in the <b>app_config.c</b> file for the remote <b>speech1_copy</b> examples.
</p><p>Note: The server already contains an algorithm named <code>"sphdec1_copy"</code>, so we are re-naming the local version of this algorithm to <code>"mysphdec1_copy"</code>, to ensure that the application creates the local <code>speech1</code> decoder.
</p><p>&lt;syntaxhighlight lang='c'&gt;
CE_DECLARE_TYPE(
</p>
<pre>   decoder,                       /* name */
   "ti.sdo.ce.speech1.ISPHDEC1")  /* Inheritance hierarchy */
</pre>
<p>CE_BEGIN_ALG_TABLE(local_table)
</p>
<pre>   CE_LOCAL_ALG(
       decoder,                      /* name used in CE_DECLARE_TYPE() */
       "mysphdec1_copy",             /* alg name */
       &amp;SPHDEC1COPY_TI_ISPHDEC1COPY, /* IAlg functions */
       NULL,                         /* DMAN3 functions */
       NULL,                         /* IRES functions */
       0,                            /* Scratch group Id */
       Engine_USECACHEDMEM_DEFAULT)  /* Memory type: cached, non-cached etc */
</pre>
<p>CE_END_ALG_TABLE(local_table)
</p><p>CE_BEGIN_ENGINE_TABLE(engineTab)
</p>
<pre>   CE_ENGINE(
       local_table,            /* CE_LOCAL_ALG() table name */
       "speech1_copy",         /* Engine name */
       "all.x64P")             /* Server name */
</pre>
<p>CE_END_ENGINE_TABLE(engineTab)
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="The_Platform_Configuration_File">The Platform Configuration File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=9" title="Edit section: The Platform Configuration File">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Each run-time configuration example also contains a platform configuration file.  For the examples with only local algorithms, this file just initializes a few global variables. These files will most likely not need modification for the local case. We have named the platform configuration files for the local examples
<b>&lt;platform&gt;_config.c</b>, for example <b>DM365_config.c</b> or <b>evm3530_config.c</b>.
</p><p>For the remote examples, the platform configuration file initializes variables and DSP Link configuration tables for
inter-processor communication. Since the <tt>DSPLink</tt> configuration tables depend on the Engine's server, we included the server's name in the platform configuration file name, for example, <b>evm3530_config_all.c</b>, since the server name is <b>all.x64P</b>.
</p><p>Below is a section of the <tt>evm3530_config_all.c</tt> showing the Arm-side configuration for <tt>DSPLink</tt>.
</p><p>&lt;syntaxhighlight lang='c'&gt;
/*
</p>
<pre>*  ARM-side DSP Link memory map for server "all.x64P":
*  This table has been copied from
*      ti/sdo/ce/examples/servers/all_codecs/package/info/bin/
*              ti_platforms_evm3530/all_x64P_memtab.c
*
*/
</pre>
<p>static Global_ArmDspLinkConfigMemTableEntry memTable_all_x64P[] = {
</p>
<pre>   { "DDR2",         0x87800000, 0x87800000, 0x00600000, 1, 0 },
   { "DSPLINKMEM",   0x87E00000, 0x87E00000, 0x00100000, 1, 0 },
   { "RESET_VECTOR", 0x87F00000, 0x87F00000, 0x00001000, 1, 0 },
   { "IVAMMU",       0x5D000000, 0x5D000000, 0x00001000, 0, 0 },
   { "L4PER",        0x49000000, 0x49000000, 0x00100000, 0, 0 },
   { "IRAM",         0x107F8000, 0x5C7F8000, 0x00008000, 1, 0 },
   { "L1DSRAM",      0x10F04000, 0x5CF04000, 0x0000C000, 1, 0 },
   { "DDRALGHEAP",   0x86000000, 0x86000000, 0x01800000, 0, 0 },
   { "L4CORE",       0x48000000, 0x48000000, 0x01000000, 0, 0 },
   { "CMEM",         0x00000000, 0x00000000, 0x00000000, 0, 0 },
   { NULL, 0, 0, 0, 0, 0 }
</pre>
<p>};
</p><p>/*
</p>
<pre>*  List of server names for all DspLink configuration tables.
*  Change or add your server name[s] here.
*/
</pre>
<p>String ti_sdo_ce_ipc_armDspLinkConfigServerNames[] = {
</p>
<pre>   "all.x64P",
   NULL
</pre>
<p>};
</p><p>/* Arm-side DspLink configuration table for server "all.x64P": */
static Global_ArmDspLinkConfig armDspLinkConfig_all_x64P = {
</p>
<pre>   memTable_all_x64P,
   BootNoPwr
</pre>
<p>};
</p><p>/* List of matching-positions-by-name DspLink configuration tables for all servers. */
Global_ArmDspLinkConfig *ti_sdo_ce_ipc_armDspLinkConfigs[] = {
</p>
<pre>   &amp;armDspLinkConfig_all_x64P,    /* all.x64P */
   NULL
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p><p>The memory table, <code>memTable_all_x64P</code>, has been copied from an auto-generated file that was created when the
server, <b>all.x64P</b>, was built. This table can either be copied from the auto-generated file, or the auto-generated
file can be included in the platform configuration file. For example, we could replace the table above with
</p><p>&lt;syntaxhighlight lang='c'&gt;
</p>
<ol><li>include &lt;ti/sdo/ce/examples/servers/all_codecs/package/info/bin/ti_platforms_evm3530/all_x64P_memtab.c&gt;</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>The names of the static tables can be changed, as long as their references in the other tables are also updated. The names
of the global tables must not be changed, since they are referenced by Codec Engine libraries.
</p>
<h4><span class="mw-headline" id="Makefiles_and_Linker_Command_Files">Makefiles and Linker Command Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=10" title="Edit section: Makefiles and Linker Command Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The makefiles for the run-time configuration examples will include the <b>xdcpaths.mak</b> file at the root of the Codec Engine examples directory, so the tools and paths to the various installation directories only need to be set up in <b>xdcpaths.mak</b>.
</p><p>The Linux run-time configuration examples also include linker command files containing libraries for the local algorithms.  For WinCE, the makefile must explicitly list these libraries.
</p>
<h3><span class="mw-headline" id="Run-Time_Configuration_audio1_ires_Examples">Run-Time Configuration audio1_ires Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=11" title="Edit section: Run-Time Configuration audio1 ires Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <b>ti/sdo/ce/examples/apps/audio1_ires</b> directory contains the original XDC configured <b>audio1_ires</b> example, and the following sub-directories containing run-time configuration versions of this example:
</p>
<ul><li><b>rtcfg_DM365</b> - Linux example for EVM DM365 platform. There is no DSP server for this example, all algorithms are local.</li>
<li><b>rtcfg_local_evm3530_linux</b> - Linux example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_local_evm3530_wince</b> - WinCE example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_PC</b> - Linux PC example.</li></ul>
<p>The <b>audio1_ires</b> example uses an algorithm that implements the IRES interface, so these examples will show run-time configuration for RMAN.  Since the application and platform configuration files are similar to the <b>speech1_copy</b> examples, we will just describe the RMAN configuration for this example.
</p><p>The default RMAN configuration file is located in <b>ti/sdo/ce/utils/rtcfg/rtcfg_rman.c</b>, and has RMAN disabled.  To override the default RMAN configuration, each of the run-time configuration examples has its own modified copy of <b>rtcfg_rman.c</b>, which has changed
&lt;syntaxhighlight lang='c'&gt;
</p>
<ol><li>define USE_RMAN 0  /* RMAN disabled */</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>to
</p><p>&lt;syntaxhighlight lang='c'&gt;
</p>
<ol><li>define USE_RMAN 1  /* RMAN enabled */</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>The default RMAN configuration file already has the IRES resources needed by <b>audio1_ires</b>, as examples, so these do not need to be modified. In fact, setting <code>USE_RMAN</code> to 1 is the only modification that needs to be made, if the
application registers all the IRES resources used, instead of having them auto-registered. If the resources are to
be auto-registered, the <code>RMAN_autoRegister()</code> function in <b>rtcfg_rman.c</b> has to be modified to do the registration.
</p>
<h3><span class="mw-headline" id="Run-Time_Configuration_video1_copy_Examples">Run-Time Configuration video1_copy Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=12" title="Edit section: Run-Time Configuration video1 copy Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <b>ti/sdo/ce/examples/apps/video1_copy</b> directory contains the original XDC configured <b>video1_copy</b> example, and the following sub-directories containing run-time configuration versions of this example:
</p>
<ul><li><b>rtcfg_DM365</b> - Linux example for EVM DM365 platform. There is no DSP server for this example, all algorithms are local.</li>
<li><b>rtcfg_local_evm3530_linux</b> - Linux example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_local_evm3530_wince</b> - WinCE example for EVM 3530 ARM. All algorithms run locally on the ARM.</li>
<li><b>rtcfg_remote_evm3530_linux</b> - Linux example for EVM3530. Both algorithms run remotely on the DSP.</li>
<li><b>rtcfg_remote_evm3530_wince</b> WinCE example for EVM3530. Both algorithms run remotely on the DSP.</li></ul>
<p>The local examples use DMAN3 (cpu copy version for EVM 3530 ARM), so each local run-time configuration example contains a modified copy of the default DMAN3 configuration file, <b>ti/sdo/ce/utils/rtcfg/rtcfg_dman3.c</b>. The modified <b>rtcfg_dman3.c</b> has set
</p><p>&lt;syntaxhighlight lang='c'&gt;
</p>
<ol><li>define USE_DMAN3 1  /* DMAN3 enabled */</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>That is the only change, since these examples use the default DMAN3 configuration.
</p><p>For the remote examples, DMAN3 is only used by the server algorithms, so no local copy of <b>rtcfg_dman3.c</b> is needed to enable DMAN3.
</p>
<h2><span class="mw-headline" id="New_APIs">New APIs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=13" title="Edit section: New APIs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="Engine_getNumAlgs2(),_Engine_getAlgInfo2()"></span><span class="mw-headline" id="Engine_getNumAlgs2.28.29.2C_Engine_getAlgInfo2.28.29">Engine_getNumAlgs2(), Engine_getAlgInfo2()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=14" title="Edit section: Engine getNumAlgs2(), Engine getAlgInfo2()">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The existing APIs
&lt;syntaxhighlight lang='c'&gt;
Engine_Error Engine_getNumAlgs(String engineName, Int *numAlgs);
Engine_Error Engine_getNumAlgs(String name, Int *numAlgs);
&lt;/syntaxhighlight&gt;
</p><p>only apply to algorithms that were statically configured into an engine at build time. Now that we can add remote algorithms to the engine after it has been opened, we need to be able to get algorithm information based on an Engine handle, rather than the Engine name. We have added the following new APIs to do this:
</p><p>&lt;syntaxhighlight lang='c'&gt;
Engine_Error Engine_getNumAlgs2(String name, Engine_Handle engine, Int *numAlgs);
Engine_Error Engine_getAlgInfo2(String name, Engine_Handle engine, Engine_AlgInfo2 *algInfo2, Int index);
&lt;/syntaxhighlight&gt;
</p><p>These new APIs take both an Engine name and an Engine handle, so that if the engine has not been opened the name can be used, and the handle set to <code>NULL</code>. After the engine has been opened, the handle can be passed, and <code>NULL</code> can be passed for the name.
</p><p>The <code>Engine_AlgInfo2</code> structure is identical to the <code>Engine_AlgInfo</code>, except the <code>String *typeTab</code> array field is replaced with <code>String</code> types. The <code>typeTab</code> field of <code>Engine_AlgInfo</code> gives the inheritance hierarchy as a null-terminated array of strings. For example, a test video decoder may have the following typeTab:
</p><p>&lt;syntaxhighlight lang='c'&gt;
static String typeTab_MP4_TII_IVIDE[] = {
</p>
<pre>   "ti.sdo.ce.video.IVIDDEC",
   "ti.sdo.ce.test.xvideo.IVIDE",
   NULL
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p><p>To simplify data obtained from algorithms in the server, we have used a single ';' separated string of types for the
inheritence hierarchy of server algorithms. For the test video decoder above, the <code>types</code> string would be
<code>"ti.sdo.ce.video.IVIDDEC;ti.sdo.ce.test.xvideo.IVIDE"</code>.
The <code>Engine_AlgInfo2</code> structure is defined as:
</p><p>&lt;syntaxhighlight lang='c'&gt;
typedef struct Engine_AlgInfo2 {
</p>
<pre>   Int         algInfoSize;    /* Size of this structure. */
   String      name;           /* Name of algorithm. */
   String      types;          /* Inheritance hierarchy */
   Bool        isLocal;        /* If TRUE, run locally. */
</pre>
<p>} Engine_AlgInfo2;
&lt;/syntaxhighlight&gt;
</p><p><br />
</p>
<h3><span class="mw-headline" id="Macros_for_Filling_in_Algorithm_and_Engine_Tables">Macros for Filling in Algorithm and Engine Tables</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=15" title="Edit section: Macros for Filling in Algorithm and Engine Tables">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Codec Engine must be configured with a table of engines, each of which is configured with a table of algorithms. If the
engine consists of only remote algorithms, its algorithm table can be set to <code>NULL</code> in <b>app_config.c</b>, and its algorithm table will be allocated at run-time, and filled in with data obtained from the engine's server.
</p><p>To provide an alternative of having the application developer fill in tables of <code>Engine_AlgDesc</code> (for local algorithms) and to prevent compatibility breaks if in the future, fields are added to the <code>Engine_AlgDesc</code> structure, we have added macros to create algorithm and engine tables.
</p><p>To use these macros, <b>CERuntime.h</b> must be include in the source file. Following is a description of the macros used in
the run-time configuration examples.
</p>
<h4><span id="CE_DECLARE_TYPE()"></span><span class="mw-headline" id="CE_DECLARE_TYPE.28.29">CE_DECLARE_TYPE()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=16" title="Edit section: CE DECLARE TYPE()">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <code>CE_DECLARE_TYPE(name, types)</code> macro is used to declare a type inheritance hierarchy for an algorithm. The <code>name</code> parameter is a symbol that will be associated with the <code>types</code> parameter. It will be used to generate internal variable names, so each call to <code>CE_DECLARE_TYPE</code> should use a unique <tt>name</tt> value. The <code>types</code> parameter is a ';' separated <b>string</b> of inheritance classes of an algorithm. For example, the viddec1_copy algorithm inherits the <code>ti.sdo.ce.video1.IVIDDEC1</code> interface, so we declare its type with the line:
</p><p>&lt;syntaxhighlight lang='c'&gt;
CE_DECLARE_TYPE(viddec1_copy, "ti.sdo.ce.video1.IVIDDEC1")
&lt;/syntaxhighlight&gt;
</p><p>If we had an algorithm that inherited the ti.sdo.ce.test.xvideo.IVIDE interface, which in turn inherited the
<code>ti.sdo.ce.video.IVIDDEC</code> interface, we could declare its type as:
&lt;syntaxhighlight lang='c'&gt;
CE_DECLARE_TYPE(decoder, "ti.sdo.ce.video.IVIDDEC;ti.sdo.ce.test.xvideo.IVIDE")
&lt;/syntaxhighlight&gt;
</p><p>The order of the inheritance classes in the string is not important.
</p>
<h4><span id="CE_BEGIN_ALG_TABLE(),_CE_LOCAL_ALG(),_and_CE_END_ALG_TABLE()"></span><span class="mw-headline" id="CE_BEGIN_ALG_TABLE.28.29.2C_CE_LOCAL_ALG.28.29.2C_and_CE_END_ALG_TABLE.28.29">CE_BEGIN_ALG_TABLE(), CE_LOCAL_ALG(), and CE_END_ALG_TABLE()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=17" title="Edit section: CE BEGIN ALG TABLE(), CE LOCAL ALG(), and CE END ALG TABLE()">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>A table of local algorithms for an Engine is declared in the following manner:
&lt;syntaxhighlight lang='c'&gt;
CE_BEGIN_ALG_TABLE(algTableName)
</p>
<pre>   CE_LOCAL_ALG(name_1, ...)
   CE_LOCAL_ALG(name_2, ...)
             ...
   CE_LOCAL_ALG(name_n, ...)
</pre>
<p>CE_END_ALG_TABLE(algTableName)
&lt;/syntaxhighlight&gt;
</p><p>The parameter passed to <code>CE_BEGIN_ALG_TABLE()</code> and <code>CE_END_ALG_TABLE()</code> is a symbol used internally to generate the name of a C-structure. The same symbol name must be used for both macro calls.
</p><p>The <code>CE_LOCAL_ALG()</code> macro takes the following parameters:
&lt;syntaxhighlight lang='c'&gt;
CE_LOCAL_ALG(
</p>
<pre>       name,                 /* name used in CE_DECLARE_TYPE() */
       algName,              /* alg name */
       iAlgFxns,             /* IAlg functions */
       idma3Fxns,            /* IDMA3 functions */
       iresFxns,             /* IRES functions */
       groupId,              /* Scratch group Id */
       memType)              /* Memory type */
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<ul><li><code>name</code> - This is the same name used in a call to <code>CE_DECLARE_TYPE()</code>, to associate an inheritance hierarchy to the algorithm.</li>
<li><code>String algName</code> - This is the string name used in application code to create the algorithm, e.g., "viddec1_copy".</li>
<li><code>IAlg_Fxns *iAlgFxns</code> - Address of the algorithm's IAlg_Fxns table.</li>
<li><code>Ptr idma3Fxns</code> - Address of algorithm's IDMA3 function table, or <code>NULL</code>, if the algorithm does not implement <code>IDMA3</code>.</li>
<li><code>Ptr iresFxns</code> - Address of algorithm's IRES function table, or <code>NULL</code>, if the algorithm does not implement <code>IRES</code>.</li>
<li><code>Int groupId</code> - Resource sharing group ID.</li>
<li><code>Engine_CachedMemType memType</code> - Memory type for algorithm's memory requests. This can be <code>Engine_USECACHEDMEM_NONCACHED</code>,to request non-cached memory, <code>Engine_USECACHEDMEM_CACHED</code> to request cached memory, or <code>Engine_USECACHEDMEM_DEFAULT</code> to use the default cache setting. The default cache setting is determined by the global variable, <code>ti_sdo_ce_alg_ALG_useCache</code>, which is</li></ul>
<p>set to TRUE or FALSE in the application configuration file.
</p>
<h4><span id="CE_BEGIN_ENGINE_TABLE(),_CE_ENGINE(),_and_CE_END_ENGINE_TABLE()"></span><span class="mw-headline" id="CE_BEGIN_ENGINE_TABLE.28.29.2C_CE_ENGINE.28.29.2C_and_CE_END_ENGINE_TABLE.28.29">CE_BEGIN_ENGINE_TABLE(), CE_ENGINE(), and CE_END_ENGINE_TABLE()</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit&amp;section=18" title="Edit section: CE BEGIN ENGINE TABLE(), CE ENGINE(), and CE END ENGINE TABLE()">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>An Engine table is declared in the following manner:
</p><p>&lt;syntaxhighlight lang='c'&gt;
CE_BEGIN_ENGINE_TABLE(name)
</p>
<pre>   CE_ENGINE(algTab_1, ...)
   CE_ENGINE(algTab_2, ...)
        ...
   CE_ENGINE(algTab_n, ...)
</pre>
<p>CE_END_ENGINE_TABLE(name)
&lt;/syntaxhighlight&gt;
</p><p>The <code>name</code> parameter passed to <code>CE_BEGIN_ENGINE_TABLE()</code> will be used to generate the name of an internal variable, and the same name must be passed to <code>CE_END_ENGINE_TABLE()</code>.  There should only be one Engine table in the application's run-time configuration file.
</p><p>The <code>CE_ENGINE()</code> macro takes the following parameters:
&lt;syntaxhighlight lang='c'&gt;
CE_ENGINE(
</p>
<pre>       algTableName,         /* name used in CE_BEGIN_ALG_TABLE() */
       engineName,           /* Engine name */
       serverName)           /* Server name */
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<ul><li><code>algTableName</code> - This is the same name used in a previous call to <code>CE_BEGIN_ALG_TABLE()</code>, to associate a table of local algorithms to the engine. If the Engine has no local algorithms, then set <code>algTableName</code> to <code>NULL</code>.</li>
<li><code>String engineName</code> - This is the string name of the Engine used in application code call to <code>Engine_open()</code>, e.g., "video1_copy".</li>
<li><code>String serverName</code> - This is the name of the Engine's server, if it has one, otherwise set <tt>serverName</tt> to <code>NULL</code>.</li></ul>
<p>Note: There should be no <tt>;</tt> placed after any of these macro calls.
</p>
<!-- 
NewPP limit report
Cached time: 20201130080142
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.064 seconds
Real time usage: 0.066 seconds
Preprocessor visited node count: 118/1000000
Preprocessor generated node count: 172/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:6770-0!canonical and timestamp 20201130080142 and revision id 182033
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Codec Engine Runtime Config</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Codec Engine Runtime Config</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Codec Engine Runtime Config</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;oldid=182033">https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;oldid=182033</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Codec_Engine.html" title="Category:Codec Engine">Codec Engine</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Codec+Engine+Runtime+Config" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Codec_Engine_Runtime_Config.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Codec_Engine_Runtime_Config&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Codec_Engine_Runtime_Config.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Codec_Engine_Runtime_Config.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Codec_Engine_Runtime_Config.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;oldid=182033" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Codec_Engine_Runtime_Config&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 21 July 2014, at 07:54.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.064","walltime":"0.066","ppvisitednodes":{"value":118,"limit":1000000},"ppgeneratednodes":{"value":172,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130080142","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":224});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Codec_Engine_Runtime_Config by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:31:56 GMT -->
</html>
