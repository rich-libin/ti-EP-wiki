<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/MCSDK_UG_Chapter_Developing_System_Mgmt by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 12:38:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>MCSDK UG Chapter Developing System Mgmt - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MCSDK_UG_Chapter_Developing_System_Mgmt","wgTitle":"MCSDK UG Chapter Developing System Mgmt","wgCurRevisionId":204015,"wgRevisionId":204015,"wgArticleId":19657,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MCSDK_UG_Chapter_Developing_System_Mgmt","wgRelevantArticleId":19657,"wgRequestId":"a31fcc14692e5b62a972a701","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MCSDK_UG_Chapter_Developing_System_Mgmt rootpage-MCSDK_UG_Chapter_Developing_System_Mgmt skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">MCSDK UG Chapter Developing System Mgmt</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><br /><br />
</p>
<hr />
<p><a href="File_TI_Logo_oneline_twocolor.html" class="image"><img alt="TI Logo oneline twocolor.png" src="https://processors.wiki.ti.com/images/d/dc/TI_Logo_oneline_twocolor.png" width="300" height="37" /></a>
</p>
<hr />
<p><br />
</p><p><font size="5"><b><a href="MCSDK_UG_Chapter_Developing.html" title="MCSDK UG Chapter Developing">Developing with MCSDK</a>: System Management</b></font>
</p><p><font size="2">Last updated: <b>07/27/2015</b></font>
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Acronyms"><span class="tocnumber">2</span> <span class="toctext">Acronyms</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Multiple_Processor_Manager"><span class="tocnumber">3</span> <span class="toctext">Multiple Processor Manager</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Structure_of_MPM"><span class="tocnumber">3.1</span> <span class="toctext">Structure of MPM</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Methods_to_load_and_run_ELF_images_using_MPM"><span class="tocnumber">3.2</span> <span class="toctext">Methods to load and run ELF images using MPM</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Using_mpmcl_utility_to_manage_slave_processors"><span class="tocnumber">3.2.1</span> <span class="toctext">Using mpmcl utility to manage slave processors</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Loading_and_running_slave_images_at_bootup"><span class="tocnumber">3.2.2</span> <span class="toctext">Loading and running slave images at bootup</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Managing_slave_processors_from_application_program"><span class="tocnumber">3.2.3</span> <span class="toctext">Managing slave processors from application program</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#DSP_Image_Requirements"><span class="tocnumber">3.3</span> <span class="toctext">DSP Image Requirements</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Getting_DSP_prints.28trace.29_output_from_ARM.2FLinux_using_MPM"><span class="tocnumber">3.4</span> <span class="toctext">Getting DSP prints(trace) output from ARM/Linux using MPM</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#DSP_trace.2Fprint_messages_from_Linux"><span class="tocnumber">3.4.1</span> <span class="toctext">DSP trace/print messages from Linux</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#MPM_configuration_file"><span class="tocnumber">3.5</span> <span class="toctext">MPM configuration file</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Crash_event_notification.2C_coredump_generation_and_processing"><span class="tocnumber">3.6</span> <span class="toctext">Crash event notification, coredump generation and processing</span></a>
<ul>
<li class="toclevel-3 tocsection-14"><a href="#Instrumenting_DSP_application"><span class="tocnumber">3.6.1</span> <span class="toctext">Instrumenting DSP application</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Detecting_crash_event_in_MPM"><span class="tocnumber">3.6.2</span> <span class="toctext">Detecting crash event in MPM</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#Generating_DSP_coredump"><span class="tocnumber">3.6.3</span> <span class="toctext">Generating DSP coredump</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Converting_and_loading_core_dump_image_to_CCS"><span class="tocnumber">3.6.4</span> <span class="toctext">Converting and loading core dump image to CCS</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Analyzing_DSP_crash_in_CCS"><span class="tocnumber">3.6.5</span> <span class="toctext">Analyzing DSP crash in CCS</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#MPM_error_codes_and_debugging"><span class="tocnumber">3.7</span> <span class="toctext">MPM error codes and debugging</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Loading_DSP_images_from_CCS_.28without_using_MPM.29"><span class="tocnumber">3.8</span> <span class="toctext">Loading DSP images from CCS (without using MPM)</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Frequently_Asked_Questions"><span class="tocnumber">3.9</span> <span class="toctext">Frequently Asked Questions</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Resource_Manager"><span class="tocnumber">4</span> <span class="toctext">Resource Manager</span></a>
<ul>
<li class="toclevel-2 tocsection-23"><a href="#Architecture"><span class="tocnumber">4.1</span> <span class="toctext">Architecture</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#General_Instance_Interfaces"><span class="tocnumber">4.1.1</span> <span class="toctext">General Instance Interfaces</span></a>
<ul>
<li class="toclevel-4 tocsection-25"><a href="#Service_API"><span class="tocnumber">4.1.1.1</span> <span class="toctext">Service API</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#Transport_API"><span class="tocnumber">4.1.1.2</span> <span class="toctext">Transport API</span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#OSAL_API"><span class="tocnumber">4.1.1.3</span> <span class="toctext">OSAL API</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-28"><a href="#Server"><span class="tocnumber">4.1.2</span> <span class="toctext">Server</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Client"><span class="tocnumber">4.1.3</span> <span class="toctext">Client</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Client_Delegate_.28CD.29"><span class="tocnumber">4.1.4</span> <span class="toctext">Client Delegate (CD)</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#Shared_Instances"><span class="tocnumber">4.1.5</span> <span class="toctext">Shared Instances</span></a>
<ul>
<li class="toclevel-4 tocsection-32"><a href="#Shared_Server"><span class="tocnumber">4.1.5.1</span> <span class="toctext">Shared Server</span></a></li>
<li class="toclevel-4 tocsection-33"><a href="#Shared_Client"><span class="tocnumber">4.1.5.2</span> <span class="toctext">Shared Client</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-34"><a href="#How_Resources_Are_Managed"><span class="tocnumber">4.2</span> <span class="toctext">How Resources Are Managed</span></a>
<ul>
<li class="toclevel-3 tocsection-35"><a href="#Allocator_Algorithm"><span class="tocnumber">4.2.1</span> <span class="toctext">Allocator Algorithm</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Static_Policies"><span class="tocnumber">4.2.2</span> <span class="toctext">Static Policies</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#GRL_.26_Policy_Format"><span class="tocnumber">4.2.3</span> <span class="toctext">GRL &amp; Policy Format</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#Linux_DTB_Support"><span class="tocnumber">4.2.4</span> <span class="toctext">Linux DTB Support</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-39"><a href="#Configuring_.26_Using_RM"><span class="tocnumber">4.3</span> <span class="toctext">Configuring &amp; Using RM</span></a>
<ul>
<li class="toclevel-3 tocsection-40"><a href="#Defining_the_GRL_.26_Policy"><span class="tocnumber">4.3.1</span> <span class="toctext">Defining the GRL &amp; Policy</span></a>
<ul>
<li class="toclevel-4 tocsection-41"><a href="#GRL.2FPolicy_Definition_.26_Conversion_Tools"><span class="tocnumber">4.3.1.1</span> <span class="toctext">GRL/Policy Definition &amp; Conversion Tools</span></a>
<ul>
<li class="toclevel-5 tocsection-42"><a href="#Device_Tree_Compiler"><span class="tocnumber">4.3.1.1.1</span> <span class="toctext">Device Tree Compiler</span></a></li>
<li class="toclevel-5 tocsection-43"><a href="#DTB_to_C-Style_Array_Conversion_Utility"><span class="tocnumber">4.3.1.1.2</span> <span class="toctext">DTB to C-Style Array Conversion Utility</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-44"><a href="#General_DTS_Text_Format"><span class="tocnumber">4.3.1.2</span> <span class="toctext">General DTS Text Format</span></a></li>
<li class="toclevel-4 tocsection-45"><a href="#GRL_Nodes_.26_Properties"><span class="tocnumber">4.3.1.3</span> <span class="toctext">GRL Nodes &amp; Properties</span></a>
<ul>
<li class="toclevel-5 tocsection-46"><a href="#Example:_fruit-GRL.dts"><span class="tocnumber">4.3.1.3.1</span> <span class="toctext">Example: fruit-GRL.dts</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-47"><a href="#Policy_Nodes_.26_Properties"><span class="tocnumber">4.3.1.4</span> <span class="toctext">Policy Nodes &amp; Properties</span></a>
<ul>
<li class="toclevel-5 tocsection-48"><a href="#Example:_fruit-policy.dts"><span class="tocnumber">4.3.1.4.1</span> <span class="toctext">Example: fruit-policy.dts</span></a></li>
<li class="toclevel-5 tocsection-49"><a href="#Example:_fruit-policy-static.dts"><span class="tocnumber">4.3.1.4.2</span> <span class="toctext">Example: fruit-policy-static.dts</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-50"><a href="#GRL.2FPolicy_Conversion_for_Input_to_RM"><span class="tocnumber">4.3.1.5</span> <span class="toctext">GRL/Policy Conversion for Input to RM</span></a>
<ul>
<li class="toclevel-5 tocsection-51"><a href="#Example:_Converting_fruit_GRL_and_Policies"><span class="tocnumber">4.3.1.5.1</span> <span class="toctext">Example: Converting fruit GRL and Policies</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3 tocsection-52"><a href="#RM_Instance_Initialization_.26_Configuration"><span class="tocnumber">4.3.2</span> <span class="toctext">RM Instance Initialization &amp; Configuration</span></a>
<ul>
<li class="toclevel-4 tocsection-53"><a href="#Instance_Initialization"><span class="tocnumber">4.3.2.1</span> <span class="toctext">Instance Initialization</span></a>
<ul>
<li class="toclevel-5 tocsection-54"><a href="#Server_Initialization"><span class="tocnumber">4.3.2.1.1</span> <span class="toctext">Server Initialization</span></a></li>
<li class="toclevel-5 tocsection-55"><a href="#Client_Delegate_Initialization"><span class="tocnumber">4.3.2.1.2</span> <span class="toctext">Client Delegate Initialization</span></a></li>
<li class="toclevel-5 tocsection-56"><a href="#Client_Initialization"><span class="tocnumber">4.3.2.1.3</span> <span class="toctext">Client Initialization</span></a></li>
<li class="toclevel-5 tocsection-57"><a href="#Shared_Server.2FClient_Initialization"><span class="tocnumber">4.3.2.1.4</span> <span class="toctext">Shared Server/Client Initialization</span></a></li>
</ul>
</li>
<li class="toclevel-4 tocsection-58"><a href="#RM_Transport_Configuration"><span class="tocnumber">4.3.2.2</span> <span class="toctext">RM Transport Configuration</span></a>
<ul>
<li class="toclevel-5 tocsection-59"><a href="#RM_Instance_Transport_Requirements"><span class="tocnumber">4.3.2.2.1</span> <span class="toctext">RM Instance Transport Requirements</span></a></li>
<li class="toclevel-5 tocsection-60"><a href="#Transport_Registration"><span class="tocnumber">4.3.2.2.2</span> <span class="toctext">Transport Registration</span></a></li>
<li class="toclevel-5 tocsection-61"><a href="#Providing_Received_Packets_to_RM"><span class="tocnumber">4.3.2.2.3</span> <span class="toctext">Providing Received Packets to RM</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-3 tocsection-62"><a href="#Service_Request.2FResponse_Mechanisms"><span class="tocnumber">4.3.3</span> <span class="toctext">Service Request/Response Mechanisms</span></a>
<ul>
<li class="toclevel-4 tocsection-63"><a href="#Service_Request_Parameters"><span class="tocnumber">4.3.3.1</span> <span class="toctext">Service Request Parameters</span></a></li>
<li class="toclevel-4 tocsection-64"><a href="#Service_Response_Parameters"><span class="tocnumber">4.3.3.2</span> <span class="toctext">Service Response Parameters</span></a></li>
<li class="toclevel-4 tocsection-65"><a href="#Blocking_.26_Non-Blocking_Requests"><span class="tocnumber">4.3.3.3</span> <span class="toctext">Blocking &amp; Non-Blocking Requests</span></a></li>
<li class="toclevel-4 tocsection-66"><a href="#Direct_.26_Indirect_Resource_Management"><span class="tocnumber">4.3.3.4</span> <span class="toctext">Direct &amp; Indirect Resource Management</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-67"><a href="#RM_Supported_LLDs"><span class="tocnumber">4.4</span> <span class="toctext">RM Supported LLDs</span></a>
<ul>
<li class="toclevel-3 tocsection-68"><a href="#QMSS_LLD"><span class="tocnumber">4.4.1</span> <span class="toctext">QMSS LLD</span></a></li>
<li class="toclevel-3 tocsection-69"><a href="#CPPI_LLD"><span class="tocnumber">4.4.2</span> <span class="toctext">CPPI LLD</span></a></li>
<li class="toclevel-3 tocsection-70"><a href="#PA_LLD"><span class="tocnumber">4.4.3</span> <span class="toctext">PA LLD</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-71"><a href="#Running_RM_Test_Projects"><span class="tocnumber">4.5</span> <span class="toctext">Running RM Test Projects</span></a>
<ul>
<li class="toclevel-3 tocsection-72"><a href="#ARM_Linux_RM_Server_Daemon"><span class="tocnumber">4.5.1</span> <span class="toctext">ARM Linux RM Server Daemon</span></a></li>
<li class="toclevel-3 tocsection-73"><a href="#ARM_Linux_Multi-Process_Test_Project"><span class="tocnumber">4.5.2</span> <span class="toctext">ARM Linux Multi-Process Test Project</span></a></li>
<li class="toclevel-3 tocsection-74"><a href="#DSP_.2B_ARM_Linux_Test_Project"><span class="tocnumber">4.5.3</span> <span class="toctext">DSP + ARM Linux Test Project</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-75"><a href="#User_Space_DMA"><span class="tocnumber">5</span> <span class="toctext">User Space DMA</span></a>
<ul>
<li class="toclevel-2 tocsection-76"><a href="#UDMA_Files_in_the_filesystem"><span class="tocnumber">5.1</span> <span class="toctext">UDMA Files in the filesystem</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#Default_udma_channels_setup_in_the_kernel"><span class="tocnumber">5.2</span> <span class="toctext">Default udma channels setup in the kernel</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-78"><a href="#Contiguous_memory_allocator"><span class="tocnumber">6</span> <span class="toctext">Contiguous memory allocator</span></a>
<ul>
<li class="toclevel-2 tocsection-79"><a href="#Linux_configuration"><span class="tocnumber">6.1</span> <span class="toctext">Linux configuration</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="#User_space_Access"><span class="tocnumber">6.2</span> <span class="toctext">User space Access</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-81"><a href="#How_To.27s"><span class="tocnumber">7</span> <span class="toctext">How To's</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Learn how to manage resources on the device/EVM using the Resource Manager, download and manage DSP from ARM along with topics that have a global impact on your system.
</p>
<h1><span class="mw-headline" id="Acronyms">Acronyms</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=2" title="Edit section: Acronyms">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The following acronyms are used throughout this  chapter.<br />
</p>
<table border="1" style="width: 75%; height: 212px" id="acronymtable">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>Acronym</b>
</td>
<td bgcolor="#c0c0c0"><b>Meaning</b>
</td></tr>
<tr>
<td>API
</td>
<td>Application Programming Interface
</td></tr>
<tr>
<td>CD
</td>
<td>Resource Manager Client Delegate Instance
</td></tr>
<tr>
<td>DSP
</td>
<td>Digital Signal Processor
</td></tr>
<tr>
<td>DTB
</td>
<td>Device Tree Blob
</td></tr>
<tr>
<td>DTC
</td>
<td>Device Tree Compiler
</td></tr>
<tr>
<td>DTS
</td>
<td>Device Tree Source
</td></tr>
<tr>
<td>EVM
</td>
<td>Evaluation Module, hardware platform containing the Texas Instruments DSP
</td></tr>
<tr>
<td>FDT
</td>
<td>Flattened Device Tree
</td></tr>
<tr>
<td>GRL
</td>
<td>Resource Manager Global Resource List
</td></tr>
<tr>
<td>IPC
</td>
<td>Texas Instruments Inter-Processor Communication Development Kit
</td></tr>
<tr>
<td>LLD
</td>
<td>Low Level Driver
</td></tr>
<tr>
<td>MCSDK
</td>
<td>Texas Instruments Multi-Core Software Development Kit
</td></tr>
<tr>
<td>MPM
</td>
<td>Multiple Processor Manager
</td></tr>
<tr>
<td>OSAL
</td>
<td>Operating System Abstraction Layer
</td></tr>
<tr>
<td>PDK
</td>
<td>Texas Instruments Programmers Development Kit
</td></tr>
<tr>
<td>RM
</td>
<td>Resource Manager
</td></tr>
<tr>
<td>RTSC
</td>
<td>Eclipse Real-Time Software Components
</td></tr>
<tr>
<td>TI
</td>
<td>Texas Instruments
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Multiple_Processor_Manager">Multiple Processor Manager</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=3" title="Edit section: Multiple Processor Manager">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The Multiple Processor Manager (MPM) module is used to load and run DSP images from ARM.
</p>
<h2><span class="mw-headline" id="Structure_of_MPM">Structure of MPM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=4" title="Edit section: Structure of MPM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div class="thumb tright"><div class="thumbinner" style="width:252px;"><a href="File_Dspstate.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/4/44/Dspstate.png" width="250" height="370" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Dspstate.html" class="internal" title="Enlarge"></a></div>MPM slave node state transitions</div></div></div>
<ul><li>The MPM has two following major components
<ul><li><i>MPM server (mpmsrv)</i>: It runs as a daemon and in default filesystem supplied in MCSDK it runs comes up automatically. It parses mpm config file from <i>/etc/mpm/mpm_config.json</i>, then waits on an UNIX domain socket. The mpm server runs/maintains a state machine for each slave core.</li>
<li><i>MPM commandline/client utility (mpmcl)</i>: It is installed in the filesystem provides commandline access to the server.</li></ul></li>
<li>Following are the different methods, MPM can be used to load/run slave images
<ul><li>Using mpmcl utility</li>
<li>From config file, to load at bootup</li>
<li>Writing an application to use mpmclient header file and library</li></ul></li>
<li>The mpm server/daemon logs go to "/var/log/daemon.log" or "/var/log/mpmsrv.log" based on "outputif" configuration in the JSON config file.</li>
<li>The <i>load</i> command writes the slave image segments to memory using UIO interface. The <i>run</i> command runs the slave images.</li>
<li>An example DSP image is provided in the MCSDK package at <i>mcsdk_bios_#_##_##_##/examples/mpm</i> directory.</li>
<li>All events from the state transition diagram are available as options of <i>mpmcl</i> command, except for the crash event.</li>
<li>The reset state powers down the slave nodes.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Methods_to_load_and_run_ELF_images_using_MPM">Methods to load and run ELF images using MPM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=5" title="Edit section: Methods to load and run ELF images using MPM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Using_mpmcl_utility_to_manage_slave_processors">Using mpmcl utility to manage slave processors</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=6" title="Edit section: Using mpmcl utility to manage slave processors">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Use <i>mpmcl --help</i> to the details of the commands supported.
Following is the output of the mpmcl help
</p>
<pre>Usage: mpmcl &lt;command&gt; [slave name] [options]
Multiproc manager CLI to manage slave processors
 &lt;command&gt;           Commands for the slave processor
                     Supported commands: ping, load, run, reset, status, coredump, transport
                                         load_withpreload, run_withpreload
 [slave name]        Name of the slave processor as specified in MPM config file
 [options]           In case of load, the option field need to have image file name
</pre>
<p><br />
Following is sample set of commands to manage slave processors.
</p>
<table>

<tbody><tr>
<td>- Ping daemon if it is alive</td>
<td><i>mpmcl ping</i>
</td></tr>
<tr>
<td>- Check status of dsp core 0</td>
<td><i>mpmcl status dsp0</i>
</td></tr>
<tr>
<td>- Load dsp core 0 with an image</td>
<td><i>mpmcl load dsp0 dsp-core0.out</i>
</td></tr>
<tr>
<td>- Run dsp core 0</td>
<td><i>mpmcl run dsp0</i>
</td></tr>
<tr>
<td>- Reset dsp core 0</td>
<td><i>mpmcl reset dsp0</i>
</td></tr>
<tr>
<td>- Load dsp core 0 image with a preload image</td>
<td><i>mpmcl load_withpreload dsp0 preload_image.out dsp-core0.out</i>
</td></tr>
<tr>
<td>- Run dsp core 0 with preload</td>
<td><i>mpmcl run_withpreload dsp0</i>
</td></tr></tbody></table>
<p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  In case of error, the mpm server takes the slave to error state. You need to run <i>reset</i> command to change back to idle state so that the slave can be loaded and run again.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The status of slave core is idle means the slave core is not loaded as far as MPM is concerned. It does NOT mean the slave core is running idle instructions.
</p><p><br />
</p>
<h3><span class="mw-headline" id="Loading_and_running_slave_images_at_bootup">Loading and running slave images at bootup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=7" title="Edit section: Loading and running slave images at bootup">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The config file can load a command script to load and run slave cores at bootup. The path of the script is to be added in "cmdfile": "/etc/mpm/slave_cmds.txt" in the config file.
Following is a sample command to load and run DSP images.
</p>
<pre>dsp0 load ./dsp-core0.out
dsp1 load ./dsp-core0.out
dsp0 run
dsp1 run
</pre>
<h3><span class="mw-headline" id="Managing_slave_processors_from_application_program">Managing slave processors from application program</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=8" title="Edit section: Managing slave processors from application program">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>An application can include <a rel="nofollow" class="external text" href="http://git.ti.com/cgit/cgit.cgi/keystone-linux/multi-proc-manager.git/tree/include/mpmclient.h">mpmclient.h</a> from MPM package and link to <i>libmpmclient.a</i> to load/run/reset slave cores. The <i>mpmcl</i> essentially is a wrapper around this library to provide commandline access for the functions from mpmclient.h.
</p>
<h2><span class="mw-headline" id="DSP_Image_Requirements">DSP Image Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=9" title="Edit section: DSP Image Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For MPM to properly load and manage a DSP image, the following are required:
</p>
<ul><li>The DSP image should be in ELF format.</li>
<li>The MPM ELF loader loads those segments to DSP memory, whose <i>PT_LOAD</i> field is set. In order to skip loading of a particular section, set the type to <i>NOLOAD</i> in the command/cfg file.</li></ul>
<p>&lt;syntaxhighlight lang="javascript"&gt;
/* Section not to be loaded by remoteproc loader */
Program.sectMap[".noload_section"].type = "NOLOAD";
&lt;/syntaxhighlight&gt;
</p>
<ul><li>The default allowed memory ranges for DSP segments are as follows</li></ul>
<table>
<tbody><tr>
<th>
</th>
<th scope="col">Start Address
</th>
<th scope="col">Length
</th></tr>
<tr>
<td>L2 Local
</td>
<td>0x00800000
</td>
<td>1MB
</td></tr>
<tr>
<td>L2 Global
</td>
<td>0x[1-4]0800000
</td>
<td>1MB
</td></tr>
<tr>
<td>MSMC
</td>
<td>0x0C000000
</td>
<td>6MB
</td></tr>
<tr>
<td>DDR3
</td>
<td>0xA0000000
</td>
<td>(512MB)
</td></tr></tbody></table>
<p>The segment mapping can be changed using the mpm_config.json and Linux kernel device tree.
</p>
<h2><span id="Getting_DSP_prints(trace)_output_from_ARM/Linux_using_MPM"></span><span class="mw-headline" id="Getting_DSP_prints.28trace.29_output_from_ARM.2FLinux_using_MPM">Getting DSP prints(trace) output from ARM/Linux using MPM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=10" title="Edit section: Getting DSP prints(trace) output from ARM/Linux using MPM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The DSP image needs to have an uncompressed section with name <i>.resource_table</i>. The MPM looks for this table in the DSP ELF image before loading it. The <i>.resource_table</i> can be used to provide SYS/BIOS information on trace buffer location and size.<br />
</p><p>The <i>.resource_table</i> for must match to <a rel="nofollow" class="external text" href="https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/plain/include/linux/remoteproc.h?id=refs/tags/v3.9-rc8">remoteproc resource table format</a> used in IPC.
</p><p>Following steps shows how to create <i>.resource_table</i> section in the DSP image with trace buffer information. These code snippet is taken from MCSDK release package <i>&lt;mcsdk_bios_#_##_##_##&gt;/examples/mpm</i>
</p>
<ul><li>In the Configuro Script File of the application add following commands to create a section<br /></li></ul>
<p>&lt;syntaxhighlight lang="javascript"&gt;
/*
</p>
<pre>* The SysMin used here vs StdMin, as trace buffer address is required for
* Linux trace debug driver, plus provides better performance.
*/
</pre>
<p>Program.global.sysMinBufSize = 0x8000;
var System = xdc.useModule('xdc.runtime.System');
var SysMin = xdc.useModule('xdc.runtime.SysMin');
System.SupportProxy = SysMin;
SysMin.bufSize = Program.global.sysMinBufSize;
</p><p>/* Configure resource table for trace only.
</p>
<pre>  Note that, it traceOnly parameter should not
  be set if application is using MessageQ based IPC
  to communicate between cores.
*/
</pre>
<p>var Resource = xdc.useModule('ti.ipc.remoteproc.Resource');
Resource.loadSegment = Program.platform.dataMemory;
Resource.traceOnly = true;
</p><p>&lt;/syntaxhighlight&gt;
</p>
<h3><span id="DSP_trace/print_messages_from_Linux"></span><span class="mw-headline" id="DSP_trace.2Fprint_messages_from_Linux">DSP trace/print messages from Linux</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=11" title="Edit section: DSP trace/print messages from Linux">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The DSP log messages can be read from following debugfs locations
</p>
<pre>DSP log entry for core #: <i>/sys/kernel/debug/remoteproc/remoteproc#/trace0</i>
</pre>
<p>Where # is the core id starting from 0.
</p><p>&lt;syntaxhighlight lang="bash"&gt;
</p>
<pre> root@keystone-evm:~# cat /sys/kernel/debug/remoteproc/remoteproc0/trace0
 Main started on core 1
 ....
 root@keystone-evm:~#
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<h2><span class="mw-headline" id="MPM_configuration_file">MPM configuration file</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=12" title="Edit section: MPM configuration file">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>The MPM configuration file is a <a rel="nofollow" class="external text" href="http://www.json.org/">JSON</a> format configuration file.</li>
<li>A sample config file can be reviewed from <a rel="nofollow" class="external text" href="http://git.ti.com/cgit/cgit.cgi/keystone-linux/multi-proc-manager.git/plain/scripts/mpm_config.json">mpm_config.json</a>. Usually it is installed in default root file system release as a part of MCSDK. The location is <i>/etc/mpm</i>.</li>
<li>The MPM parser ignores any JSON elements which it does not recognize. This can be used to put comment in the config file.</li>
<li>The tag <i>cmdfile</i> (which is commented as <i>_cmdfile</i> by default) loads and runs MPM commands at bootup.</li>
<li>The tag <i>outputif</i> can be <i>syslog</i>, <i>stderr</i> or filename if it does not matches to any predefined string.</li>
<li>By default the config file allows loading of DSP images to L2, MSMC and DDR. It can be changes to add more restrictions on loading or load to L1 sections.</li>
<li>In current from MPM does not do MPAX mapping for local to global addresses.</li>
<li>The MPM needs 1KB of scratch memory in either DDR or MSMC for its processing (running trampoline for get 10bit alignment and workaround for DSP reset issue). This is reserved at the end of DDR in the config file with keyword "scratchaddr" and "scratchlength". The DSP images must avoid to load to the scratch memory location.</li></ul>
<p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>&#160;: In future, MPM is going to get scratch memory from kernel and the scratch memory requirement will be removed.
</p>
<h2><span id="Crash_event_notification,_coredump_generation_and_processing"></span><span class="mw-headline" id="Crash_event_notification.2C_coredump_generation_and_processing">Crash event notification, coredump generation and processing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=13" title="Edit section: Crash event notification, coredump generation and processing">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The MPM can monitors crash events from DSPs.The DSP image needs to be instrumented to indicate MPM that it is crashed.
</p>
<h3><span class="mw-headline" id="Instrumenting_DSP_application">Instrumenting DSP application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=14" title="Edit section: Instrumenting DSP application">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The DSP application should install an exception hook for the DSP fault management APIs.
</p><p>Please follow the steps below to add the crash indication and add necessary segments for coredump.
</p>
<ul><li>In the .cfg (Configuro Script) file of the application add following commands to create a section</li></ul>
<p>&lt;syntaxhighlight lang="javascript"&gt;
var devType = "k2?";  /* Replace k2? with the k2 device in use k2e, k2h, k2k, or k2l */
/* Load and use the Fault Management package */
var Fault_mgmt = xdc.useModule('ti.instrumentation.fault_mgmt.Settings')
Fault_mgmt.deviceType = devType;
</p><p>/* Load the Exception and register a exception hook */
var Exception = xdc.useModule('ti.sysbios.family.c64p.Exception');
Exception.exceptionHook = '&amp;myExceptionHook';
Exception.enablePrint = true;
</p><p>/* Add note section for coredump */
Program.sectMap[".note"] = new Program.SectionSpec();
Program.sectMap[".note"] = Program.platform.dataMemory;
Program.sectMap[".note"].loadAlign = 128;
&lt;/syntaxhighlight&gt;
</p>
<ul><li>In a source/header file, create a resource array as follows</li></ul>
<p>&lt;syntaxhighlight lang="c"&gt;
</p><p>/* Fault Management Include File */
</p>
<ol><li>include &lt;ti/instrumentation/fault_mgmt/fault_mgmt.h&gt;</li></ol>
<p>Void myExceptionHook(Void)
{
</p>
<pre>   uint32_t   i;
   Fm_HaltCfg haltCfg;
   uint32_t   efr_val;
</pre>
<pre>   /* Copy register status into fault management data region for Host */
   Fault_Mgmt_getLastRegStatus();
</pre>
<pre>   memset(&amp;haltCfg, 0, sizeof(haltCfg));
   efr_val = CSL_chipReadEFR();
</pre>
<pre>   /* If triggered exception originates from another core through
    * NMI exception don't need to halt processing and notify other cores
    * since the parent core where the exception originally triggered via
    * event would notify them.  This eliminates recursive exceptions */
   if (!(efr_val &amp; 0x80000000)) {
       /* Halt all processing - Only need to be done on one core */
       haltCfg.haltAif = 1;
       haltCfg.haltCpdma = 1;
</pre>
<ol><li>if EXCLUDE_LINUX_RESOURCES_FROM_HALT</li></ol>
<pre>       haltCfg.haltSGMII = 0;
       /* EDMA used by kernel to copy data to/from NAND in UBIFS */
       haltCfg.haltEdma3 = 0;
       haltCfg.excludedResources = &amp;linuxResources[0];
</pre>
<ol><li>else</li></ol>
<pre>       haltCfg.haltSGMII = 1;
       haltCfg.haltEdma3 = 1;
       haltCfg.excludedResources = NULL;
</pre>
<ol><li>endif</li></ol>
<pre>       Fault_Mgmt_haltIoProcessing(&amp;fmGblCfgParams, &amp;haltCfg);
</pre>
<pre>       for (i = 0; i &lt; fmGblCfgParams.maxNumCores; i++) {
           /* Notify remote DSP cores of exception - WARNING: This will generate NMI
            * pulse to the remote DSP cores */
           if (i&#160;!= CSL_chipReadDNUM()) {
               Fault_Mgmt_notify_remote_core(i);
           }
       }
   }
</pre>
<pre>   /* Notify Host of crash */
   Fault_Mgmt_notify();
</pre>
<p>}
</p><p>&lt;/syntaxhighlight&gt;
</p><p>A sample test application is provided in <i>pdk_keystone2_#_##_##_##\packages\ti\instrumentation\fault_mgmt\test</i>
</p>
<h3><span class="mw-headline" id="Detecting_crash_event_in_MPM">Detecting crash event in MPM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=15" title="Edit section: Detecting crash event in MPM">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In case of a DSP exception, the MPM calls the script provided in JSON config file. The MCSDK Linux filesystem has a sample script <i>/etc/mpm/crash_callback.sh</i> that sends message to syslog indicating which core crashed. This script can be customized to suit notification needs.
</p>
<h3><span class="mw-headline" id="Generating_DSP_coredump">Generating DSP coredump</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=16" title="Edit section: Generating DSP coredump">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The DSP exceptions can be following
</p>
<ul><li>Software-generated exceptions</li>
<li>Internal/external exceptions</li>
<li>Watchdog timer expiration</li></ul>
<p>The MPM creates an ELF formatted core dump.
</p><p>&lt;syntaxhighlight lang="bash"&gt;
root@keystone-evm:~# mpmcl coredump dsp0 coredump.out
&lt;/syntaxhighlight&gt;
</p><p>The above command will generate coredump file with name <i>coredump.out</i> for the DSP core 0.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The coredump can  be captured from a running system which is not crashed, in this case the register information won't be available in the coredump.
</p>
<h3><span class="mw-headline" id="Converting_and_loading_core_dump_image_to_CCS">Converting and loading core dump image to CCS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=17" title="Edit section: Converting and loading core dump image to CCS">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The current version of CCS (5.4) does not support ELF core dump. The dspcoreparse utility provided in mcsdk_linux_#_##_##_##/host-tools, is used to parse the ELF format coredump and generate the crash dump file that can be uploaded to CCS for further analysis.
<br />
Copy the <i>coredump</i> file generated above to <i>mcsdk_linux_#_##_##_##/host-tools/dspcoreparse</i> and run the following command to get crash dump file for CCS.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  In CCS, a core dump is referred to as a "crash dump".
</p><p>&lt;syntaxhighlight lang="bash"&gt;
user@dspcoreparse $ ./dspcoreparse -o coredump.txt coredump.out
&lt;/syntaxhighlight&gt;
</p><p>This utility can also be used to display the parsed content. However, CCS provides a graphical view of the information.
</p>
<h3><span class="mw-headline" id="Analyzing_DSP_crash_in_CCS">Analyzing DSP crash in CCS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=18" title="Edit section: Analyzing DSP crash in CCS">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The crash dump file can be loaded to CCS with the symbols of the DSP executable to see register content, stack, memory and other information. Please see <a rel="nofollow" class="external text" href="Crash_Dump_Analysis.html">Crash_Dump_Analysis</a> for more information on loading and analyzing a CCS crashdump file.
</p>
<div class="center"><div class="floatnone"><a href="File_DSP_crash_stack.html" class="image" title="DSP_crash_stack.jpg"><img alt="DSP_crash_stack.jpg" src="https://processors.wiki.ti.com/images/b/b0/DSP_crash_stack.jpg" width="800" height="615" /></a></div></div>
<p>Further analysis of the crash can be done in CCS by opening ROV. Please see <a rel="nofollow" class="external text" href="http://rtsc.eclipse.org/docs-tip/Runtime_Object_Viewer">Runtime Object Viewer</a> for more details on ROV.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The scripting console of CCS sometimes does load the crashdump file with path other than base directory. As an workaround please following command to load the coredump file from CCS scripting console.
&lt;syntaxhighlight lang="javascript"&gt;
activeDS.expression.evaluate('GEL_SystemRestoreState("/home/ubuntu/coredump.txt")')
&lt;/syntaxhighlight&gt;
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The coredump schemes will be changing in future releases.
</p>
<h2><span class="mw-headline" id="MPM_error_codes_and_debugging">MPM error codes and debugging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=19" title="Edit section: MPM error codes and debugging">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Following are some pointers for MPM debugging and error codes
</p>
<ul><li>If MPM server crashed/exited/not running in the system, <i>mpmcl ping</i> will return failure</li>
<li>If there is any load/run/reset failure MPM client provides error codes. The major error codes are given below</li></ul>
<table>
<tbody><tr>
<th>error code</th>
<th>error type
</th></tr>
<tr>
<td>-100</td>
<td>error_ssm_unexpected_event
</td></tr>
<tr>
<td>-101</td>
<td>error_ssm_invalid_event
</td></tr>
<tr>
<td>-102</td>
<td>error_invalid_name_length
</td></tr>
<tr>
<td>-103</td>
<td>error_file_open
</td></tr>
<tr>
<td>-104</td>
<td>error_image_load
</td></tr>
<tr>
<td>-105</td>
<td>error_uio
</td></tr>
<tr>
<td>-106</td>
<td>error_image_invalid_entry_address
</td></tr>
<tr>
<td>-107</td>
<td>error_resource_table_setting
</td></tr>
<tr>
<td>-108</td>
<td>error_error_no_entry_point
</td></tr>
<tr>
<td>-109</td>
<td>error_invalid_command
</td></tr></tbody></table>
<ul><li>The MPM daemon logs goes to <i>/var/log/mpmsrv.log</i> by default. This file can provide more information on the errors.</li></ul>
<h2><span id="Loading_DSP_images_from_CCS_(without_using_MPM)"></span><span class="mw-headline" id="Loading_DSP_images_from_CCS_.28without_using_MPM.29">Loading DSP images from CCS (without using MPM)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=20" title="Edit section: Loading DSP images from CCS (without using MPM)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>By default, the DSP cores are powered down by u-boot at the time of EVM boot. After kernel is running, MPM can be used to load and run DSP images from Linux command-line/utility.
</p><p>Rather than using MPM, if you want to use CCS to load and run DSP images, then set the following setting in u-boot prompt:
</p><p>&lt;syntaxhighlight lang="bash"&gt;
setenv debug_options 1
saveenv
reset
&lt;/syntaxhighlight&gt;
</p><p>This will not power down DSPs at startup and CCS/JTAG can connect to the DSP for loading and debugging. This option is useful if you want to boot Linux on ARM and then use JTAG to manually load and run the DSPs. Otherwise you may see "held in reset" errors in CCS.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The above step is not needed if you want to load DSP cores using MPM and subsequently use CCS to connect to DSP.
</p>
<h2><span class="mw-headline" id="Frequently_Asked_Questions">Frequently Asked Questions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=21" title="Edit section: Frequently Asked Questions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Q: MPM does not load and run the DSP image<br />
A: There can be several scenarios, following are few of them
</p>
<ul><li>The MPM server may not be running. The command <i>mpmcl ping</i> will timeout in this case. The mpm server is expected to be running in background to service the requests from mpm client. The log file /var/log/mpmsrv.log can provide more information.</li>
<li>An issue can be the devices relevant to MPM <i>/dev/dsp0, ... , /dev/dsp7, /dev/dspmem</i> are not created. You need to check if these devices are present. If they are not present then check if the kernel and device tree have right patches for these devices.</li>
<li>The log can print error codes provided in MPM error codes section.</li>
<li>Another way to debug loading issues is, to run mpm server in non-daemon mode from one shell using command <i>mpmsrv -n</i>, before this you need to kill the server if it is running. (The command to kill is <i>mpmsrv -k</i> or you can choose to kill the process). Then from other shell run the client operations.</li></ul>
<p><br />
Q: MPM fails to load the segments<br />
A: The MPM fundamentally copies segments from DSP image to memory using a custom UIO mmap interface. Each local or remote nodes (DSPs) are allocated some amount of resources using config file. The segments in the config file needs to be subset of memory resources present in kernel dts file. The system integrator can choose to add or change memory configurations as needed by application. In order to change the default behavior user need to changed in JSON config file and kernel device tree. In JSON configuration file, the segments section need to be updated. You need to make sure it does not overlap the scratch memory section. You might have to move the scratch section if the allocated DDR size is increased. And, in the kernel device tree the <i>mem</i> sections of <i>dsp0, .. , dsp7, dspmem</i> need to be updated.
</p>
<ul><li>Sometimes few segments used by DSP may not accessible by ARM at the time of loading. These segment can cause load failure. So it is useful to understand the memory layout of your own application and if there are any such sections, you can skip loading those segments to memory using <i>NOLOAD</i> method described above.</li>
<li>The MPM does not have MPAX support yet. So the MPAX support needs to be handled by application.</li>
<li>If the linker adds a hole in the resource table section right before the actual resource_table due to the alignment restriction, then MPM as of now won't be able to skip the hole and might get stuck. In this case if you hex-dump resource table (method given below) size will be quite large (normally for a non-IPC case it is around 0xac). The workaround is to align the .resource_table section to 0x1000 using linker command file or some other method so that linker does not add any hole in the resource_table section. In future, MPM will take care of this offset.</li></ul>
<p><br />
Q: MPM fails to run the image<br />
A: MPM takes DSP out of reset to run the image. So, the fails to run normally attributed to DSP is crashing before main or some other issue in the image. But, to debug such issue, after <i>mpmcl run</i>, use CCS to connect to the target and then do load symbols of the images. Then the DSP can be debugged using CCS. Another way to debug the run issue, is to aff a infinite while loop in the reset function so that the DSP stops at the very beginning. Then load and run the DSP using MPM and connect thru CCS, do load symbols and come out of while loop and debug.
<br /><br />
Q: I don't see DSP prints from debugfs<br />
A: Make sure you followed the procedure described above to include the resource table in the image. Care should be taken for the resource table not being compiled out by linker. To check if the resource table present in the image using command <i>readelf --hex-dump=.resource_table  &lt;image name&gt;</i>. It should have some non-zero data.
<br /> Another point is, if you are loading same image in multiple cores and if the resource table and trace buffer segments overlap with each other in memory, then there can be undesirable effect.
<br /><br />
Q: I see the DSP state in /sys/kernel/debug/remoteproc/remoteproc0/state as <i>crashed</i><br />
A: The file <i>/sys/kernel/debug/remoteproc/remoteproc#/state</i> does not indicate state of DSP when MPM is used for loading. The state of the DSP can be seen using MPM client. See the description of the command in <a href="#Methods_to_load_and_run_ELF_images_using_MPM">Methods to load and run ELF images using MPM</a> sections.
<br />
</p>
<h1><span class="mw-headline" id="Resource_Manager">Resource Manager</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=22" title="Edit section: Resource Manager">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The Resource Manager (RM) is delivered as part of PDK as a means for managing system resource contentions.  RM provides the ability to allocate system resources to "entities" within a software architecture based on sets of allocation rules.  The term "entities" can refer to anything from a device core, to an OS task or process, to a specific software module.  The resources managed and the "entities" for which the resources are managed by RM are completely defined by the RM configuration parameters.  The RM configuration parameters are device specific.  Whereas, the RM source code is completely device independent.
</p><p>What follows is a description of the RM architecture and in-depth instruction on how to integrate, configure, and use RM.
</p>
<h2><span class="mw-headline" id="Architecture">Architecture</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=23" title="Edit section: Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Resource Manager is an instance based architecture.  Integrating RM into a system consists of creating a set of RM instances, connecting these instances via transport mechanisms, and then using the instances to request resources from different device cores, processes, tasks, modules, etc.  Resource permissions are derived from RM instance names so it is imperative that if two system entities require different permissions they issue their service requests through different RM instances.  There are no restrictions on where a RM instance can be created as long as the means exist to connect the instance to other RM instances within the system.
</p><p>There are three primary RM instance types:
</p>
<ul><li>Server - Manages all defined system resources.  Handles resource requests received from connected Client Delegates and Clients.</li>
<li>Client Delegate (CD) - Manages resource provided by the RM Server.  Handles resource requests received from connected Clients.</li>
<li>Client - Connects and forwards resource requests to Server or CD for servicing</li></ul>
<p>Example multicore RM instance topology (not based on any specific device or system architecture):
<a href="File_RM_inst_multi_core.html" class="image" title="RM_inst_multi_core.jpg"><img alt="RM_inst_multi_core.jpg" src="https://processors.wiki.ti.com/images/6/61/RM_inst_multi_core.jpg" width="500" height="344" /></a> <br />
Example multi-task/process RM instance topology (not based on any specific device or system architecture):
<a href="File_RM_inst_multi_task.html" class="image" title="RM_inst_multi_task.jpg"><img alt="RM_inst_multi_task.jpg" src="https://processors.wiki.ti.com/images/7/71/RM_inst_multi_task.jpg" width="500" height="361" /></a> <br />
Example multi-DSP with multi-task/process RM instance topology (not based on any specific device or system architecture):
<a href="File_RM_inst_multi_dsp.html" class="image" title="RM_inst_multi_dsp.jpg"><img alt="RM_inst_multi_dsp.jpg" src="https://processors.wiki.ti.com/images/4/4b/RM_inst_multi_dsp.jpg" width="500" height="347" /></a>
</p>
<h3><span class="mw-headline" id="General_Instance_Interfaces">General Instance Interfaces</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=24" title="Edit section: General Instance Interfaces">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>All the RM instance types share a common set of APIs allowing them to receive resource requests and communicate on any device.
</p>
<ul><li>Service API</li>
<li>Transport API</li>
<li>OS Abstraction Layer (OSAL) API</li></ul>
<p><a href="File_RM_general_interfaces.html" class="image" title="RM_general_interfaces.jpg"><img alt="RM_general_interfaces.jpg" src="https://processors.wiki.ti.com/images/1/18/RM_general_interfaces.jpg" width="500" height="443" /></a>
</p>
<h4><span class="mw-headline" id="Service_API">Service API</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=25" title="Edit section: Service API">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The RM service API defines what resource services RM provides to the system.  All RM instances can be issued resource service requests.  While all instances can receive requests, not all instances can process requests.  Most service requests will be processed and validated on the RM Server instance.  Due to the blocking nature of most available transports that may be used to connect two RM instances the service API provides facilities to the system that allow the system to decide how RM's service API issues completed service requests.  When a resource service is requested by the system RM can be told to block until the service request has been completed or RM can be told to return the service request result at a later time via a callback function provided by the system.  The following services are supported by RM:
</p>
<table border="1" style="width: 1000px; height: 200px" id="rm_services">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>Service Type</b>
</td>
<td bgcolor="#c0c0c0"><b>Purpose</b>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_ALLOCATE_INIT&lt;/syntaxhighlight&gt;
</td>
<td>Allocates a resource to the requesting system entity, checking initialization privileges of the entity prior to allocation
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_ALLOCATE_USE&lt;/syntaxhighlight&gt;
</td>
<td>Allocates a resource to the requesting system entity, checking usage privileges of the entity prior to allocation
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_FREE&lt;/syntaxhighlight&gt;
</td>
<td>Frees the specified resource from control of the requesting system entity
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_STATUS&lt;/syntaxhighlight&gt;
</td>
<td>Returns the allocation reference count of a specified resource to the requesting system entity
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_MAP_TO_NAME&lt;/syntaxhighlight&gt;
</td>
<td>Maps a specified resource to a specified string and stores the mapping in the RM NameServer
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_GET_BY_NAME&lt;/syntaxhighlight&gt;
</td>
<td>Returns a set of resource values to the requesting system entity based on a specified, existing NameServer name string.  The resource is not allocated to the requesting entity.  Just the resource values are returned.
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_UNMAP_NAME&lt;/syntaxhighlight&gt;
</td>
<td>Unmaps the specified, existing NameServer name string from a resource and removes the mapping from the RM NameServer
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Transport_API">Transport API</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=26" title="Edit section: Transport API">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Messages exchanged between RM instances in order to complete service requests all flow through the instance transport API.  RM does not implement any transport mechanisms internally in order to stay device and OS agnostic.  A system which integrates RM must supply the transport between any two RM instances.  The transport mechanism used to connect two RM instances is completely up to the system.  The RM transport API requires two RM instances be registered with one another if they are to communicate.  The registration process involves the system providing the RM instances the following application implemented transport functions:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_Packet *(*rmAllocPkt)(Rm_AppTransportHandle appTransport, uint32_t pktSize, Rm_PacketHandle *pktHandle);&lt;/syntaxhighlight&gt;<br />This function will be discussed in depth later but it essentially returns a transport buffer to RM.  RM will place the RM specific message within the transport buffer</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t (*rmSendPkt)(Rm_AppTransportHandle appTransport, Rm_PacketHandle pktHandle);&lt;/syntaxhighlight&gt;<br />This function will be discussed in depth later but it takes a RM populated transport buffer and sends it on the application transport using the appTransport handle</li></ul>
<p>When the application receives a packet/message on a transport designated for RM it must extract the RM packet and provide it to RM via RM's transport receive API:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;int32_t Rm_receivePacket(Rm_TransportHandle transportHandle, const Rm_Packet *pkt);&lt;/syntaxhighlight&gt;<br />The RM receive API will not free the RM packet provided to it.  It assumes the application transport code will free the RM packet once the RM receive API returns</li></ul>
<h4><span class="mw-headline" id="OSAL_API">OSAL API</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=27" title="Edit section: OSAL API">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The OS Abstraction Layer API allows RM's memory, cache, and blocking mechanism management functions to be defined within the context of the device and/or OS that it will be operating.
</p>
<table border="1" style="width: 1000px; height: 200px" id="rm_osal_apis">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>OSAL API</b>
</td>
<td bgcolor="#c0c0c0"><b>Purpose</b>
</td>
<td bgcolor="#c0c0c0"><b>Special Considerations</b>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void *Osal_rmMalloc (uint32_t num_bytes);&lt;/syntaxhighlight&gt;
</td>
<td>Allocates a block of memory of specified size to RM
</td>
<td>
<ul><li>Location (local or shared memory), alignment and cache considerations do not matter when allocations originate from the standard Server, Client Delegate, and Client instances.</li>
<li>Memory allocated for Shared Server/Client instances must originate from shared memory and be aligned and padded to a cache line.</li></ul>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmFree (void *ptr, uint32_t size);&lt;/syntaxhighlight&gt;
</td>
<td>Frees a block of memory of specified size that was allocated to RM
</td>
<td>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void *Osal_rmCsEnter (void);&lt;/syntaxhighlight&gt;
</td>
<td>Enters a critical section protecting against access from multiple cores, threads, tasks, and/or processes
</td>
<td>
<ul><li>Critical section protection is not required for the standard Server, Client Delegate, and Client instances since they all operate using independent, non-shared data structures</li>
<li>Critical section protection is required for Shared Server/Client instances since the resource management data structures are contained in shared memory</li></ul>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmCsExit (void *CsHandle);&lt;/syntaxhighlight&gt;
</td>
<td>Exits a critical section protecting against access from multiple cores, threads, tasks, and/or processes
</td>
<td>
<ul><li>Critical section protection is not required for the standard Server, Client Delegate, and Client instances since they all operate using independent, non-shared data structures</li>
<li>Critical section protection is required for Shared Server/Client instances since the resource management data structures are contained in shared memory</li></ul>
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmBeginMemAccess (void *ptr, uint32_t size);&lt;/syntaxhighlight&gt;
</td>
<td>Indicates a block of memory is about to be accessed.  If the memory is cached a cache invalidate will occur to ensure the cache is updated with the memory block data residing in actual memory
</td>
<td>Cache invalidate operations are only required if RM instance data structures are allocated from a cached memory region
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmEndMemAccess (void *ptr, uint32_t size);&lt;/syntaxhighlight&gt;
</td>
<td>Indicates a block of memory has finished being accessed.  If the memory is cached a cache writeback will occur to ensure the actual memory is updated with contents of the cache
</td>
<td>Cache writeback operations are only required if RM instance data structures are allocated from a cached memory region
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void *Osal_rmTaskBlockCreate (void);&lt;/syntaxhighlight&gt;
</td>
<td>Creates an instance of a task blocking mechanism allowing a RM instance to block in order to wait for a service request to complete
</td>
<td>RM task blocking is only required if application service requests specifically request RM not return until the service request is satisfied
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmTaskBlock (void *handle);&lt;/syntaxhighlight&gt;
</td>
<td>Blocks a RM instance waiting for a service request to complete using the provided task blocking mechanism handle
</td>
<td>RM task blocking is only required if application service requests specifically request RM not return until the service request is satisfied
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmTaskUnblock (void *handle);&lt;/syntaxhighlight&gt;
</td>
<td>Unblocks a RM instance when when a service request has completed.
</td>
<td>RM task blocking is only required if application service requests specifically request RM not return until the service request is satisfied
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmTaskBlockDelete (void *handle);&lt;/syntaxhighlight&gt;
</td>
<td>Deletes an instance of a task blocking mechanism
</td>
<td>RM task blocking is only required if application service requests specifically request RM not return until the service request is satisfied
</td></tr>
<tr>
<td>&lt;syntaxhighlight lang='c'&gt;extern void  Osal_rmLog (char *fmt, ... );&lt;/syntaxhighlight&gt;
</td>
<td>Allows RM to log various messages
</td>
<td>This OSAL API is used by RM to print resource status and RM instance status logs
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Server">Server</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=28" title="Edit section: Server">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM Server manages all resource data structures and tracks resource ownership.  The Server also maintains the NameServer.  A majority of resource requests will be forwarded by other instances to the Server for completion.  A system integrating RM should contain no more than one RM Server since it maintains the view of all resource's managed by RM.  It is possible to have more than one RM Server but the resources managed by each Server must be mutually exclusive.  If there is any overlap in resources there may be fatal resource conflicts.  There is no limit to the number of Client Delegates and Clients that can connect to the Server.  The RM Server is the root of the RM instance connection tree.
</p>
<h3><span class="mw-headline" id="Client">Client</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=29" title="Edit section: Client">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM Client is mainly used as an interface to request services.  No resource management is done locally on Client instances.  Therefore, all requests issued via a Client will be forwarded to a RM Server or CD based on the Client's instance connections.  There is no limit to the number of Clients that can exist.  However, Clients cannot connect to another Client and can connect to at most one Server or CD.  A Client cannot connect to both a Server and CD.
</p>
<h3><span id="Client_Delegate_(CD)"></span><span class="mw-headline" id="Client_Delegate_.28CD.29">Client Delegate (CD)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=30" title="Edit section: Client Delegate (CD)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The CD is middle ground between a Server and a Client.  The RM CD can manage small subsets of resources, provided by the Server, locally.  The CD can handle service requests from connected Clients as long as the resource specified in the resource has been provided to the CD by the Server for local management.  Otherwise, the service will be forwarded to the Server for processing.  All NameServer requests received by the CD will be forwarded to the Server.  The CD is of use in architectures where the transport path between the Server and other RM instances is slow.  A CD with a faster transport path between itself and Clients can be established so that not all service requests need to flow over a slow transport path to the Server for completion.  If the CD can handle N requests based on the resources provided to it by the Server only every N+1th transaction will be slower since it must be sent over the slow transport path to the Server.
</p><p>There is no limit to the number of CDs that can exist and the number of Clients that can connect to a single CD.  However, no two CDs can connect to each other and a CD can be connected to only one Server.
</p>
<h3><span class="mw-headline" id="Shared_Instances">Shared Instances</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=31" title="Edit section: Shared Instances">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Special shared memory versions of the RM Server and Client can be created for systems that have strict cycle requirements and little to no tolerance for blocking operations that make take place within RM instances.  When configured the Shared Server and any Shared Clients connected with the Server will complete service requests immediately by accessing resource data structures existing within shared memory.  The major requirement for the shared instances is that some form of shared memory is available for access between the Shared Server and Clients.
</p><p>Shared Servers and Shared Clients cannot connect to any RM instances via the transport API.  Only Shared Clients can connect to Shared Servers and the connection is made at Shared Client initialization via the shared memory area containing the RM Server resource data structures.  Shared Clients are essentially piggybacking on the Shared Server instance located in shared memory.
</p>
<h4><span class="mw-headline" id="Shared_Server">Shared Server</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=32" title="Edit section: Shared Server">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>A Shared Server instance is no different than standard Server instance.  The only difference is the RM OSAL APIs provided by the system must allocate and free from a shared memory area accessible to the portions of the system that will be running the Shared Server and any Shared Clients.  Since shared memory will be accessed by the Shared Server the CsEnter/Exit and Begin/EndMemAccess OSAL APIs must account for shared memory accesses and any caching that make take place.
</p><p>As previously mentioned the Shared Server will not accept any connections via the transport API.  Only Shared Clients can connect to the Shared Server and that will be at Shared Client initialization time.
</p>
<h4><span class="mw-headline" id="Shared_Client">Shared Client</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=33" title="Edit section: Shared Client">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Shared Client instances are no different from standard Client instances from a data structure, resource request standpoint.  The major difference is at instance initialization the Shared Client will be provided the location of the Shared Server in shared memory.  When service requests are issued via a Shared Client it will map the Shared Server instance and directly access its resource data structures.  Therefore, no blocking operations, besides any cache writeback/invalidate operations, will take place.
</p><p>As previously mentioned Shared Clients cannot connect to any instances via the transport API.  Shared Clients will connect to a Shared Server by storing the Shared Server instance pointer.  If this pointer is not allocated from a shared memory the Shared Server-Client connection will fail to operate and system integrity cannot be guaranteed.
</p>
<h2><span class="mw-headline" id="How_Resources_Are_Managed">How Resources Are Managed</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=34" title="Edit section: How Resources Are Managed">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>RM makes no upfront assumptions about what resources are managed and how they are managed.  These decisions are left up to the system integrator.  In essence, RM is a glorified number allocator.  Allocations and frees are based on strings which are assumed to map to system resources.  Who is allowed to use which resource is defined by the system integrator based on the RM instance names.  All resource service requests originate from RM instances.  Separate portions of a system can be assigned different resources based on a RM instance name.  The separate portions of the system are provided a RM instance created with the respective instance name.  Allocate/free resource requests originating from the system will only be provided resources assigned to the RM instance it uses to perform the request.  This is essentially how different areas within a system can be assigned different resources.
</p><p>The key takeaway is resource names and RM instance names must be synchronized across the different areas of RM in order for proper resource management to take place.  The name synchronization architecture allows RM to be completely device agnostic from the perspective of managed resources.  Which resources are managed and how they're managed can change from application to application and device to device with no RM source code changes.  The key RM features that must be synchronized are the following:
</p>
<ul><li>Global Resource List (GRL) - Defines all resources that will be managed by the RM Server and the CDs/Clients connected to it.  Resources are defined within a resource node containing a resource name and its range of values (base + length format).</li>
<li>Policies - Defines how resources are partitioned amongst the RM instances based on the names used to initialize the RM instances</li>
<li>RM Instances - Instance names much match the names in the policies used to divide up resources.</li>
<li>Service Requests - Resource requests through the service API must match a resource name defined in the GRL.</li></ul>
<p><a href="File_RM_name_synchronization.html" class="image" title="RM_name_synchronization.jpg"><img alt="RM_name_synchronization.jpg" src="https://processors.wiki.ti.com/images/3/34/RM_name_synchronization.jpg" width="1000" height="664" /></a>
</p><p>Most of RM's resource management takes place on the Server instance.  The GRL and Policy are provided to the Server as part of the Server's initialization.  The GRL is used to allocate and initialization all the resource allocator instances.  A resource allocator will be created for each resource node specified within the GRL.  The GRL is not used past initialization so it can be placed in a memory region local to the Server instance.  The Policy will be validated (i.e. checked for formatting errors) and stored for reference against service requests received from all instances.  Policy using the policy provided to the Server will only be made by the Server, through service requests made with the Server instance or forwarded from other instances, so, like the GRL, the policy can be placed in a memory region local to the Server instance.  The latter still applies the Shared Server instance.  The policy will be copied, wholesale, to a shared memory region provided by the OSAL memory alloc API.
</p><p>Some resource management can be offloaded to the CD instance.  The CD can be configured to receive resources from the Server and allocate/free those resources to Clients in lieu of the Server.  This offloads some of the management duties from the Server and can save time and cycles if the Server connects over a high latency transport while the CD connects to Clients over a low latency transport.  The CD is not provided a GRL at initialization but will request resource blocks from the Server when it receives a request from its service API or a Client that it classifies as something it can handle in lieu of the Server.  Typical requests classified in this manner by the CD are non-specific requests or resource requests with an unspecified base value.  The At initialization, the CD is provided an exact copy of the policy provided to the Server.  This way service request policy checks on the CD will be in sync with the policy check that would have taken place on the Server if the request was forwarded to the Server instead of being handled by the CD.
</p><p>No resource management takes place on the Client.  Service requests received on Client instance are always forwarded to either a connected CD or Server.
</p><p>The NameServer is managed solely by the Server instance.  The RM NameServer is a very simple NameServer that allows a resource range to be mapped to a string name.  Any service request received by any RM instance involving the NameServer will always be forwarded to the Server instance for completion.
</p>
<h3><span class="mw-headline" id="Allocator_Algorithm">Allocator Algorithm</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=35" title="Edit section: Allocator Algorithm">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The allocators are implemented to save cycles when parsing allocated/freed nodes and to save memory as allocations and frees take place over the lifetime of system execution.  An open source balanced binary search tree algorithm was used to implement the allocators.  Each allocator will maintain the status of a resource's values by creating a node in the tree for each resource value range with different attributes.  Where attributes include whether the resource range is allocated or freed, how many RM instances own the resource range, and which RM instances own the resource range.  Each time a resource range is modified via service request checks are performed on adjacent resource nodes.  The allocator algorithm will attempt to maintain a minimal number of resource nodes in the allocator tree by combining nodes that result in the same attributes as service requests are completed.  This will save system memory and minimize the cycles needed to search the allocator trees.
</p><p>Some tree algorithm APIs were added to perform cache writeback/invalidate operations while walking the tree.  The additional tree functions were added to support the Shared Server/Client model where the Shared Server's allocators are stored in shared memory.
</p><p>The unmodified search tree algorithm is open source under the BSD license and can be downloaded from
<a rel="nofollow" class="external text" href="http://www.openbsd.org/cgi-bin/cvsweb/src/sys/sys/tree.h">OpenBSD.org</a>.  The modified search tree algorithm can be found in the pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/util directory.  The modified algorithm is open source, maintaining the BSD license.
</p>
<h3><span class="mw-headline" id="Static_Policies">Static Policies</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=36" title="Edit section: Static Policies">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Static policies can be provided to CD and Client instances as a means to "pre-allocate" resources.  There may be some cases where a RM instance must be able to allocate some resources prior to the full system being up.  In this initialization environment it is unlikely that all RM instances will be created and even more unlikely that they'll be connected via transports.  For cases such as the latter, the static policy can used by CDs and Clients to pre-approve resources requested from their service API prior to their transport interface being connected to the Server.  The static policy must either be an exact replica of the global policy provided to the Server at initialization or a subset of of the global policy provided to the Server.  Service requests from a non-Server instance utilizing a static policy will immediately return an approved resource based on the static policy.  Any static requests are stored by the CDs and Clients and forwarded to the Server for validation as soon as the transport to the Server is established.  If a static policy allocated resource fails validation via the Server policy the instance that allocated the resource will go into a "locked" state.  Service requests cannot be process by locked instances.  Recovering a RM instance from the locked state at runtime is not possible.  The static policy must be modified and the application restarted.  This is intended since the failed validation of an already allocated resource can result in unknown system operation.
</p><p>Only the following services are available with static policies prior to the transport to the Server being established:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_ALLOCATE_INIT&lt;/syntaxhighlight&gt;</li>
<li>&lt;syntaxhighlight lang='c'&gt;Rm_service_RESOURCE_ALLOCATE_USE&lt;/syntaxhighlight&gt;</li></ul>
<h3><span id="GRL_&amp;_Policy_Format"></span><span class="mw-headline" id="GRL_.26_Policy_Format">GRL &amp; Policy Format</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=37" title="Edit section: GRL &amp; Policy Format">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The GRL and Policy formats follow the <a rel="nofollow" class="external text" href="https://www.power.org/documentation/epapr-version-1-1/">ePAPR 1.1 Device Tree Specification</a>.  The device tree specification is used to define a simple flattened device tree (FDT) format for expressing resources and their permissions in the GRL and policy device tree source (DTS) files.  The GRL and Policy DTS files are converted to device tree blob (DTB) binary files for consumption by the RM Server and CD instances during runtime init.  The <a rel="nofollow" class="external text" href="http://jdl.com/software/dtc-v1.3.0.tgz">Linux kernel device tree compiler (DTC) v1.3.0</a> is used to perform the conversion from DTS to DTB file.  Packaged with the DTC is a BSD-licensed, open source, flattened device tree library called LIBFDT.  This library has been integrated with RM, packaged in the pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/util directory, facilitating RM's ability to read the GRL and policy files at runtime.  The following graphic portrays the process used to integrate a GRL or policy DTS file into an application using RM.
<br /><a href="File_RM_grl_policy_format.html" class="image" title="RM_grl_policy_format.jpg"><img alt="RM_grl_policy_format.jpg" src="https://processors.wiki.ti.com/images/8/8a/RM_grl_policy_format.jpg" width="600" height="468" /></a><br />
</p><p>For more information on Flattened Device Trees please see: <a rel="nofollow" class="external text" href="http://elinux.org/Device_Trees">http://elinux.org/Device_Trees</a>
</p>
<h3><span class="mw-headline" id="Linux_DTB_Support">Linux DTB Support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=38" title="Edit section: Linux DTB Support">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In some cases it is desirable for RM to partially automate the extraction of resources consumed by a Linux kernel.  The system resources used by Linux are defined in the kernel DTB file, which originates from a, ePAPR 1.1-based, DTS file.  RM can easily extract resources identified as used by Linux from the kernel DTB given RM integrates the same DTC utility and LIBFDT library.  As will be explained later, the GRL provides a facility for a defined resource to specify a Linux DTB extraction path.  At initialization, RM will use this extraction path to parse the Linux DTB file for the resource's value range that has been specified as used by Linux.  The RM Server must be provided a pointer to the Linux DTB in the file system at initialization.  Otherwise, the automatic extraction will not occur.
</p>
<h2><span id="Configuring_&amp;_Using_RM"></span><span class="mw-headline" id="Configuring_.26_Using_RM">Configuring &amp; Using RM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=39" title="Edit section: Configuring &amp; Using RM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In the sections to follow the complete process to integrate and configure RM will be covered.  A generic RM example will be built over the following sections to supplement the explanation of how to integrate RM.  The example will integrate RM with a generic software system that needs three shared resources managed, apples, oranges, and bananas.  The use of fruits in the example is in part to be generic but also to convey just how flexible RM is.  RM can manage any resource that can be mapped to a string and a value range.
</p>
<h3><span id="Defining_the_GRL_&amp;_Policy"></span><span class="mw-headline" id="Defining_the_GRL_.26_Policy">Defining the GRL &amp; Policy</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=40" title="Edit section: Defining the GRL &amp; Policy">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The GRL defines all system resources, and their value ranges, that will be managed by the RM instances at runtime.  If a resource, or a resource's value, is not specified in the GRL it will be nonexistent from the point of view of RM.  The policies define how resources defined in the GRL are split amongst the RM instances.  If a resource, or a resource's value, is not specified in the policy it is assumed to be not available to any RM instance.  The GRL and policies start out as easily editable device tree source files.  They are converted to DTBs where they can be fed to the RM Server (or CD and Client in the case of static policies) instance at initialization.  Offloading the resource definitions and their access permissions to files provided to RM at initialization allows a system integrator to easily modify which resources are managed by RM, and how they are managed, without having to make RM source code changes.
</p>
<h4><span id="GRL/Policy_Definition_&amp;_Conversion_Tools"></span><span class="mw-headline" id="GRL.2FPolicy_Definition_.26_Conversion_Tools">GRL/Policy Definition &amp; Conversion Tools</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=41" title="Edit section: GRL/Policy Definition &amp; Conversion Tools">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h5><span class="mw-headline" id="Device_Tree_Compiler">Device Tree Compiler</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=42" title="Edit section: Device Tree Compiler">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The GRL and policies are based on Device Tree Compiler v1.3.0 available from <a rel="nofollow" class="external text" href="http://jdl.com/software/dtc-v1.3.0.tgz">http://jdl.com/software/dtc-v1.3.0.tgz</a>.  DTC v1.3.0 is only supported in a Linux environment.  One can attempt to bring the tool up in a Windows environment via Msys or Cygwin but proper operation cannot be guaranteed.
</p><p><u>DTC Installation Steps</u>
</p>
<ol><li>Download dtc-v1.3.0.tgz and copy it to a Linux environment</li>
<li>Unzip the tar: <br /> &lt;syntaxhighlight lang='bash'&gt;$ tar xzf dtc-v1.3.0.tgz&lt;/syntaxhighlight&gt;</li>
<li>CD to the created dtc directory: <br /> &lt;syntaxhighlight lang='bash'&gt;$ cd dtc-v1.3.0&lt;/syntaxhighlight&gt;</li>
<li>Build the DTC utilities: <br /> &lt;syntaxhighlight lang='bash'&gt;$ make all&lt;/syntaxhighlight&gt; An error due to an unused set variable will cause the make to fail.</li>
<li>Edit dtc-v1.3.0/Makefile to remove -Wall from the WARNINGS macro</li>
<li>Rebuild the DTC utilities: <br /> &lt;syntaxhighlight lang='bash'&gt;$ make all&lt;/syntaxhighlight&gt;</li>
<li>The 'dtc' and 'ftdump' executables will now exist in the dtc-v1.3.0 directory <a href="File_RM_dtc_dir.html" class="image" title="RM_dtc_dir.jpg"><img alt="RM_dtc_dir.jpg" src="https://processors.wiki.ti.com/images/8/85/RM_dtc_dir.jpg" width="800" height="218" /></a></li></ol>
<h5><span class="mw-headline" id="DTB_to_C-Style_Array_Conversion_Utility">DTB to C-Style Array Conversion Utility</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=43" title="Edit section: DTB to C-Style Array Conversion Utility">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The cify.sh Shell script used to convert a DTB binary to a C-style array is provided with RM under the pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/util directory.  No installation is needed.  Just copy the script to the directory in the Linux environment where DTBs will be located.  How to use this utility will be covered in a later section.
</p>
<h4><span class="mw-headline" id="General_DTS_Text_Format">General DTS Text Format</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=44" title="Edit section: General DTS Text Format">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please read dtc-v1.3.0/Documentation/dts-format.txt prior to creating and editing any DTS files.  It contains basic knowledge required to create a valid DTS file.
</p><p>In its basic form the DTS file is a list of nodes containing optional properties.  Nodes are defined with C-style curly braces, ending with a semi-colon.  Properties can be defined in different ways, with a single integer, a list of integers, a single string, a list of strings, or a mix of all the latter.  A property definition ends with a semi-colon.  C-style comments are allowed in DTS files.  The basic DTS file:
<br />
&lt;syntaxhighlight lang='c'&gt;
/* All RM DTS files must start with the Version 1 DTS file layout identifier */
/dts-v1/;
</p><p>/* Root node - Must ALWAYS be defined */
/ {
</p>
<pre>   /* Optional root node properties */
   root-property = ...;
</pre>
<pre>   /* Begin child node definitions */
   child-node-1 {
       /* child node optional properties */
       cn-1-property = ...;
       cn-1-other-property = ...;
</pre>
<pre>       /* Begin child-node-1 sub nodes */
       sub-node-1 {
           property = ...;
       };
   };
</pre>
<pre>   child-node-2 {
       cn-2-property = ...;
   };
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p><p>The generic property types for DTS files were used to create specific sets of properties for both the GRL and Policy DTS files.
</p>
<h4><span id="GRL_Nodes_&amp;_Properties"></span><span class="mw-headline" id="GRL_Nodes_.26_Properties">GRL Nodes &amp; Properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=45" title="Edit section: GRL Nodes &amp; Properties">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Any node with a resource range property in the GRL will be identified as a resource for management by RM.  <b>The DTS root node should not be assigned a resource range.</b>
</p><p>GRL resource node format:
<br />
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Single resource node */
   resource-name {
       resource-range = ...;
       /* Optional */
       ns-assignment = ...;
       /* Optional */
       linux-dtb-alias = ...;
   };
</pre>
<pre>   /* Resource nodes can be grouped as long as the grouping
    * node does not have a resource-range property */
   resource-group {
       /* Optional */
       ns-assignment = ...;
</pre>
<pre>       resource-name1 {
           resource-range = ...;
           /* Optional */
           ns-assignment = ...;
           /* Optional */
           linux-dtb-alias = ...;
       };
       resource-name2 {
           resource-range = ...;
           /* Optional */
           ns-assignment = ...;
           /* Optional */
           linux-dtb-alias = ...;
       };
       resource-name3 {
           resource-range = ...;
           /* Optional */
           ns-assignment = ...;
           /* Optional */
           linux-dtb-alias = ...;
       };
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<table border="1" style="width: 1000px; height: 200px" id="grl_prop-types">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>GRL Property</b>
</td>
<td bgcolor="#c0c0c0"><b>Format</b>
</td>
<td bgcolor="#c0c0c0"><b>Purpose</b>
</td></tr>
<tr>
<td>resource-group
</td>
<td>Single string with no spaces
</td>
<td>String identifying a resource group.  The resource group will not be stored by RM it's main purpose is to allow readability in the GRL file.  NameServer assignments can be made from the group for any mappings that don't apply to any specific resources.  Linux DTB alias paths are not valid from resource groups.
</td></tr>
<tr>
<td>resource-name
</td>
<td>Single string with no spaces
</td>
<td>String identifying the resource that RM will manage via an allocator.  To apply permissions to this resource the policy must contain a node with the same resource-name.  System requests referencing this resource must provide a string matching resource-name as part of the request.
</td></tr>
<tr>
<td>resource-range
</td>
<td>&lt;base-value length-value&gt;
</td>
<td>Defines the absolute range of values for the resource in base+length format.  Bases and lengths can be specified in decimal or hex format.  A comma-separated list of multiple base+length pairs can be specified but the base+length pair values cannot overlap.  Allocator initialization will fail if any of the pairs overlap.
</td></tr>
<tr>
<td>ns-assignment
</td>
<td>"String_To_Associate", &lt;base-value length-value&gt;
</td>
<td>Defines a string to resource value to be stored in the RM NameServer.  A comma-separated list of multiple NameServer associations can be specified.
</td></tr>
<tr>
<td>linux-dtb-alias
</td>
<td>"Space separated Linux DTB node path", &lt;num-vals base-offset len-offset&gt;
</td>
<td>Defines the path to an associated resource in the Linux DTB for automatic Linux kernel resource reservation.  RM cannot rely on the Linux DTB and the GRL defining a resource in the same format.  The linux-dtb-alias property is a way to associate a Linux DTB resource with a resource defined by the GRL and automatically mark the resource as allocated to the Linux kernel.
<ul><li>"Space separated string" - A space separated string specifying the node-path to an alias resource in the Linux DTB.  The string words match the node names in the path to the alias resource.  The last word in the string is the property name that corresponds to the alias resource's value parameters.  The complete path need not be specified but the node-path must be exact starting with the first node specified.</li>
<li>num-vals - Can have a value of 1 or 2.  If 1, the alias resource has just a base value.  If 2, the alias resource has a base and a length value.</li>
<li>base-offset - Specifies the valid offset to the alias resource's base value.  The alias resource's property may contain multiple values.</li>
<li>len-offset - [<b>Only applicable when num-vals = 2</b>] Specifies the valid offset to the alias resource's length value, if applicable.  The alias resource's property may contain multiple values.</li></ul>
</td></tr></tbody></table>
<table border="1" style="width: 1000px; height: 200px" id="grl_prop-types-examples">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>GRL Property</b>
</td>
<td bgcolor="#c0c0c0"><b>Example</b>
</td></tr>
<tr>
<td>resource-group
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Group the system's foo resources */
   foos {
       resource-foo {
           resource-range = ...;
       };
       resource-bar {
           resource-range = ...;
       };
       resource-foobar {
           resource-range = ...;
       };
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>resource-name
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Define the system's "resource-foo" resource */
   resource-foo {
       resource-range = ...;
       ...
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>resource-range
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
resource-foo {
</p>
<pre>   resource-range = &lt;0 25&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
<br />
&lt;syntaxhighlight lang='c'&gt;
resource-foo {
</p>
<pre>   resource-range = &lt;5     100&gt;,
                    &lt;200   500&gt;,
                    &lt;1000 2000&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>ns-assignment
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
resource-foo {
</p>
<pre>   resource-range = ...;
   ns-assignment = "Important_Resource", &lt;5 1&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
<br />
&lt;syntaxhighlight lang='c'&gt;
resource-foo {
</p>
<pre>   resource-range = ...;
   ns-assignment = "Foo's_Resource",    &lt;6 1&gt;,
                   "Bar's_Resource",    &lt;7 1&gt;,
                   "Foobar's_Resource", &lt;8 1&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>linux-dtb-alias
</td>
<td>
<p>Example Linux DTB:
&lt;syntaxhighlight lang='c'&gt;
/dts-v1/;
/ {
</p>
<pre>  model = "Texas Instruments EVM";
  compatible = "ti,evm";
  #address-cells = &lt;1&gt;;
  #size-cells = &lt;1&gt;;
</pre>
<pre>  memory {
</pre>
<p>		device_type = "memory";
		reg = &lt;0x80000000 0x8000000&gt;;
</p>
<pre>  };
</pre>
<pre>  soc6614@2000000 {
     ...
</pre>
<pre>     hwqueue0: hwqueue@2a00000 {
        compatible = "ti,keystone-hwqueue";
        ...
</pre>
<pre>        qmgrs {
           ...
        };
</pre>
<pre>        queues {
           general {
              values = &lt;4000 64&gt;;
           };
           infradma {
              values = &lt;800 12&gt;;
              reserved;
           };
           accumulator-low-0 {
              values = &lt;0 32&gt;;
              // pdsp-id, channel, entries, pacing mode, latency
              accumulator = &lt;0 32 8 2 0&gt;;
              irq-base = &lt;363&gt;;
              multi-queue;
              reserved;
           };
           accumulator-low-1 {
              values = &lt;32 32&gt;;
              // pdsp-id, channel, entries, pacing mode, latency
              accumulator = &lt;0 33 8 2 0&gt;;
              irq-base = &lt;364&gt;;
              multi-queue;
           };
           accumulator-high {
              values = &lt;728 8&gt;;
              // pdsp-id, channel, entries, pacing mode, latency
              accumulator = &lt;0 20 8 2 0&gt;;
              irq-base = &lt;150&gt;;
              reserved;
           };
           ...
        };
</pre>
<pre>        regions {
           ...
        };
</pre>
<pre>     };
     ...
  };
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p><p>Example Mapping to an alias resource in the Linux DTB:
<br />
RM will create "accumulator-ch" resource with values 0-47.  Alias resources found at the linux-dtb-alias path will be automatically resourced for the Linux Kernel within the "accumulator-ch" allocator.
&lt;syntaxhighlight lang='c'&gt;
accumulator-ch {
</p>
<pre>   resource-range = &lt;0 48&gt;;
   /* Extract the accumulator channels which
    * just have a base value in the Linux DTB */
   linux-dtb-alias = "hwqueue@2a00000 queues accumulator-low-0 accumulator", &lt;1 1&gt;,
                     "hwqueue@2a00000 queues accumulator-low-1 accumulator", &lt;1 1&gt;,
                     "hwqueue@2a00000 queues accumulator-high accumulator", &lt;1 1&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
<br />
RM will create "infra-queue" resource with values 800-831.  Alias resources found at the linux-dtb-alias path will be automatically resourced for the Linux Kernel within the "infra-queue" allocator.
&lt;syntaxhighlight lang='c'&gt;
infra-queue {
</p>
<pre>   resource-range = &lt;800 32&gt;;
   /* Extract the infrastructure DMA channels which
    * have a base+length value in the Linux DTB */
   linux-dtb-alias = "hwqueue@2a00000 queues infradma values", &lt;2 0 1&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
</td></tr></tbody></table>
<h5><span class="mw-headline" id="Example:_fruit-GRL.dts">Example: fruit-GRL.dts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=46" title="Edit section: Example: fruit-GRL.dts">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>&lt;syntaxhighlight lang='c'&gt;
/dts-v1/;
</p><p>/ {
</p>
<pre>   /* Device Resource Definitions */
   fruits {
       apples {
           /* 10 apples in system */
           resource-range = &lt;0 10&gt;;
       };
       oranges {
           /* 25 oranges in system */
           resource-range = &lt;0 25&gt;;
       };
       bananas {
           /* 15 bananas in system */
           resource-range = &lt;0 15&gt;;
           ns-assignment = "Banana_for_lunch", &lt;10 1&gt;;
       };
   };
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
<h4><span id="Policy_Nodes_&amp;_Properties"></span><span class="mw-headline" id="Policy_Nodes_.26_Properties">Policy Nodes &amp; Properties</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=47" title="Edit section: Policy Nodes &amp; Properties">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Policy valid instance node and resource node format:
<br />
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Define the RM instances that can assigned resources */
   valid-instances = ...;
</pre>
<pre>   /* Single resource node */
   resource-name {
       assignments = ...;
       /* Optional */
       allocation-alignment = ...;
   };
</pre>
<pre>   /* Resource policy nodes can be grouped */
   resource-group {
       resource-name1 {
           assignments = ...;
           /* Optional */
           allocation-alignment = ...;
       };
       resource-name2 {
           assignments = ...;
           /* Optional */
           allocation-alignment = ...;
       };
       resource-name3 {
           assignments = ...;
           /* Optional */
           allocation-alignment = ...;
       };
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<table border="1" style="width: 1000px; height: 200px" id="grl_prop-types">

<tbody><tr>
<td width="200px;" bgcolor="#c0c0c0"><b>Policy Property</b>
</td>
<td bgcolor="#c0c0c0"><b>Format</b>
</td>
<td bgcolor="#c0c0c0"><b>Purpose</b>
</td></tr>
<tr>
<td>valid-instances
</td>
<td>"RM-Instance-Name"
</td>
<td>List of RM instance name strings that are identified as valid for the allocation specifications made within the policy DTS file.  The instance names must match exactly the names assigned to RM instances at their initialization.  RM requests will be denied for any RM instance with a name that does not match any of the names in the valid instance list.  The policy will be declared invalid if an instance name is specified within the assignment property that does not match any of the instance names in the valid instance list.
</td></tr>
<tr>
<td>resource-group
</td>
<td>Single string with no spaces
</td>
<td>String identifying a resource group.
</td></tr>
<tr>
<td>resource-name
</td>
<td>Single string with no spaces
</td>
<td>String identifying the resource that the assignment specifications apply to.  RM will return an error specifying the policy is invalid if a resource-name does not match any of the resource allocators i.e. the resource-name does not correspond to a resource-name node defined in the GRL.
</td></tr>
<tr>
<td>assignments
</td>
<td>&lt;base-value length-value&gt;, "permission assignment string"
</td>
<td>Defines the allocation permissions for a resource range provided in base+length format.  Bases and lengths can be specified in decimal or hex format.  A comma-separated list of multiple resource assignments can be specified but the base+length values cannot overlap.
<p>The "permissions assignment string" consists of the following:
"Permission_bits = (RM_instances) &amp; Permission_bits = (RM_instances) &amp; ..."
</p>
<ul><li>Permission_bits - list of characters that represent the permissions assigned to the RM_instances for the resource range specified by the base+length values.  Permission bits can be specified in any order and can be space separated.  Possible permissions include:
<ul><li>'i' - Assigns allocation for initialization permission to the instances in the RM_instances list</li>
<li>'u' - Assigns allocation for usage permission to the instances in the (RM_instances) list</li>
<li>'x' - Assigns exclusive allocation permissions to the instances in the (RM_instances) list.  Exclusive permissions for an instance entail a resource allocated to an instance that has exclusive permissions for that resource cannot be allocated to another instance.  Put another way, the resource cannot be shared amongst multiple instances if an instance with exclusive permissions has been allocated the resource.</li>
<li>'s' - Allows shared Linux permissions to the instances in the (RM_instances) list.  Resources that are automatically reserved via the Linux DTB for the kernel are by default not allowed to be shared.  If an instance(s) are assigned Linux shared permissions they can be allocated a resource from the base+length range that has already been allocated to the Linux kernel.</li></ul></li>
<li>'=' Operator - The equivalence operator signifies the completion of the permission_bits specification and ties the permission bits to a list of (RM_instances).  The equivalence operator can be on the left or the right side of the (RM_instances) list.  However, no more than one equivalence can be made per (RM_instances).  RM will declare the policy as invalid if more than one equivalence operator is used per (RM_instances) list.
<ul><li><b>Empty equivalence</b> - If the equivalence operator equates (RM_instances) to no permission character the base+length range will not be allocatable to any RM instance.</li></ul></li>
<li>(RM_instances) - A space separated list of RM instance names for which the permission bits should be applied for the base+length resource range.  Any RM instance name specified must match a name specified in the valid-instances list at the top of the policy.  RM will declare the policy invalid if any of the RM Instance names differ.
<ul><li>(*) - The '*' operator can be used to specify the permissions bits are valid for ALL instances in the valid-instance list</li></ul></li>
<li>'&amp;' Operator - The and operator allows multiple permission assignments per resource base+length range.  The instances within the (RM_instances) lists must be mutually exclusive.  A RM instance cannot appear more than once if multiple permission assignments are made for resource base+length</li></ul>
</td></tr>
<tr>
<td>allocation-alignment
</td>
<td>&lt;alignment-value&gt;
</td>
<td>Defines an alignment value in decimal or hexadecimal to be used by RM for allocation requests that have an unspecified base and unspecified alignment.  Only one alignment per resource node can be specified.
</td></tr></tbody></table>
<table border="1" style="width: 1000px; height: 200px" id="grl_prop-types-examples">

<tbody><tr>
<td width="200px;" bgcolor="#c0c0c0"><b>Policy Property</b>
</td>
<td bgcolor="#c0c0c0"><b>Example</b>
</td></tr>
<tr>
<td>valid-instances
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Define the RM instances that are valid for the policy */
   valid-instances = "RM_foo_Server",
                     "RM_foo_Client",
                     "RM_bar_Client";
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>resource-group
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Group the system's foo resources */
   foos {
       resource-foo {
           assignments = ...;
       };
       resource-bar {
           assignments = ...;
       };
       resource-foobar {
           assignments = ...;
       };
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>resource-name
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Define "resource-foo"'s allocation specifications */
   resource-foo {
       assignments = ...;
       ...
   };
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>assignments
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
valid-instances = "Server",
</p>
<pre>                 "Client0",
                 "Client1";
</pre>
<p><br />
resource-foo {
</p>
<pre>   /* All instances get init and use permissions */
   assignments = &lt;0  25&gt;, "iu = (*)",
                 &lt;25 25&gt;, "(*) = u i";
</pre>
<p>};
</p><p>resource-bar {
</p>
<pre>   /* 0  - 4  exclusive for Server, can be shared by clients
    *         if not allocated to Server
    * 5  - 9  cannot be allocated to anyone
    * 10 - 14 shared between Client0 and Linux
    * 15 - 19 can be allocated for initialization by anyone and
    *         shared with any instance */
   assignments = &lt;0  5&gt;, "u i x = (Server) &amp; u i = (Client0 Client1)",
                 &lt;5  5&gt;, "(*)",
                 &lt;10 5&gt;, "(Client0) = ius",
                 &lt;15 5&gt;, "i = (Server Client0 Client1)";
</pre>
<p>};
</p><p>/* Invalid permission strings
</p>
<pre>* 0-4 more than one equivalence operator
* 5   more than one equivalence operator
* 6   Instance name not in valid-instances list
* 7   invalid permission character */
</pre>
<p>resource-foobar {
</p>
<pre>   assignments = &lt;0 5&gt;, "u = i = (Server)",
                 &lt;5 1&gt;, "iu = (Server) = x",
                 &lt;6 1&gt;, "iux = (My_Server)",
                 &lt;7 1&gt;, "iut = (Server)";
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
</td></tr>
<tr>
<td>allocation-alignment
</td>
<td>
<p>&lt;syntaxhighlight lang='c'&gt;
resource-foo {
</p>
<pre>   assignments = ...;
   allocation-alignment = &lt;16&gt;;
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
</td></tr></tbody></table>
<h5><span class="mw-headline" id="Example:_fruit-policy.dts">Example: fruit-policy.dts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=48" title="Edit section: Example: fruit-policy.dts">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>&lt;syntaxhighlight lang='c'&gt;
/dts-v1/;
</p><p>/ {
</p>
<pre>   /* Define the valid instances */
   valid-instances = "Server",
                     "Client0",
                     "Client1";
</pre>
<pre>   /* Specify who receive the fruit */
   fruits {
       apples {
            /* Everyone shares the apples */
            assignments = &lt;0 10&gt;, "iu = (*)";
       };
       oranges {
           /* First 10 oranges can only be shared between the clients
            * Last 15 oranges can be taken by all instances but can only be shared between the clients */
           assignments = &lt;0  10&gt;, "iu = (Client0 Client1)",
                         &lt;10 15&gt;, "iux = (Server) &amp; iu = (Client0 Client1)";
           /* Give out every other orange if an instance doesn't know which one it wants */
           allocation-alignment = &lt;2&gt;;
       };
       bananas {
           /* Each instance gets 5 bananas.  Also, in this odd world a Linux kernel has taken bananas
            * 5 and 6 but is willing to share them with the Server. */
           assignments = &lt;0  5&gt;, "(Client0) = xiu",
                         &lt;5  2&gt;, "(Server)  = siu",
                         &lt;7  3&gt;, "(Server)  = xiu",
                         &lt;10 5&gt;, "(Client1) = xiu";
       };
   };
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
<h5><span class="mw-headline" id="Example:_fruit-policy-static.dts">Example: fruit-policy-static.dts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=49" title="Edit section: Example: fruit-policy-static.dts">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>&lt;syntaxhighlight lang='c'&gt;
/dts-v1/;
</p><p>/ {
</p>
<pre>   /* Define the valid instances */
   valid-instances = "Client1";
</pre>
<pre>   /* Statically assign Client1 some bananas before the RM system
    * is brought up */
   bananas {
       /* Statically allocated resources must align with global policy */
       assignments = &lt;10 2&gt;, "xui = (Client1)";
   };
</pre>
<p>};
&lt;/syntaxhighlight&gt;
</p>
<h4><span id="GRL/Policy_Conversion_for_Input_to_RM"></span><span class="mw-headline" id="GRL.2FPolicy_Conversion_for_Input_to_RM">GRL/Policy Conversion for Input to RM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=50" title="Edit section: GRL/Policy Conversion for Input to RM">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Before any DTS file can be included in an application and passed to a RM instance initialization the DTS file must be converted to a DTB binary using the installed DTC utility.  Please see the "<a href="MCSDK_UG_Chapter_Developing_System_Mgmt.html#Defining_the_GRL_.26_Policy" title="MCSDK UG Chapter Developing System Mgmt">Defining the GRL &amp; Policy</a>" section for instructions on where to find and how to install DTC.
</p><p><u>DTS to DTB Conversion Instructions</u>
</p>
<ol><li>Make sure DTC has been installed in a Unix environment</li>
<li>Copy the .dts files to a directory accessible to the built dtc and ftdump utilities.</li>
<li>Convert the .dts files to .dtb binary files: <br /> &lt;syntaxhighlight lang='bash'&gt;$ dtc -I dts -O dtb -o &lt;output file name&gt; &lt;input file name&gt;&lt;/syntaxhighlight&gt;</li>
<li>If a syntax error occurs during conversion the dtc tool will provide a file row and column address where the syntax error likely occurred.  The address will be in the form row.startCol-endCol as depicted:<br /> <a href="File_RM_conversion_syntax_error.html" class="image" title="RM_conversion_syntax_error.jpg"><img alt="RM_conversion_syntax_error.jpg" src="https://processors.wiki.ti.com/images/e/e2/RM_conversion_syntax_error.jpg" width="421" height="46" /></a></li>
<li>The output of the .dtb binary can be checked using the ftdump utility if the conversion succeeds.  Strings will be displayed as hex bytes: <br /> &lt;syntaxhighlight lang='bash'&gt;$ ./ftdump &lt;.dtb file&gt;&lt;/syntaxhighlight&gt;</li></ol>
<p>After conversion there are two possible means to include the DTBs in an application:
</p>
<ul><li>File Pointer</li>
<li>C const Byte Array</li></ul>
<p><u>Inclusion via File Pointer</u>
<br />1. Place the DTB files in a file system accessible to the application during runtime
<br />2. mmap or fopen the DTB file.  In the case of fopen the data in the DTB file will need to be copied to local data buffer prior to passing the DTB data to a RM instance.  A method for doing this is shown here:
&lt;syntaxhighlight lang='c'&gt;
/* Open the GRL and policy DTB files */
grlFp = fopen("...\\grl.dtb", "rb");
policyFp = fopen("...\\policy.dtb", "rb");
</p><p>/* Get the size of the GRL and policy */
fseek(grlFp, 0, SEEK_END);
grlFileSize = ftell(grlFp);
rewind(grlFp);
</p><p>fseek(policyFp, 0, SEEK_END);
policyFileSize = ftell(policyFp);
rewind(policyFp);
</p><p>/* Allocate buffers to hold the GRL and policy */
grl = Osal_rmMalloc(grlFileSize);
policy = Osal_rmMalloc(policyFileSize);
</p><p>/* Read the file data into the allocated buffers */
readSize = fread(grl, 1, grlFileSize, grlFp);
System_printf("Read Size compared to file size:&#160;%d&#160;:&#160;%d\n", readSize, grlFileSize);
readSize = fread(policy, 1, policyFileSize, policyFp);
System_printf("Read Size compared to file size:&#160;%d&#160;:&#160;%d\n", readSize, policyFileSize);
</p><p>/* Create the RM Server instance */
rmInitCfg.instName = "Server";
rmInitCfg.instType = Rm_instType_SERVER;
rmInitCfg.instCfg.serverCfg.globalResourceList = (void *)grl;
rmInitCfg.instCfg.serverCfg.globalPolicy = (void *)policy;
/* Get the RM Server handle */
rmServerHandle = Rm_init(&amp;rmInitCfg);
&lt;/syntaxhighlight&gt;
</p><p><u>Inclusion via C const Byte Array</u>
</p><p>In this case, the cify shell script provided with RM is used to convert the DTB binary to a C source file containing a const C byte array.  The cify script will generate the code to align and pad the byte array to a specified byte size
</p>
<ol><li>Copy the cify.sh shell script to the Unix environment directory in which the generated .dtb files are located.</li>
<li>Convert the shell script to Unix format: <br /> &lt;syntaxhighlight lang='bash'&gt;$ dos2unix cify.sh&lt;/syntaxhighlight&gt;</li>
<li>Convert any .dtb binaries to C const byte arrays.  The usage menu can be printed running the cify script without any input parameters: <br /> &lt;syntaxhighlight lang='bash'&gt;$ ./cify.sh &lt;input .dtb file&gt; &lt;output .c file&gt; &lt;byte array name&gt; &lt;linker data section name&gt; &lt;byte alignment&gt;&lt;/syntaxhighlight&gt;</li>
<li>extern the byte arrays into the application source and compile the generated C source files into the application</li></ol>
<h5><span class="mw-headline" id="Example:_Converting_fruit_GRL_and_Policies">Example: Converting fruit GRL and Policies</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=51" title="Edit section: Example: Converting fruit GRL and Policies">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<ul><li>Convert fruit-GRL.dts to .dtb</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ dtc -I dts -O dtb -o fruit-GRL.dtb fruit-GRL.dts&lt;/syntaxhighlight&gt;
</p>
<ul><li>Convert fruit-policy.dts to .dtb</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ dtc -I dts -O dtb -o fruit-policy.dtb fruit-policy.dts&lt;/syntaxhighlight&gt;
</p>
<ul><li>Convert fruit-policy-static.dts to .dtb</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ dtc -I dts -O dtb -o fruit-policy-static.dtb fruit-policy-static.dts&lt;/syntaxhighlight&gt;
</p>
<ul><li>Dump fruit-GRL.dtb (Not required - just showing the output)</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ ./ftdump fruit-GRL.dtb&lt;/syntaxhighlight&gt;
<a href="File_RM_dump_fruit_GRL.html" class="image" title="RM_dump_fruit_GRL.jpg"><img alt="RM_dump_fruit_GRL.jpg" src="https://processors.wiki.ti.com/images/7/78/RM_dump_fruit_GRL.jpg" width="792" height="422" /></a>
</p>
<ul><li>Convert fruit-GRL.dtb to fruit-GRL.c aligned to 128 bytes</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ ./cify.sh fruit-GRL.dtb fruit-GRL.c grl grlSect 128&lt;/syntaxhighlight&gt;
<a href="File_RM_fruit_GRL.html" class="image" title="RM_fruit_GRL.jpg"><img alt="RM_fruit_GRL.jpg" src="https://processors.wiki.ti.com/images/1/13/RM_fruit_GRL.jpg" width="609" height="298" /></a><br />
</p>
<ul><li>Convert fruit-policy.dtb to fruit-policy.c</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ ./cify.sh fruit-policy.dtb fruit-policy.c policy policySect 128&lt;/syntaxhighlight&gt;
<a href="File_RM_fruit_policy.html" class="image" title="RM_fruit_policy.jpg"><img alt="RM_fruit_policy.jpg" src="https://processors.wiki.ti.com/images/8/86/RM_fruit_policy.jpg" width="589" height="315" /></a><br />
</p>
<ul><li>Convert fruit-policy-static.dtb to fruit-policy-static.c</li></ul>
<p>&lt;syntaxhighlight lang='bash'&gt;$ ./cify.sh fruit-policy-static.dtb fruit-policy-static.c policy-static policySect 128&lt;/syntaxhighlight&gt;<a href="File_RM_fruit_policy_static.html" class="image" title="RM_fruit_policy_static.jpg"><img alt="RM_fruit_policy_static.jpg" src="https://processors.wiki.ti.com/images/7/76/RM_fruit_policy_static.jpg" width="606" height="324" /></a>
</p>
<h3><span id="RM_Instance_Initialization_&amp;_Configuration"></span><span class="mw-headline" id="RM_Instance_Initialization_.26_Configuration">RM Instance Initialization &amp; Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=52" title="Edit section: RM Instance Initialization &amp; Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Source code to add RM instances to the system application can be added now that the resource list has been defined.  The first step in this process is identifying how many RM instances are needed and in what context they need to execute from.  At the least, RM needs a Server instance to operate.  If the system application is one that executes from a single thread on a single core only a Server is needed.  However, an application in need of resource management is more than likely multi-threaded and multi-core.  For systems it's best to place the RM Server on what can be considered the centralized thread or core.  For example, on TI Keystone devices it's best to place the RM Server on the ARM, running from Linux user-space, or, if the application is DSP-only, core 0, since most applications consider these core contexts the source of most control.
</p><p>Once the RM Server location has been established, identification of where RM Clients are needed should be identified.  Clients will be required in any system context that will require different allocation permissions than the Server and any other Client.  This can boil down to one Client for each core, one Client per process/thread, or Clients for each software module that may be running within the same thread.  The number of RM instances needed is based on the system topology and resource management granularity needed.
</p><p>There are five major steps to initializing the RM instances:
</p>
<ul><li>Populate the RM OSAL functions based on the placement of the RM instances.  The answers to the following questions and more should be considered when populating the RM OSAL APIs
<ul><li>Will RM instance memory be allocated from a shared memory?</li>
<li>Will RM instance memory be allocated from a cached memory?</li>
<li>Will a single instance be shared across multiple tasks/threads/processes?</li>
<li>Is internal blocking required within a RM instance because the application can't support receiving service responses at a later time via callback function? (Typical for LLDs)</li></ul></li>
<li>Set each instances initialization parameters and create the RM instances</li>
<li>Open the instance service handle
<ul><li>In some cases the RM instance will need allocate resources prior to the RM infrastructure being connected via transports.  For example, a shared resource needs to be allocated in order to connect two RM instances (semi-chicken and egg problem).  To handle these cases the RM instance will be provided a static policy (RM Servers will just reference the regular policy and use the allocators since it has access to everything) during initialization in order to allocate a minimal set of resources to get the system up and running prior to the RM infrastructure being connected.</li></ul></li>
<li>Bringup the application transport code required to connect each RM instance</li>
<li>Register the transports between RM instances with each instance via the transport API</li></ul>
<h4><span class="mw-headline" id="Instance_Initialization">Instance Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=53" title="Edit section: Instance Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>RM instance initialization is fairly straightforward process.  The key aspect of instance initialization is in regards to RM's name synchronization requirements.  Please keep in mind that each RM instance must be assigned a name independent from other instance names at initialization.  Also, the instance names assigned to the RM instances must be present in the valid-instances list and the permission strings in the policy files.  If the latter requirements are not fulfilled RM instances will fail initialization or not be able to allocate resources.
</p><p>Standard instance initialization parameters are well documented in the RM API Documentation found in pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/docs/rmDocs.chm or, if the .chm doesn't exist, pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/docs/doxygen/html/index.html
</p>
<h5><span class="mw-headline" id="Server_Initialization">Server Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=54" title="Edit section: Server Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>One Server should be initialized per system.  All resource management data structures including the NameServer are tracked and modified by the Server instance.  Because of this, all service requests will be processed by the Server.  Clients will always forward any request to the Server instance for processing.
</p><p>If multiple Servers are desired the resources managed by each server <b>MUST</b> be mutually exclusive.  Otherwise, proper system resource management cannot be guaranteed.
</p><p>Standard Server initialization:
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Server instance name (must match with policy valid-instances list */
   char rmServerName[RM_NAME_MAX_CHARS] = "Server";
</pre>
<pre>   ...
</pre>
<pre>   /* Initialize the Server */
   rmInitCfg.instName = rmServerName;
   rmInitCfg.instType = Rm_instType_SERVER;
   rmInitCfg.instCfg.serverCfg.globalResourceList = (void *)rmGRL;
   rmInitCfg.instCfg.serverCfg.linuxDtb = (void *)rmLinuxDtb;
   rmInitCfg.instCfg.serverCfg.globalPolicy = (void *)rmGlobalPolicy;
   rmServerHandle = Rm_init(&amp;rmInitCfg, &amp;result);
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Configuration breakdown:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instName = rmServerName;&lt;/syntaxhighlight&gt; - Pointer to Server's instance name.  Must be in policy valid-instances list.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instType = Rm_instType_SERVER;&lt;/syntaxhighlight&gt; - Declare Server instance type.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.globalResourceList = (void *)rmGRL;&lt;/syntaxhighlight&gt; - Pointer to GRL dtb.  The GRL can be a linked C const byte array or read from a file.  The Server will process the GRL and create an allocator for each resource specified within.  If the Linux DTB is provided it will be parsed for resources to automatically reserve for the Linux kernel.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.linuxDtb = (void *)rmLinuxDtb;&lt;/syntaxhighlight&gt; - Pointer to the Linux dtb.  This is an optional parameter and only useful if Linux is part of the system.  In the latter case, the Linux DTB can be provided to the Server at initialization to automatically reserve resource for the kernel.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.globalPolicy = (void *)rmGlobalPolicy;&lt;/syntaxhighlight&gt; - Pointer to the RM infrastructure-wide policy.  The policy can be a linked C const byte array or read from a file.  The policy provided to the Server must contain the resource allocation specifications for all RM instances present in the system.</li></ul>
<h5><span class="mw-headline" id="Client_Delegate_Initialization">Client Delegate Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=55" title="Edit section: Client Delegate Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Feature not Complete - At time of writing this user guide the CD features are not complete.  This section will be updated once full CD functionality is available.
</p>
<h5><span class="mw-headline" id="Client_Initialization">Client Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=56" title="Edit section: Client Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>There is no limit to the number of Clients that can be defined.  The only caveat is no two Clients have the same instance name.
</p><p>Clients contain no resource management data structures.  Their main purpose is a permission end point within the RM infrastructure.  Any service request received on a Client instance will be forwarded to the Server.  The Server will return the response which the Client must provide back to the entity that made the request.
</p><p>Clients can perform static allocations if a static policy is provided at initialization.  Static allocation will be fulfilled from the Client until the Client's transport API is registered with another Server or CD instance.  Once transport registration occurs static allocations will cease and any requests will be forwarded to the Server.  Any static allocations that occurred will be forwarded to the Server upon the first service request made post-transport configuration.  The Server will validate any static allocations and provide the responses back to the Client.  If any of the static allocations failed validation against the Server's system-wide policy the Client instance will enter a locked state.  The Client cannot service requests when in the locked state.  The locked state cannot be exited once entered.  The system must be restarted with a new, valid static policy that is a subset of the system-wide policy.
</p><p>Standard Client initialization:
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Server instance name (must match with policy valid-instances list */
   char rmClientName[RM_NAME_MAX_CHARS] = "Client";
</pre>
<pre>   ...
</pre>
<pre>   /* Initialize a Client */
   rmInitCfg.instName = rmClientName;
   rmInitCfg.instType = Rm_instType_CLIENT;
   rmInitCfg.instCfg.clientCfg.staticPolicy = (void *)rmStaticPolicy;
   rmClientHandle = Rm_init(&amp;rmInitCfg, &amp;result);
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Configuration breakdown:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instName = rmClientName;&lt;/syntaxhighlight&gt; - Pointer to Client's instance name.  Must be in policy (Server policy and, if applicable, static policy provided to this Client) valid-instances list.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instType = Rm_instType_CLIENT;&lt;/syntaxhighlight&gt; - Declare Client instance type</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.clientCfg.staticPolicy = (void *)rmStaticPolicy;&lt;/syntaxhighlight&gt; - Pointer to the Client's static policy.  This is an optional parameter used if the Client must allocate some specific resources to a system entity prior the system being able to connect the Client to the Server.  The static policy can be a linked C const byte array or read from a file.  The static policy must be a subset of the system-wide policy given to the Server.</li></ul>
<h5><span id="Shared_Server/Client_Initialization"></span><span class="mw-headline" id="Shared_Server.2FClient_Initialization">Shared Server/Client Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=57" title="Edit section: Shared Server/Client Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>A Shared Server and Shared Clients is a special type of RM infrastructure setup that does not require the RM instances be connected via the Transport API.  The "transport" between the Shared Clients and Shared Server is essentially the Shared Clients have direct access to the Shared Server's resource management data structures.  This requires that all RM Shared Server data structures be allocated from shared memory via the OSAL API.  The Shared Server/Client architecture is useful in cases where the application cannot tolerate the blocking operations required by RM instances to send and receive service requests to the Server for completion.  The downside to the Shared Server/Client architecture the Shared instances cannot be connected to any standard RM instance via the transport API.  All "communication" between the Shared Server and Shared Clients is assumed to be through resource management data structures being located in shared memory.
</p><p>The rmK2H/KC66BiosSharedTestProject delivered with PDK provides an example of how to initialize and use the Shared Server/Client RM infrastructure.
</p><p>The following graphic give a high-level view of how the Shared Server/Client architecture operates: <a href="File_RM_shared_inst.html" class="image" title="RM_shared_inst.jpg"><img alt="RM_shared_inst.jpg" src="https://processors.wiki.ti.com/images/8/83/RM_shared_inst.jpg" width="929" height="566" /></a>
</p><p>Standard Shared Server initialization:
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Server instance name (must match with policy valid-instances list */
   char rmServerName[RM_NAME_MAX_CHARS] = "Server";
</pre>
<pre>   ...
</pre>
<pre>   /* Initialize the Server */
   rmInitCfg.instName = rmServerName;
   rmInitCfg.instType = Rm_instType_SHARED_SERVER;
   rmInitCfg.instCfg.serverCfg.globalResourceList = (void *)rmGRL;
   rmInitCfg.instCfg.serverCfg.linuxDtb = (void *)rmLinuxDtb;
   rmInitCfg.instCfg.serverCfg.globalPolicy = (void *)rmGlobalPolicy;
   /* RM Shared Server handle returned will be from shared memory */
   rmSharedServerHandle = Rm_init(&amp;rmInitCfg, &amp;result);
</pre>
<pre>   /* Writeback Shared Server handle for Shared Clients - Application must make sure writeback
    * is aligned and padded to cache line. */
   Osal_rmEndMemAccess((void *)&amp;rmSharedServerHandle, sizeof(Rm_Handle));
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Configuration breakdown:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instName = rmServerName;&lt;/syntaxhighlight&gt; - Pointer to Server's instance name.  Must be in policy valid-instances list.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instType = Rm_instType_SHARED_SERVER;&lt;/syntaxhighlight&gt; - Declare Shared Server instance type.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.globalResourceList = (void *)rmGRL;&lt;/syntaxhighlight&gt; - Pointer to GRL dtb.  The GRL can be a linked C const byte array or read from a file.  The GRL can be located in a local or shared memory area since it will only be accessed once during Shared Server initialization.  The Server will process the GRL and create an allocator for each resource specified within.  If the Linux DTB is provided it will be parsed for resources to automatically reserve for the Linux kernel.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.linuxDtb = (void *)rmLinuxDtb;&lt;/syntaxhighlight&gt; - Pointer to the Linux dtb.  This is an optional parameter and only useful if Linux is part of the system.  In the latter case, the Linux DTB can be provided to the Server at initialization to automatically reserve resource for the kernel.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.serverCfg.globalPolicy = (void *)rmGlobalPolicy;&lt;/syntaxhighlight&gt; - Pointer to the RM infrastructure-wide policy.  The policy can be a linked C const byte array or read from a file.  The policy can be located in a local or shared memory area since it will only be accessed once during Shared Server initialization.  The Shared Server will malloc a memory block from shared memory and copy the policy into malloc'd memory.  The policy provided to the Server must contain the resource allocation specifications for all RM instances present in the system.</li>
<li>&lt;syntaxhighlight lang='c'&gt;Osal_rmEndMemAccess((void *)&amp;rmSharedServerHandle, sizeof(Rm_Handle));&lt;/syntaxhighlight&gt; - The Shared Server handle will be located in shared memory.  It must be written back to memory if cache is enabled so that the Shared Clients can access the Shared Server and it's resource data structures.</li></ul>
<p>Standard Shared Client initialization:
&lt;syntaxhighlight lang='c'&gt;
</p>
<pre>   /* Server instance name (must match with policy valid-instances list */
   char rmClientName[RM_NAME_MAX_CHARS] = "Client";
</pre>
<pre>   ...
</pre>
<pre>   /* Wait for Shared Server handle to be valid */
   do {
       Osal_rmBeginMemAccess((void *)&amp;rmSharedServerHandle, sizeof(Rm_Handle));
   } while (!sharedServerHandle);
</pre>
<pre>   /* Initialize a Client */
   rmInitCfg.instName = rmClientName;
   rmInitCfg.instType = Rm_instType_SHARED_CLIENT;
   rmInitCfg.instCfg.sharedClientCfg.sharedServerHandle = (void *)rmSharedServerHandle;
   rmClientHandle = Rm_init(&amp;rmInitCfg, &amp;result);
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Configuration breakdown:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Osal_rmBeginMemAccess((void *)&amp;rmSharedServerHandle, sizeof(Rm_Handle));&lt;/syntaxhighlight&gt; - Need to invalidate the Shared Server handle from local memory if caching is enabled.  Once the Shared Server handle is non-null it has been created and writtenback.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instName = rmClientName;&lt;/syntaxhighlight&gt; - Pointer to Client's instance name.  Must be in policy (Server policy and, if applicable, static policy provided to this Client) valid-instances list.</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instType = Rm_instType_SHARED_CLIENT;&lt;/syntaxhighlight&gt; - Declare Shared Client instance type</li>
<li>&lt;syntaxhighlight lang='c'&gt;rmInitCfg.instCfg.sharedClientCfg.sharedServerHandle = (void *)rmSharedServerHandle;&lt;/syntaxhighlight&gt; - Provide the Shared Server handle to the Shared Client instance.  When a service request is received on the Shared Client it will remap itself to the Shared Server's instance data so that it can access the resource management data structures located in shared memory.  Service requests made through the Shared Client will be validated against the policy using the Shared Client's instance name.</li></ul>
<h4><span class="mw-headline" id="RM_Transport_Configuration">RM Transport Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=58" title="Edit section: RM Transport Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The system application must connect communicating RM instances with application created transport paths.  The transport paths between instances must be registered with the RM instances using the Transport API.  The type of transport path used and the means by which it is created is completely up to the system application.
</p>
<h5><span class="mw-headline" id="RM_Instance_Transport_Requirements">RM Instance Transport Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=59" title="Edit section: RM Instance Transport Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>RM will return an error if the following rules are not followed when registering transports with instance:
</p>
<ul><li>Server Instance
<ul><li>Cannot register a transport whose remote instance is another Server</li>
<li>Can register an unlimited amount of transports whose remote instances are CDs or Clients</li></ul></li>
<li>CD Instance
<ul><li>Cannot register a transport whose remote instance is another CD</li>
<li>Cannot register more than one transport whose remote instance is a Server</li>
<li>Can register an unlimited amount of transports whose remote instances are Clients</li></ul></li>
<li>Client Instance
<ul><li>Cannot register a transport whose remote instance is another Client</li>
<li>Cannot register more than one transport whose remote instance is a Server or CD
<ul><li>If transport to CD registered cannot register transport to Server</li>
<li>If transport to Server registered cannot register transport to CD</li></ul></li></ul></li></ul>
<h5><span class="mw-headline" id="Transport_Registration">Transport Registration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=60" title="Edit section: Transport Registration">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The system application uses the Rm_transportRegister API to register application created transports to remote instances.  The Rm_TransportCfg structure provides specific details about the transport to the RM instance.  The details are used by the RM instances to route internal RM messages properly.  If a transport is successfully registered a transport handle will be returned to the application.  The application can use this handle to tie specific transport pipes to specific RM instances.  Following are some configuration details for each Rm_TransportCfg parameter:
</p><p>&lt;syntaxhighlight lang='c'&gt;
typedef struct {
</p>
<pre>   Rm_Packet *(*rmAllocPkt)(Rm_AppTransportHandle appTransport, uint32_t pktSize,
                            Rm_PacketHandle *pktHandle);
   int32_t (*rmSendPkt)(Rm_AppTransportHandle appTransport, Rm_PacketHandle pktHandle);
</pre>
<p>} Rm_TransportCallouts;
</p><p>typedef struct {
</p>
<pre>   Rm_Handle              rmHandle;
   Rm_AppTransportHandle  appTransportHandle;
   Rm_InstType            remoteInstType;
   const char            *remoteInstName;
   Rm_TransportCallouts   transportCallouts;
</pre>
<p>} Rm_TransportCfg;
&lt;/syntaxhighlight&gt;
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_Handle rmHandle;&lt;/syntaxhighlight&gt;
<ul><li>Instance handle for the instance the transport should be registered with</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;Rm_AppTransportHandle appTransportHandle;&lt;/syntaxhighlight&gt;
<ul><li>Handle to the transport "pipe" object that will transmit a RM packet to specified remote RM instance.  The handle provided can be anything from a function pointer, to a pointer to a data structure.  In the multi-core RM examples this value is a IPC MessageQ receive queue that is tied to the remote RM instance.  This value will be provided to the application as part of the rmSendPkt callout from RM.  The application should then be able to use this value to send the Rm_Packet to the remote RM instance.</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;Rm_InstType remoteInstType;&lt;/syntaxhighlight&gt;
<ul><li>Instance type at the remote end of the transport being registered.  RM instances that forward service requests will use this field to find the transport that connects to the RM Server or CD</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;const char *remoteInstName;&lt;/syntaxhighlight&gt;
<ul><li>Instance name at the remote end of the transport being registered.  Used internal for proper Rm_Packet routing and service request handling</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;Rm_TransportCallouts transportCallouts;&lt;/syntaxhighlight&gt;
<ul><li>Each transport registered can have a different set of alloc and send functions registered with the RM instance.  This would be needed if not all transports between RM instances are the same.  For example, a CD instance on a DSP core connected to a Server on ARM and Clients on other DSP cores.  The application would register a DSP to ARM transport with the CD for the connection to the Server.  While for the Client connections the application would register a DSP to DSP transport.  The same DSP to DSP transport could be registered for each Client as long as the appliation transport send function can route the Rm_Packets based on the Rm_AppTransportHandle provided by the instance.
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_Packet *(*rmAllocPkt)(Rm_AppTransportHandle appTransport, uint32_t pktSize, Rm_PacketHandle *pktHandle);&lt;/syntaxhighlight&gt;
<ul><li>RM instance callout function used to get a transport-specific buffer for the Rm_packet to be sent.  The pointer to the data buffer where RM should place the Rm_Packet is returned as a Rm_Packet pointer return value.  If the data buffer is part of a larger transport packet data structure the pointer to the start of the transport packet data structure is returned via the Rm_PacketHandle pointer argument.  The RM instance will not modify anything using the Rm_PacketHandle pointer.  The instance will populate the internal RM packet data into the data buffer pointed to by the returned Rm_Packet pointer.  The following image depicts the two use cases that must be handled by the application supplied transport allocation function based on the transport's packet type:<a href="File_RM_packet_diff.html" class="image" title="RM_packet_diff.jpg"><img alt="RM_packet_diff.jpg" src="https://processors.wiki.ti.com/images/7/70/RM_packet_diff.jpg" width="882" height="472" /></a></li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t (*rmSendPkt)(Rm_AppTransportHandle appTransport, Rm_PacketHandle pktHandle);&lt;/syntaxhighlight&gt;
<ul><li>RM instance callout function used to send the transport packet containing the RM instance data to the remote RM instance.  The Rm_AppTransportHandle should be used by the application to route the packet to the correct transport "pipe".  The Rm_PacketHandle is a pointer to the application transport packet.</li></ul></li></ul></li></ul></li></ul>
<h5><span class="mw-headline" id="Providing_Received_Packets_to_RM">Providing Received Packets to RM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=61" title="Edit section: Providing Received Packets to RM">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The system application must receive packets over the transports, extract the buffer containing the Rm_Packet pointer and pass the pointer to the RM instance through the RM transport receive API:
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;int32_t Rm_receivePacket(Rm_TransportHandle transportHandle, const Rm_Packet *pkt);&lt;/syntaxhighlight&gt;
<ul><li>When the application receives a packet it will provide the packet to RM along with a Rm_TransportHandle.  The Rm_TransportHandle should map to registered transport whose remote instance is the instance from which the packet was received.</li></ul></li></ul>
<p>RM instances assume all packet free operations will be done by the application.  Therefore, after processing a received packet RM will return without attempting to free the packet.  The application must free the data buffer containing the RM data and the packet which carried the data buffer.
</p><p>The following image provides a visual depiction of how RM transport routing can be handled by a system application:
<a href="File_RM_packet_routing.html" class="image" title="RM_packet_routing.jpg"><img alt="RM_packet_routing.jpg" src="https://processors.wiki.ti.com/images/6/69/RM_packet_routing.jpg" width="584" height="640" /></a>
</p><p>A good example of how RM instance transports can be handled over IPC for DSP to DSP applications is provided in pdk_&lt;device&gt;_w_xx_yy_zz/packages/ti/drv/rm/test/rm_transport_setup.c
</p>
<h3><span id="Service_Request/Response_Mechanisms"></span><span class="mw-headline" id="Service_Request.2FResponse_Mechanisms">Service Request/Response Mechanisms</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=62" title="Edit section: Service Request/Response Mechanisms">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>System applications can request resource services from RM via the instance service handles.  After each instance has been initialized a service handle can be opened from the instance via the Rm_serviceOpenHandle API:
</p><p>&lt;syntaxhighlight lang='c'&gt;Rm_ServiceHandle *Rm_serviceOpenHandle(Rm_Handle rmHandle, int32_t *result);&lt;/syntaxhighlight&gt;
</p><p>The service handle returned to the system application consists of two items
</p>
<ul><li>The RM instance handle from which the service handle was opened</li>
<li>A function pointer to RM's service handler function</li></ul>
<p>&lt;syntaxhighlight lang='c'&gt;
typedef struct {
</p>
<pre>   void *rmHandle;
   void (*Rm_serviceHandler)(void *rmHandle, const Rm_ServiceReqInfo *serviceRequest,
                             Rm_ServiceRespInfo *serviceResponse);
</pre>
<p>} Rm_ServiceHandle;
&lt;/syntaxhighlight&gt;
</p><p>Service requests can be made using the service handle by calling the Rm_serviceHandler function, passing the service handle's rmHandle as a parameter, as well as pointers to RM service request and service response data structures created in the application context (stack or global variable).
</p><p><u>Standard Service Request Example</u>
&lt;syntaxhighlight lang='c'&gt;
void func (void)
{
</p>
<pre>   Rm_ServiceReqInfo  requestInfo;
   Rm_ServiceRespInfo responseInfo;
   ...
</pre>
<pre>   /* Open service handle */
   serviceHandle = Rm_serviceOpenHandle(rmHandle, &amp;result);
</pre>
<pre>   memset((void *)&amp;requestInfo, 0, sizeof(requestInfo));
   memset((void *)&amp;responseInfo, 0, sizeof(responseInfo));
   /* Configure request */
   requestInfo.type = ...;
   ...
   serviceHandle-&gt;Rm_serviceHandler(serviceHandle-&gt;rmHandle, &amp;requestInfo, &amp;responseInfo);
   /* Retrieve response from responseInfo */
</pre>
<pre>   /* Next request */
   memset((void *)&amp;requestInfo, 0, sizeof(requestInfo));
   memset((void *)&amp;responseInfo, 0, sizeof(responseInfo));
   /* Configure request */
   requestInfo.type = ...;
   ...
   serviceHandle-&gt;Rm_serviceHandler(serviceHandle-&gt;rmHandle, &amp;requestInfo, &amp;responseInfo);
   /* Retrieve response from responseInfo */
</pre>
<pre>   ...
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="Service_Request_Parameters">Service Request Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=63" title="Edit section: Service Request Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Service requests can be configured use the Rm_ServiceReqInfo structure.  Configurations include the ability to:
</p>
<ul><li>Allocate and free specific resource values</li>
<li>Allocate a resource with an unspecified value or, in other words, allocator a specific type of resource but the system doesn't care what value it is.</li>
<li>Allocate and free resource blocks of different sizes and alignments</li>
<li>Map and unmap resources to names using the RM NameServer</li>
<li>Retrieve resources by name via the NameServer</li>
<li>Request RM block and not return until the service request has been completed</li>
<li>Request RM immediately and provide the completed service request via a application supplied callback function</li></ul>
<p><u>Service Request Structure</u>
&lt;syntaxhighlight lang='c'&gt;
typedef struct {
</p>
<pre>   Rm_ServiceType      type;
   const char         *resourceName;
</pre>
<ol><li>define RM_RESOURCE_BASE_UNSPECIFIED (-1)</li></ol>
<pre>   int32_t             resourceBase;
   uint32_t            resourceLength;
</pre>
<ol><li>define RM_RESOURCE_ALIGNMENT_UNSPECIFIED (-1)</li></ol>
<pre>   int32_t             resourceAlignment;
   const char         *resourceNsName;
   Rm_ServiceCallback  callback;
</pre>
<p>} Rm_ServiceReqInfo;
&lt;/syntaxhighlight&gt;
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_ServiceType      type;&lt;/syntaxhighlight&gt; - The type of RM service requested.  See the <a href="MCSDK_UG_Chapter_Developing_System_Mgmt.html#Service_API" title="MCSDK UG Chapter Developing System Mgmt">Service API section</a> for more details.</li>
<li>&lt;syntaxhighlight lang='c'&gt;const char         *resourceName;&lt;/syntaxhighlight&gt; - Resource name affected by the request.  According to the name synchronization rules the resource name is required to match a resource node name in the GRL and policy.  Otherwise, RM will return an error.</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t             resourceBase;&lt;/syntaxhighlight&gt; - Base value of the resource affected by the request
<ul><li>&lt;syntaxhighlight lang='c'&gt;#define RM_RESOURCE_BASE_UNSPECIFIED (-1)&lt;/syntaxhighlight&gt; - Can be supplied in place of a non-negative resourceBase value.  Will tell RM to find the next available resource.  An unspecified base value is only valid for allocation requests.</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;uint32_t            resourceLength;&lt;/syntaxhighlight&gt; - Length value of the resource affected by the request.  Together the base and length will cause a resource's values from base to (base+length-1) to be affected by the request.</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t             resourceAlignment;&lt;/syntaxhighlight&gt; - Alignment value of the resource affected by the request.  Only valid for allocation requests when the resourceBase is UNSPECIFIED.
<ul><li>&lt;syntaxhighlight lang='c'&gt;#define RM_RESOURCE_ALIGNMENT_UNSPECIFIED (-1)&lt;/syntaxhighlight&gt; - Can be supplied in place of a non-negative resourceAlignment value.  RM will default to an alignment of 0 if the alignment is left UNSPECIFIED.  An unspecified alignment value is only valid for allocation requests when the resourceBase is UNSPECIFIED.</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;const char         *resourceNsName;&lt;/syntaxhighlight&gt;
<ul><li>For NameServer mapping requests specifies the NameServer name to map the specified resources to</li>
<li>For NameServer unmap requests specifies the NameServer name to unmap/remove from the NameServer</li>
<li>For NameServer get by name requests specifies the NameServer name to retrieve mapped resources from in the NameServer.  RM will return an error if a get by name request has both a resource specified via the base and length values and a NameServer name.</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;Rm_ServiceCallback  callback;&lt;/syntaxhighlight&gt; - Application's callback function for RM to use to return the completed service request to the application.
<ul><li>The RM instance will by default block until the completed service request can be returned via the call stack if the callback function pointer is left NULL.  RM instance blocking is handled by the block/unblock OSAL functions.</li>
<li>RM will return a serviceId in the service response via the call stack if a callback function is provided and the service request resulted in the RM instance needing to forward the service request to another RM instance for completion.  The completed request will be returned at a later time via the provided callback function.  the completed request will contain a serviceId that matches the serviceId returned by the instance via the call stack.</li></ul></li></ul>
<h4><span class="mw-headline" id="Service_Response_Parameters">Service Response Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=64" title="Edit section: Service Response Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><u>Service Response Structure</u>
&lt;syntaxhighlight lang='c'&gt;
typedef struct {
</p>
<pre>   Rm_Handle rmHandle;
   int32_t   serviceState;
   uint32_t  serviceId;
   char      resourceName[RM_NAME_MAX_CHARS];
   int32_t   resourceBase;
   uint32_t  resourceLength;
</pre>
<ol><li>define RM_RESOURCE_NUM_OWNERS_INVALID (-1)</li></ol>
<pre>   int32_t   resourceNumOwners;
</pre>
<p>} Rm_ServiceRespInfo;
&lt;/syntaxhighlight&gt;
</p>
<ul><li>&lt;syntaxhighlight lang='c'&gt;Rm_Handle rmHandle;&lt;/syntaxhighlight&gt; - The service response will contain the RM instance handle from which the service request was originally issues.  This is for the application to sort responses received via callback function in system contexts where more than one RM instance runs</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t   serviceState;&lt;/syntaxhighlight&gt; - Server state contains the service completion status.
<ul><li>SERVICE_APPROVED - Service request completed successfully</li>
<li>SERVICE_APPROVED_STATIC - Service request completed successfully via static policy.  The service request will be validated on the Server once transports are configured</li>
<li>SERVICE_PROCESSING - Service request was forwarded to a CD or Server for completion.  The response will be returned through the provided application callback function</li>
<li>Any other value &gt; 0 - Service request denied (See rm.h)</li>
<li>Any other value &lt; 0 - Error encountered processing the service request (See rm.h)</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;uint32_t  serviceId;&lt;/syntaxhighlight&gt; - ID assigned to service request by RM
<ul><li>The ID returned by RM will never zero.</li>
<li>IDs assigned to processing requests can be used to match responses received at later time via the application callback function</li></ul></li>
<li>&lt;syntaxhighlight lang='c'&gt;char      resourceName[RM_NAME_MAX_CHARS];&lt;/syntaxhighlight&gt; - Contains the resource name affected by the completed request</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t   resourceBase;&lt;/syntaxhighlight&gt; - Contains the resource base value affected by the completed request</li>
<li>&lt;syntaxhighlight lang='c'&gt;uint32_t  resourceLength;&lt;/syntaxhighlight&gt; - Contains the resource length affected by the completed request</li>
<li>&lt;syntaxhighlight lang='c'&gt;int32_t   resourceNumOwners;&lt;/syntaxhighlight&gt; - If valid, returns the number of current owners for the resource specified in the service request
<ul><li>Will contain the value RM_RESOURCE_NUM_OWNERS_INVALID if the service request has nothing to do with owner reference counts.  Such as NameServer services.</li></ul></li></ul>
<h4><span id="Blocking_&amp;_Non-Blocking_Requests"></span><span class="mw-headline" id="Blocking_.26_Non-Blocking_Requests">Blocking &amp; Non-Blocking Requests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=65" title="Edit section: Blocking &amp; Non-Blocking Requests">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please see the <a href="MCSDK_UG_Chapter_Developing_System_Mgmt.html#Service_Request_Configuration_Options" title="MCSDK UG Chapter Developing System Mgmt">Service Request Config Options</a> section describing the service request's callback function pointer parameter for an accurate description of how RM blockin/non-blocking operations can be configured.
</p>
<table border="1" style="width: 100%; height: 212px" id="rm_instance_blocking_criteria">

<tbody><tr>
<td bgcolor="#c0c0c0"><b>RM Instance</b>
</td>
<td bgcolor="#c0c0c0"><b>Blocking Criteria</b>
</td></tr>
<tr>
<td>Server
</td>
<td>
<ul><li>Will never block for service requests received through its service API</li></ul>
</td></tr>
<tr>
<td>Client Delegate
</td>
<td>
<ul><li>Will not block for service requests received through its service API that can be completed using resources the CD currently owns</li>
<li>Will need to block for service requests that must be forwarded to a Server located on a different core/process/thread/task because the locally owned resources cannot be used to complete the request</li></ul>
</td></tr>
<tr>
<td>Client
</td>
<td>
<ul><li>Will need to block for all service requests since no resource management data structures on managed by Clients.  Blocking will not occur if the Client is local to the Server i.e. the Client and Server can be connected over the transport API via function calls.</li></ul>
</td></tr>
<tr>
<td>Shared Server &amp; Client
</td>
<td>
<ul><li>Will never block since the Shared Server and Shared Clients can all access the resource management data structures in shared memory.</li></ul>
</td></tr></tbody></table>
<h4><span id="Direct_&amp;_Indirect_Resource_Management"></span><span class="mw-headline" id="Direct_.26_Indirect_Resource_Management">Direct &amp; Indirect Resource Management</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=66" title="Edit section: Direct &amp; Indirect Resource Management">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Service requests allow resources to be managed through direct and indirect means.
</p><p>Direct management refers to RM being integrated with a software component under the hood.  Beyond providing a RM instance handle to the module, resource management interactions with the module's resources are abstracted from the system.  An example of this would be QMSS, CPPI, and PA LLDs which have integrated RM to differing degrees.
</p><p>Indirect management refers to RM being used to provide a resource value (or set of values) then passing those values to a module API to actually allocate the resource with the provided values.  For example, RM is not currently integrated into any module that manages semaphores.  Therefore, RM resource management of semaphores would need to occur indirectly with the following steps
</p>
<ol><li>Add a semaphore resource to the GRL</li>
<li>Add semaphore allocation permissions to the policy (and static policy if applicable)</li>
<li>System creates a RM instance</li>
<li>System issues a service request to the instance requesting a semaphore resource</li>
<li>RM returns semaphore value based on request and policy</li>
<li>System uses returned value in call to module to manages semaphores (BIOS, CSL, etc.)</li></ol>
<p>In the latter case, RM is managing which system contexts are allowed to allocate and share which resources.  It's just that the resource value management is not abstracted from the system.
<br /><a href="File_RM_direct_indirect.html" class="image" title="RM_direct_indirect.jpg"><img alt="RM_direct_indirect.jpg" src="https://processors.wiki.ti.com/images/7/7d/RM_direct_indirect.jpg" width="716" height="579" /></a>
</p>
<h2><span class="mw-headline" id="RM_Supported_LLDs">RM Supported LLDs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=67" title="Edit section: RM Supported LLDs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>At this point in time the following LLDs have had RM support added:
</p>
<ul><li>QMSS</li>
<li>CPPI</li>
<li>PA</li></ul>
<p>The breadth of resources supported for each of these LLDs varies and will be covered in each LLDs section.  Each LLD remains backwards compatible with expected operation prior to RM integration.  A RM instance service handle can be registered with each existing LLD context.  The LLD will use RM to allocate resources tagged as resource to be managed by RM if a RM service handle is registered.  The LLD will allocate resources in the same way it allocated resources prior to RM integration if a RM service handle is registered.
</p>
<h3><span class="mw-headline" id="QMSS_LLD">QMSS LLD</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=68" title="Edit section: QMSS LLD">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM service handle can be registered with the QMSS LLD in the following manner:
&lt;syntaxhighlight lang='c'&gt;
/* Define the system initialization core */
</p>
<ol><li>define SYSINIT 0</li></ol>
<p>void foo (void)
{
</p>
<pre>   Qmss_StartCfg qmssStartCfg;
</pre>
<pre>   ...
</pre>
<pre>   /* Open RM service handle */
   rmServiceHandle = Rm_serviceOpenHandle(rmHandle, &amp;rmResult);
</pre>
<pre>   ...
</pre>
<pre>   if (core == SYSINIT) {
       /* Register RM Service handle with QMSS */
       qmssGblCfgParams.qmRmServiceHandle = rmServiceHandle;
</pre>
<pre>       /* Initialize Queue Manager SubSystem */
       result = Qmss_init (&amp;qmssInitConfig, &amp;qmssGblCfgParams);
   }
   else {
       /* Register RM service handle with QMSS */
       qmssStartCfg.rmServiceHandle = rmServiceHandle;
       result = Qmss_startCfg (&amp;qmssStartCfg);
   }
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p><p>Please refer to the LLD for resources managed by RM if a RM instance's service handle is registered.
</p><p>QMSS test/example projects that register RM on the DSP
</p>
<ul><li>qmInfraMCK2HC66BiosExampleProject</li>
<li>qmInfraMCK2KC66BiosExampleProject</li>
<li>qmQosSchedDropSchedK2HC66BiosTestProject</li>
<li>qmQosSchedDropSchedK2KC66BiosTestProject</li></ul>
<p>QMSS test/example programs that use RM on the ARM
</p>
<ul><li>qmInfraDmaMC_k2[hk].out</li>
<li>qmInfraDmaSC_k2[hk].out</li>
<li>qmQAllocTest_k2[hk].out</li></ul>
<p>In order to use the ARM programs, the RM server must be explicitly started separately from the qmss program.
</p><p>Using the files global-resource-list.dtb and policy_dsp_arm.dtb from pdk_keystone2_1_00_00_11/packages/ti/drv/rm/device/k2[hk], invoke:
&lt;syntaxhighlight&gt;./rmServer.out global-resource-list.dtb policy_dsp_arm.dtb&lt;/syntaxhighlight&gt;
</p><p>The qmInfraDmaMC.out and qmQAllocTest.out are compiled using packages/ti/drv/qmss/makefile_armv7 after running configuring and running packages/armv7setup.sh for tools locations in your linux system.
</p><p>qmInfraDmaSC and qmQAllocTest do not require arguments.  The qmInfraDmaMC also doesn't require an argument, but can take one argument which is task/core number.  Without arguments it forks 4 tasks; with arguments it runs one task with the specified ID number.  This facilitates gdb on indvidual tasks.
</p>
<h3><span class="mw-headline" id="CPPI_LLD">CPPI LLD</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=69" title="Edit section: CPPI LLD">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM service handle can be registered with the CPPI LLD in the following manner:
&lt;syntaxhighlight lang='c'&gt;
void foo (void)
{
</p>
<pre>   Cppi_StartCfg cppiStartCfg;
</pre>
<pre>   ...
</pre>
<pre>   /* Open RM service handle */
   rmServiceHandle = Rm_serviceOpenHandle(rmHandle, &amp;rmResult);
</pre>
<pre>   ...
</pre>
<pre>   /* Register RM with CPPI for each core */
   cppiStartCfg.rmServiceHandle = rmServiceHandle;
   Cppi_startCfg(&amp;cppiStartCfg);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p><p>Please refer to the LLD for resources managed by RM if a RM instance's service handle is registered.
</p><p>CPPI test/example projects that register RM:
</p>
<ul><li>cppiK2HC66BiosExampleProject</li>
<li>cppiK2KC66BiosExampleProject</li>
<li>cppiK2HC66BiosTestProject</li>
<li>cppiK2KC66BiosTestProject</li></ul>
<h3><span class="mw-headline" id="PA_LLD">PA LLD</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=70" title="Edit section: PA LLD">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM service handle can be registered with the PA LLD in the following manner:
&lt;syntaxhighlight lang='c'&gt;
void foo (void)
{
</p>
<pre>   paStartCfg_t  paStartCfg;
</pre>
<pre>   ...
</pre>
<pre>   /* Open RM service handle */
   rmServiceHandle = Rm_serviceOpenHandle(rmHandle, &amp;rmResult);
</pre>
<pre>   ...
</pre>
<pre>   /* Register RM with PA for each core */
   paStartCfg.rmServiceHandle = rmServiceHandle;
   Pa_startCfg(paInst, &amp;paStartCfg);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p><p>Please refer to the LLD for resources managed by RM if a RM instance's service handle is registered.
</p><p>PA test/example projects that register RM:
</p>
<ul><li>PA_simpleExample_K2HC66BiosExampleProject</li>
<li>PA_simpleExample_K2KC66BiosExampleProject</li></ul>
<h2><span class="mw-headline" id="Running_RM_Test_Projects">Running RM Test Projects</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=71" title="Edit section: Running RM Test Projects">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section describes how to run the RM test projects
</p>
<h3><span class="mw-headline" id="ARM_Linux_RM_Server_Daemon">ARM Linux RM Server Daemon</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=72" title="Edit section: ARM Linux RM Server Daemon">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RM test code is delivered with a RM Server daemon application based on a socket transport interface.  The RM Server daemon can be used to run all RM test projects and user-space LLD examples and projects.  The RM Server daemon can even be used with end-user application infrastructures.  However, please keep in mind that the RM Server daemon is meant more of a <i>guide</i> for implementing a Linux-based RM server than an <i>end-all, be-all</i> Linux RM Server.  The RM Server communicates with other RM Clients running in other processes via sockets.  The daemon's transport code will remember established socket connections to the RM Server.
</p><p>The RM Server daemon logs all incoming service requests and prints the resource status upon sending out each resource request response.  The RM server daemon logs can be found in /var/log/rmServer.log.
</p><p>The RM Server daemon does not have a run-time user interface but does provide configuration options when started.  The configuration options are displayed with the '-h' or '--help' commands. Here is an example from, the version you are using may be different:<br />
<a href="File_Rmserverhelp.html" class="image" title="rmserverhelp.jpg"><img alt="rmserverhelp.jpg" src="https://processors.wiki.ti.com/images/a/a5/Rmserverhelp.jpg" width="680" height="411" /></a>
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  Please take special care to provide the proper GRL and policy files to the RM Server at startup when attempting to run different tests.  For example, the RM test applications require the GRL, policy and linux DTB files in the rm/test/dts_files directory.  Whereas, all user-space LLD tests require the device GRL and policy files within the rm/device/k2*/ directories.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  There's currently a bug in the RM Server daemon -kill logic that sometimes causes the kill to timeout.  When this happens the RM Server can be killed with following command, &lt;RM server PID&gt; is retrieved from "ps -aux":
&lt;syntaxhighlight lang='bash'&gt;
root@keystone-evm:~# kill -9 &lt;RM server PID&gt;
&lt;/syntaxhighlight&gt;
</p>
<h3><span class="mw-headline" id="ARM_Linux_Multi-Process_Test_Project">ARM Linux Multi-Process Test Project</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=73" title="Edit section: ARM Linux Multi-Process Test Project">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The ARM Linux Multi-Process Test has a RM Server and RM Client running in separate user-space processes.  The Client and Server exchange resource requests and responses over a socket.
</p><p>Test application components:
Linux User-Space RM Server - rmServer.out (located in /usr/bin)
Linux User-Space RM Client - rmLinuxClientTest.out (located in /usr/bin)
</p><p><u>Running the RM Server</u>
</p>
<ol><li>Copy the global-resources.dtb, server-policy.dtb, and linux-evm.dtb from rm/test/dts_files/ to the directory containing rmServer.out</li>
<li>Run the RM Server: $ ./rmServer.out global-resources.dtb server-policy.dtb -l linux-evm.dtb</li></ol>
<p>The Server will wait for Client socket connections and service any requests received via those sockets.
</p><p><u>Running the RM Client Linux User-Space Test</u>
</p>
<ol><li>Copy the static-policy.dtb from rm/test/dts_files/ to the directory containing rmLinuxClientTest.out</li>
<li>Run the RM Client: $ ./rmLinuxClientTest.out static-policy.dtb</li></ol>
<p>The Client test will establish a socket connection with the Server, request resources and then free all resources requested.
</p>
<h3><span id="DSP_+_ARM_Linux_Test_Project"></span><span class="mw-headline" id="DSP_.2B_ARM_Linux_Test_Project">DSP + ARM Linux Test Project</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=74" title="Edit section: DSP + ARM Linux Test Project">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The DSP+ARM Linux Test has a RM Client running on a DSP who sends resource requests to the RM Server running within a Linux user-space process.  The RM Client sends messages to another Linux user-space process over IPC 3.x MessageQ.  The process extracts the RM messages received on MessageQ interface and sends them through a socket to the RM Server instance.  From RM Server to Client the same process extracts RM messages received over the socket from the Server and sends them to the Client over the IPC MessageQ interface.
</p><p>The DSP application must be downloaded to the DSP core using MPM.  Otherwise, IPC MessageQ will fail to work.
</p><p>Test application components:
Linux User-Space RM Server - rmServer.out (located in /usr/bin)
Linux User-Space IPC to MessageQ Exchange process - rmDspClientTest.out (located in /usr/bin)
C66 DSP RM Client - rmK2xArmv7LinuxDspClientTestProject.out
</p><p><u>Build the DSP RM Client</u>
</p>
<ol><li>Import the rmK2xArmv7LinuxDspClientTestProject into CCS and build the project</li>
<li>Copy the projects .out file from the project /Debug directory to the EVM filesystem</li></ol>
<p><u>Running the RM Server</u>
</p>
<ol><li>Copy the global-resources.dtb, server-policy.dtb, and linux-evm.dtb from rm/test/dts_files/ to the directory containing rmServer.out</li>
<li>Run the RM Server: $ ./rmServer.out global-resources.dtb server-policy.dtb -l linux-evm.dtb</li></ol>
<p><u>Downloading the DSP Application</u>
</p><p>The DSP application must be downloaded to all DSP cores via MPM prior to running the exchange process.  Otherwise, IPC will fail to start
</p><p>Download the following shell scripts and place them on the EVM.  The shell scripts are used to download, reset, and dump traces from DSPs over MPM - <a rel="nofollow" class="external text" href="http://processors.wiki.ti.com/images/5/52/Mpm_scripts.zip">Mpm_scripts</a>
</p>
<ul><li>load_all.sh - Downloads a DSP image to all DSPs</li>
<li>stop_all.sh - Resets and halts all DSPs</li>
<li>dump_trace.sh - Dumps trace information, like printf output, from the DSPs</li></ul>
<ol><li>Make sure LAD is running: # ps aux|grep lad - the output should show an instance of /usr/bin/lad_tci6638 lad.txt running</li>
<li>Create a /debug directory for the MPM trace information: # mkdir /debug</li>
<li>Mount debugfs in /debug: # mount -t debugfs none /debug</li>
<li>Download the DSP Client: # ./load_all.sh rmK2xArmv7LinuxDspClientTestProject.out - the output should show 8 DSPs cores loaded and run successfully</li></ol>
<p>&lt;syntaxhighlight lang='bash'&gt;
root@keystone-evm:~# ./load_all.sh rmK2HArmv7LinuxDspClientTestProject.out
Loading and Running  rmK2HArmv7LinuxDspClientTestProject.out ...
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
load succeded
run succeded
&lt;/syntaxhighlight&gt;
</p><p><u>Running the MessageQ - Socket Exchange Application</u>
</p>
<ol><li>Run the exchange application: # ./rmDspClientTest.out - The output should show messages received from the DSP Client</li></ol>
<p>&lt;syntaxhighlight lang='bash'&gt;
root@keystone-evm:~/pdk_keystone2_1_00_00_10/bin/k2h/armv7/rm/test# ./rmDspClientTest.out
Using procId&#160;: 1
Entered rmServerExchange_execute
Local MessageQId: 0x1
Remote queueId  [0x10000]
Setting up socket connection with RM Server
Waiting for RM messages from DSP Client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
Received RM pkt of size 264 from DSP client
&lt;/syntaxhighlight&gt;
</p><p><u>Check the Test Result</u>
</p>
<ol><li>Dump the trace information from the DSPs: # ./dump_trace.sh - DSP Core 0 should have printed an Example Completion with no errors.  Cores 1 - 7 will not execute the full test</li></ol>
<p>&lt;syntaxhighlight lang='bash'&gt;
root@keystone-evm:~# ./dump_trace.sh
Core 0 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
</p><p><br />
Initialized RM_Client
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------------- Static Init Allocation -----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           0                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------------- Static Init Allocation -----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         2                                      -
Core 0&#160;: - End:           2                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------------- Static Init Allocation -----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         1                                      -
Core 0&#160;: - End:           1                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED - Denial: 79                                   -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------------- Static Init Allocation -----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------------- Static Init Allocation -----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: Creating RM startup task...
Core 0&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
Awaiting sync message from host...
[t=0x00000012:2c9060f4] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:2d3612fb] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
Core 0&#160;: Creating RM receive task...
Core 0&#160;: Creating RM client task...
Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: --------------- Create NameServer Object ----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         1002                                   -
Core 0&#160;: - End:           9161389                                -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------- Retrieve Resource Via NameServer Object ---------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         1002                                   -
Core 0&#160;: - End:           1002                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------- Init Allocate Using Retrieved Resource ---------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         1002                                   -
Core 0&#160;: - End:           1002                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---- Retrieve Resource Status Via NameServer Object -----
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         1002                                   -
Core 0&#160;: - End:           1002                                   -
Core 0&#160;: - Expected Owner Count: 1                               -
Core 0&#160;: - Returned Owner Count: 1                               -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: --- Free of Retrieved Resource Using NameServer Name ----
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: My_Favorite_Queue                      -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           0                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: --------------- Delete NameServer Object ----------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: My_Favorite_Queue                      -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           0                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: - Resource Node Expand/Contract Testing (Use Allocate) --
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-rx-ch                              -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           5                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: - Resource Node Expand/Contract Testing (Init Allocate) -
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-rx-ch                              -
Core 0&#160;: - Start:         50                                     -
Core 0&#160;: - End:           56                                     -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------- Use Allocation w/ UNSPECIFIED Base -----------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: accumulator-ch                         -
Core 0&#160;: - Start:         UNSPECIFIED                            -
Core 0&#160;: - Length:        5                                      -
Core 0&#160;: - Alignment:     4                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---------- Use Allocation w/ UNSPECIFIED Base -----------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: accumulator-ch                         -
Core 0&#160;: - Start:         UNSPECIFIED                            -
Core 0&#160;: - Length:        2                                      -
Core 0&#160;: - Alignment:     1                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---- Use Allocation w/ UNSPECIFIED Base &amp; Alignment -----
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: accumulator-ch                         -
Core 0&#160;: - Start:         UNSPECIFIED                            -
Core 0&#160;: - Length:        2                                      -
Core 0&#160;: - Alignment:     UNSPECIFIED                            -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -- Init Allocation of Shared Linux and Client Resource --
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: infra-queue                            -
Core 0&#160;: - Start:         800                                    -
Core 0&#160;: - End:           800                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: - Init Allocation (RM Blocked Until Resource Returned) --
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7000                                   -
Core 0&#160;: - End:           7000                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -- Use Allocation (RM Blocked Until Resource Returned) --
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7005                                   -
Core 0&#160;: - End:           7029                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -- Use Allocation (RM Blocked Until Resource Returned) --
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7010                                   -
Core 0&#160;: - End:           7014                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ----- Use Allocation of Owned Resource (RM Blocked) -----
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7011                                   -
Core 0&#160;: - End:           7011                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -- Status Check of Resources from Client (Non-Blocking) -
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7012                                   -
Core 0&#160;: - End:           7013                                   -
Core 0&#160;: - Expected Owner Count: 1                               -
Core 0&#160;: - Returned Owner Count: 1                               -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ---- Status Check of Resources from Client (Blocking) ---
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         4025                                   -
Core 0&#160;: - End:           4044                                   -
Core 0&#160;: - Expected Owner Count: 1                               -
Core 0&#160;: - Returned Owner Count: 1                               -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------- Static Allocation Validation --------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           0                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------- Static Allocation Validation --------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         2                                      -
Core 0&#160;: - End:           2                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------- Static Allocation Validation --------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------- Static Allocation Validation --------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: Creating RM cleanup task...
Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: accumulator-ch                         -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           6                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: accumulator-ch                         -
Core 0&#160;: - Start:         40                                     -
Core 0&#160;: - End:           41                                     -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           0                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: qos-cluster                            -
Core 0&#160;: - Start:         2                                      -
Core 0&#160;: - End:           2                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-queue                              -
Core 0&#160;: - Start:         525                                    -
Core 0&#160;: - End:           525                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: infra-queue                            -
Core 0&#160;: - Start:         800                                    -
Core 0&#160;: - End:           800                                    -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7000                                   -
Core 0&#160;: - End:           7000                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7011                                   -
Core 0&#160;: - End:           7011                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7010                                   -
Core 0&#160;: - End:           7014                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: gp-queue                               -
Core 0&#160;: - Start:         7005                                   -
Core 0&#160;: - End:           7029                                   -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-rx-ch                              -
Core 0&#160;: - Start:         0                                      -
Core 0&#160;: - End:           5                                      -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: -------------------- Resource Cleanup -------------------
Core 0&#160;: - Instance Name: RM_Client                              -
Core 0&#160;: - Resource Name: aif-rx-ch                              -
Core 0&#160;: - Start:         50                                     -
Core 0&#160;: - End:           56                                     -
Core 0&#160;: - Alignment:     0                                      -
Core 0&#160;: -                                                       -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------------ Memory Leak Check --------------------
Core 0&#160;: -                      &#160;: malloc count   |   free count -
Core 0&#160;: - Example Completion   &#160;:     101        |     101      -
Core 0&#160;: - PASSED                                                -
Core 0&#160;: ---------------------------------------------------------
</p><p>Core 0&#160;: ---------------------------------------------------------
Core 0&#160;: ------------------ Example Completion -------------------
Core 0&#160;: ---------------------------------------------------------
</p>
<hr />
<p>Core 1 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 1&#160;: RM DSP+ARM Linux test not executing on this core
Core 1&#160;: Creating RM startup task...
Core 1&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000012:2572e5da] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:2617dddd] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 2 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 2&#160;: RM DSP+ARM Linux test not executing on this core
Core 2&#160;: Creating RM startup task...
Core 2&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000012:13e85d6e] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:148d0415] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 3 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 3&#160;: RM DSP+ARM Linux test not executing on this core
Core 3&#160;: Creating RM startup task...
Core 3&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000012:0da8b05a] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:0e4c8b53] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 4 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 4&#160;: RM DSP+ARM Linux test not executing on this core
Core 4&#160;: Creating RM startup task...
Core 4&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000012:073f981e] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:07e2a25d] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 5 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 5&#160;: RM DSP+ARM Linux test not executing on this core
Core 5&#160;: Creating RM startup task...
Core 5&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000012:012ce260] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000012:01cfa139] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 6 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 6&#160;: RM DSP+ARM Linux test not executing on this core
Core 6&#160;: Creating RM startup task...
Core 6&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000011:f8bb09ae] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000011:f95d7d57] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
</p>
<hr />
<p>Core 7 Trace...
3 Resource entries at 0x800000
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li>
<li>RM DSP+ARM DSP Client Testing **************
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li class="mw-empty-elt"></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>RM Version&#160;: 0x02000004
Version String: RM Revision: 02.00.00.04:May 14 2013:16:19:59
Core 7&#160;: RM DSP+ARM Linux test not executing on this core
Core 7&#160;: Creating RM startup task...
Core 7&#160;: Starting BIOS...
registering rpmsg-proto service on 61 with HOST
[t=0x00000011:f1ed4c0c] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
[t=0x00000011:f28ed241] ti.ipc.rpmsg.RPMessage: RPMessage_send: no object for endpoint: 53
root@keystone-evm:~#
&lt;/syntaxhighlight&gt;
</p>
<h1><span class="mw-headline" id="User_Space_DMA">User Space DMA</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=75" title="Edit section: User Space DMA">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The user space DMA framework provides the zero copy access from user-space to packet dma channels. A new keystone specific udma kernel driver is added to the baseline which interfaces with the packet dma driver for this copy from user space to kernel (and vice versa). Apart from this, there is a user space library provided (libudma.a) which can be used by an application to create a udma channel, submit buffers to the channel, and receive callbacks for any buffers that the channel gets on the receive side. The user space udma can be accessed using <i>meta-arago/meta-arago-extras/recipes-bsp/ti-udma/ti-udma_1.0.bb</i>. To interface with the user dma library, the APIs are provided under the "include" directory of the package.
</p>
<h2><span class="mw-headline" id="UDMA_Files_in_the_filesystem">UDMA Files in the filesystem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=76" title="Edit section: UDMA Files in the filesystem">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The UDMA&#160;user space library is present in <i>/usr/bin/libudma.a</i>. This is the library that an application should include if they want to use the user space udma application. There is a small <i>udma_test</i> application which opens a single udma tx and a single udma rx channel and performs a loopback of 2M packets.
</p><p>This udma_test application can be found in <i>/usr/bin/udma_test</i>.
</p>
<h2><span class="mw-headline" id="Default_udma_channels_setup_in_the_kernel">Default udma channels setup in the kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=77" title="Edit section: Default udma channels setup in the kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>As part of the integration of the UDMA into the baseline - the device tree was modified to setup 12 tx channels (udmatx0 - udmatx11) and 12 rx channels (udmarx0 - udmarx11) by default. Each of the TX channel is configured with a hardware queue number to use. Please refer to the device tree in the Linux kernel tree (<i>./arch/arm/boot/dts/k2hk-evm.dts</i>)
</p>
<h1><span class="mw-headline" id="Contiguous_memory_allocator">Contiguous memory allocator</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=78" title="Edit section: Contiguous memory allocator">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Many applications need access to contiguous memory from user space. The MCSDK integrates a Contiguous memory allocator module which can be configured to use different pools of memory. The CMEM module supports allocating from the global CMA pool or from  pre-configured pools.
</p>
<h2><span class="mw-headline" id="Linux_configuration">Linux configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=79" title="Edit section: Linux configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Linux configuration is done when installing the cmemk.ko driver, typically done using the insmod command.
The cmemk.ko driver accepts command line parameters for configuring the physical memory to reserve and how to carve it up.
The cmemk.ko is located at /lib/modules/&lt;kernel_version&gt;/extra/cmemk.ko
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The kernel module cmemk.ko included in MCSDK filesystem is compiled for the specific version of the kernel. If the kernel version used is different from the MCSDK release kernel version, the cmemk kernel module needs to be recompiled with the linux-headers package for the specific kernel version.
</p><p>The following is an example of installing the cmem kernel module:
</p>
<pre>/sbin/insmod /lib/modules/3.8.4-g42865b7/extra/cmemk.ko pools=4x30000,2x500000 phys_start=0x0 phys_end=0x3000000
</pre>
<ul><li>phys_start and phys_end must be specified in hexadecimal format</li>
<li>pools must be specified using decimal format (for both number and size), since using hexadecimal format would visually clutter the specification due to the use of "x" as a token separator</li></ul>
<p>This particular command creates 32 pools. The first pool is created with 4 buffers of size 30000 bytes and the second pool is created with 2 buffers of size 500000 bytes. The CMEM pool buffers start at 0x0 and end at 0x3000000 (max).
</p><p>Pool buffers are aligned on a module-dependent boundary, and their sizes are rounded up to this same boundary. This applies to each buffer within a pool. The total space used by an individual pool will therefore be greater than (or equal to) the exact amount requested in the installation of the module.
</p><p>The poolid used in the driver calls would be 0 for the first pool and 1 for the second pool.
</p><p>Pool allocations can be requested explicitly by pool number, or more generally by just a size. For size-based allocations, the pool which best fits the requested size is automatically chosen.
</p>
<h2><span class="mw-headline" id="User_space_Access">User space Access</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=80" title="Edit section: User space Access">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The user space application can be compiled with the linux development kit to access the user space APIs.
</p><p>The API details can be found at ./sysroots/armv7ahf-vfp-neon-oe-linux-gnueabi/usr/include/ti/cmem.h in the linux development kit.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b>  The user space application need to be compiled with “–D_FILE_OFFSET_BITS=64" to allow physical addresses &gt; 32 bits.
</p><p>The CMEM example code can be obtained from git repository: <a rel="nofollow" class="external free" href="git://git.ti.com/ipc/ludev.git">git://git.ti.com/ipc/ludev.git</a>
</p><p>See src/cmem/tests for api usage test.
</p>
<h1><span id="How_To's"></span><span class="mw-headline" id="How_To.27s">How To's</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;section=81" title="Edit section: How To&#039;s">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20201201011425
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.299 seconds
Real time usage: 0.315 seconds
Preprocessor visited node count: 386/1000000
Preprocessor generated node count: 524/1000000
Post‐expand include size: 680/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 124/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.325      1 -total
 36.34%    1.935     12 Template:Note
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:19657-0!canonical and timestamp 20201201011425 and revision id 204015
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing System Mgmt</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;oldid=204015">https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;oldid=204015</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=MCSDK+UG+Chapter+Developing+System+Mgmt" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="MCSDK_UG_Chapter_Developing_System_Mgmt.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="MCSDK_UG_Chapter_Developing_System_Mgmt.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/MCSDK_UG_Chapter_Developing_System_Mgmt.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/MCSDK_UG_Chapter_Developing_System_Mgmt.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;oldid=204015" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_System_Mgmt&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 27 July 2015, at 07:43.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.299","walltime":"0.315","ppvisitednodes":{"value":386,"limit":1000000},"ppgeneratednodes":{"value":524,"limit":1000000},"postexpandincludesize":{"value":680,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":3,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":124,"limit":5000000},"timingprofile":["100.00%    5.325      1 -total"," 36.34%    1.935     12 Template:Note"]},"cachereport":{"timestamp":"20201201011425","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":230});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/MCSDK_UG_Chapter_Developing_System_Mgmt by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 12:38:38 GMT -->
</html>
