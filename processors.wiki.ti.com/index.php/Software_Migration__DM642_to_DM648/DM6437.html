<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Software_Migration:_DM642_to_DM648/DM6437 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:10:38 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Software Migration: DM642 to DM648/DM6437 - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Software_Migration:_DM642_to_DM648/DM6437","wgTitle":"Software Migration: DM642 to DM648/DM6437","wgCurRevisionId":181210,"wgRevisionId":181210,"wgArticleId":178,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["PSP","DMA","DSP","DSPBIOS","DM648","DM6437"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Software_Migration:_DM642_to_DM648/DM6437","wgRelevantArticleId":178,"wgRequestId":"31ed7fb4decf97a823a7106f","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Software_Migration_DM642_to_DM648_DM6437 rootpage-Software_Migration_DM642_to_DM648 skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Software Migration: DM642 to DM648/DM6437</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p>This topic discusses software application migration from DM642 to DM648 or DM6437.  Hardware differences, such as changes between C64 and C64+, are not discussed.  Instead, we explore the changes in software development tools: libraries, drivers, and frameworks.  The reader should be able to translate old programs to a newer device, identifying disconnects and critical differences between old and new tools and migrating functionality as seamlessly as possible.
</p><p>While the DM648 is the proper successor to the DM642, the DM6437 is also considered a viable migration target.  Both the DM648 and DM6437 are single-core, DSP-only devices, which differ primarily in hardware considerations: clock speed, peripheral devices, etc.  Their development tools (DVSDKs) are very similar, and they are thus very similar targets for software migration.
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Peripheral_Access"><span class="tocnumber">1</span> <span class="toctext">Peripheral Access</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Low-Level_Access_on_DM642"><span class="tocnumber">1.1</span> <span class="toctext">Low-Level Access on DM642</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#High-Level_Access_on_DM642"><span class="tocnumber">1.2</span> <span class="toctext">High-Level Access on DM642</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Low-Level_Access_on_DM648_or_DM6437"><span class="tocnumber">1.3</span> <span class="toctext">Low-Level Access on DM648 or DM6437</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#High-Level_Access_on_DM648_or_DM6437"><span class="tocnumber">1.4</span> <span class="toctext">High-Level Access on DM648 or DM6437</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Migrating_High-Level_DM642_Applications"><span class="tocnumber">1.5</span> <span class="toctext">Migrating High-Level DM642 Applications</span></a>
<ul>
<li class="toclevel-3 tocsection-7"><a href="#Summary"><span class="tocnumber">1.5.1</span> <span class="toctext">Summary</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Migrating_Low-Level_DM642_Appplications"><span class="tocnumber">1.6</span> <span class="toctext">Migrating Low-Level DM642 Appplications</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Rewrite_Using_RCSL"><span class="tocnumber">1.6.1</span> <span class="toctext">Rewrite Using RCSL</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Rewrite_Using_PSP"><span class="tocnumber">1.6.2</span> <span class="toctext">Rewrite Using PSP</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#EDMA"><span class="tocnumber">2</span> <span class="toctext">EDMA</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Summary_2"><span class="tocnumber">2.1</span> <span class="toctext">Summary</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#See_Also"><span class="tocnumber">3</span> <span class="toctext">See Also</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Peripheral_Access">Peripheral Access</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=1" title="Edit section: Peripheral Access">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section covers changes regarding the initialization and use of peripheral devices.  For both old and new devices, we describe low- and high-level methods for accessing peripherals.  Then, suggestions are given for migrating existing DM642 applications.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="../File_Dm642dm648_swMigration_layerFigure.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/e/e6/Dm642dm648_swMigration_layerFigure.JPG" width="300" height="277" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../File_Dm642dm648_swMigration_layerFigure.html" class="internal" title="Enlarge"></a></div>Software layers in DM642 development compared to DM648 or DM6437 development.</div></div></div>
<h4><span class="mw-headline" id="Low-Level_Access_on_DM642">Low-Level Access on DM642</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=2" title="Edit section: Low-Level Access on DM642">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For DM642 applications, low-level peripheral access refers to using a peripheral device through functional CSL (FCSL).  The FCSL packages provide APIs to initialize and control peripheral devices with relatively little abstraction.  Rather than making one function call to complete an IO transaction, it may be necessary to make separate calls to initiate, manage, and terminate a single transfer.  The use of FCSL does not require DSP/BIOS.  For more information and example code using FCSL with the DM642, refer to <a href="../Using_Functional_CSL_with_DM642.html" title="Using Functional CSL with DM642">Using Functional CSL with DM642</a>.
</p><p>FCSL is built on top of register-layer CSL (RCSL), but RCSL is rarely used directly in DM642 applications.  Throughout this topic, a low-level DM642 application refers exclusively to an application using FCSL.
</p>
<h4><span class="mw-headline" id="High-Level_Access_on_DM642">High-Level Access on DM642</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=3" title="Edit section: High-Level Access on DM642">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>High-level access on the DM642 refers to the use of minidrivers which run within DSP/BIOS under the IOM specification.  The DM642 DVSDK does not include a full complement of drivers, but a few sample drivers are provided to help users understand the requirements and structure of IOM.  The Driver Development Kit (DDK), available for DM642 but not included with the standard DVSDK installation, provides further help for developing IOM drivers.
</p><p>Drivers for the DM642 typically use the DSP/BIOS-standard GIO or SIO APIs to perform IO transactions at a high level.  For instance, one call to GIO_submit may initiate and control an entire transfer, then call a user-specified callback function when complete.  This sort of program will migrate readily to the newer devices, which provide similar functionality through a Platform Support Package (PSP).  Refer to <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a> for example source code using the GIO API.
</p>
<h4><span class="mw-headline" id="Low-Level_Access_on_DM648_or_DM6437">Low-Level Access on DM648 or DM6437</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=4" title="Edit section: Low-Level Access on DM648 or DM6437">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The DM648 and DM6437 DVSDKs do not offer FCSL packages.  The only option available to users who wish to develop low-level applications for these devices is the underlying register-layer CSL.  RCSL is included with the DVSDK as part of the PSP, and it consists of a set of header files that allow direct access to peripheral registers.  Effectively using RCSL requires extensive knowledge of the peripheral device, and source code using RCSL tends to be complicated and difficult for others (or even the programmer!) to understand.  Applications built using RCSL are effectively even lower-level than DM642 applications using FCSL.
</p><p>The following code may be used to initialize an I2C device and process one byte in master receive mode.  Please note that this is not a complete program; it is only meant to demonstrate the form of RCSL code.
</p><p>&lt;syntaxhighlight lang="c"&gt;#include &lt;cslr_i2c.h&gt;
</p>
<ol><li>include &lt;soc.h&gt;</li></ol>
<p>CSL_I2cRegsOvly i2c0Regs = (CSL_I2cRegsOvly)CSL_I2C_0_REGS;
int buffer;
</p><p>void main()
{
	// Reset I2C device
	CSL_FINST(i2c0Regs-&gt;ICMDR, I2C_ICMDR_IRS, RESET);
	// Configure I2C
	i2c0Regs-&gt;ICMDR	= CSL_FMKT(I2C_ICMDR_MST, MASTER)
		| CSL_FMKT(I2C_ICMDR_TRX, RX_MODE)	| CSL_FMKT(I2C_ICMDR_RM, DISABLE)
		| CSL_FMKT(I2C_ICMDR_DLB, DISABLE)	| CSL_FMKT(I2C_ICMDR_FDF, DISABLE)
		| CSL_FMKT(I2C_ICMDR_XA, 7BIT)		| CSL_FMKT(I2C_ICMDR_BC, 8BIT);
	// Set slave addr
	CSL_FINS(i2c0Regs-&gt;ICSAR, I2C_ICSAR_SADDR, 0x50);
	// Configure I2C clock for 200 kHz (from 27MHz input clk)
	CSL_FINS(i2c0Regs-&gt;ICPSC, I2C_ICPSC_IPSC, 0x02);
	CSL_FINS(i2c0Regs-&gt;ICCLKL, I2C_ICCLKL_ICCL, 0x12);
	CSL_FINS(i2c0Regs-&gt;ICCLKH, I2C_ICCLKH_ICCH, 0x12);
	// Clear ICSTR (read and write back)
	i2c0Regs-&gt;ICSTR = i2c0Regs-&gt;ICSTR;
	while (i2c0Regs-&gt;ICIVR&#160;!= 0)
		asm(" nop");
	// Take I2C out of reset
	CSL_FINST(i2c0Regs-&gt;ICMDR, I2C_ICMDR_IRS, ENABLE);
	// Wait for bus busy to clear
	while (CSL_FEXT(i2c0Regs-&gt;ICSTR, I2C_ICSTR_BB) == CSL_I2C_ICSTR_BB_BUSY)
		asm(" nop");
	// Generate START
	CSL_FINST(i2c0Regs-&gt;ICMDR, I2C_ICMDR_STT, SET);
	// Wait for data received
	while (CSL_FEXT(i2c0Regs-&gt;ICSTR, I2C_ICSTR_ICRRDY) == CSL_I2C_ICSTR_ICRRDY_FALSE)
		asm(" nop");
	buffer = (int)(i2c0Regs-&gt;ICDRR);
	// Generate STOP
	CSL_FINST(i2c0Regs-&gt;ICMDR, I2C_ICMDR_STP, SET);
}&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="High-Level_Access_on_DM648_or_DM6437">High-Level Access on DM648 or DM6437</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=5" title="Edit section: High-Level Access on DM648 or DM6437">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Unlike the DM642, the DM648 and DM6437 DVSDKs each include a full complement of IOM-compliant drivers.  These drivers comprise a Platform Support Package, or PSP, which services each and every peripheral device.  PSP drivers, like other IOM drivers, allow high-level peripheral access via the GIO or SIO APIs.  For more information and example code using PSP drivers, refer to <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a>.  High-level peripheral access on the DM648 or DM6437 refers to the use of PSP drivers.
</p><p>The PSP includes full source code for each driver, allowing users to modify and rebuild drivers if necessary.  The PSP source code is modular, and code is separated into different "layers" according to function.  For more information on the organization of a PSP driver, refer to <a href="../PSP_Overview.html" title="PSP Overview">PSP Overview</a>.
</p>
<h3><span class="mw-headline" id="Migrating_High-Level_DM642_Applications">Migrating High-Level DM642 Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=6" title="Edit section: Migrating High-Level DM642 Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Migrating high-level DM642 applications to the new DVSDK is straightforward.  If the existing code uses IOM-compliant drivers, it should be built using the GIO or SIO APIs.  Converting this code to use a PSP-delivered IOM driver is straightforward: determine what changes, if any, are required among the parameters passes in your existing GIO or SIO calls.  Also, refer to the PSP driver's User Guide and sample application (both included with the DVSDK) to determine how the driver is initialized and controlled at run time.  Typically, the device is initialized with a parameter struct that must be provided in your application source code.
</p><p>There are a few caveats to consider, however. First, DM648 and DM6437 applications using DSP/BIOS 5.x are configured using textual configuration files (TCFs). Older DM642 applications using DPS/BIOS 4.90 may be configured using a configurable database (CDB) file, which is vastly different from TCF.  Code Composer Studio 3.3 can automatically migrate older DM642 projects to DSP/BIOS 5.x, which can spare you the effort of creating a TCF file from scratch. A comprehensive description of TCF falls outside the scope of this topic, but a description of TCF contents necessary to initialize a peripheral device for use by a PSP driver can be found in <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a>.
</p><p>Another potential problem is a mismatch in functionality between a DM642 driver and the new device's PSP driver.  For instance, the older driver may use the SIO API, while its replacement uses only GIO.  A more severe situation may be that the PSP driver does not support a certain mode of operation that was serviced by the older driver.  These problems must be addressed on a case-by-case basis, and at worst may require that the user modify the PSP driver to suit his or her needs.
</p><p>Finally, it is possible that the DM642 application uses a non-IOM-compliant driver.  It may even use a non-standard API.  In this case, the existing code will need to be translated to the GIO or SIO API.  For a brief description of how to use these APIs, refer to <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a>.
</p>
<h4><span class="mw-headline" id="Summary">Summary</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=7" title="Edit section: Summary">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ol><li>Setup TCF/TCI to initialize peripheral device for PSP driver.</li>
<li>Verify that existing DM642 application uses GIO or SIO API.
<ul><li>Individual PSP drivers may support GIO, SIO, or both.  Check that the desired API is supported by the driver.</li>
<li>If existing application does not use GIO or SIO, translate existing driver calls to one of these APIs.</li></ul></li>
<li>Verify that mode of operation (i.e. operating parameters) is supported by PSP driver.
<ul><li>If mode of operation is not supported, decide whether to modify operation or modify PSP driver to add support.</li></ul></li>
<li>Modify existing GIO, SIO calls to use parameters expected by PSP driver.  Refer to PSP driver's User Guide and sample application.</li></ol>
<ul><li>See also: <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a></li></ul>
<h3><span class="mw-headline" id="Migrating_Low-Level_DM642_Appplications">Migrating Low-Level DM642 Appplications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=8" title="Edit section: Migrating Low-Level DM642 Appplications">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Due to the absence of FCSL in newer DVSDKs, there is no clean migration path for low-level DM642 applications.  Because of this, the existing application must be rewritten in one of two ways:
</p>
<h4><span class="mw-headline" id="Rewrite_Using_RCSL">Rewrite Using RCSL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=9" title="Edit section: Rewrite Using RCSL">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The application is rewritten at a lower level.  The resulting source code will likely be denser and less readable, but fine control over the peripheral is maintained, or even enhanced.  RCSL allows the peripheral to be exercised in any way supported by its documentation, but its use requires that the user be an expert in the use of that peripheral.
</p>
<h4><span class="mw-headline" id="Rewrite_Using_PSP">Rewrite Using PSP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=10" title="Edit section: Rewrite Using PSP">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Direct control of the peripheral is surrendered to the PSP driver.  This allows the program to operate at a higher level, but may not be acceptable if the application is not supported by the PSP driver.  For many applications, this will not be a problem.  The PSP driver for each peripheral is intended to service all modes of operation possible on the EVM hardware.  If the PSP driver does not support an application, it may be modified.  For more information on the structure of a PSP driver and tips on where to look for certain functionality, refer to <a href="../PSP_Overview.html" title="PSP Overview">PSP Overview</a>.  For general information on how to initialize and use a PSP driver, refer to <a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a>.
</p>
<h2><span class="mw-headline" id="EDMA">EDMA</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=11" title="Edit section: EDMA">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The DM648 and DM6437 each include an integrated EDMA3 controller.  The DM642, meanwhile, uses EDMA2.  A detailed comparison of the features in these two EDMA revisions is available in the application note <a href="http://www.ti.com/lit/pdf/spraap4" class="extiw" title="tidoc:spraap4">EDMA v2.0 to EDMA v3.0 (EDMA3) Migration Guide</a>.  Users should familiarize themselves with the new and different features of EDMA3 before attempting to migrate existing software that uses EDMA.
</p>
<div class="thumb tright"><div class="thumbinner" style="width:302px;"><a href="../File_Edma3_lld_dependencies.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/a/ab/Edma3_lld_dependencies.JPG" width="300" height="300" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="../File_Edma3_lld_dependencies.html" class="internal" title="Enlarge"></a></div>Dependencies in an application using the EDMA3 LLD.</div></div></div>
<p>The DM648 and DM6437 offer EDMA control through the EDMA3 LLD (low-level driver), which is included with the DVSDK installation.  The EDMA3 LLD may be packaged either as part of the PSP or as a discrete package.  The EDMA3 LLD consists of three libraries: the EDMA3 driver library (EDMA3 DRV) provides a FCSL-like API to control EDMA transactions; EDMA3 resource manager library (EDMA3 RM) tracks device resources and services EDMA3 DRV; and a final library provides a convenient initialization routine and abstracts the other two libraries from the DSP/BIOS operating system.  The final library can be replaced by the user, but a standard implementation is included with the EDMA3 LLD installation.  This "sample" library is suitable for all DSP/BIOS applications.  Users who wish to use the driver apart from DSP/BIOS will need to replace the sample library.
</p><p>The first step in updating an EDMA-using DM642 application is to rewrite its FCSL-based EDMA2 control using the newer, EDMA3 DRV API.  Since this API operates on a level of abstraction similar to FCSL, the process should be straightforward.  Refer to the EDMA3 LLD User Guides (included with the EDMA3 LLD installation in PDF format) for more information regarding initialization and use of the EDMA3 LLD.  Separate User Guides exist for the EDMA3 DRV and EDMA3 RM libraries.  Also, refer to the application note <a href="http://www.ti.com/lit/pdf/spraan4" class="extiw" title="tidoc:spraan4">How to Use the EDMA3 Driver on a TMS320C643x Device</a>.  (Bear in mind that newer releases of the EDMA3 LLD are packaged using RTSC, which is not discussed in the above application note.)
</p><p>The second step is to revise existing EDMA calls to accomodate changes between EDMA versions and to take advantage of new features in EDMA3.  Again, refer to the application note <a href="http://www.ti.com/lit/pdf/spraap4" class="extiw" title="tidoc:spraap4">EDMA v2.0 to EDMA v3.0 (EDMA3) Migration Guide</a> for more information.
</p>
<h4><span class="mw-headline" id="Summary_2">Summary</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=12" title="Edit section: Summary">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ol><li>Replace FCSL-based EDMA control with the EDMA3 LLD.</li>
<li>Update code to reflect changes from EDMA2 to EDMA3.</li></ol>
<h2><span class="mw-headline" id="See_Also">See Also</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;section=13" title="Edit section: See Also">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a href="../PSP_Overview.html" title="PSP Overview">PSP Overview</a></li>
<li><a href="../Using_a_PSP_Driver_in_DSP/BIOS.html" title="Using a PSP Driver in DSP/BIOS">Using a PSP Driver in DSP/BIOS</a></li>
<li><a href="../Using_Functional_CSL_with_DM642.html" title="Using Functional CSL with DM642">Using Functional CSL with DM642</a></li>
<li><a href="http://www.ti.com/lit/pdf/spraan4" class="extiw" title="tidoc:spraan4">How to Use the EDMA3 Driver on a TMS320C643x Device (app note)</a></li>
<li><a href="http://www.ti.com/lit/pdf/spraap4" class="extiw" title="tidoc:spraap4">EDMA v2.0 to EDMA v3.0 (EDMA3) Migration Guide (app note)</a></li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/prod/folders/print/tms320dm642.html">DM642 (TI Website)</a></li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/prod/folders/print/tms320dm648.html">DM648 (TI Website)</a></li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/prod/folders/print/tms320dm6437.html">DM6437 (TI Website)</a></li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/training/catalog/events/event.jhtml?sku=WEB108006">EDMA3 LLD (low-level driver) WebEx Presentations</a></li></ul>

<!-- 
NewPP limit report
Cached time: 20201201020249
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.055 seconds
Real time usage: 0.057 seconds
Preprocessor visited node count: 51/1000000
Preprocessor generated node count: 56/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:178-0!canonical and timestamp 20201201020249 and revision id 181210
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="../File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Software Migration: DM642 to DM648/DM6437</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Software Migration: DM642 to DM648/DM6437</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Software Migration: DM642 to DM648/DM6437</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="../File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;oldid=181210">https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;oldid=181210</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="../Category_PSP.html" title="Category:PSP">PSP</a></li><li><a href="../Category_DMA.html" title="Category:DMA">DMA</a></li><li><a href="../Category_DSP.html" title="Category:DSP">DSP</a></li><li><a href="../Category_DSPBIOS.html" title="Category:DSPBIOS">DSPBIOS</a></li><li><a href="../Category_DM648.html" title="Category:DM648">DM648</a></li><li><a href="../Category_DM6437.html" title="Category:DM6437">DM6437</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Software+Migration%3A+DM642+to+DM648%2FDM6437" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="../Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="DM6437.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="DM6437.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="../Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="../Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="../Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/Software_Migration__DM642_to_DM648/DM6437.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/Software_Migration__DM642_to_DM648/DM6437.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;oldid=181210" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Software_Migration:_DM642_to_DM648/DM6437&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 9 July 2014, at 13:12.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="../Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.055","walltime":"0.057","ppvisitednodes":{"value":51,"limit":1000000},"ppgeneratednodes":{"value":56,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201201020249","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":230});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Software_Migration:_DM642_to_DM648/DM6437 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:10:42 GMT -->
</html>
