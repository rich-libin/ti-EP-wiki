<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:36:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands","wgTitle":"OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands","wgCurRevisionId":73617,"wgRevisionId":73617,"wgArticleId":11899,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands","wgRelevantArticleId":11899,"wgRequestId":"15f038db3c7dc039188ff007","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands rootpage-OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Purpose"><span class="tocnumber">1</span> <span class="toctext">Purpose</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Hardware_Setup"><span class="tocnumber">2</span> <span class="toctext">Hardware Setup</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Connect_to_AP_-_using_WPA_Supplicant_commands"><span class="tocnumber">3</span> <span class="toctext">Connect to AP - using WPA Supplicant commands</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Getting_an_IP_Address"><span class="tocnumber">4</span> <span class="toctext">Getting an IP Address</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Pinging_Host"><span class="tocnumber">5</span> <span class="toctext">Pinging Host</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Sniffer_logs"><span class="tocnumber">6</span> <span class="toctext">Sniffer logs</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Authentication_.26_Association_stage"><span class="tocnumber">6.1</span> <span class="toctext">Authentication &amp; Association stage</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#4-way-handshake"><span class="tocnumber">6.2</span> <span class="toctext">4-way-handshake</span></a></li>
</ul>
</li>
</ul>
</div>

<h3><span class="mw-headline" id="Purpose">Purpose</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=1" title="Edit section: Purpose">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This section will demonstrate how to configure WLAN station to connect WPA2 secured network with WPA Supplicant commands. In addition the connection path will be demonstrated using the sniffer log.<br />
</p>
<h3><span class="mw-headline" id="Hardware_Setup">Hardware Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=2" title="Edit section: Hardware Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><br /><a href="File_WLAN_Station_1.html" class="image"><img alt="WLAN Station 1.jpg" src="https://processors.wiki.ti.com/images/a/a9/WLAN_Station_1.jpg" width="597" height="219" /></a><br /><br />
</p>
<h3><span class="mw-headline" id="Connect_to_AP_-_using_WPA_Supplicant_commands">Connect to AP - using WPA Supplicant commands</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=3" title="Edit section: Connect to AP - using WPA Supplicant commands">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Before starting the connection/scan procedure, we first need to run the WPA supplicant.<br />
Note that the following command should be executed only once per boot.<br />
</p>
<pre>wpa_supplicant -d -Dnl80211 -c/etc/wpa_supplicant.conf -iwlan0 -B
</pre>
<p>The output of this command is:
</p>
<pre>80211 -c/etc/wpa_supplicant.conf -iwlan0 -B                                                            
wpa_supplicant v0.8.x                                                                                  
Initializing interface 'wlan0' conf '/etc/wpa_supplicant.conf' driver 'nl80211' ctrl_interface 'N/A' b'
Configuration file '/etc/wpa_supplicant.conf' -&gt; '/etc/wpa_supplicant.conf'                            
Reading configuration file '/etc/wpa_supplicant.conf'                                                  
ctrl_interface='/var/run/wpa_supplicant'                                                               
eapol_version=1                                                                                        
ap_scan=1                                                                                              
fast_reauth=1                                                                                          
Priority group 20                                                                                      
   id=18 ssid='example'                                                                                
Priority group 10                                                                                      
   id=4 ssid='example'                                                                                 
Priority group 5                                                                                       
   id=0 ssid='simple'                                                                                  
   id=13 ssid='static-wep-test'                                                                        
   id=14 ssid='static-wep-test2'                                                                       
Priority group 2                                                                                       
   id=1 ssid='second ssid'                                                                             
   id=2 ssid='example'                                                                                 
   id=5 ssid='example'                                                                                 
   id=7 ssid='example'                                                                                 
Priority group 1                                                                                       
   id=3 ssid='example'                                                                                 
Priority group 0                                                                                       
   id=6 ssid='example'                                                                                 
   id=8 ssid='example'                                                                                 
   id=9 ssid=''                                                                                        
   id=10 ssid='1x-test'                                                                                
   id=11 ssid='leap-example'                                                                           
   id=12 ssid='plaintext-test'                                                                         
   id=15 ssid='test adhoc'                                                                             
   id=16 ssid='example'                                                                                
   id=17 ssid='example'                                                                                
   id=19 ssid=''                                                                                       
nl80211: interface wlan0 in phy phy0                                                                   
rfkill: initial event: idx=0 type=1 op=0 soft=0 hard=0                                                 
rfkill: initial event: idx=1 type=2 op=0 soft=0 hard=0                                                 
nl80211: Using driver-based off-channel TX                                                             
netlink: Operstate: linkmode=1, operstate=5                                                            
nl80211: driver param='(null)'                                                                         
wlan0: Own MAC address: de:ad:be:ef:00:00                                                              
wpa_driver_nl80211_set_key: ifindex=3 alg=0 addr=(nil) key_idx=0 set_tx=0 seq_len=0 key_len=0          
wpa_driver_nl80211_set_key: ifindex=3 alg=0 addr=(nil) key_idx=1 set_tx=0 seq_len=0 key_len=0          
wpa_driver_nl80211_set_key: ifindex=3 alg=0 addr=(nil) key_idx=2 set_tx=0 seq_len=0 key_len=0          
wpa_driver_nl80211_set_key: ifindex=3 alg=0 addr=(nil) key_idx=3 set_tx=0 seq_len=0 key_len=0          
wlan0: RSN: flushing PMKID list in the driver                                                          
wlan0: Setting scan request: 0 sec 100000 usec                                                         
WPS: UUID based on MAC address - hexdump(len=16): eb 6c 86 6b 88 24 5e e2 96 02 d9 bf 67 3b d5 5c      
EAPOL: SUPP_PAE entering state DISCONNECTED                                                            
EAPOL: Supplicant port status: Unauthorized                                                            
EAPOL: KEY_RX entering state NO_KEY_RECEIVE                                                            
EAPOL: SUPP_BE entering state INITIALIZE                                                               
EAP: EAP entering state DISABLED                                                                       
EAPOL: Supplicant port status: Unauthorized                                                            
EAPOL: Supplicant port status: Unauthorized                                                            
Using existing control interface directory.                                                            
wlan0: Added interface wlan0                                                                           
Daemonize..
</pre>
<p>To scan for available networks, we would invoke:
</p>
<pre>wpa_cli scan</pre>
<p>The following printout will be displayed on the screen:
</p>
<pre>Selected interface 'wlan0'
OK
</pre>
<p>To see the available networks, run the following command:
</p>
<pre>wpa_cli scan_results</pre>
<p>The result would be something like:
</p>
<pre>00:1a:e3:03:51:a2       2437    -70     [WPA2-EAP-CCMP][ESS]    mobilenet84
00:16:b6:3f:a0:25       2437    -45     [ESS]   linksysShlomi
00:16:47:93:66:21       2412    -45     [WPA-EAP-TKIP][WPA2-EAP-CCMP][ESS]
00:16:47:93:66:20       2412    -45     [WPA2-EAP-CCMP][ESS]    externalhotspot84
00:16:46:c6:2b:90       2437    -67     [WPA2-EAP-CCMP][ESS]    externalhotspot84
00:1a:e3:03:51:a0       2437    -70     [WPA2-EAP-CCMP][ESS]    externalhotspot84
00:16:47:93:66:22       2412    -53     [WPA2-EAP-CCMP][ESS]    mobilenet84
00:16:46:c6:2b:92       2437    -67     [WPA2-EAP-CCMP][ESS]    mobilenet84
00:16:46:c6:2b:94       2437    -67     [WPA2-PSK-CCMP][ESS]
00:1a:e3:03:51:a3       2437    -72     [ESS]
00:1e:58:24:aa:fd       2462    -70     [ESS]   Ira_Dlink
88:43:e1:57:5b:b0       2412    -78     [ESS]   SimpleLink-RanK
64:00:f1:87:d9:80       2417    -74     [ESS]   Hermon
00:25:9c:1b:30:33       2412    -82     [ESS]   YossiW_Linksys
c8:4c:75:d1:f7:60       2462    -82     [ESS]   Matterhorn
60:eb:69:8c:49:6c       2462    -85     [ESS]   ap_test_Rafi_PB
00:1a:e3:03:51:a1       2437    -71     [WPA-EAP-TKIP][WPA2-EAP-CCMP][ESS]
00:16:47:93:66:23       2412    -53     [ESS]
00:16:46:c6:2b:93       2437    -67     [ESS]
00:18:e7:f5:d3:d1       2412    -76     [WPS][ESS]      WLAN-APPS
</pre>
<p>To connect to a network, we need to invoke the following commands:
</p>
<ul><li>Replace “ssid” value with the SSID of a real wireless network you want to connect to.</li>
<li>Replace pre-shared key argument ("psk") with more appropriate one.</li></ul>
<pre>wpa_cli -iwlan0 disconnect
for i in `wpa_cli -iwlan0 list_networks | grep ^[0-9] | cut -f1`; do wpa_cli -iwlan0 remove_network $i; done
wpa_cli -iwlan0 add_network
wpa_cli -iwlan0 set_network 0 auth_alg OPEN
wpa_cli -iwlan0 set_network 0 key_mgmt WPA-PSK
wpa_cli -iwlan0 set_network 0 psk '"12345678"'
wpa_cli -iwlan0 set_network 0 proto RSN
wpa_cli -iwlan0 set_network 0 mode 0
wpa_cli -iwlan0 set_network 0 ssid '"Matterhorn"'
wpa_cli -iwlan0 select_network 0
wpa_cli -iwlan0 enable_network 0
wpa_cli -iwlan0 reassociate
wpa_cli -iwlan0 status
</pre>
<p>In order to verify that the connection was established, run the following:
</p>
<pre>iw wlan0 link</pre>
<p>We should see a result like:
</p>
<pre>Connected to 00:16:b6:da:29:3c (on wlan0)
SSID: linksys
freq: 2462
RX: 168 bytes (4 packets)
TX: 0 bytes (0 packets)
signal: -55 dBm
tx bitrate: 1.0 MBit/s
</pre>
<p><br />
</p>
<h3><span class="mw-headline" id="Getting_an_IP_Address">Getting an IP Address</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=4" title="Edit section: Getting an IP Address">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Bow that we are connected to an AP, there are 2 options to get an IP address:
</p>
<ol><li>Using DHCP procedure, in case the AP supports DHCP</li>
<li>getting static IP in case the AP does not support DHCP</li></ol>
<p><br /> 
If the AP has a DHCP server, we can obtain an IP address from it using the <i>udhcpc</i> command:
</p>
<pre>udhcpc -i wlan0</pre>
<p>The result of the above command would be:
</p>
<pre>udhcpc (v1.13.2) started
Sending discover...
Sending select for 192.168.1.109...
Lease of 192.168.1.109 obtained, lease time 86400
adding dns 10.0.0.138
</pre>
<p>We can see that the obtained IP address above is 192.168.1.109. 
In order to verify the obtained IP address, use the command <i>ifconfig wlan0</i> and look at the <i>inet addr</i> filed.<br />
<br />
In case the AP doesn't have a DHCP server, use the <i>ifconfig</i> command to assign a static IP address, as follows:
</p>
<pre>ifconfig wlan0 &lt;IP Address&gt; up</pre>
<p>Once we do that, we can check if the IP has changed using the command:
</p>
<pre>ifconfig wlan0</pre>
<p>and looking at the <i>inet addr</i> filed.
<br />
</p>
<h3><span class="mw-headline" id="Pinging_Host">Pinging Host</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=5" title="Edit section: Pinging Host">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In order to check that the EVM is connected to AP and can send and receive packets, we ping the AP from the EVM:
</p>
<pre>ping &lt;Access Point IP&gt;</pre>
<p>For example, if the AP IP address is 192.168.1.1, we will invoke the following command on the EVM:
</p>
<pre>ping 192.168.1.1</pre>
<p>We should see the an output like:
</p>
<pre>PING 192.168.1.1 (192.168.1.1): 56 data bytes
64 bytes from 192.168.1.1: seq=0 ttl=64 time=22.254 ms
64 bytes from 192.168.1.1: seq=1 ttl=64 time=11.679 ms
64 bytes from 192.168.1.1: seq=2 ttl=64 time=11.022 ms
...
</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Sniffer_logs">Sniffer logs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=6" title="Edit section: Sniffer logs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><br />
</p>
<h3><span id="Authentication_&amp;_Association_stage"></span><span class="mw-headline" id="Authentication_.26_Association_stage">Authentication &amp; Association stage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=7" title="Edit section: Authentication &amp; Association stage">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><br />
</p>
<h3><span class="mw-headline" id="4-way-handshake">4-way-handshake</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;section=8" title="Edit section: 4-way-handshake">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>PMK (Pairwise Master Key)</b><br />
</p>
<ul><li>Delivered from the pre-shared key (Personal mode - PSK) or from upper-layer authentication server (Enterprise mode.</li>
<li>There is a different PMK for each mobile device and the AP holds the PMK’s of all the mobile devices.</li></ul>
<p><b>four-way handshake</b><br />
</p>
<ul><li>The four-way handshake is used to establish another key called the PTK (Pairwise Transient Key). The PTK is generated by concatenating the following attributes: PMK, AP nonce (ANonce), STA nonce (SNonce), AP MAC address, and STA MAC address. The product is then put through a cryptographic hash function.</li></ul>
<p><br /><br />
following is the "four-way handshake" diagram:
<br /><br />
<a href="File_4-way-handshake.html" class="image"><img alt="4-way-handshake.png" src="https://processors.wiki.ti.com/images/1/1d/4-way-handshake.png" width="450" height="495" /></a>
<br /><br />
Using sniffer, the capture below shows the four way handshake communication as described in the figure above. The four way handshake communication is denoted by arrows.
<br /><br />
<a href="File_4-way-handshake_sniffer.html" class="image"><img alt="4-way-handshake sniffer.png" src="https://processors.wiki.ti.com/images/0/05/4-way-handshake_sniffer.png" width="902" height="302" /></a>
<br /><br />
The four way handshake starts with the AP sending ANonce to the supplicant.<br />
"<i>Nonce</i>" stands for "<i>number used once</i>" which is a random number used for authentication to ensure that old communication will not be used, such as in <i>replay attacks</i>.<br />
"<i>ANonce</i>" stands for "<i>AP Nonce</i>".<br />
Using sniffer, in the figure below we can see the ANonce key under "<i>Key nOnce</i>"  field. The nOnce starts with 0xBE07E5...
<br /><br />
<a href="File_4-way-handshake_eapol1_sniffer.html" class="image"><img alt="4-way-handshake eapol1 sniffer.png" src="https://processors.wiki.ti.com/images/f/f0/4-way-handshake_eapol1_sniffer.png" width="1042" height="596" /></a>
<br /><br />
After getting the ANonce, the supplicant (station) computes the <i>PTK</i> using the ANonce and its own SNonce (Supplicant Nonce). The supplicant then sends its SNonce along with Message Integrity Code (MIC) on the data, to ensure its integrity and authenticity.<br />
Using sniffer, in the figure below we can see the following components:
</p>
<ul><li>SNonce key under "<i>Key nOnce</i>"  field. The nOnce starts with 0x82D2FD...</li>
<li>MIC under "<i>Key MIC</i>" filed. The MIC starts with 0x03B9CD...</li></ul>
<p><br /><br />
<a href="File_4-way-handshake_eapol2sniffer.html" class="image"><img alt="4-way-handshake eapol2sniffer.png" src="https://processors.wiki.ti.com/images/3/3a/4-way-handshake_eapol2sniffer.png" width="1023" height="597" /></a>
<br /><br />
Once the AP gets the SNonce, it computes the PTK as well. It also checks that it has a matching Primary Master Key (<i>PMK</i>) by calculating the MIC on the data received and comparing the calculated MIC with the one sent by the supplicant.<br />
The AP sends the same ANonce once again, associated with calculated MIC on the message.<br />
Using sniffer, in the figure below we can see the MIC under "<i>Key MIC</i>" filed. The MIC starts with 0x1CD096...
<br /><br />
<a href="File_4-way-handshake_eapol3sniffer.html" class="image"><img alt="4-way-handshake eapol3sniffer.png" src="https://processors.wiki.ti.com/images/e/e2/4-way-handshake_eapol3sniffer.png" width="1020" height="596" /></a>
<br /><br />
Once the supplicant gets the MIC, it checks that it has a matching Primary Master Key (<i>PMK</i>) by calculating the MIC on the data received and comparing the calculated MIC with the one sent by the AP.<br />
As a last step, the supplicant sends a MIC to the AP, indicating that the authentication was successful.<br />
Using sniffer, in the figure below we can see the MIC under "<i>Key MIC</i>" filed. The MIC starts with 0xEC02C5...
<br /><br />
<a href="File_4-way-handshake_eapol4sniffer.html" class="image"><img alt="4-way-handshake eapol4sniffer.png" src="https://processors.wiki.ti.com/images/8/8e/4-way-handshake_eapol4sniffer.png" width="1033" height="579" /></a>
<br /><br />
</p>
<!-- 
NewPP limit report
Cached time: 20201201082928
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.055 seconds
Real time usage: 0.060 seconds
Preprocessor visited node count: 174/1000000
Preprocessor generated node count: 356/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 8865/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:11899-0!canonical and timestamp 20201201082928 and revision id 73617
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>OMAP Wireless Connectivity WLAN Station Connect to WPA2 Network With Commands</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;oldid=73617">https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;oldid=73617</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=OMAP+Wireless+Connectivity+WLAN+Station+Connect+to+WPA2+Network+With+Commands" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;oldid=73617" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 4 August 2011, at 02:33.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.055","walltime":"0.060","ppvisitednodes":{"value":174,"limit":1000000},"ppgeneratednodes":{"value":356,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":8865,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201201082928","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":270});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/OMAP_Wireless_Connectivity_WLAN_Station_Connect_to_WPA2_Network_With_Commands by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:36:15 GMT -->
</html>
