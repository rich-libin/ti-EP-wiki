<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI81XX_PSP_EDMA_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:01:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI81XX PSP EDMA Driver User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI81XX_PSP_EDMA_Driver_User_Guide","wgTitle":"TI81XX PSP EDMA Driver User Guide","wgCurRevisionId":122184,"wgRevisionId":122184,"wgArticleId":9847,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["DM816x","AM389x","DM814x","AM387x","DaVinci","C6-Integra","Linux","PSP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI81XX_PSP_EDMA_Driver_User_Guide","wgRelevantArticleId":9847,"wgRequestId":"3be4e05daf54d0e7bd65fe69","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI81XX_PSP_EDMA_Driver_User_Guide rootpage-TI81XX_PSP_EDMA_Driver_User_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI81XX PSP EDMA Driver User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">TI81XX PSP EDMA Driver User Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Sundaram Raju</div> 
<div style="width:800px; text-align:left;"><div style="display:block; margin: 10px 0px; padding: 0px; text-align:left;">
<div style="margin: 5px; padding: 5px 10px; background-color: #ffffec; border-left: 5px solid #ff6600;"><b>IMPORTANT</b><br /><br />TI81XX refers to TI816X, TI814X and TI813X.<br /></div>
</div></div> 
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#How_to_reserve_different_EDMA3_resources_.28DMA_channels.2C_TCCs.2C_PaRAM_Sets.29_on_ARM_side_.28region_0.29"><span class="tocnumber">2</span> <span class="toctext">How to reserve different EDMA3 resources (DMA channels, TCCs, PaRAM Sets) on ARM side (region 0)</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#DMA_Channels"><span class="tocnumber">2.1</span> <span class="toctext">DMA Channels</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#TCCs_.28i.e_Interrupt_channels.29"><span class="tocnumber">2.2</span> <span class="toctext">TCCs (i.e Interrupt channels)</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#PaRAM_Sets"><span class="tocnumber">2.3</span> <span class="toctext">PaRAM Sets</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#How_to_change_various_other_global_settings"><span class="tocnumber">3</span> <span class="toctext">How to change various other global settings</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#How_to_change_default_event_queue_.28or_Transfer_Controller.2C_TC.29_priorities.3F"><span class="tocnumber">3.1</span> <span class="toctext">How to change default event queue (or Transfer Controller, TC) priorities?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Present_configuration_of_EDMA3_resources_on_DM816X_platform:"><span class="tocnumber">4</span> <span class="toctext">Present configuration of EDMA3 resources on DM816X platform:</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Present_configuration_of_EDMA3_resources_on_DM814X_platform:"><span class="tocnumber">5</span> <span class="toctext">Present configuration of EDMA3 resources on DM814X platform:</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#How_to_Program_the_Cross_bar_events"><span class="tocnumber">6</span> <span class="toctext">How to Program the Cross bar events</span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Sample_test_application_for_EDMA_Driver"><span class="tocnumber">7</span> <span class="toctext">Sample test application for EDMA Driver</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The enhanced direct memory access (EDMA) controller’s primary purpose is to service programmed data transfers between two memory-mapped slave endpoints on the device. 
</p><p><b>EDMA3 Controller Block Diagram</b>
</p><p><a href="File_EDMA3-Controller-BlockDiagram.html" class="image"><img alt="EDMA3-Controller-BlockDiagram.jpg" src="https://processors.wiki.ti.com/images/e/e7/EDMA3-Controller-BlockDiagram.jpg" width="796" height="356" /></a>
</p><p>The EDMA3 controller consists of two principal blocks:
</p>
<ul><li>EDMA3 channel controller (EDMA3CC)</li>
<li>EDMA3 transfer controller(s) (EDMA3TC)</li></ul>
<p>The EDMA3 channel controller serves as the user interface for the EDMA3 controller. The EDMA3CC includes parameter RAM (PaRAM), channel control registers, and interrupt control registers. The EDMA3CC serves to prioritize incoming software requests or events from peripherals, and submits transfer requests (TR) to the transfer controller. 
</p><p>The EDMA3 transfer controllers are slaves to the EDMA3 channel controller responsible for data movement. The transfer controller issues read/write commands to the source and destination addresses programmed for a given transfer. The operation is transparent to you.
</p>
<h2><span id="How_to_reserve_different_EDMA3_resources_(DMA_channels,_TCCs,_PaRAM_Sets)_on_ARM_side_(region_0)"></span><span class="mw-headline" id="How_to_reserve_different_EDMA3_resources_.28DMA_channels.2C_TCCs.2C_PaRAM_Sets.29_on_ARM_side_.28region_0.29">How to reserve different EDMA3 resources (DMA channels, TCCs, PaRAM Sets) on ARM side (region 0)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=2" title="Edit section: How to reserve different EDMA3 resources (DMA channels, TCCs, PaRAM Sets) on ARM side (region 0)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>The resource allocation in EDMA3 is based on a pre-aligned static configuration</b>. It is not possible for Linux running on Host ARM to restrict what resources are allocated by BIOS on DSP. Each OS on every processor should restrict what resources they allocate to their clients based on the pre-aligned static configuration. Linux EDMA driver reserves resources to other masters so that they are not allocated to any client driver that requests them on ARM. The procedure to do so is explained below.
</p><p><span style="color: GREEN"><b>Note:</b> This section is applicable for both DM816x and DM814x. Though the illustrations are provided with DM816x as an example, one can use all these steps/help on DM814x also.</span>
</p>
<h5><span class="mw-headline" id="DMA_Channels">DMA Channels</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=3" title="Edit section: DMA Channels">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In the source file <b>arch\arm\mach-omap2\devices.c</b>, array ti816x_dma_rsv_chans[][2] is used to reserve various DMA channels to the shadow regions of all other masters other than ARM. The first dimension is to mention the channel which is going to be reserved and the second dimension is to mention how many channels from that channel number will be reserved. So all other channels that are not reserved in this section can be used in the ARM side. See the code snippet below:
</p>
<pre>static const s16 ti816x_dma_rsv_chans[][2] = {
        /* (offset, number) */
        {0, 4},
        {26, 6},
        {48, 4},
        {56, 8},
        {-1, -1}
};
</pre>
<p>The first entry means 4 channels from channel '0' i.e. channels '0-3' will be reserved for usage of other masters (for eg. DSP). 
</p><p>To reserve/un-reserve the DMA channels, one has to modify this array accordingly, such that the reserved DMA channel(s) should NOT be used in the present core. All masters should work upon ONLY their subset of resources. In case of a conflict (different masters working on same set of resources), the system behavior is unpredictable. 
</p>
<h5><span id="TCCs_(i.e_Interrupt_channels)"></span><span class="mw-headline" id="TCCs_.28i.e_Interrupt_channels.29">TCCs (i.e Interrupt channels)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=4" title="Edit section: TCCs (i.e Interrupt channels)">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>It is assumed that if a particular channel number x is reserved for a particular master then the TCC x is also reserved for that same master. All drivers and applications running on all masters must keep this in mind and be programmed.
</p>
<h5><span class="mw-headline" id="PaRAM_Sets">PaRAM Sets</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=5" title="Edit section: PaRAM Sets">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>In the source file <b>arch\arm\mach-omap2\devices.c</b>, array ti816x_dma_rsv_slots[][2] is used to reserve various PARAM sets (slot) to the shadow regions of all other masters other than ARM. The first dimension is to mention the slot which is going to be reserved and the second dimension is to mention how many slots from that slot number will be reserved. So all other slots that are not reserved in this section can be used in the ARM side. See the code snippet below:
</p>
<pre>static const s16 ti816x_dma_rsv_slots[][2] = {
        /* (offset, number) */
        {0, 4},
        {26, 6},
        {48, 4},
        {56, 8},
        {64, 127},
        {-1, -1}
};
</pre>
<p>The first entry means 4 slots from slot '0' i.e. slots '0-3' will be reserved for usage of other masters (for eg. DSP). 
</p><p>To reserve/un-reserve the PARAM sets, one has to modify this array accordingly, such that the reserved slot(s) should NOT be used in the present core. All masters should work upon ONLY their subset of resources. In case of a conflict (different masters working on same set of resources), the system behavior is unpredictable. 
</p><p><b>Note 1</b>: DMA channels and PaRAM Sets are one-to-one mapped, meaning thereby DMA channel X can ONLY use PaRAM Set X for its working. The system integrator should make sure that the DMA channels reserved to ARM side should also have the corresponding PaRAM Sets (at least) reserved to ARM side. Other PaRAM Sets available on the ARM side (lying between 64-511) could be used for link purpose. So they can be independently reserved/unreserved to ARM side.  
</p><p><b>Note 2</b>: A DMA/QDMA channel also require a TCC for correct functioning. By default, DMA channels and TCCs are one-to-one mapped, meaning thereby DMA channel Y can ONLY use TCC Y for its working. (No such constraint is there for QDMA channels.) The system integrator should assume that the DMA channels reserved to ARM side, also have the corresponding TCCs (at least) reserved to ARM side. In case user passes a specific TCC to be used by the DMA/QDMA channel, he/she should first check its availability on ARM side.   
</p><p><br />
</p>
<h2><span class="mw-headline" id="How_to_change_various_other_global_settings">How to change various other global settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=6" title="Edit section: How to change various other global settings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><span style="color: GREEN"><b>Note:</b> This section is applicable for both DM816x and DM814x. Though the illustrations are provided with DM816x as an example, one can use all these steps/help on DM814x also.</span>
</p>
<h5><span id="How_to_change_default_event_queue_(or_Transfer_Controller,_TC)_priorities?"></span><span class="mw-headline" id="How_to_change_default_event_queue_.28or_Transfer_Controller.2C_TC.29_priorities.3F">How to change default event queue (or Transfer Controller, TC) priorities?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=7" title="Edit section: How to change default event queue (or Transfer Controller, TC) priorities?">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>Array ti816x_queue_priority_mapping[][2] can be used to change the default event queue priorities. This array is an array of structures having the first structure member as the event queue number and the second structure member as the priority. '0' is the highest priority, '1' is the second highest and so on. See the code snippet below:
</p>
<pre>static const s8 ti816x_queue_priority_mapping[][2] = {
        /* {event queue no, Priority} */
        {0, 0},
        {1, 1},
        {2, 2},
        {3, 3},
        {-1, -1}
};
</pre>
<p>The system integrator can appropriately modify this array, keeping bandwidth limitations (for different users and whole system in general) in mind. 
</p><p><br />
</p>
<h2><span class="mw-headline" id="Present_configuration_of_EDMA3_resources_on_DM816X_platform:">Present configuration of EDMA3 resources on DM816X platform:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=8" title="Edit section: Present configuration of EDMA3 resources on DM816X platform:">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tbody><tr>
<th align="left" rowspan="2"><b>EDMA3 Resource</b>
</th>
<th align="left" colspan="2"><b>DM816X</b>
</th></tr>
<tr>
<td align="left"><b>ARM</b>
</td>
<td align="left"><b>DSP</b>
</td></tr>
<tr>
<td align="left"><b>DMA Channel</b>
</td>
<td align="left">4-25, 32-47, 52-55
</td>
<td align="left">0-3, 26-31, 48-51, 56-63
</td></tr>
<tr>
<td align="left"><b>QDMA Channel</b>
</td>
<td align="left">0,1
</td>
<td align="left">2-7
</td></tr>
<tr>
<td align="left"><b>TCC</b>
</td>
<td align="left">4-25, 32-47, 52-55
</td>
<td align="left">0-3, 26-31, 48-51, 56-63
</td></tr>
<tr>
<td align="left"><b>PaRAM Set</b>
</td>
<td align="left">4-25, 32-47, 52-55, 64-127
</td>
<td align="left">0-3, 26-31, 48-51, 56-63, 128-511
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Present_configuration_of_EDMA3_resources_on_DM814X_platform:">Present configuration of EDMA3 resources on DM814X platform:</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=9" title="Edit section: Present configuration of EDMA3 resources on DM814X platform:">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellpadding="4" cellspacing="2" border="1" style="color:black;background-color:#eeeeee;">

<tbody><tr>
<th align="left" rowspan="2"><b>EDMA3 Resource</b>
</th>
<th align="left" colspan="2"><b>DM814X</b>
</th></tr>
<tr>
<td align="left"><b>ARM</b>
</td>
<td align="left"><b>DSP</b>
</td></tr>
<tr>
<td align="left"><b>DMA Channel</b>
</td>
<td align="left">2-13, 16-25, 32-47, 52-55
</td>
<td align="left">0-1, 14-15, 26-31, 48-51, 56-63
</td></tr>
<tr>
<td align="left"><b>QDMA Channel</b>
</td>
<td align="left">0,1
</td>
<td align="left">2-7
</td></tr>
<tr>
<td align="left"><b>TCC</b>
</td>
<td align="left">2-13, 16-25, 32-47, 52-55
</td>
<td align="left">0-1, 14-15, 26-31, 48-51, 56-63
</td></tr>
<tr>
<td align="left"><b>PaRAM Set</b>
</td>
<td align="left">2-13, 16-25, 32-47, 52-55, 64-127
</td>
<td align="left">0-1, 14-15, 26-31, 48-51, 56-63, 128-511
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="How_to_Program_the_Cross_bar_events">How to Program the Cross bar events</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=10" title="Edit section: How to Program the Cross bar events">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><span style="color: RED"><b>Note:</b> This section is only applicable for DM814x.</span>
</p><p>DM814x has <b>95 EDMA trigger events</b> while it only has <b>64 DMA channels</b>. 
The first 64 events are by default routed to trigger the 64 DMA channels (One to one mapping, i.e. event 10 is routed to channel 10). The rest 31 events (called the <b>cross bar events</b>) are routed to any of the 64 channels by a cross bar switch. <span style="color: RED"><b>Programming of the cross bar is available at the system control module level</b>.</span>
</p><p><b>EDMA driver takes care of this routing via the array ti814x_xbar_event_mapping[]. When a request for a channel is made for an event of event number &gt; 63, then the channel allocation is based on the below mentioned array.</b> The first dimension is the cross bar event number which is essentially the actual event number - 63. The second dimension is the channel number to which you want the event to be routed. See the code snippet below:
</p>
<pre>static struct event_to_channel_map ti814x_xbar_event_mapping[] = {
        /* {xbar event no, Channel} */
        {1, -1},
        {2, -1},
        {3, -1},
        {4, -1},
        {5, -1},
        {6, -1},
        {7, -1},
        {8, -1},
        {9, -1},
        {10, -1},
        {11, -1},
        {12, -1},
        {13, -1},
        {14, -1},
        {15, -1},
        {16, -1},
        {17, -1},
        {18, -1},
        {19, -1},
        {20, -1},
        {21, -1},
        {22, -1},
        {23, -1},
        {24, -1},
        {25, -1},
        {26, -1},
        {27, -1},
        {28, -1},
        {29, -1},
        {30, -1},
        {31, -1},
        {-1, -1}
};
</pre>
<p>To route the event 81 through channel 16, one has to modify the above array as {18,16}, instead of {18,-1}.<i>(81-63=18)</i>
</p><p>The system integrator has to modify this array, keeping in mind that the second dimension should be an integer between 0-63.
He should also make sure that if channel x is used for cross bar events then its default event, event x is not required.
</p>
<h2><span class="mw-headline" id="Sample_test_application_for_EDMA_Driver">Sample test application for EDMA Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;section=11" title="Edit section: Sample test application for EDMA Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><span style="color: GREEN"><b>Note:</b> This section is applicable for both DM816x and DM814x.</span>
</p><p>EDMA Driver APIs are available for use only in the kernel space. Hence the sample application provided must be built as a kernel module and used.
</p><p>The sample application is available here <a href="EDMA_sample_test_application.html" title="EDMA sample test application">EDMA sample test application</a>
</p><p>Copy this sample application file in a location (preferably not inside the kernel source code) and build it as a kernel module using a make file similar to one shown below
</p>
<pre>obj-m = edma_test.o
KDIR = "../linux-kernel"
all:
	make -C $(KDIR) M=$(PWD) modules
clean:
	make -C $(KDIR) M=$(PWD) clean

</pre>
<p>Insert this kernel module once the kernel is up, to see the sample application working.
</p></div>
<!-- 
NewPP limit report
Cached time: 20201130043055
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.059 seconds
Real time usage: 0.063 seconds
Preprocessor visited node count: 118/1000000
Preprocessor generated node count: 269/1000000
Post‐expand include size: 991/2097152 bytes
Template argument size: 93/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 1388/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.671      1 -total
 53.65%    3.579      1 Template:PspTI81xxInterchangeableNamesHeader
 31.89%    2.127      1 Template:SpImportant
 23.57%    1.572      1 Template:SpArticleStart
 19.35%    1.291      1 Template:SpLicenseCC-SA
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:9847-0!canonical and timestamp 20201130043055 and revision id 122184
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI81XX PSP EDMA Driver User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI81XX PSP EDMA Driver User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI81XX PSP EDMA Driver User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;oldid=122184">https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;oldid=122184</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_DM816x.html" title="Category:DM816x">DM816x</a></li><li><a href="Category_AM389x.html" title="Category:AM389x">AM389x</a></li><li><a href="Category_DM814x.html" title="Category:DM814x">DM814x</a></li><li><a href="Category_AM387x.html" title="Category:AM387x">AM387x</a></li><li><a href="Category_DaVinci.html" title="Category:DaVinci">DaVinci</a></li><li><a href="Category_C6-Integra.html" title="Category:C6-Integra">C6-Integra</a></li><li><a href="Category_Linux.html" title="Category:Linux">Linux</a></li><li><a href="Category_PSP.html" title="Category:PSP">PSP</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI81XX+PSP+EDMA+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI81XX_PSP_EDMA_Driver_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI81XX_PSP_EDMA_Driver_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI81XX_PSP_EDMA_Driver_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI81XX_PSP_EDMA_Driver_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;oldid=122184" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_EDMA_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 1 October 2012, at 00:14.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.059","walltime":"0.063","ppvisitednodes":{"value":118,"limit":1000000},"ppgeneratednodes":{"value":269,"limit":1000000},"postexpandincludesize":{"value":991,"limit":2097152},"templateargumentsize":{"value":93,"limit":2097152},"expansiondepth":{"value":4,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":1388,"limit":5000000},"timingprofile":["100.00%    6.671      1 -total"," 53.65%    3.579      1 Template:PspTI81xxInterchangeableNamesHeader"," 31.89%    2.127      1 Template:SpImportant"," 23.57%    1.572      1 Template:SpArticleStart"," 19.35%    1.291      1 Template:SpLicenseCC-SA"]},"cachereport":{"timestamp":"20201130043055","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":234});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI81XX_PSP_EDMA_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:01:57 GMT -->
</html>
