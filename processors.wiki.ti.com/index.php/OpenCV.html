<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/OpenCV by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:43:27 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>OpenCV - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"OpenCV","wgTitle":"OpenCV","wgCurRevisionId":234197,"wgRevisionId":234197,"wgArticleId":41548,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["OpenCV-OpenCL","Optimized DSP Core Functions"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"OpenCV","wgRelevantArticleId":41548,"wgRequestId":"6395dac79cb899284d911c79","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":["sysop"],"wgRestrictionMove":["sysop"]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-OpenCV rootpage-OpenCV skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">OpenCV</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><b><big><big><span style="color:red"> Starting in v4.3, Processor SDK documentation is no longer hosted on processors wiki.</span></big></big></b> <br /><br />
Please bookmark the new links:
</p>
<ul><li>Linux, RT-Linux: <a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/index.html">http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/index.html</a></li>
<li>RTOS: <a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index.html">http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index.html</a></li>
<li>Android: <a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-android/esd/docs/latest/android/index.html">http://software-dl.ti.com/processor-sdk-android/esd/docs/latest/android/index.html</a></li></ul>
<p><br />
<br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#OpenCV_Modules_Supported_By_TI"><span class="tocnumber">2</span> <span class="toctext">OpenCV Modules Supported By TI</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#OpenCL_offload"><span class="tocnumber">3</span> <span class="toctext">OpenCL offload</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Example_of_OpenCL_offload"><span class="tocnumber">3.1</span> <span class="toctext">Example of OpenCL offload</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Unit_Tests"><span class="tocnumber">4</span> <span class="toctext">Unit Tests</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Unit_Tests_Prerequisites"><span class="tocnumber">5</span> <span class="toctext">Unit Tests Prerequisites</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Prerequisites"><span class="tocnumber">5.1</span> <span class="toctext">Prerequisites</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Loading_SDK_and_Standard_Test_Data"><span class="tocnumber">6</span> <span class="toctext">Loading SDK and Standard Test Data</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Loading_Standard_Test_Data"><span class="tocnumber">6.1</span> <span class="toctext">Loading Standard Test Data</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Procedure_to_Get_the_Test_Data"><span class="tocnumber">6.2</span> <span class="toctext">Procedure to Get the Test Data</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Summary_of_Getting_the_Data_Steps"><span class="tocnumber">6.2.1</span> <span class="toctext">Summary of Getting the Data Steps</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-12"><a href="#Environment_Settings_and_Run_the_Tests"><span class="tocnumber">6.3</span> <span class="toctext">Environment Settings and Run the Tests</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Reports_and_Results"><span class="tocnumber">7</span> <span class="toctext">Reports and Results</span></a></li>
<li class="toclevel-1 tocsection-14"><a href="#Necessary_steps_to_modify_OpenCV_framework_to_add_more_OpenCL_Host_side_and_DSP_C66_optimized_kernels"><span class="tocnumber">8</span> <span class="toctext">Necessary steps to modify OpenCV framework to add more OpenCL Host side and DSP C66 optimized kernels</span></a></li>
<li class="toclevel-1 tocsection-15"><a href="#Supported_Platforms"><span class="tocnumber">9</span> <span class="toctext">Supported Platforms</span></a></li>
<li class="toclevel-1 tocsection-16"><a href="#OpenCV_OpenCL_run-time_setup"><span class="tocnumber">10</span> <span class="toctext">OpenCV OpenCL run-time setup</span></a></li>
<li class="toclevel-1 tocsection-17"><a href="#OpenCV_OpenCL_development_setup"><span class="tocnumber">11</span> <span class="toctext">OpenCV OpenCL development setup</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#OpenCV_OpenCL_related_framework_details:_how_to_add_new_DSP_kernel"><span class="tocnumber">12</span> <span class="toctext">OpenCV OpenCL related framework details: how to add new DSP kernel</span></a></li>
<li class="toclevel-1 tocsection-19"><a href="#Creating_OpenCL_C_kernel_optimized_for_C66_core"><span class="tocnumber">13</span> <span class="toctext">Creating OpenCL C kernel optimized for C66 core</span></a></li>
<li class="toclevel-1 tocsection-20"><a href="#OpenCV_OpenCL_kernels_implemented_specifically_for_DSP_C66_core"><span class="tocnumber">14</span> <span class="toctext">OpenCV OpenCL kernels implemented specifically for DSP C66 core</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#EDMA_transfer_framework"><span class="tocnumber">14.1</span> <span class="toctext">EDMA transfer framework</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Additional_information_about_C66_specific_optimizations"><span class="tocnumber">14.2</span> <span class="toctext">Additional information about C66 specific optimizations</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-23"><a href="#List_of_currently_.28PLSDK_3.1.29_DSP_optimized_OpenCV_OpenCL_kernels.2C_using_non-standard_OpenCL_extensions"><span class="tocnumber">15</span> <span class="toctext">List of currently (PLSDK 3.1) DSP optimized OpenCV OpenCL kernels, using non-standard OpenCL extensions</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#OpenCL_C_C66_DSP_kernels"><span class="tocnumber">15.1</span> <span class="toctext"><b>OpenCL C C66 DSP kernels</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-25"><a href="#Profiling_results_of_DSP_optimized_OpenCV_OpenCL_kernels_.28PLSDK_3.1.29.2C_AM5728_platform"><span class="tocnumber">16</span> <span class="toctext">Profiling results of DSP optimized OpenCV OpenCL kernels (PLSDK 3.1), AM5728 platform</span></a>
<ul>
<li class="toclevel-2 tocsection-26"><a href="#Single_channel.2C_1200x709.2C_barcode_ROI_detection_use_case"><span class="tocnumber">16.1</span> <span class="toctext"><b>Single channel, 1200x709, barcode ROI&#160;detection use case</b></span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Single_channel.2C_1920x1080._barcode_ROI_detection_use_case"><span class="tocnumber">16.2</span> <span class="toctext"><b>Single channel, 1920x1080. barcode ROI detection use case</b></span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Single_channel.2C_720x576.2C_Gesture_recognition_use_case"><span class="tocnumber">16.3</span> <span class="toctext"><b>Single channel, 720x576, Gesture recognition use case</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Alternative_approach_to_add_new_OpenCL_kernels_at_OpenCV_application_level"><span class="tocnumber">17</span> <span class="toctext">Alternative approach to add new OpenCL kernels at OpenCV application level</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#OpenCL_kernel_dispatch_from_OpenCV_application.2C_using_existing_OpenCV-OpenCL_classes"><span class="tocnumber">17.1</span> <span class="toctext">OpenCL kernel dispatch from OpenCV application, using existing OpenCV-OpenCL classes</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#OpenCL_kernel_dispatch_from_OpenCV_application.2C_using_standard_OpenCL_dispatch_with_access_to_OpenCV_data_objects"><span class="tocnumber">17.2</span> <span class="toctext">OpenCL kernel dispatch from OpenCV application, using standard OpenCL dispatch with access to OpenCV data objects</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#OpenCV_profiling_-_standard_procedure"><span class="tocnumber">18</span> <span class="toctext">OpenCV profiling - standard procedure</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a rel="nofollow" class="external text" href="http://opencv.org/">OpenCV</a> (Open Source Computer Vision Library) is an open-source BSD-licensed library that includes several hundreds of computer vision algorithms. It is designed for computational efficiency with strong focus on real-time application.<br />
</p><p>The OpenCV 3.1 release provides a transparent API that allows seamless offloads of OpenCL kernels when a supported accelerator is available. Documentation, tutorials and examples of how to use OpenCV 3.1 are available <a rel="nofollow" class="external text" href="http://docs.opencv.org/3.1.0/#gsc.tab=0">here</a>. <br />
</p><p><br />
This document outlines the specifics of how to test OpenCV that has been released within Processor SDK. This release is based off OpenCV 3.1. 
</p><p><br />
OpenCV implementation is available for the following TI devices:
</p>
<ul><li>AM335X</li>
<li>AM437X</li>
<li>AM57X/DRA7xx</li>
<li>K2E</li>
<li>K2H</li>
<li>K2L</li>
<li>K2G</li></ul>
<p>To meet the requirements of real-time processing of images and video OpenCV functions were optimized.
</p><p>More-ever, TI’s OpenCV implementation of hybrid ARM-DSP devices (AM57X, K2E, K2H, K2L, K2G) provides very efficient implementation of OpenCV function where signal-processing-rich algorithms are processed by DSP while the ARM processes all other algorithms, controls and manages the DSP.
</p><p>TI implementation of OpenCV contains implementation of OpenCV functions as well as a set of unit tests to verify the performances and the accuracy of the implementation.
</p><p>This document provides instructions show how to load and run unit tests of TI’s OpenCV implementation. 
</p><p><br />
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="OpenCV_Modules_Supported_By_TI"><big>OpenCV Modules Supported By TI</big></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=2" title="Edit section: OpenCV Modules Supported By TI">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><br />
Table 1 lists the modules of OpenCV and indicates which modules are supported by Processor SDK for K2H family and AM57X family.
<br />
</p>
<table class="wikitable">

<tbody><tr>
<th>Module Name</th>
<th>K2 Family Support</th>
<th>AM57x Family Support</th>
<th>Comments
</th></tr>
<tr>
<td>calib3d</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>Core</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>features2d</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>flann</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>imgcodecs</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>imgproc</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>ml</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>objdetect</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>photo</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>shape</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>stiching</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>superres</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>video</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>videoio</td>
<td>Yes</td>
<td>Yes</td>
<td>
</td></tr>
<tr>
<td>cudaarithm</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudabgsegm</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudacodec</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudafeatures2d</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudafilters</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudaimgproc</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudalegacy</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
<tr>
<td>cudaobjdetect</td>
<td>No</td>
<td>No</td>
<td>No cuda support
</td></tr>
</tbody></table>
<p><br />
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="OpenCL_offload"><big>OpenCL offload</big></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=3" title="Edit section: OpenCL offload">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>OpenCV 3.1 provides a transparent API that allows seamless offloads of OpenCL kernels when a supported hardware accelerator is available. OpenCV 3.1 available with Processor SDK allows these OpenCL kernels to be offloaded to the C66x DSP. 
</p><p>OpenCV 3.1 supports approximately 200+ OpenCL kernels that optimize key functionalities in the different modules. The OpenCL kernel offload through the transparent API is enabled by the UMat data structure that replaces the legacy Mat data structure.  UMat uses the OpenCL memory allocation procedure whenever possible, but maintains backward compatibility with Mat data structure. Additional explanation can be found on OpenCV site: <a rel="nofollow" class="external free" href="https://opencv.org/platforms/opencl.html">https://opencv.org/platforms/opencl.html</a> (or others URL if you search for "OpenCV transparent API").
</p><p>Within the context of Processor SDK, to enable the offload of OpenCL kernels in OpenCV 3.1, the environment variable OPENCV_OPENCL_DEVICE should be defined as follows:
</p><p>For K2  Platforms
export OPENCV_OPENCL_DEVICE='TI KeyStone II:ACCELERATOR:TI Multicore C66 DSP'
</p><p>For AM57x Platforms 
export OPENCV_OPENCL_DEVICE='TI AM57:ACCELERATOR:TI Multicore C66 DSP'
</p><p>If this environment variable is not defined properly then OpenCV will not initialize OpenCL and the OpenCL support is disabled. 
</p><p>Further, the library user can enable/disable OpenCL at runtime (at higher granularity, e.g. to let only part of program to do OpenCL offload) using ocl::setUseOpenCL(true) or ocl::setUseOpenCL(false) routines.<br />
</p><p>More OpenCL specific environment variables can affect the behavior. Please refer to: <a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/environment_variables.html">http://downloads.ti.com/mctools/esd/docs/opencl/environment_variables.html</a>
</p><p><b>Note: The script setupEnv.sh, part of the SDK release (in /usr/share/OpenCV/titestsuite), defines the appropriate environment variables OPENCV_OPENCL_DEVICE as well as other environment variables that are needed for the unit tests.</b>
</p><p>Figure 1 shows the decision tree the transparent API executes to determine if the computations will be offloaded to the accelerator through OpenCL. The boxes that are shaded gray are specific to TI’s implementation of OpenCV. The prohibited list allows us to prevent certain OpenCL kernels from executing on the DSP. The kernels are prevented to execute on the DSP if they did not pass the accuracy tests. 
</p><p><br />
<br />
<br />
<a href="File_FlowChart3.html" class="image"><img alt="FlowChart3.jpg" src="https://processors.wiki.ti.com/images/4/43/FlowChart3.jpg" width="414" height="884" /></a>
<br />
</p>
<h3><span class="mw-headline" id="Example_of_OpenCL_offload">Example of OpenCL offload</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=4" title="Edit section: Example of OpenCL offload">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Here is a simple image processing example, using OpenCL dispatch via Transparent API (Color-to-Gray, Gaussian Blur and Canny kernels).
</p>
<pre> #include &lt;opencv2/imgproc/imgproc.hpp&gt;
 #include &lt;opencv2/highgui/highgui.hpp&gt;
 #include &lt;opencv2/core/ocl.hpp&gt;
 #include &lt;time.h&gt;
 #include &lt;unistd.h&gt;
 /* Time difference calculation, in ms units */
 double tdiff_calc(struct timespec &amp;tp_start, struct timespec &amp;tp_end)
 {
   return (double)(tp_end.tv_nsec -tp_start.tv_nsec) * 0.000001 + (double)(tp_end.tv_sec - tp_start.tv_sec) * 1000.0;
 }
 using namespace cv;
 int main(int argc, char** argv)
 {
   struct timespec tp0, tp1, tp2, tp3;
   UMat img, gray;
   imread("lena.png", 1).copyTo(img);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp0);
   cvtColor(img, gray, COLOR_BGR2GRAY);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp1);
   GaussianBlur(gray, gray, Size(5, 5), 1.25);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp2);
   Canny(gray, gray, 0, 30);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp3);
   printf ("BGR2GRAY  tdiff=%lf ms \n", tdiff_calc(tp0, tp1));
   printf ("GaussBlur tdiff=%lf ms \n", tdiff_calc(tp1, tp2));
   printf ("Canny     tdiff=%lf ms \n", tdiff_calc(tp2, tp3));
   imwrite("canny_proc.jpg", gray);
   return 0;
 }
</pre>
<p>It can be compiled on target (AM57xx), using following command:
</p>
<pre> g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -L/usr/local/lib/ -g -o canny_ex1 canny_ex1.cpp -lrt -lopencv_core -lopencv_imgproc -lopencv_video -lopencv_features2d -lopencv_imgcodecs
</pre>
<p>Execution can be launched using following script, showing execution time with OpenCL dispatch respectively enabled and disabled:
</p>
<pre> export TI_OCL_LOAD_KERNELS_ONCHIP=Y
 export TI_OCL_CACHE_KERNELS=Y
 export OPENCV_OPENCL_DEVICE='TI AM57:ACCELERATOR:TI Multicore C66 DSP'
 echo "OpenCL on, canny"
 ./canny_ex1
 export OPENCV_OPENCL_DEVICE='disabled'
 echo "OpenCL off, canny"
 ./canny_ex
</pre>
<p>Please note that the first run, with OpenCL on, has additional delay of ~1min, due to kernel compilation on AM57xx. 
This is constrained to first run only, if "TI_OCL_CACHE_KERNELS" environemnt variable is set.
Profiling shows different execution time for DSP (OpenCL on) and A15 (OpenCL off) platforms.
</p>
<pre> OpenCL on, canny
 BGR2GRAY  tdiff=12.064661 ms
 GaussBlur tdiff=5.948558 ms
 Canny     tdiff=5.788493 ms
 OpenCL off, canny
 BGR2GRAY  tdiff=4.158085 ms
 GaussBlur tdiff=2.989813 ms
 Canny     tdiff=9.780171 ms
</pre>
<p>A15 loading (measured with 'top') during repeated execution with 'OpenCL on', is in 50-60% range (single CPU load).
A15 loading (measured with 'top') during repeated execution with 'OpenCL off', is in 150-170% range (both CPUs loaded).
</p><p>It is possible to make finer grained mapping of individual kernel execution (some kernels could be mapped to DSP, others to A15 only). Here is an example:
</p>
<pre> #include &lt;opencv2/imgproc/imgproc.hpp&gt;
 #include &lt;opencv2/highgui/highgui.hpp&gt;
 #include &lt;opencv2/core/ocl.hpp&gt;
 #include &lt;time.h&gt;
 #include &lt;unistd.h&gt;
 using namespace cv;
 /* Time difference calculation, in ms units */
 double tdiff_calc(struct timespec &amp;tp_start, struct timespec &amp;tp_end)
 {
   return (double)(tp_end.tv_nsec -tp_start.tv_nsec) * 0.000001 + (double)(tp_end.tv_sec - tp_start.tv_sec) * 1000.0;
 }
 int main(int argc, char** argv)
 {
   struct timespec tp0, tp1, tp2, tp3, tp4;
   Mat  img_mat;
   UMat img, gray;
   imread("lena.png", 1).copyTo(img_mat);
   <b>cv::ocl::setUseOpenCL(false); /* suspend dispatch to DSP - from now on kernels are executed on A15 only! */</b>
   clock_gettime(CLOCK_MONOTONIC, &amp;tp0);
   cvtColor(img_mat, img_mat, COLOR_BGR2GRAY);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp1);
   <b>cv::ocl::setUseOpenCL(true); /* resume DSP dispatch - from now on kernels, based on above decision tree, can be dispatched to DSP */</b>
   img_mat.copyTo(gray);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp2);
   GaussianBlur(gray, gray,Size(5, 5), 1.25);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp3);
   Canny(gray, gray, 0, 30);
   clock_gettime(CLOCK_MONOTONIC, &amp;tp4);
   printf ("BGR2GRAY  tdiff=%lf ms \n", tdiff_calc(tp0, tp1));
   printf ("Copy2UMat tdiff=%lf ms \n", tdiff_calc(tp1, tp2));
   printf ("GaussBlur tdiff=%lf ms \n", tdiff_calc(tp2, tp3));
   printf ("Canny     tdiff=%lf ms \n", tdiff_calc(tp3, tp4));
   imwrite("canny_proc.jpg", gray);
   return 0;
 }
</pre>
<p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Unit_Tests"><big>Unit Tests</big></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=5" title="Edit section: Unit Tests">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Each function inthe OpenCV implementation has a unit test associate with the function. <br />
The following instructions show how to load and run unit tests of TI’s OpenCV implementation. <br />
The screen shots and device dependent instructions in this document are from AM57X build and run and can be used as a reference for build and run OpenCV test for any other TI devices from the above list
</p><p><br />
<big><b><big></big></b><big>
</big></big></p><big><big><h2><span class="mw-headline" id="Unit_Tests_Prerequisites">Unit Tests Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=6" title="Edit section: Unit Tests Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h2></big></big><big><big></big><p><big><b></b></big><b> <br /></b>
OpenCV function unit test can run on any of TI devices that were mentioned above. This document describes how to run the unit test on AM57X family of TI devices. The screen shots were taken from a Tera-terminal connected to AM5728 EVM.<br />
</p></big><big><h3><span class="mw-headline" id="Prerequisites">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=7" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><ol><li>AM572 EVM (or other AM57X based system) with connection to the network. See <a rel="nofollow" class="external text" href="http://www.ti.com/tool/TMDXEVM5728">here</a> for information on AM57X EVM. For other devices use a similar EVM</li>
<li>TI Processor SDK Linux prospective LINUX operating system. URL to download Processor SDK Linux prospective is below.</li>
<li>File system either on a SD card (for devices with SD card interface), or mount to external server. If the file system resides on SD card, the card size should be at least 32GB.</li></ol></big><big><p><br />
</p></big><big><h2><span class="mw-headline" id="Loading_SDK_and_Standard_Test_Data"><big>Loading SDK and Standard Test Data</big></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=8" title="Edit section: Loading SDK and Standard Test Data">edit</a><span class="mw-editsection-bracket">]</span></span></h2></big><big><p><br />
Processor SDK is available from the following locations
</p></big><big><pre>   For AM335X -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-AM335X">http://www.ti.com/tool/PROCESSOR-SDK-AM335X</a>
   For AM437X -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-AM437X">http://www.ti.com/tool/PROCESSOR-SDK-AM437X</a>
   For AM57X -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-AM57X">http://www.ti.com/tool/PROCESSOR-SDK-AM57X</a>
   For DRA7XX -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/processor-sdk-dra7x">http://www.ti.com/tool/processor-sdk-dra7x</a>
   For K2E -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-K2E">http://www.ti.com/tool/PROCESSOR-SDK-K2E</a>
   For K2H -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-K2H">http://www.ti.com/tool/PROCESSOR-SDK-K2H</a>
   For K2L -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-K2L">http://www.ti.com/tool/PROCESSOR-SDK-K2L</a>
   For K2G -&gt; <a rel="nofollow" class="external free" href="http://www.ti.com/tool/PROCESSOR-SDK-K2G">http://www.ti.com/tool/PROCESSOR-SDK-K2G</a>
</pre></big><big><p><br />
</p></big><big><h3><span class="mw-headline" id="Loading_Standard_Test_Data">Loading Standard Test Data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=9" title="Edit section: Loading Standard Test Data">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><p>The standard test code data opencv_extra-master.zip can be downloaded from <a rel="nofollow" class="external text" href="https://github.com/Itseez/opencv_extra/archive/master.zip">here</a>
</p></big><big><h3><span class="mw-headline" id="Procedure_to_Get_the_Test_Data">Procedure to Get the Test Data</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=10" title="Edit section: Procedure to Get the Test Data">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><p><br />
There are multiple ways to download the data into the EVM
</p></big><big><pre>   If the EVM has display and keyboard the user can downloaded 
   the data compressed file directly to the EVM and then unzip it
   Otherwise download the data compressed file to a PC on the network and 
   use SCP or tftp or USB memory stick to move the data compressed file into the EVM. 
</pre></big><big><p><br />
The following screen shots show how to download the standard data compressed file into the EVM and unzip it. It assumes that there is a TFTP master server, for example Solarwinds or similar, and that the file opencv_extra-master.zip was downloaded from <a rel="nofollow" class="external free" href="https://github.com/Itseez/opencv_extra/archive/master.zip">https://github.com/Itseez/opencv_extra/archive/master.zip</a> and resides in the root directory of the TFTP server. The beginning of the unzip process and the end of the unzip process are shown in the screen shots as well.  <br />
The TFTP command is tftp -g -r opencv_extra-master.zip xxx.xxx.xxx.xxx where xxx.xxx.xxx.xxx stands for the IP address of the TFTP server. Note that the process takes few minutes because the file is very large. (More than 600MB) 
<br />
<br />
</p><p><a href="File_UnzipMaster3.html" class="image"><img alt="UnzipMaster3.jpg" src="https://processors.wiki.ti.com/images/2/2a/UnzipMaster3.jpg" width="692" height="68" /></a>  
</p><p><br /><br />
</p><p><a href="File_UnzipMaster4.html" class="image"><img alt="UnzipMaster4.jpg" src="https://processors.wiki.ti.com/images/b/bb/UnzipMaster4.jpg" width="539" height="64" /></a> 
<br />
</p><p><a href="File_InflatedZip.html" class="image"><img alt="InflatedZip.jpg" src="https://processors.wiki.ti.com/images/d/d0/InflatedZip.jpg" width="724" height="323" /></a>  
</p><p><br />
<br />
<br />
</p></big><big><h4><span class="mw-headline" id="Summary_of_Getting_the_Data_Steps">Summary of Getting the Data Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=11" title="Edit section: Summary of Getting the Data Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h4></big><big><p><br />
</p></big><big><ol><li>Boot the EVM and login as root.</li>
<li>Change directory to /usr/share/OpenCV</li>
<li>Get the opencv_extra-master.zip file from a server as described above</li>
<li>unzip the opencv_extra-master.zip file</li>
<li>Delete the opencv_extra-master.zip file</li></ol></big><big><p><br />
</p><p>After unzip the file a new directory <i><b>opencv_extra-master</b></i> is generated. A sub-directory <i><b>testdata</b></i> should be moved up one level.<br />
</p><p>From the OpenCV directory do the following: <i><b>mv opencv_extra-master/testdata .</b></i>   . See the screen shot below.<br />
<br />
</p><p><a href="File_MoveTestdata.html" class="image"><img alt="MoveTestdata.jpg" src="https://processors.wiki.ti.com/images/f/ff/MoveTestdata.jpg" width="703" height="321" /></a>
<br />
<br />
</p></big><big><h3><span class="mw-headline" id="Environment_Settings_and_Run_the_Tests">Environment Settings and Run the Tests</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=12" title="Edit section: Environment Settings and Run the Tests">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><p><br />
The script setupEnv.sh in directory /usr/share/OpenCV/titestsuite sets the environment variables that are needed for the unit tests. <br />
</p><p>From the OpenCV directory do the following: <i><b>cd titestsuit</b></i>  and then <i><b>source setupEnv.sh</b></i> . See the screen shot below.<br />
</p><p><br />
<br />
<a href="File_Environment1.html" class="image"><img alt="Environment1.jpg" src="https://processors.wiki.ti.com/images/9/9c/Environment1.jpg" width="603" height="123" /></a>
</p><p><br />
</p><p><br />
The script runtests run all the unit tests. From the titestsuit directory do <i><b>./runtests</b></i> . The unit tests starts executing. The screen will show the following:
</p><p><br />
<a href="File_RunTests1.html" class="image"><img alt="RunTests1.jpg" src="https://processors.wiki.ti.com/images/3/3b/RunTests1.jpg" width="823" height="96" /></a>
</p><p><br />
<b><big>Notes:</big></b><br />
</p></big><big><ol><li>Currently the last three tests in the script (videoio) do not run on AM57X. The script will stuck after about 90 minutes. The user can stop the script ("control C") or eliminate the videoio tests</li>
<li>An output log file opencv_test_log.out is generated in directory /usr/share/OpenCV/titestsuite. The start of the log file looks like the following:<br /></li></ol></big><big><p><br />
</p><p><br />
<a href="File_Logfile.html" class="image"><img alt="Logfile.jpg" src="https://processors.wiki.ti.com/images/4/4f/Logfile.jpg" width="562" height="732" /></a>
</p><p><br />
<br />
</p><p><br />
</p><p><br />
</p></big><big><h2><span class="mw-headline" id="Reports_and_Results">Reports and Results</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=13" title="Edit section: Reports and Results">edit</a><span class="mw-editsection-bracket">]</span></span></h2></big><big><p>Summary of accuracy test results on 66AK2H12 and AM57x platforms 
</p><p><br />
</p><p><br />
</p></big><big><table class="wikitable">

<tbody><tr>
<th>Module Name</th>
<th># Of Tests</th>
<th>#66AK2H12 Failures</th>
<th># AM57X Failures
</th></tr>
<tr>
<td>calib3d</td>
<td>70</td>
<td>1</td>
<td>1</td>
<td>
</td></tr>
<tr>
<td>Core</td>
<td>10299</td>
<td>9</td>
<td>11</td>
<td>
</td></tr>
<tr>
<td>features2d</td>
<td>86</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>flann</td>
<td>1</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>imgcodecs</td>
<td>15</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>imgproc</td>
<td>8699</td>
<td>3</td>
<td>6</td>
<td>
</td></tr>
<tr>
<td>ml</td>
<td>26</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>objdetect</td>
<td>9</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>photo</td>
<td>63</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>shape</td>
<td>3</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>stiching</td>
<td>4</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>superres</td>
<td>3</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>video</td>
<td>58</td>
<td>0</td>
<td>0</td>
<td>
</td></tr>
<tr>
<td>videoio</td>
<td>70</td>
<td>0/3 (Not built with FFMPEG/GST)</td>
<td>1</td>
<td>
</td></tr></tbody></table></big><big><p><br />
</p><p><br /><br />
Details of accuracy test failures results on 66AK2H12 and AM57x platforms 
<br />
</p><p><br />
</p><p><br />
</p></big><big><table class="wikitable">

<tbody><tr>
<th>Module Name</th>
<th># Test</th>
<th>66AK2H12 Failure</th>
<th># Test</th>
<th>AM57X Failure
</th></tr>
<tr>
<td>calib3d</td>
<td>1</td>
<td>Calib3d_SolvePnP  (Neon)</td>
<td>1</td>
<td>FisheyeTest.Rectify
</td></tr>
<tr>
<td>core</td>
<td>1</td>
<td>turnOffOpenCL::Image2D (No Image2d support in TI OpenCL)</td>
<td>1</td>
<td>turnOffOpenCL::Image2D (No Image2d support in TI OpenCL)
</td></tr>
<tr>
<td>core</td>
<td>8</td>
<td>Mul (Neon)</td>
<td>8</td>
<td>Mul (Neon)
</td></tr>
<tr>
<td>core</td>
<td></td>
<td>-</td>
<td>1</td>
<td>Add (doesn't fail when run individually)
</td></tr>
<tr>
<td>core</td>
<td></td>
<td>-</td>
<td>1</td>
<td>Bitwise_and (doesn't fail when run individually)
</td></tr>
<tr>
<td>imgproc</td>
<td>1</td>
<td>Imgproc_moments</td>
<td>1</td>
<td>Imgproc_moments
</td></tr>
<tr>
<td>imgproc</td>
<td>1</td>
<td>Filter 2D (one test does not fail when run individually)</td>
<td>1</td>
<td>Erode (does not fail when run individually)
</td></tr>
<tr>
<td>imgproc</td>
<td></td>
<td></td>
<td>1</td>
<td>Filter 2D (one test does not fail when run individually)</td>
<td>
</td></tr>
<tr>
<td>imgproc</td>
<td>1</td>
<td>Corner Harris (Not the same tests fail when run individually</td>
<td>1</td>
<td>Corner Harris (does not fail when run individually)
</td></tr>
<tr>
<td>imgproc</td>
<td></td>
<td>-</td>
<td>2</td>
<td>CornerMinEigenVal (does not fail when run individually)
</td></tr>
<tr>
<td>videoio</td>
<td>0</td>
<td>videoio.Regression (GST Library Issue)</td>
<td>1</td>
<td>GST library issue?
</td></tr></tbody></table></big><big><p><br />
</p></big><big><h1><span class="mw-headline" id="Necessary_steps_to_modify_OpenCV_framework_to_add_more_OpenCL_Host_side_and_DSP_C66_optimized_kernels">Necessary steps to modify OpenCV framework to add more OpenCL Host side and DSP C66 optimized kernels</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=14" title="Edit section: Necessary steps to modify OpenCV framework to add more OpenCL Host side and DSP C66 optimized kernels">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>Primary purpose of this tutorial is to show how one can add TI DSP C66 optimized kernels to existing OpenCV framework. Necessary steps are described in below paragraphs, describing several already optimized kernels, and also how to add new and then recompile and deploy updated OpenCV in PLSDK 3.1. TI DSP specific OpenCL implementation is additional to few existing accelerators: Intel x86: SSE2/SSE4/AVX/AVX2 extensions; ARM: NEON; nVIDIA: CUDA; Generic OpenCL. Range of accelerated kernels via OpenCL is wide, e.g. OpenCV 3.10 baseline includes ~200 kernels encoded in OpenCL C. TI OpenCL (C66 core) follows 1.2 version of standard, and can execute baseline OpenCV OpenCL kernels (as-is!). But additional performance improvements can be achieved by using TI DSP OpenCL extensions (intrinsics and EDMAmgr). 
</p></big><big><h1><span class="mw-headline" id="Supported_Platforms">Supported Platforms</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=15" title="Edit section: Supported Platforms">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>See <a rel="nofollow" class="external text" href="http://software-dl.ti.com/processor-sdk-rtos/esd/docs/latest/rtos/index_release_specific.html#supported-platforms-and-versions">Processor_SDK_Supported_Platforms_and_Versions</a> for a list of supported platforms and links to more information. OpenCL dispatch is available only on platforms with DSP C66 core, like AM5728 (2 C66 cores). <br /> 
</p></big><big><h1><span class="mw-headline" id="OpenCV_OpenCL_run-time_setup">OpenCV OpenCL run-time setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=16" title="Edit section: OpenCV OpenCL run-time setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>OpenCV and OpenCL are already included in PLSDK 3.10. OpenCV uses run-time compilation of OpenCL kernels, so first time kernel execution is dominated by kernel compilation (later they are cached either in memory or tmp filesystem) - please note that it may take several dozens of seconds on AM5728EVM. In order to enable OpenCL acceleration inside OpenCV, following environment variable need to be set (example applies to AM57xx): <i>export OPENCV_OPENCL_DEVICE='TI AM57:ACCELERATOR:TI Multicore C66 DSP'</i> 
</p></big><big><ul><li>For additional information, please refer to: <a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/index.html">http://downloads.ti.com/mctools/esd/docs/opencl/index.html</a></li></ul></big><big><h1><span class="mw-headline" id="OpenCV_OpenCL_development_setup">OpenCV OpenCL development setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=17" title="Edit section: OpenCV OpenCL development setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>OpenCV and OpenCL are already included in PLSDK 3.10. 
</p></big><big><ul><li>Development setup need to be prepared based on <a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/index.html">http://processors.wiki.ti.com/index.php/Processor_SDK_Building_The_SDK</a>.</li>
<li>When needed, source code under the work directory (e.g., arago-tmp-[toolchain]/work/am57xx_evm-linux-gnueabi/opencv/git) can be modified.</li>
<li>Forced compilation can be started, after code modification:</li></ul></big><big><pre> ARAGO_BRAND=processor-sdk MACHINE=am57xx-evm bitbake opencv --force -c compile
ARAGO_BRAND=processor-sdk MACHINE=am57xx-evm bitbake opencv
</pre></big><big><ul><li>To install modified package (not all OpenCV ipk-s are changed), select updated packages in arago-tmp-[toolchain]/work/am57xx_evm-linux-gnueabi/opencv//am57xx_evm and install on target system using:</li></ul></big><big><pre> opkg install libopencv-&lt;modulename.version.commit&gt;-r0.tisdk4_am57xx_evm.ipk
</pre></big><big><h1><span class="mw-headline" id="OpenCV_OpenCL_related_framework_details:_how_to_add_new_DSP_kernel">OpenCV OpenCL related framework details: how to add new DSP kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=18" title="Edit section: OpenCV OpenCL related framework details: how to add new DSP kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>Addition of a new kernel includes two steps: addition of Host (A15) side modification, and new DSP kernel (to be described in next chapter). 
</p></big><big><ul><li>OpenCL dispatch is attempted with macro <i>CV_OCL_RUN_()</i>, from top level function of specific OpenCV kernel. If OpenCV OpenCL dispatch fails, or some preconditions are not met, it falls back to Native C implementation).</li>
<li>Host side OpenCL wrapper function are placed in modules/XYZ folder, in same file along with implementation for other architectures (e.g. Native C, SSE/AVX or Neon). Function can be identified with "ocl_" prefix, e.g. ocl_threshold() (modules/imgproc/src/threshold.cpp) or ocl_apply (modules/video/src/bgfg_gaussmix2.cpp). Inside this wrapper function, conditions for successful execution on DSP need to be met. This typically includes checking data types, number of channels, and/or image size.</li>
<li>At this point kernel build options can be set in run-time (compilation is always done before first kernel dispatch). They are provided as string in Kernel class member variable kdefs. In this way additional optimizations can be applied (e.g. skipping parts of code, or setting parameters as constants).</li>
<li>Kernel file name (where kernel is defined) is set in 2nd argument of kernel constructor, with "_oclsrc" postfix: e.g. <i>ocl::imgproc::threshold_oclsrc</i> - this means that kernel body is defined in "./opencl/threshold.cl" file. This operation is performed during configuration stage of OpenCV build.</li>
<li>Kernel execution is invoked via run() method (of Kernel class). All kernel arguments need to be passed before this method is invoked. This typically includes source and destination buffers, and any additional argument affecting kernel execution (scalars, temporary buffers allocated on the host side, etc.). Arguments (order, data types, etc) need to match kernel implementation. Global and local sizes used in invocation of kernel, are almost always vectors with 2 elements indicating 2D operation. Global size vector indicate total number of items to be processed, whereas local size vector indicate size of work group, i.e. number of elements (across both dimensions) in single task. In below examples, we set global size to {2,1} and local size to {1,1}, forcing creation of only two DSP tasks by OpenCL framework. In this way complete control is passed to the developer to kernel, and only ensuring that two tasks can be launched in parallel.</li></ul></big><big><p>As a reference you can look for ocl_XYZ functions including preprocessor conditional #ifdef TIOPENCL (in modules/*/src files). 
</p></big><big><h1><span class="mw-headline" id="Creating_OpenCL_C_kernel_optimized_for_C66_core">Creating OpenCL C kernel optimized for C66 core</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=19" title="Edit section: Creating OpenCL C kernel optimized for C66 core">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>DSP specific implementation of kernel body can be placed in existing XXX.cl or new YYY.cl file - both have to be placed in modules/ZZZ/src/opencl folder. No modification of top level CMake files are required (all .cl files present in ./opencl folder are included in compilaton). There are three options in adding new kernel implementation: 
</p></big><big><ul><li>If we decide to use existing file and kernel name, we can use macro set in kernel build options (refer to previous paragraph) - example in: modules/video/src/bgfg_gaussmix2.cpp:</li></ul></big><big><pre> ...
    String opts = format("-D CN=%d -D NMIXTURES=%d%s -DTIDSP_MOG2 -D SUBLINE_CACHE=%d", nchannels, nmixtures, bShadowDetection&#160;? " -DSHADOW_DETECT"&#160;: "", subline_cache);
    kernel_apply.create("mog2_kernel", ocl::video::bgfg_mog2_oclsrc, opts);
...
</pre></big><big><p>to select baseline or DSP specific implementation - example in: modules/video/src/opencl/bgfg_mog2.cl: 
</p></big><big><pre> #ifdef TIDSP_MOG2
<i>TI DSP specific implementation</i>
...
__kernel void mog2_kernel(__global const uchar* frame, int frame_step, int frame_offset, int frame_row, int frame_col,  //uchar || uchar3
                        __global uchar* modesUsed,                                                                    //uchar
                        __global uchar* weight,                                                                       //float
                        __global uchar* mean,                                                                         //T_MEAN=float || float4
                        __global uchar* variance,                                                                     //float
                        __global uchar* fgmask, const int fgmask_step, const int fgmask_offset,                       //uchar
                        const float alphaT, const float alpha1, const float prune,
                        const float c_Tb, const float c_TB, float c_Tg, const float c_varMin,                         //constants
                        const float c_varMax, const float c_varInit, const float c_tau
 #ifdef SHADOW_DETECT
                        , const uchar c_shadowVal
 #endif
                        )
...
#else
<i>OPENCL generic implementation:</i>
...
__kernel void mog2_kernel(__global const uchar* frame, int frame_step, int frame_offset, int frame_row, int frame_col,  //uchar || uchar3
                        __global uchar* modesUsed,                                                                    //uchar
                        __global uchar* weight,                                                                       //float
                        __global uchar* mean,                                                                         //T_MEAN=float || float4
                        __global uchar* variance,                                                                     //float
                        __global uchar* fgmask, int fgmask_step, int fgmask_offset,                                   //uchar
                        float alphaT, float alpha1, float prune,
                        float c_Tb, float c_TB, float c_Tg, float c_varMin,                                           //constants
                        float c_varMax, float c_varInit, float c_tau
#ifdef SHADOW_DETECT
                        , uchar c_shadowVal
#endif
                        )
...
#endif
</pre></big><big><ul><li>Another option is to use different kernel name, and use it appropriately as mentioned in previous paragraph.</li></ul></big><big><pre> <i>  TI DSP specific implementation</i>
__attribute__((reqd_work_group_size(1,1,1))) __kernel void tidsp_morph_erode (__global const uchar * srcptr, int src_step, int src_offset,
                  __global uchar * dstptr, int dst_step, int dst_offset,
                  int src_offset_x, int src_offset_y, int cols, int rows,
                  int src_whole_cols, int src_whole_rows)
</pre></big><big><pre> ...
__attribute__((reqd_work_group_size(1,1,1))) __kernel void tidsp_morph_dilate (__global const uchar * srcptr, int src_step, int src_offset,
                  __global uchar * dstptr, int dst_step, int dst_offset,
                  int src_offset_x, int src_offset_y, int cols, int rows,
                  int src_whole_cols, int src_whole_rows)
</pre></big><big><p><br /> 
</p></big><big><pre> <i>  OpenCL generic implementation</i>
__kernel void morph(__global const uchar * srcptr, int src_step, int src_offset,
                  __global uchar * dstptr, int dst_step, int dst_offset,
                  int src_offset_x, int src_offset_y, int cols, int rows,
                  int src_whole_cols, int src_whole_rows EXTRA_PARAMS)
</pre></big><big><p><br /> 
</p></big><big><ul><li>Third option is to create new file and use it in kernel constructor, with _oclsrc postfix (as mentioned in previous paragraph), like used in modules/imgproc/src/smooth.cpp</li></ul></big><big><pre> <i>  TI DSP specific OpenCL implementation</i> 
...
  cv::String kname = format( "tidsp_gaussian" )&#160;;
  cv::String kdefs = format("-D T=%s -D T1=%s -D cn=%d", ocl::typeToStr(type), ocl::typeToStr(depth), cn)&#160;;
  ocl::Kernel k(kname.c_str(), ocl::imgproc::gauss_oclsrc, kdefs.c_str() );
...
</pre></big><big><p>Implementation for this OpenCL kernel is provided in modules/imgproc/src/opencl/gauss.cl, which is a new file. 
</p><p>DSP kernels can use standard 1.2 OpenCL C and DSP specific extensions. OpenCL included in PLSDK 3.1 allows direct use of functions in edmamgr module. We can even use printf() in .cl files (developer does not need to bother with any additional hooks on Host side) which is very useful for development, debugging and benchmarking. 
</p></big><big><pre> ...
#ifdef TIDSP_OPENCL_VERBOSE
  clk_end = __clock();
  printf ("TIDSP dilate clockdiff=%d\n", clk_end - clk_start);
#endif
...
</pre></big><big><p>Output looks like: 
</p></big><big><pre> [core 1] TIDSP dilate clockdiff=532646
[core 0] TIDSP dilate clockdiff=531362
</pre></big><big><h1><span class="mw-headline" id="OpenCV_OpenCL_kernels_implemented_specifically_for_DSP_C66_core">OpenCV OpenCL kernels implemented specifically for DSP C66 core</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=20" title="Edit section: OpenCV OpenCL kernels implemented specifically for DSP C66 core">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>Coding in OpenCL C is very close to coding in Native DSP C (cl6x). Many platform specific details are automatically resolved with OpenCL tools (like memory map handling, header file inclusion, etc) and framework (loading, buffer transfer). OpenCV is based on run-time compilation of OpenCL kernels provided in source, and preprocessed and converted to header and CPP arrays during configure stage. But, it is also possible to use off-line compilation or link with Native DSP C libraries. TI DSP OpenCL supports 1.2 standard and several DSP extensions. In order to achieve maximum performance, majority of techniques applicable in DSP C are applicable in OpenCL C: 
</p></big><big><ul><li>DSP intrinsics.</li></ul></big><big><pre>       ...
      /* Convert from 8bpp to 16bpp so we can do SIMD of rows */
      r0_2 = _dmpyu4(as_uchar8(r0), as_uchar8(mask1_8));  /* 8-way unsigned 8-bit X 8-bit multiplication */
      r1_2 = _dmpyu4(as_uchar8(r1), as_uchar8(mask2_8));
      r2_2 = _dmpyu4(as_uchar8(r2), as_uchar8(mask1_8));
      /* Add rows 0+1, column-wise */
      r01_lo = _dadd2(as_long(r0_2.s0123), as_long(r1_2.s0123));
      r01_hi = _dadd2(as_long(r0_2.s4567), as_long(r1_2.s4567));
      ...
</pre></big><big><ul><li>Multi-DSP core operation - splitting work load by partitioning input data</li></ul></big><big><pre> int   gid   = get_global_id(0); /* 1st dimension can be used to identify DSP core */
</pre></big><big><ul><li>It is highly advisable to copy input data to L2 or even L1 memory. Use EDMA to parallelize data transfers (from DDR to/from L2) with DSP core execution</li></ul></big><big><h3><span class="mw-headline" id="EDMA_transfer_framework">EDMA transfer framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=21" title="Edit section: EDMA transfer framework">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><p>It is essential that EDMA operates in parallel with DSP core operation, so that DSP core always have ready data to be processed. This can be accomplished with well known "ping-pong" scheme at input end. It is possible to implement similar method at output end of operation, but typically there are much fewer write operations. Several kernels include "EDMA image processing framework": it ensures that several consecutive image rows are transferred to L2 memory and ready to be processed by DSP core. In order to avoid redundant copies, an array of pointers to beginning of image rows is maintained. Main unit of operation is single image row. Only one image row is in-flight, both on input and output. Still, DSP processing (which is typical use case) may use multiple consecutive image rows. Examples of this framework can be found in: gauss.cl, sobel.cl, thresh.cl. 
</p></big><big><ul><li>Initialization: resetting L2 image rows</li></ul></big><big><pre> for(i = 0; i &lt; (LINES_CACHED + 1); i ++)
{
  memset ((void *)img_lines[i], 0, MAX_LINE_SIZE);
}
</pre></big><big><ul><li>Partitioning data between DSP cores</li></ul></big><big><pre> ...
int   gid   = get_global_id(0);  /* Identify DSP core: gid is set to 0 for 1st DSP core, and 1 for 2nd DSP core */
...
</pre></big><big><pre> if(gid == 0)
{ /* Upper half of image */
  for(i = 1; i &lt; LINES_CACHED; i ++)
  { /* Use this, one time multiple 1D1D transfers, instead of one linked transfer, to allow for fast EDMA later */
    EdmaMgr_copy1D1D(evIN, (void *)(srcptr + (rows - 1 + i) * cols), (void *)(img_lines[i]), cols);
  }
  fetch_rd_idx = cols;
} else if(gid == 1)
{ /* Bottom half of image */
  for(i = 0; i &lt; LINES_CACHED; i ++)
  { /* Use this, one time multiple 1D1D transfers, instead of one linked transfer, to allow for fast EDMA later */
    EdmaMgr_copy1D1D(evIN, (void *)(srcptr + (rows - 1 + i) * cols), (void *)(img_lines[i]), cols);
  }
  fetch_rd_idx = (rows + 1) * cols;
  dest_ptr += rows * cols;
} else return;
start_rd_idx = 0;
</pre></big><big><ul><li>Main image row loop</li></ul></big><big><pre> for (int y = 0; y &lt; rows; y ++)
{
  EdmaMgr_wait(evIN);
  rd_idx  = start_rd_idx;
  for(kk = 0; kk &lt; LINES_CACHED; kk ++)
  {
    y_ptr[kk] = (uchar *)img_lines[rd_idx];
    rd_idx = (rd_idx + 1) &amp; LINES_CACHED;
  }
  start_rd_idx = (start_rd_idx + 1) &amp; LINES_CACHED;
  EdmaMgr_copyFast(evIN, (void*)(srcptr + fetch_rd_idx), (void*)(img_lines[rd_idx]));
  fetch_rd_idx += cols;
  /**********************************************************************************/
  yprev_ptr = y_ptr[0];
  ycurr_ptr = y_ptr[1];
  ynext_ptr = y_ptr[2];
  ...
  /* Access L2 data directly using yprev_ptr, ycurr_ptr, ynext_ptr... */
</pre></big><big><h3><span class="mw-headline" id="Additional_information_about_C66_specific_optimizations">Additional information about C66 specific optimizations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=22" title="Edit section: Additional information about C66 specific optimizations">edit</a><span class="mw-editsection-bracket">]</span></span></h3></big><big><ol><li>C6000 Programmers guide: <a rel="nofollow" class="external free" href="http://www.ti.com/lit/ug/spru198k/spru198k.pdf">http://www.ti.com/lit/ug/spru198k/spru198k.pdf</a>.</li>
<li>TMS320C6000 DSP Optimization Workshop Student Guide (6.1 MB) (pdf file): <a rel="nofollow" class="external free" href="TMS320C6000_DSP_Optimization_Workshop.html">http://processors.wiki.ti.com/index.php/TMS320C6000_DSP_Optimization_Workshop</a>,</li>
<li>TMS320C6000 Optimizing Compiler: <a rel="nofollow" class="external free" href="http://www.ti.com/lit/ug/spru187u/spru187u.pdf">http://www.ti.com/lit/ug/spru187u/spru187u.pdf</a></li>
<li>TMS320C66x CorePac User Guide: <a rel="nofollow" class="external free" href="http://www.ti.com/lit/ug/sprugw0c/sprugw0c.pdf">http://www.ti.com/lit/ug/sprugw0c/sprugw0c.pdf</a></li>
<li>TMS320C66x DSP CPU and instruction set: <a rel="nofollow" class="external free" href="https://training.ti.com/system/files/docs/c66x-corepac-instruction-set-reference-guide.pdf">https://training.ti.com/system/files/docs/c66x-corepac-instruction-set-reference-guide.pdf</a></li></ol></big><big><h1><span id="List_of_currently_(PLSDK_3.1)_DSP_optimized_OpenCV_OpenCL_kernels,_using_non-standard_OpenCL_extensions"></span><span class="mw-headline" id="List_of_currently_.28PLSDK_3.1.29_DSP_optimized_OpenCV_OpenCL_kernels.2C_using_non-standard_OpenCL_extensions">List of currently (PLSDK 3.1) DSP optimized OpenCV OpenCL kernels, using non-standard OpenCL extensions<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=23" title="Edit section: List of currently (PLSDK 3.1) DSP optimized OpenCV OpenCL kernels, using non-standard OpenCL extensions">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p class="mw-empty-elt"></p><table width="1614" cellspacing="2" cellpadding="2" border="3" align="center">
<caption>
<h3><span class="mw-headline" id="OpenCL_C_C66_DSP_kernels"><b>OpenCL C C66 DSP kernels</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=24" title="Edit section: OpenCL C C66 DSP kernels">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p class="mw-empty-elt"></p></caption>

<tbody><tr>
<th>Kernel name
</th>
<th>Data type - input
</th>
<th>Data type - output
</th>
<th>Host side file (full path)
</th>
<th>OpenCL C kernel file (full path)
</th>
<th>Comments<br />
</th></tr>
<tr>
<td><b>erode</b>
</td>
<td>uint8
</td>
<td>uint8
</td>
<td>modules/imgproc/src/morph.cpp
</td>
<td>modules/imgproc/src/opencl/morph.cl
</td>
<td><br />
</td></tr>
<tr>
<td><b>dilate</b>
</td>
<td>uint8
</td>
<td>uint8
</td>
<td>modules/imgproc/src/morph.cpp
</td>
<td>modules/imgproc/src/opencl/morph.cl
</td>
<td><br />
</td></tr>
<tr>
<td><b>SobelX/SobelY</b>
</td>
<td>uint8
</td>
<td>int16
</td>
<td>modules/imgproc/src/deriv.cpp
</td>
<td>modules/imgproc/src/opencl/sobel.cl
</td>
<td><br />
</td></tr>
<tr>
<td><b>threshold</b>
</td>
<td>uint8
</td>
<td>uint8
</td>
<td>modules/imgproc/src/thresh.cpp
</td>
<td>modules/imgproc/src/opencl/threshold.cl
</td>
<td><br />
</td></tr>
<tr>
<td><b>GaussBlur (3x3)</b>
</td>
<td>uint8
</td>
<td>uint8
</td>
<td>modules/imgproc/src/smooth.cpp
</td>
<td>modules/imgproc/src/opencl/gauss.cl
</td>
<td><br />
</td></tr>
<tr>
<td><b>convertScaleAbs</b>
</td>
<td>int16
</td>
<td>uint8
</td>
<td>modules/core/src/convert.cpp
</td>
<td>modules/core/src/opencl/tidsparithm.cl
</td>
<td>Additional optimizations possible<br />
</td></tr>
<tr>
<td><b>MOG2 (mixture of Gaussians)</b>
</td>
<td>uint8 (float32 internal)
</td>
<td>uint8 (float32 internal)
</td>
<td>modules/core/src/bgfg_gaussmix2.cpp
</td>
<td>modules/core/src/opencl/bgfg_mog2.cl
</td>
<td>Additional optimizations possible<br />
</td></tr></tbody></table></big><big><p><br /> 
</p></big><big><h1><span id="Profiling_results_of_DSP_optimized_OpenCV_OpenCL_kernels_(PLSDK_3.1),_AM5728_platform"></span><span class="mw-headline" id="Profiling_results_of_DSP_optimized_OpenCV_OpenCL_kernels_.28PLSDK_3.1.29.2C_AM5728_platform">Profiling results of DSP optimized OpenCV OpenCL kernels (PLSDK 3.1), AM5728 platform<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=25" title="Edit section: Profiling results of DSP optimized OpenCV OpenCL kernels (PLSDK 3.1), AM5728 platform">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p class="mw-empty-elt"></p><table width="1214" cellspacing="2" cellpadding="2" border="3" align="center">
<caption>
<h3><span id="Single_channel,_1200x709,_barcode_ROI_detection_use_case"></span><span class="mw-headline" id="Single_channel.2C_1200x709.2C_barcode_ROI_detection_use_case"><b>Single channel, 1200x709, barcode ROI&#160;detection use case</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=26" title="Edit section: Single channel, 1200x709, barcode ROI detection use case">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p class="mw-empty-elt"></p></caption>

<tbody><tr>
<th>Kernel name
</th>
<th>DSP optimized, cycles (per core)
</th>
<th>DSP baseline wall clock
</th>
<th>DSP optimized wall clock
</th>
<th>ARM wall clock
</th>
<th>DSP/ARM
</th></tr>
<tr>
<td><b>erode</b>
</td>
<td>883436
</td>
<td>288.10ms<br />
</td>
<td>2.33ms<br />
</td>
<td>13.65ms
</td>
<td>5.8x<br />
</td></tr>
<tr>
<td><b>dilate</b>
</td>
<td>893387
</td>
<td>290.232ms<br />
</td>
<td>2.36ms<br />
</td>
<td>13.67ms
</td>
<td>5.8x<br />
</td></tr>
<tr>
<td><b>SobelX/SobelY</b>
</td>
<td>586885
</td>
<td>232.450ms<br />
</td>
<td>1.58ms<br />
</td>
<td>2.69ms
</td>
<td>1.7x<br />
</td></tr>
<tr>
<td><b>threshold</b><br />
</td>
<td>676208<br />
</td>
<td>3.583ms<br />
</td>
<td>1.72ms<br />
</td>
<td>0.49288ms<br />
</td>
<td>0.3x<br />
</td></tr>
<tr>
<td><b>GaussBlur (3x3)</b>
</td>
<td>903159
</td>
<td>82.601ms<br />
</td>
<td>2.036ms<br />
</td>
<td>4.289ms
</td>
<td>2.1x<br />
</td></tr>
<tr>
<td><b>convertScaleAbs</b>
</td>
<td>725346
</td>
<td>112.60ms<br />
</td>
<td>1.73077ms<br />
</td>
<td>3.92ms
</td>
<td>2.3x<br />
</td></tr></tbody></table></big><big><p><br /> 
</p><p><br /> 
</p><p><br /> 
</p><p><br />
</p></big><big><p class="mw-empty-elt"></p><table width="1214" cellspacing="2" cellpadding="2" border="3" align="center">
<caption>
<h3><span id="Single_channel,_1920x1080._barcode_ROI_detection_use_case"></span><span class="mw-headline" id="Single_channel.2C_1920x1080._barcode_ROI_detection_use_case"><b>Single channel, 1920x1080. barcode ROI detection use case</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=27" title="Edit section: Single channel, 1920x1080. barcode ROI detection use case">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p class="mw-empty-elt"></p></caption>

<tbody><tr>
<th>Kernel name
</th>
<th>DSP optimized, cycles (per core)
</th>
<th>DSP baseline wall clock
</th>
<th>DSP optimized wall clock
</th>
<th>ARM wall clock (ms)
</th>
<th>DSP/ARM
</th></tr>
<tr>
<td><b>erode</b>
</td>
<td>2016149<br />
</td>
<td>358.46ms<br />
</td>
<td>3.762ms<br />
</td>
<td>74.7736ms<br />
</td>
<td>20.2x<br />
</td></tr>
<tr>
<td><b>dilate</b>
</td>
<td>2020188<br />
</td>
<td>348.255ms<br />
</td>
<td>3.734ms<br />
</td>
<td>68.1547ms<br />
</td>
<td>20.2x<br />
</td></tr>
<tr>
<td><b>SobelX/SobelY</b>
</td>
<td>1260833<br />
</td>
<td>281.58ms<br />
</td>
<td>2.38ms<br />
</td>
<td>13.3328ms<br />
</td>
<td>5.6x<br />
</td></tr>
<tr>
<td><b>threshold</b>
</td>
<td>1535483<br />
</td>
<td>6.311ms<br />
</td>
<td>2.815ms<br />
</td>
<td>1.08271ms<br />
</td>
<td>0.4x<br />
</td></tr>
<tr>
<td><b>GaussBlur (3x3)</b>
</td>
<td>2092713<br />
</td>
<td>98.61ms<br />
</td>
<td>3.478ms<br />
</td>
<td>10.0458ms<br />
</td>
<td>2.9x<br />
</td></tr>
<tr>
<td><b>convertScaleAbs</b>
</td>
<td>1646050<br />
</td>
<td>268.272ms<br />
</td>
<td>3.13524ms<br />
</td>
<td>5.77027ms<br />
</td>
<td>1.8x<br />
</td></tr></tbody></table></big><big><p><br /> 
</p><p><br /> 
</p><p><br /> 
</p><p><br /> 
</p><p><br />
</p></big><big><p class="mw-empty-elt"></p><table width="1214" cellspacing="2" cellpadding="2" border="3" align="center">
<caption>




<h3><span id="Single_channel,_720x576,_Gesture_recognition_use_case"></span><span class="mw-headline" id="Single_channel.2C_720x576.2C_Gesture_recognition_use_case"><b>Single channel, 720x576, Gesture recognition use case</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=28" title="Edit section: Single channel, 720x576, Gesture recognition use case">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p class="mw-empty-elt"></p></caption>

<tbody><tr>
<th>Kernel name
</th>
<th>DSP optimized, cycles (per core)
</th>
<th>DSP baseline wall clock
</th>
<th>DSP optimized wall clock
</th>
<th>ARM wall clock
</th>
<th>DSP/ARM
</th></tr>
<tr>
<td><b>erode</b>
</td>
<td>567719 <br />
</td>
<td>30.985ms<br />
</td>
<td>1.707ms<br />
</td>
<td>5.45ms
</td>
<td>3.2x<br />
</td></tr>
<tr>
<td><b>dilate</b>
</td>
<td>570094
</td>
<td>31.035ms<br />
</td>
<td>1.750ms<br />
</td>
<td>5.455ms
</td>
<td>3.2x<br />
</td></tr>
<tr>
<td><b>MOG2 (mixture of Gaussians)</b>
</td>
<td>40307446 <br />
</td>
<td>316.984ms<br />
</td>
<td>59.63ms<br />
</td>
<td>40.667ms
</td>
<td>0.7x<br />
</td></tr></tbody></table></big><big><p><br /> 
</p><p><br />
</p></big><big><h1><span class="mw-headline" id="Alternative_approach_to_add_new_OpenCL_kernels_at_OpenCV_application_level">Alternative approach to add new OpenCL kernels at OpenCV application level</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=29" title="Edit section: Alternative approach to add new OpenCL kernels at OpenCV application level">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>Instead of adding OpenCL kernels into OpenCV framework, it is possible to do that directly from OpenCV application. This approach might be preferred if scope and reuse of work are limited.
Primary benefit is more direct control of development (avoid OpenCV framework complexities) and reduced build time (only top level application and specific kernels need to be recompiled instead of doing Yocto builds).
Building the application (below example is executed on target) is straightforward:
</p><p>&lt;source lang="bash"&gt;
g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -g -c  cvclapp-direct.cpp
g++ -I/usr/local/include/opencv -I/usr/local/include/opencv2 -L/usr/local/lib/ -g -o cvclapp \
</p></big><big><pre>    cvclapp.cpp \
    cvclapp-direct.o \
    -lrt \
    -lopencv_core \
    -lopencv_imgproc \
    -lopencv_highgui \
    -lopencv_ml \
    -lopencv_video \
    -lopencv_features2d \
    -lopencv_calib3d \
    -lopencv_objdetect \
    -lopencv_imgcodecs \
    -lOpenCL -locl_util
</pre></big><big><p>&lt;/source&gt;
</p><p>Below two sections show how OpenCL kernels can be dispatched from OpenCV application in two different ways.
</p></big><big><h2><span id="OpenCL_kernel_dispatch_from_OpenCV_application,_using_existing_OpenCV-OpenCL_classes"></span><span class="mw-headline" id="OpenCL_kernel_dispatch_from_OpenCV_application.2C_using_existing_OpenCV-OpenCL_classes">OpenCL kernel dispatch from OpenCV application, using existing OpenCV-OpenCL classes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=30" title="Edit section: OpenCL kernel dispatch from OpenCV application, using existing OpenCV-OpenCL classes">edit</a><span class="mw-editsection-bracket">]</span></span></h2></big><big><p>OpenCV host side code, using OpenCV classes (defined in modules/core/src/ocl.cpp) to load and dispatch OpenCL kernels (online compilation).
</p><p>&lt;source lang="CPP"&gt;
</p></big><big><ol><li>define __CL_ENABLE_EXCEPTIONS</li>
<li>include &lt;CL/cl.hpp&gt;</li>
<li>include &lt;iostream&gt;</li>
<li>include &lt;fstream&gt;</li>
<li>include &lt;string&gt;</li>
<li>include &lt;iterator&gt;</li>
<li>include &lt;cassert&gt;</li>
<li>include "ocl_util.h"</li>
<li>include &lt;opencv2/opencv.hpp&gt;</li>
<li>include &lt;opencv2/core/ocl.hpp&gt;</li>
<li>include &lt;opencv2/imgproc/imgproc.hpp&gt;</li>
<li>include &lt;opencv2/highgui/highgui.hpp&gt;</li></ol></big><big><p>using namespace std;
using namespace cv;
// This function is used for 2nd approach described in next section (standard OpenCL kernel dispatch)
extern void ProcRawCL(Mat &amp;mat_src, const string &amp;kernel_name);
int main()
{
</p></big><big><pre>   if (!ocl::haveOpenCL())
   {
       cout &lt;&lt; "OpenCL is not avaiable..." &lt;&lt; endl;
       return 0;
   }
   ocl::Context context;
   if (!context.create(ocl::Device::TYPE_ACCELERATOR))
   {
       cout &lt;&lt; "Failed creating the context..." &lt;&lt; endl;
       return 0;
   }
   // Select the first device
   ocl::Device(context.device(0));
   // Read the OpenCL kernel code into a string
   ifstream ifs("kernel_inv.cl");
   if (ifs.fail()) return 0;
   std::string kernelSource((std::istreambuf_iterator&lt;char&gt;(ifs)), std::istreambuf_iterator&lt;char&gt;());
   ocl::ProgramSource programSource(kernelSource);
   // Compile the kernel code 
   cv::String errmsg;
   cv::String buildopt = "-DDBG_VERBOSE "; // We can set various clocl build options here, e.g. define-s to compile-in/out parts of CL code
   ocl::Program program = context.getProg(programSource, buildopt, errmsg);
   ocl::Kernel kernel("invert_img", program);
   // Transfer Mat data to the device
   Mat mat_src = imread("lena.png", IMREAD_GRAYSCALE);
   UMat umat_src = mat_src.getUMat(ACCESS_READ, USAGE_ALLOCATE_DEVICE_MEMORY);
   cout &lt;&lt; "Input image size: " &lt;&lt; mat_src.size() &lt;&lt; endl &lt;&lt; flush;
   UMat umat_dst(mat_src.size(), mat_src.type(), ACCESS_WRITE, USAGE_ALLOCATE_DEVICE_MEMORY);
   kernel.args(ocl::KernelArg::ReadOnlyNoSize(umat_src), ocl::KernelArg::ReadWrite(umat_dst));
   size_t globalThreads[2] = { (unsigned int)mat_src.cols, (unsigned int)mat_src.rows };
   size_t localThreads[2] = { 16, 16 };
   bool success = kernel.run(2, globalThreads, localThreads, false);
   if (!success){
     cout &lt;&lt; "Failed running the kernel..." &lt;&lt; endl;
     return 0;
   } else {
     cout &lt;&lt; "Kernel OK!" &lt;&lt; endl;
   }
   GaussianBlur(umat_dst, umat_dst, Size(5, 5), 1.25);
   Canny(umat_dst, umat_dst, 0, 50);
   // Fetch the dst data from the device
   Mat mat_dst = umat_dst.getMat(ACCESS_READ);
   imwrite("out1.jpg", mat_dst);
   ProcRawCL(mat_src, "kernel_direct.cl");
</pre></big><big><p>//    imshow("src", mat_src);
//    imshow("dst", mat_dst);
//    waitKey();
</p></big><big><pre>   return 1;
</pre></big><big><p>}
&lt;/source&gt;
</p><p>This is kernel_inv.cl file with OpenCL kernels (executed on DSP). It is loaded and compiled by above host program.
&lt;source lang="CPP"&gt;
__kernel void invert_img(__global uchar* src, int src_step, int src_offset, 
</p></big><big><pre>                        __global uchar* dst, int dst_step, int dst_offset, 
                        int dst_rows, int dst_cols)
</pre></big><big><p>{
</p></big><big><pre>  int x = get_global_id(0);
  int y = get_global_id(1);
  if (x &gt;= dst_cols) return;
  int src_index = mad24(y, src_step, x + src_offset);
  int dst_index = mad24(y, dst_step, x + dst_offset);
  dst[dst_index] = 255 - src[src_index];
</pre></big><big><ol><li>ifdef DBG_VERBOSE</li></ol></big><big><pre>  if((x &lt; 3) &amp;&amp; ((y &lt; 3) || (y &gt;= (512 - 3)))) printf ("[x=%d][y=%d]\n", x, y);
</pre></big><big><ol><li>endif</li></ol></big><big><p>}
&lt;/source&gt;
</p><p><br />
</p></big><big><h2><span id="OpenCL_kernel_dispatch_from_OpenCV_application,_using_standard_OpenCL_dispatch_with_access_to_OpenCV_data_objects"></span><span class="mw-headline" id="OpenCL_kernel_dispatch_from_OpenCV_application.2C_using_standard_OpenCL_dispatch_with_access_to_OpenCV_data_objects">OpenCL kernel dispatch from OpenCV application, using standard OpenCL dispatch with access to OpenCV data objects</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=31" title="Edit section: OpenCL kernel dispatch from OpenCV application, using standard OpenCL dispatch with access to OpenCV data objects">edit</a><span class="mw-editsection-bracket">]</span></span></h2></big><big><p>This example shows how to use CMEM memory directly accessible by DSP. OpenCV Mat data structures are created to store data in CMEM, thus avoid buffer copy.
For more information refer to <a rel="nofollow" class="external free" href="http://downloads.ti.com/mctools/esd/docs/opencl/memory/host-malloc-extension.html">http://downloads.ti.com/mctools/esd/docs/opencl/memory/host-malloc-extension.html</a> .
</p><p>&lt;source lang="CPP"&gt;
</p></big><big><ol><li>define __CL_ENABLE_EXCEPTIONS</li>
<li>include &lt;CL/cl.hpp&gt;</li>
<li>include &lt;iostream&gt;</li>
<li>include &lt;fstream&gt;</li>
<li>include &lt;string&gt;</li>
<li>include &lt;iterator&gt;</li>
<li>include &lt;cassert&gt;</li>
<li>include "ocl_util.h"</li>
<li>include &lt;opencv2/opencv.hpp&gt;</li>
<li>include &lt;opencv2/core/ocl.hpp&gt;</li>
<li>include &lt;opencv2/imgproc/imgproc.hpp&gt;</li>
<li>include &lt;opencv2/highgui/highgui.hpp&gt;</li></ol></big><big><p>using namespace std;
using namespace cv;
using namespace cl;
</p><p>const int NumElements     = 512*512;  // image size
const int NumWorkGroups   = 256;
const int VectorElements  = 4;
const int NumVecElements  = NumElements / VectorElements;
const int WorkGroupSize   = NumVecElements / NumWorkGroups;
</p><p>void ProcRawCL(Mat &amp;mat_src, const std::string &amp;kernel_name)
{
</p></big><big><pre>   //===============================================================
   // Allocates memory in CMEM, directly accessible by both DSP and A15.
   // This avoids buffer copying.
   // Create three Mat data objects using pre-allocated CMEM memory
   int bufsize = mat_src.rows * mat_src.cols;
   void *ptr_cmem1 = __malloc_ddr(bufsize);
   void *ptr_cmem2 = __malloc_ddr(bufsize);
   void *ptr_cmem3 = __malloc_ddr(bufsize);
   Mat test_mat1(mat_src.size(), CV_8UC1, ptr_cmem1);
   Mat test_mat2(mat_src.size(), CV_8UC1, ptr_cmem2);
   Mat test_mat3(mat_src.size(), CV_8UC1, ptr_cmem3);
</pre></big><big><pre>   mat_src.copyTo(test_mat1);
   threshold(test_mat1, test_mat2, 128.0, 192.0, THRESH_BINARY);
   imwrite("out_cmem1.jpg", test_mat2);
   //----
   mat_src.copyTo(test_mat3);
  try
  {
    Context context(CL_DEVICE_TYPE_ACCELERATOR);
    std::vector&lt;Device&gt; devices = context.getInfo&lt;CL_CONTEXT_DEVICES&gt;();
</pre></big><big><pre>    int d = 0;
    std::string str;
    ifstream t(kernel_name);
    std::string kernelStr((istreambuf_iterator&lt;char&gt;(t)), istreambuf_iterator&lt;char&gt;());
</pre></big><big><pre>    devices[d].getInfo(CL_DEVICE_NAME, &amp;str);
    cout &lt;&lt; "DEVICE: " &lt;&lt; str &lt;&lt; endl &lt;&lt; endl;
</pre></big><big><pre>    Program::Sources source(1, std::make_pair(kernelStr.c_str(), kernelStr.length()));
    Program          program = Program(context, source);
    program.build(devices);
</pre></big><big><pre>    Kernel kernel(program, "maskVector");
    Buffer bufA   (context, CL_MEM_READ_ONLY  | CL_MEM_USE_HOST_PTR, bufsize, ptr_cmem2);
    Buffer bufDst (context, CL_MEM_WRITE_ONLY | CL_MEM_USE_HOST_PTR, bufsize, ptr_cmem1);
    kernel.setArg(0, bufA);
    kernel.setArg(1, bufDst);
</pre></big><big><pre>    Event ev1;
</pre></big><big><pre>    CommandQueue Q(context, devices[d], CL_QUEUE_PROFILING_ENABLE);
    Q.enqueueNDRangeKernel(kernel, NullRange, NDRange(NumVecElements), NDRange(WorkGroupSize), NULL, &amp;ev1);
    ev1.wait();
</pre></big><big><pre>    ocl_event_times(ev1, "Kernel Exec");
    imwrite("out_cmem2.jpg", test_mat1);
  }
  catch (cl::Error err)
  {
    cerr &lt;&lt; "ERROR: " &lt;&lt; err.what() &lt;&lt; "(" &lt;&lt; err.err() &lt;&lt; ", "
         &lt;&lt; ocl_decode_error(err.err()) &lt;&lt; ")" &lt;&lt; endl;
  }
   //----
   __free_ddr(ptr_cmem1);
   __free_ddr(ptr_cmem2);
   __free_ddr(ptr_cmem3);
   //===============================================================
</pre></big><big><p>}
&lt;/source&gt;
</p><p>This is kernel_direct.cl OpenCL C file. Kernel maskVector is loaded, compiled and disptache by above host program
&lt;source lang="CPP"&gt;
kernel void maskVector(global const uchar4* a, global uchar4* b)
{
</p></big><big><pre>   int id = get_global_id(0);
   b[id] = a[id] &amp; (uchar4)(127, 127, 127, 127);
</pre></big><big><p>}
&lt;/source&gt;
</p><p><br />
</p><p><br />
</p></big><big><h1><span class="mw-headline" id="OpenCV_profiling_-_standard_procedure">OpenCV profiling - standard procedure</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit&amp;section=32" title="Edit section: OpenCV profiling - standard procedure">edit</a><span class="mw-editsection-bracket">]</span></span></h1></big><big><p>Standard procedure for profiling OpenCV kernels (with OpenCL dispatch or without), is described in: <a rel="nofollow" class="external free" href="https://github.com/opencv/opencv/wiki/HowToUsePerfTests">https://github.com/opencv/opencv/wiki/HowToUsePerfTests</a>
In case of Processor Linux SDK on AM3/4/5 (AM57xx only supports OpenCL dispatch to DSP cores), these steps should be followed:
</p></big><big><pre>   [EVM] cd /usr/share/OpenCV/titestsuite
   [EVM] source setupEnv.txt
   [LINUXBOX] Copy test vectors (copy <a rel="nofollow" class="external free" href="https://github.com/opencv/opencv_extra/tree/master/testdata">https://github.com/opencv/opencv_extra/tree/master/testdata</a>) to [EVM] /usr/share/OpenCV/testdata
   [LINUXBOX] We need Yocto build (follow <a rel="nofollow" class="external free" href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/index.html">http://processors.wiki.ti.com/index.php/Processor_SDK_Building_The_SDK</a>) 
       as opencv performance executables or scripts are not distributed, as standard deliverables:
       From Yocto build, copy all python scripts from opencv/XYZ/git/modules/ts/misc, to EVM folder: /usr/share/OpenCV/titestsuite
       From Yocto build, copy opencv_perf_* executables from opencv/XYZ/build/bin, to EVM folder: /usr/share/OpenCV/titestsuite
   [EVM] Use environment variable to enable / disable OpenCL kernel acceleration:
       OPENCL off: 
           export OPENCV_OPENCL_DEVICE='
       OPENCL on:
           export TI_OCL_CACHE_KERNELS=Y
           export TI_OCL_KEEP_FILES=Y
           export OPENCV_OPENCL_DEVICE='TI AM57:ACCELERATOR:TI Multicore C66 DSP'
   [EVM] Now we are ready to run the tests, or subsets of tests:
       EXAMPLE (EVM, execute from folder /usr/share/OpenCV/titestsuite): python ./run.py -t objdetect (run objdetect module performance tests)
       EXAMPLE (EVM, execute from folder /usr/share/OpenCV/titestsuite): python ./run.py -t core,imgproc (run both core and imgproc performance tests... this takes a lot of time)
       EXAMPLE (EVM, execute from folder /usr/share/OpenCV/titestsuite): python ./run.py --perf_force_samples=5 -t imgproc --gtest_filter="*Sobel*" (run only Sobel filters from imgproc module)
       EXAMPLE (EVM, execute from folder /usr/share/OpenCV/titestsuite): python ./run.py --gtest_list_tests -t imgproc (list all the available performance tests, for imgproc module)
       EXAMPLE (EVM, execute from folder /usr/share/OpenCV/titestsuite): python ./run.py --perf_force_samples=5 -t imgproc --gtest_filter="*threshold/20*" (run single test case)
</pre></big>
<!-- 
NewPP limit report
Cached time: 20201201072021
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.130 seconds
Real time usage: 0.136 seconds
Preprocessor visited node count: 177/1000000
Preprocessor generated node count: 232/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:41548-0!canonical and timestamp 20201201072021 and revision id 234197
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>OpenCV</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>OpenCV</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>OpenCV</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;oldid=234197">https://processors.wiki.ti.com/index.php?title=OpenCV&amp;oldid=234197</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_OpenCV-OpenCL.html" title="Category:OpenCV-OpenCL">OpenCV-OpenCL</a></li><li><a href="Category_Optimized_DSP_Core_Functions.html" title="Category:Optimized DSP Core Functions">Optimized DSP Core Functions</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=OpenCV" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="OpenCV.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:OpenCV&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="OpenCV.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/OpenCV.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/OpenCV.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;oldid=234197" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=OpenCV&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 18 April 2018, at 09:19.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.130","walltime":"0.136","ppvisitednodes":{"value":177,"limit":1000000},"ppgeneratednodes":{"value":232,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201201072021","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":235});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/OpenCV by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 11:43:42 GMT -->
</html>
