<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/MemoryProtectionOnKeystoneDevices by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:22:46 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>MemoryProtectionOnKeystoneDevices - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MemoryProtectionOnKeystoneDevices","wgTitle":"MemoryProtectionOnKeystoneDevices","wgCurRevisionId":57795,"wgRevisionId":57795,"wgArticleId":9012,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["WikiNote","Keystone"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MemoryProtectionOnKeystoneDevices","wgRelevantArticleId":9012,"wgRequestId":"647cee8c286d040c306c8860","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MemoryProtectionOnKeystoneDevices rootpage-MemoryProtectionOnKeystoneDevices skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">MemoryProtectionOnKeystoneDevices</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><table style="width:100%; border:0; cellpadding:0; cellspacing:0;">

<tbody><tr>
<td><a href="File_TexasInstrumentsLogo.html" class="image"><img alt="TexasInstrumentsLogo.png" src="https://processors.wiki.ti.com/images/e/e5/TexasInstrumentsLogo.png" width="200" height="47" /></a></td>
<td></td>
<td style="text-align:right; font-style:italic; font-weight:bold; font-size:200%;">Wiki Note
</td></tr>
<tr>
<td colspan="3" style="background:rgb(255,255,255); color:rgb(144,0,0); font-size:200%; text-align:center;">MemoryProtectionOnKeystoneDevices
</td></tr>
<tr>
<td style="text-align:left; font-weight:bold; font-size:125%;">Author(s):Matti Rintam√§ki</td>
<td></td>
<td style="font-size: 125%; font-style:italic; text-align:right;">Telecom Infrastructure Field Applications
</td></tr>
<tr style="background: white; color: black">
<td style="text-align:left;">SPRWIKI9012</td>
<td></td>
<td style="text-align:right; font-style:italic; font-size:125%;">April 2011
</td></tr>
<tr>
<td>
</td></tr>
<tr>
<td colspan="3" align="center">
</td></tr>
<tr>
<td colspan="3" style="font-size:150%; text-align:center;"><b>Abstract</b>
</td></tr>
<tr>
<td colspan="3" align="left" style="font-style:italic">This document describes how to configure memory protection for catching SW issues on TMS320C66x (KeyStone) devices. Memory protection on KeyStone devices is implemented in a distributed manner, so that each subsystem can implement their own memory protection features. For the same reason, the documentation on memory protection is also distributed across the documentation of the various subsystems. This application note aims to collect the documentation together to make it easier for the developers to implement memory protection features to their application SW. While the examples are given for the TMS320TCI6616 device, the ideas are applicable to other KeyStone devices as well.
<p>An example application is accompanied, showing how to configure the various memory protection features, route the corresponding events as exceptions to alert the system of violations, and finally showing how the memory protection works in practice by doing a series of offensive accesses by various masters in the system.
</p>
</td></tr>
<tr>
<td colspan="3"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Purpose_of_memory_protection"><span class="tocnumber">1</span> <span class="toctext">Purpose of memory protection</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Memory_Protection_Documentation"><span class="tocnumber">2</span> <span class="toctext">Memory Protection Documentation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Memory_Protection_Architecture"><span class="tocnumber">3</span> <span class="toctext">Memory Protection Architecture</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Privilege_Levels"><span class="tocnumber">3.1</span> <span class="toctext">Privilege Levels</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Privilege_ID"><span class="tocnumber">3.2</span> <span class="toctext">Privilege ID</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Memory_Protection_Pages_and_Page_Attribute_Registers"><span class="tocnumber">3.3</span> <span class="toctext">Memory Protection Pages and Page Attribute Registers</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Memory_Protection_Fault_Registers"><span class="tocnumber">3.4</span> <span class="toctext">Memory Protection Fault Registers</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#What_is_an_invalid_access.3F"><span class="tocnumber">3.5</span> <span class="toctext">What is an invalid access?</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Actions_taken_on_access_violation"><span class="tocnumber">3.6</span> <span class="toctext">Actions taken on access violation</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Example_use_cases_for_MPPA_settings"><span class="tocnumber">3.7</span> <span class="toctext">Example use cases for MPPA settings</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Memory_Protection_Coverage_on_the_TMS320TCI6616"><span class="tocnumber">4</span> <span class="toctext">Memory Protection Coverage on the TMS320TCI6616</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#C66x_CorePac"><span class="tocnumber">4.1</span> <span class="toctext">C66x CorePac</span></a>
<ul>
<li class="toclevel-3 tocsection-13"><a href="#Local_memory_space_.28Addresses_0x00000000-0x00FFFFFF.29"><span class="tocnumber">4.1.1</span> <span class="toctext">Local memory space (Addresses 0x00000000-0x00FFFFFF)</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Internal_configuration_space_.28Addresses_0x01000000-0x01BFFFFF.29"><span class="tocnumber">4.1.2</span> <span class="toctext">Internal configuration space (Addresses 0x01000000-0x01BFFFFF)</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#External_configuration_space_.28Addresses_0x01C00000-0x0BFFFFFF.29"><span class="tocnumber">4.1.3</span> <span class="toctext">External configuration space (Addresses 0x01C00000-0x0BFFFFFF)</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#External_Master_DMA_.28MDMA.29_space_.28Addresses_0x0C000000-0xFFFFFFFF.29"><span class="tocnumber">4.1.4</span> <span class="toctext">External Master DMA (MDMA) space (Addresses 0x0C000000-0xFFFFFFFF)</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#Memory_Protection_and_Address_Extension_Unit_.28MPAX.29"><span class="tocnumber">4.1.4.1</span> <span class="toctext">Memory Protection and Address Extension Unit (MPAX)</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#Memory_Protection_registers_of_the_XMC"><span class="tocnumber">4.1.4.2</span> <span class="toctext">Memory Protection registers of the XMC</span></a></li>
<li class="toclevel-4 tocsection-19"><a href="#Operation_when_an_access_does_not_match_any_MPAX_segment"><span class="tocnumber">4.1.4.3</span> <span class="toctext">Operation when an access does not match any MPAX segment</span></a></li>
<li class="toclevel-4 tocsection-20"><a href="#Operation_when_an_access_matches_multiple_MPAX_segments"><span class="tocnumber">4.1.4.4</span> <span class="toctext">Operation when an access matches multiple MPAX segments</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-21"><a href="#Reserved_areas"><span class="tocnumber">4.1.5</span> <span class="toctext">Reserved areas</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-22"><a href="#Multi-Core_Shared_Memory_Controller_.28MSMC.29"><span class="tocnumber">4.2</span> <span class="toctext">Multi-Core Shared Memory Controller (MSMC)</span></a>
<ul>
<li class="toclevel-3 tocsection-23"><a href="#Segment-based_protection"><span class="tocnumber">4.2.1</span> <span class="toctext">Segment-based protection</span></a></li>
<li class="toclevel-3 tocsection-24"><a href="#Protection_of_the_MSMC_registers"><span class="tocnumber">4.2.2</span> <span class="toctext">Protection of the MSMC registers</span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Operation_when_an_access_does_not_match_any_segment"><span class="tocnumber">4.2.3</span> <span class="toctext">Operation when an access does not match any segment</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Operation_when_an_access_matches_multiple_segments"><span class="tocnumber">4.2.4</span> <span class="toctext">Operation when an access matches multiple segments</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#System-Level_Memory_Protection_Units_.28MPUs.29"><span class="tocnumber">4.3</span> <span class="toctext">System-Level Memory Protection Units (MPUs)</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#Note_on_the_protection_checks"><span class="tocnumber">4.3.1</span> <span class="toctext">Note on the protection checks</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Operation_when_an_access_does_not_match_any_range"><span class="tocnumber">4.3.2</span> <span class="toctext">Operation when an access does not match any range</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Operation_when_an_access_matches_multiple_ranges"><span class="tocnumber">4.3.3</span> <span class="toctext">Operation when an access matches multiple ranges</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#EDMA3"><span class="tocnumber">4.4</span> <span class="toctext">EDMA3</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Summary_of_modules_that_support_memory_protection"><span class="tocnumber">4.5</span> <span class="toctext">Summary of modules that support memory protection</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#L1P"><span class="tocnumber">4.5.1</span> <span class="toctext">L1P</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#L1D"><span class="tocnumber">4.5.2</span> <span class="toctext">L1D</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#L2"><span class="tocnumber">4.5.3</span> <span class="toctext">L2</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#EMC_Controller"><span class="tocnumber">4.5.4</span> <span class="toctext">EMC Controller</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#CorePac_Internal_Configuration_System"><span class="tocnumber">4.5.5</span> <span class="toctext">CorePac Internal Configuration System</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#XMC_Controller"><span class="tocnumber">4.5.6</span> <span class="toctext">XMC Controller</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#MSMC_Controller"><span class="tocnumber">4.5.7</span> <span class="toctext">MSMC Controller</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#Memory_Protection_Units_.28MPUs.29"><span class="tocnumber">4.5.8</span> <span class="toctext">Memory Protection Units (MPUs)</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#EDMA3_2"><span class="tocnumber">4.5.9</span> <span class="toctext">EDMA3</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-42"><a href="#Summary_of_memory_protection_fault_events_and_reporting"><span class="tocnumber">4.6</span> <span class="toctext">Summary of memory protection fault events and reporting</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-43"><a href="#Considerations_for_memory_protection_configuration"><span class="tocnumber">5</span> <span class="toctext">Considerations for memory protection configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-44"><a href="#Application_layout"><span class="tocnumber">5.1</span> <span class="toctext">Application layout</span></a></li>
<li class="toclevel-2 tocsection-45"><a href="#Routing_of_events"><span class="tocnumber">5.2</span> <span class="toctext">Routing of events</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Interrupts_vs._Exceptions"><span class="tocnumber">5.3</span> <span class="toctext">Interrupts vs. Exceptions</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Exception_handler_considerations"><span class="tocnumber">5.4</span> <span class="toctext">Exception handler considerations</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-48"><a href="#Example_application_and_memory_protection_configuration"><span class="tocnumber">6</span> <span class="toctext">Example application and memory protection configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-49"><a href="#Example_Application_Layout"><span class="tocnumber">6.1</span> <span class="toctext">Example Application Layout</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-50"><a href="#Questions_and_answers"><span class="tocnumber">7</span> <span class="toctext">Questions and answers</span></a></li>
<li class="toclevel-1 tocsection-51"><a href="#Conclusions"><span class="tocnumber">8</span> <span class="toctext">Conclusions</span></a></li>
<li class="toclevel-1 tocsection-52"><a href="#References"><span class="tocnumber">9</span> <span class="toctext">References</span></a></li>
<li class="toclevel-1 tocsection-53"><a href="#Appendix_A._Example_code"><span class="tocnumber">10</span> <span class="toctext">Appendix A. Example code</span></a></li>
<li class="toclevel-1 tocsection-54"><a href="#Appendix_B._Abbreviations"><span class="tocnumber">11</span> <span class="toctext">Appendix B. Abbreviations</span></a></li>
</ul>
</div>

</td></tr></tbody></table>
<h1><span class="mw-headline" id="Purpose_of_memory_protection">Purpose of memory protection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=1" title="Edit section: Purpose of memory protection">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Early detection of unintended memory accesses is vital in SW development on today‚Äôs complex system on chip (SoC) devices such as the TMS320TCI6616 with four DSP cores, several master DMA ports and HW accelerators (see <a rel="nofollow" class="external text" href="http://www.ti.com/lit/gpn/tms320tci6616">TMS320TCI6616 Communications Infrastructure Digital Signal Processor Data Sheet (SPRS624)</a>). Such memory accesses arise from programming errors such as uninitialized pointers, uncoordinated accesses to shared resources, peripheral configuration errors, etc. The symptoms of such programming errors can be anything from no issues to fatal errors leading to system crash. They may be very hard to find as there can be a long time between the point where an erroneous access is made to the moment when it produces detectable consequences. Memory protection in HW allows for detecting such unintended accesses at the moment when they occur, and provides means to block the access and notify the system. 
</p><p>Memory protection provides many benefits to a system. Memory protection functionality can:
</p>
<ul><li>Protect operating system data structures from poorly behaving code.</li>
<li>Aid in debugging by providing greater information about illegal memory accesses.</li>
<li>Allow the operating system to enforce clearly defined boundaries between supervisor and user mode accesses, leading to greater system robustness.</li></ul>
<p>Of course this behavior doesn‚Äôt come for free. You‚Äôll have to design the SW and configure the memory protection of various modules appropriately to make the system less susceptible for fails. These considerations we‚Äôll discuss in the following chapters.
</p><p><span id="Figure_1"></span>
</p>
<table border="&#123;&#123;&#123;border&#125;&#125;&#125;" align="&#123;&#123;&#123;align&#125;&#125;&#125;">

<tbody><tr>
<td align="center"><a href="File_TMS320TCI6616_FunctionalBlockDiagram.html" class="image"><img alt="TMS320TCI6616 FunctionalBlockDiagram.JPG" src="https://processors.wiki.ti.com/images/1/12/TMS320TCI6616_FunctionalBlockDiagram.JPG" width="500" height="514" /></a>
</td></tr>
<tr>
<td align="center"><b>Figure 1 - TMS320TCI6616 Functional Block Diagram</b>
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Memory_Protection_Documentation">Memory Protection Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=2" title="Edit section: Memory Protection Documentation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>As we will observe in the next chapter, the memory protection architecture is distributed. So is the documentation. Here is a list of documents to look for memory protection documentation:
</p>
<ul><li><a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a> ‚Äì C66x CorePac reference guide
<ul><li>General memory protection architecture description</li>
<li>Descriptions of memory protection features of each of the CorePac internal modules</li></ul></li>
<li><a href="http://www.ti.com/lit/pdf/sprugw5" class="extiw" title="tidoc:sprugw5">SPRUGW5</a> ‚Äì C66x Memory Protection Unit User‚Äôs Guide
<ul><li>Description and usage of the system-level memory protection units</li></ul></li>
<li>Device datasheet
<ul><li>Description of the implementation of various memory protection features on the particular device</li></ul></li>
<li>Module User‚Äôs Guides
<ul><li>The module user‚Äôs guides describe memory protection features for modules (such as EDMA3) that implement them.</li></ul></li></ul>
<h1><span class="mw-headline" id="Memory_Protection_Architecture">Memory Protection Architecture</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=3" title="Edit section: Memory Protection Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Memory protection on the KeyStone architecture is implemented in a distributed manner. Each module that provides memory protection features implements a set of commonly defined registers for setting the permissions and capturing violations. In addition, the CorePac implements some registers for capturing bus access errors. Access violations also trigger system events that can be routed as interrupts or exceptions to the CorePacs. In this chapter we look at the memory protection architecture in detail.
</p>
<h2><span class="mw-headline" id="Privilege_Levels">Privilege Levels</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=4" title="Edit section: Privilege Levels">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Code running on the DSP executes in one of two privilege modes: supervisor mode or user mode. The default after reset is supervisor mode. The mode can be changed via a SW exception procedure that is documented in the TMS320C66x DSP CPU and Instruction Set Reference Guide (literature number <a href="http://www.ti.com/lit/pdf/sprugh7" class="extiw" title="tidoc:sprugh7">SPRUGH7</a>) and not described here. Supervisor code is considered more trusted than user code. Examples of supervisor threads include operating system kernels and hardware device drivers. Examples of user threads include vocoders and end applications. Supervisor mode is generally granted access to peripheral registers and the memory protection configuration. User mode is generally confined to the memory spaces that the operating system (OS) specifically designates for its use.
</p><p>DSP accesses as well as internal and external DMA accesses have a privilege level associated with them. The DSP privilege level is determined as described above. The Internal DMA accesses that are initiated by the DSP inherit the DSP's privilege level at the time they are initiated. The privilege level for external DMA accesses is device-dependent and described in the device datasheet. The privilege level assignment of the TMS320TCI6616 device is provided in <a href="#Table_1">Table 1</a> as an example. 
</p>
<table class="wikitable" id="Table_1">
<caption>Table 1. - Device master privilege level settings on the TMS320TCI6616
</caption>
<tbody><tr>
<th>Privilege ID</th>
<th>Master</th>
<th>Privilege Level
</th></tr>
<tr>
<td>0</td>
<td>CorePac 0</td>
<td>SW dependent
</td></tr>
<tr>
<td>1</td>
<td>CorePac 1</td>
<td>SW dependent
</td></tr>
<tr>
<td>2</td>
<td>CorePac 2</td>
<td>SW dependent
</td></tr>
<tr>
<td>3</td>
<td>CorePac 3</td>
<td>SW dependent
</td></tr>
<tr>
<td>4</td>
<td>AIF</td>
<td>User
</td></tr>
<tr>
<td>5</td>
<td>TAC</td>
<td>User
</td></tr>
<tr>
<td>6</td>
<td>RAC</td>
<td>User
</td></tr>
<tr>
<td>7</td>
<td>FFTC</td>
<td>User
</td></tr>
<tr>
<td>8</td>
<td>PA_SS</td>
<td>User
</td></tr>
<tr>
<td>9</td>
<td>SRIO</td>
<td>User / Driven by SRIO block. User mode and supervisor mode is determined by per transaction basis. Only the transaction with source ID matching the value in SupervisorID register is granted supervisor mode
</td></tr>
<tr>
<td>10</td>
<td>Multicore Navigator</td>
<td>User
</td></tr>
<tr>
<td>11</td>
<td>PCIe</td>
<td>Supervisor
</td></tr>
<tr>
<td>12</td>
<td>Debug Access Point</td>
<td>Driven by debug subsystem
</td></tr>
<tr>
<td>13</td>
<td>Reserved</td>
<td>Supervisor
</td></tr>
<tr>
<td>14</td>
<td>Reserved</td>
<td>Supervisor
</td></tr>
<tr>
<td>15</td>
<td>Reserved</td>
<td>User
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Privilege_ID">Privilege ID</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=5" title="Edit section: Privilege ID">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Each requestor on a KeyStone device (CorePacs, SRIO, EMAC, etc.) has an ID for privilege purposes. This ID accompanies all memory accesses made on behalf of that requestor. The privilege IDs on the TMS320TCI6616 device are shown in <a href="#Table_1">Table 1</a>.
</p><p>The privilege IDs of the device masters are mapped to the Allowed IDs in the MPPA registers either directly (as is the case with the MPU units on the TMS320TCI6616 device), or via a mapping table. In the case of CorePac local memory protection settings, the CorePac implements a set of mapping registers PAMAP0...PAMAP15 that map the Privilege IDs of the system into a smaller set of Allowed IDs that the CorePac understands (see <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>).
</p>
<h2><span class="mw-headline" id="Memory_Protection_Pages_and_Page_Attribute_Registers">Memory Protection Pages and Page Attribute Registers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=6" title="Edit section: Memory Protection Pages and Page Attribute Registers">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For memory protection purposes, memory is divided into pages. The page sizes on the TMS320TCI6616 device are shown in <a href="#Table_2">Table 2</a>.
</p>
<table class="wikitable" id="Table_2">
<caption>Table 2. - Memory Protection Page Sizes on the TMS320TCI6616 Device.
</caption>
<tbody><tr>
<th>Memory</th>
<th>Number of Pages</th>
<th>Page Size
</th></tr>
<tr>
<td>L1P</td>
<td>16</td>
<td>2 kB
</td></tr>
<tr>
<td>L1D</td>
<td>16</td>
<td>2 kB
</td></tr>
<tr>
<td>L2</td>
<td>32</td>
<td>32 kB
</td></tr>
<tr>
<td>Shared L2</td>
<td>Configurable via MPAX</td>
<td>Configurable via MPAX
</td></tr>
<tr>
<td>DDR3</td>
<td>Configurable via MPAX</td>
<td>Configurable via MPAX
</td></tr>
<tr>
<td>MPU-protected peripherals (CORE/3 CFG TeraNet, PacketDMA config and data ports, Semaphore and RAC)</td>
<td>Configurable via MPU</td>
<td>Configurable via MPU
</td></tr></tbody></table>
<p>For each page, there is a corresponding Memory Protection Page Attribute Register (MPPA) of the form described in <a href="#Figure_2">Figure 2</a> and <a href="#Table_3">Table 3</a>. Note that not all of the bits might be implemented on a particular module. For example, the C66x CorePac only implements AID0-AID5 (and AIDX which covers the rest of the Allowed IDs) of the allowed ID bits. The meaning of each individual bit is that when set, access is granted, and when cleared, access is denied.
</p><p><span id="Figure_2"></span>
</p>
<table border="&#123;&#123;&#123;border&#125;&#125;&#125;" align="&#123;&#123;&#123;align&#125;&#125;&#125;">

<tbody><tr>
<td align="center"><a href="File_MPPA_Register.html" class="image"><img alt="MPPA Register.JPG" src="https://processors.wiki.ti.com/images/4/48/MPPA_Register.JPG" width="850" height="146" /></a>
</td></tr>
<tr>
<td align="center"><b>Figure 2 - Memory Protection Page Attribute (MPPA) Register.</b>
</td></tr></tbody></table>
<table class="wikitable" id="Table_3">
<caption>Table 3. - Meanings of the bits in the MPPA register.
</caption>
<tbody><tr>
<th>Bit Field</th>
<th>Meaning When Set</th>
<th>Meaning When Cleared
</th></tr>
<tr>
<td>AIDn (n=0‚Ä¶5)</td>
<td>Allow accesses from ID = n</td>
<td>Deny accesses from ID = n
</td></tr>
<tr>
<td>AIDx</td>
<td>Allow accesses from ID &gt; 5</td>
<td>Deny accesses from ID &gt; 5
</td></tr>
<tr>
<td>LOCAL</td>
<td>Allow access from CPU to its local memories (L1/L2 only)</td>
<td>Deny access from CPU to its local memories (L1/L2 only)
</td></tr>
<tr>
<td>SR</td>
<td>Allow supervisor reads</td>
<td>Deny supervisor reads
</td></tr>
<tr>
<td>SW</td>
<td>Allow supervisor writes</td>
<td>Deny supervisor writes
</td></tr>
<tr>
<td>SX</td>
<td>Allow supervisor execute</td>
<td>Deny supervisor execute
</td></tr>
<tr>
<td>SR</td>
<td>Allow user reads</td>
<td>Deny user reads
</td></tr>
<tr>
<td>SW</td>
<td>Allow user writes</td>
<td>Deny user writes
</td></tr>
<tr>
<td>SX</td>
<td>Allow user execute</td>
<td>Deny user execute
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Memory_Protection_Fault_Registers">Memory Protection Fault Registers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=7" title="Edit section: Memory Protection Fault Registers">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Each module that supports memory protection implements the following registers:
</p>
<ul><li>Memory protection fault address register (MPFAR)
<ul><li>Captures the address of the access causing the fault</li></ul></li>
<li>Memory protection fault status register (MPFSR)
<ul><li>Captures the type of access (User/Supervisor Read/Write/Execute) and the privilege ID of the master that performed the access</li></ul></li>
<li>Memory protection fault command register (MPFCR)
<ul><li>Used to clear a previous fault so that subsequent faults can be detected</li></ul></li></ul>
<p><a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a> provides more details on these registers.
</p>
<h2><span id="What_is_an_invalid_access?"></span><span class="mw-headline" id="What_is_an_invalid_access.3F">What is an invalid access?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=8" title="Edit section: What is an invalid access?">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Invalid accesses include:
</p>
<ul><li>Offending access to a memory page that is protected by an MPPA register or MPAX memory protection settings</li>
<li>Access to unimplemented memory space (for example, some reserved area in the memory map)</li>
<li>Write access to a read-only register, or read access to a write-only register</li>
<li>Write access to a register that is locked from write accesses.</li></ul>
<h2><span class="mw-headline" id="Actions_taken_on_access_violation">Actions taken on access violation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=9" title="Edit section: Actions taken on access violation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Hardware memory protection performs the following when an access violation is detected:
</p>
<ul><li>The access is denied (reads return garbage, writes are blocked)</li>
<li>Faulting address is captured in the MPFAR register</li>
<li>Type of faulting access is captured in the MPFSR register</li>
<li>Event is generated to alert the system on the violation</li></ul>
<p>The software should perform the following to handle the violations:
</p>
<ul><li>At initialization, route the memory protection events that you want to monitor as interrupts / exceptions to the CorePac
<ul><li>Some events are directly routed to CorePac interrupt controller (INTC), some events are routed via the system-level interrupt controller INTC0</li></ul></li>
<li>In the interrupt service routine (ISR):
<ul><li>Read the MPFAR and MPFSR registers to see the reason for the violation</li>
<li>Write 0x1 to the MPFCR register to clear the fault (required so that subsequent faults can be reported)</li></ul></li></ul>
<h2><span class="mw-headline" id="Example_use_cases_for_MPPA_settings">Example use cases for MPPA settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=10" title="Edit section: Example use cases for MPPA settings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Using the MPPAs of the CorePac local memories as an example, some example use cases and corresponding MPPA settings are given in <a href="#Table_4">Table 4</a>.
</p>
<table class="wikitable" id="Table_4">
<caption>Table 4. - Example use cases and MPPA register settings.
</caption>
<tbody><tr>
<th>Register</th>
<th>Protected Memory range</th>
<th>Address</th>
<th>Value</th>
<th>Meaning of the setting</th>
<th>Application uses this page for...
</th></tr>
<tr>
<td>L1DMPPA16-L1DMPPA31</td>
<td>0x00F00000 ‚Äì 0x00F07FFF</td>
<td>0x0184AE40 - 0x0184AE7C</td>
<td>0x00000000</td>
<td>Deny all accesses</td>
<td>Cache (32 kB)
</td></tr>
<tr>
<td>L1PMPPA20</td>
<td>0x00E02000 ‚Äì 0x00E027FF</td>
<td>0x0184A650</td>
<td>0x00000108</td>
<td>Allow only local DSP core execute in supervisor mode, deny all other accesses</td>
<td>Critical operating system routine
</td></tr>
<tr>
<td>L2MPPA10</td>
<td>0x00850000 ‚Äì 0x00857FFF</td>
<td>0x0184A228</td>
<td>0x00007D06</td>
<td>Allow user read+write for local DSP core and AID0‚Ä¶3 (assumed that Core 0...3 are mapped to AID0‚Ä¶3, and Multicore Navigator to AID4), deny all other accesses</td>
<td>Buffers for inter-core communication by EDMA3 and Multicore Navigator, accessed by the local DSP by user mode tasks.
</td></tr>
<tr>
<td>L2MPPA11</td>
<td>0x00858000 ‚Äì 0x0085FFFF</td>
<td>0x0184A22C</td>
<td>0x00000109</td>
<td>Allow only local DSP core execute in user and supervisor mode, deny all other accesses</td>
<td>User code and OS kernels
</td></tr>
<tr>
<td>L2MPPA24-L2MPPA31</td>
<td>0x008C0000 ‚Äì 0x008FFFFF</td>
<td>0x0184A260 - 0x0184A27C</td>
<td>0x00000000</td>
<td>Deny all accesses</td>
<td>Cache (256 kB)
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Memory_Protection_Coverage_on_the_TMS320TCI6616">Memory Protection Coverage on the TMS320TCI6616</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=11" title="Edit section: Memory Protection Coverage on the TMS320TCI6616">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In this chapter we go through each module that contains memory protection features on the TMS320TCI6616 device. Due to the distributed nature of the memory protection architecture, it is possible that an invalid memory access is protected by multiple modules and thus also causes multiple system events to get asserted on the same access. This chapter attempts to collect together the information on which modules provide protection support for which memory ranges, which system events get generated, and which registers are used to capture information on the faulting accesses. The events and fault reporting are summarized at the end of the chapter.
</p>
<h2><span class="mw-headline" id="C66x_CorePac">C66x CorePac</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=12" title="Edit section: C66x CorePac">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="Local_memory_space_(Addresses_0x00000000-0x00FFFFFF)"></span><span class="mw-headline" id="Local_memory_space_.28Addresses_0x00000000-0x00FFFFFF.29">Local memory space (Addresses 0x00000000-0x00FFFFFF)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=13" title="Edit section: Local memory space (Addresses 0x00000000-0x00FFFFFF)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The local memory space consists of the L1P, L1D and local L2 memories, and reserved areas. 
</p><p>In general, the local memory controllers report violations that are directly served by that controller. For example, if a data read by the local DSP core is made to local L2 memory and the access results in a violation (due to the L2 MPPA settings), the violation is reported by L1D controller (and not L2 controller), because the L1D controller will be the one finally servicing the read and returning it to the DSP core. On the other hand, if the access was a write instead of a read, then the violation would be reported by the L2 controller as it is the one servicing the write.
</p><p>Protection on accesses to reserved areas is discussed in section <a href="#Reserved_areas">4.1.5</a>.
</p><p>The L1P, L1D and L2 controllers have two output events each; one for local DSP core access faults and one for DMA access faults. These events (120-125) are input to the CorePac interrupt controller. Also, each of the controllers implements its own memory protection registers (MPPAn, MPFAR, MPFSR, MPFCR), which are documented in <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>.
</p><p>As an additional level of protection, the L1P, L1D and L2 controllers implement a simple locking mechanism to protect against disallowed accesses to the memory protection registers themselves. This is also documented in <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>.
</p>
<h3><span id="Internal_configuration_space_(Addresses_0x01000000-0x01BFFFFF)"></span><span class="mw-headline" id="Internal_configuration_space_.28Addresses_0x01000000-0x01BFFFFF.29">Internal configuration space (Addresses 0x01000000-0x01BFFFFF)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=14" title="Edit section: Internal configuration space (Addresses 0x01000000-0x01BFFFFF)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The internal configuration space contains the memory mapped configuration registers of entities internal to the CorePac (e.g., IDMA, local memory controllers, interrupt controller, etc.).
</p><p>There are two events associated with access faults in this memory space. These events (119 and 126) are input to the CorePac interrupt controller. 
</p><p>Event 119 captures access faults from the interrupt controller module itself and the Power and Sleep Controller (PSC) module (mainly within address range 0x01800000-0x0180FFFF). There are no access fault reporting registers associated with that event. 
</p><p>Event 126 captures access faults to the rest of the internal configuration space (mainly within address range 0x01810000-0x0185FFFF). Invalid writes are trapped in the internal configuration memory protection fault registers described in <a href="#Table_5">Table 5</a>. Invalid reads are reported by the initiator (L1P for program fetch accesses, L1D for data reads) in their corresponding memory protection fault registers.
</p>
<table class="wikitable" id="Table_5">
<caption>Table 5: Internal Configuration Space Memory Protection Fault Registers.
</caption>
<tbody><tr>
<th>Register</th>
<th>Address</th>
<th>Description
</th></tr>
<tr>
<td>ICFG MPFAR</td>
<td>0x01820300</td>
<td>Memory Protection Fault Address Register
</td></tr>
<tr>
<td>ICFG MPFSR</td>
<td>0x01820304</td>
<td>Memory Protection Fault Status Register
</td></tr>
<tr>
<td>ICFG MPFCR</td>
<td>0x01820308</td>
<td>Memory Protection Fault Command Register
</td></tr></tbody></table>
<h3><span id="External_configuration_space_(Addresses_0x01C00000-0x0BFFFFFF)"></span><span class="mw-headline" id="External_configuration_space_.28Addresses_0x01C00000-0x0BFFFFFF.29">External configuration space (Addresses 0x01C00000-0x0BFFFFFF)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=15" title="Edit section: External configuration space (Addresses 0x01C00000-0x0BFFFFFF)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The external configuration space is divided into two parts: 
</p><p>The first part is address range 0x01C00000-0x07FFFFFF, and contains the memory mapped configuration registers of modules external to the CorePac (e.g., EDMA3, SRIO, Multicore Navigator, etc.). Accesses to this space are handled by the CFG port of the EMC controller of the CorePac (see <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>). The EMC does not implement the MPFAR, MPFSR, and MPFCR registers. Instead, access violations are trapped in the ECFGERR register (see <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>). 
</p><p>The second part is address range 0x08000000-0x0BFFFFFF. These addresses are presented to the XMC controller, and contains accesses to memory mapped configuration registers (including those of the XMC itself). The XMC and its Memory Protection and Address Extension Unit (MPAX) are discussed further in section <a href="#External_Master_DMA_.28MDMA.29_space_.28Addresses_0x0C000000-0xFFFFFFFF.29">4.1.4</a>.
</p><p>Note that accesses to the range 0x00000000-0x07FFFFFF are decoded by the CorePac itself, and are not presented to the MPAX unit of the XMC controller. Furthemore, accesses to the range 0x08000000-0x0BFFFFFF are considered accesses to memory mapped control registers. The MPAX unit does not modify these addresses, nor does it perform a segment-based protection check for accesses in this range, regardless of whether a segment overlaps this range. The MPAX unit is further discussed in section <a href="#Memory_Protection_and_Address_Extension_Unit_.28MPAX.29">4.1.4.1</a>
</p>
<h3><span id="External_Master_DMA_(MDMA)_space_(Addresses_0x0C000000-0xFFFFFFFF)"></span><span class="mw-headline" id="External_Master_DMA_.28MDMA.29_space_.28Addresses_0x0C000000-0xFFFFFFFF.29">External Master DMA (MDMA) space (Addresses 0x0C000000-0xFFFFFFFF)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=16" title="Edit section: External Master DMA (MDMA) space (Addresses 0x0C000000-0xFFFFFFFF)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This memory space includes accesses to the shared L2 memory as well as external memory via the Multicore Shared Memory Controller (MSMC). Accesses to this space are handled in the CorePac by the XMC controller. Memory protection and address extension are provided together in a unit called MPAX, which is contained in the XMC. The MPAX unit thus provides memory protection for the shared L2 memory and external memory.
</p>
<h4><span id="Memory_Protection_and_Address_Extension_Unit_(MPAX)"></span><span class="mw-headline" id="Memory_Protection_and_Address_Extension_Unit_.28MPAX.29">Memory Protection and Address Extension Unit (MPAX)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=17" title="Edit section: Memory Protection and Address Extension Unit (MPAX)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The MPAX defines 16 segments of runtime-selectable size that project C66x CorePac‚Äôs 32-bit address space into a larger 36-bit address space. In addition, each segment has a corresponding set of permissions (Supervisor/User Read/Write/Execute) to control accesses to that segment. The segment sizes can be individually configured and can range from 4 kB to 4 GB per segment. The segments can also overlap each other. When there are multiple segments matching the incoming logical address, the highest numbered segment takes precedence over the lower numbered segments. See <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a> for a detailed description of the MPAX unit.
</p><p>The MPAX unit will report memory protection violations on accesses to the programmed segments based on the access privilege settings in the PROT field of the XMPAXLn segment registers. If the incoming logical address does not match any of the segments (but is within the MDMA space), the XMC controller will consider this as an access with no permissions and report this back to the L2 controller, which will flag it as the MDMAERREVT (CorePac interrupt controller input event #110) and report it in the MDMAERR register (see <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>).
</p>
<h4><span class="mw-headline" id="Memory_Protection_registers_of_the_XMC">Memory Protection registers of the XMC</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=18" title="Edit section: Memory Protection registers of the XMC">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The XMC does not implement MPPA registers. Instead, the MPAX unit segment registers contain an 8-bit permission field similar to the 8 LSBs of the MPPA register (see Figure 2).
</p><p>The XMC controller performs specific checks on accesses on its own configuration registers. This is not done as part of the MPAX segment checks. Violations are captured in the XMC memory protection fault registers and reported back to L2 controller, which flags them by asserting CorePac interrupt controller input event #110.
</p><p>The XMC controller implements its own memory protection fault registers (XMPFAR, XMPFSR, XMPFCR), which are documented in <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>. 
</p>
<h4><span class="mw-headline" id="Operation_when_an_access_does_not_match_any_MPAX_segment">Operation when an access does not match any MPAX segment</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=19" title="Edit section: Operation when an access does not match any MPAX segment">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the case when the accessed address does not match any of the programmed segments, the XMC considers the access as not allowed. In this case, the XMC considers this as an access with no permissions and report this back to the L2 controller, which will flag it as the MDMAERREVT (CorePac interrupt controller input event #110) and report it in the MDMAERR register (see <a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">SPRUGW0</a>]). 
</p>
<h4><span class="mw-headline" id="Operation_when_an_access_matches_multiple_MPAX_segments">Operation when an access matches multiple MPAX segments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=20" title="Edit section: Operation when an access matches multiple MPAX segments">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the case when the accessed address matches two or more programmed segments, the XMC will assume the permission settings of the highest numbered segment and ignores the permission settings of the lower numbered segments. 
</p>
<h3><span class="mw-headline" id="Reserved_areas">Reserved areas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=21" title="Edit section: Reserved areas">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Accesses to the reserved areas in the memory map generate memory protection events by virtue of the area not being implemented. Note, however, that this behavior is not guaranteed, as there could be parts of the reserved area implemented for use, e.g., in internal testing.
</p>
<h2><span id="Multi-Core_Shared_Memory_Controller_(MSMC)"></span><span class="mw-headline" id="Multi-Core_Shared_Memory_Controller_.28MSMC.29">Multi-Core Shared Memory Controller (MSMC)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=22" title="Edit section: Multi-Core Shared Memory Controller (MSMC)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The MSMC controller is described in detail in <a href="http://www.ti.com/lit/pdf/sprugw7" class="extiw" title="tidoc:sprugw7">SPRUGW7</a>. A brief introduction is given here, focus being on the memory protection features.
</p><p>The MSMC handles accesses from all system masters and CorePacs to its own configuration registers, the shared L2 memory and the external memory. It has dedicated ports for the CorePacs, and two additional ports called the SMS and SES. 
</p><p>The SMS port handles accesses from system masters (other than CorePacs) to the shared L2 logical memory space and the MSMC configuration registers. Any accesses through the SMS port that does not address either shared L2 or MSMC configuration registers will result in an addressing error returned to the requesting master. 
</p><p>The SES port handles accesses from system masters (other than CorePacs) to the external logical memory space and the EMIF memory mapped registers. Any accesses through the SES port that does not address either the external memory logical space or the EMIF memory mapped registers result in an addressing error returned to the requesting master.
</p><p>Both system slave interfaces (SES and SMS) feature a Memory Protection and Address Extension (MPAX) unit similar to the MPAX unit inside the C66x CorePac (see section <a href="#Memory_Protection_and_Address_Extension_Unit_.28MPAX.29">4.1.4.1</a>) that combines these functions into a single process. This allows the creation of a programmer‚Äôs view of the memory that is consistent between the C66x CorePac and other system masters (particularly DMA masters).
</p>
<h3><span class="mw-headline" id="Segment-based_protection">Segment-based protection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=23" title="Edit section: Segment-based protection">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The MPAX units of the SMS and SES ports contain registers for programming 8 segments for each of the 16 privilege IDs. Each of the segments can be programmed with allowed access types (User/Supervisor Read/Write/Execute). Violations will trigger system event MSMC_mpf_errorn, where n is the privilege ID of the requestor making the offending access. The mapping of these events is described in the device datasheet. Addresses that match multiple segments, or not matching any segments while being within the range controlled by the MPAX units, are treated the same way as described in section <a href="#Memory_Protection_and_Address_Extension_Unit_.28MPAX.29">4.1.4.1</a>, except that the event raised is the MSMC_mpf_errorn, and the fault is reported by MSMC. The MSMC implements its own memory protection fault registers SMPFAR and SMPFSR, which are documented in <a href="http://www.ti.com/lit/pdf/sprugw7" class="extiw" title="tidoc:sprugw7">SPRUGW7</a>. It also implements a SMPFXR (Shared Memory Protection Fault Extension Register). The NM bit (bit 0) of that register is set when the fault is caused by the address not matching any of the segments.
</p>
<h3><span class="mw-headline" id="Protection_of_the_MSMC_registers">Protection of the MSMC registers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=24" title="Edit section: Protection of the MSMC registers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Accesses to the segment registers through system masters is automatically protected as these registers are addressed by Privilege ID such that each Privilege ID has access to only its set of eight pairs of segment registers. Accesses to MPAX segment registers with a mismatched Privilege ID will generate a protection error.
</p><p>In addition, the MSMC features a simple lock mechanism to protect against runaway pointer writes to its registers. This lock mechanism is described in <a href="http://www.ti.com/lit/pdf/sprugw7" class="extiw" title="tidoc:sprugw7">SPRUGW7</a>.
</p>
<h3><span class="mw-headline" id="Operation_when_an_access_does_not_match_any_segment">Operation when an access does not match any segment</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=25" title="Edit section: Operation when an access does not match any segment">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In the case when the accessed address does not match any of the programmed segments, the MSMC considers this as an access with no permissions and raise the MSMC_mpf_errorn event. The faulting address and status are reported in MSMC‚Äôs SMPFAR and SMPFSR registers. In addition, The NM bit (bit 0) of the SMPFXR register is set to indicate that the fault is caused by the address not matching any of the segments. 
</p>
<h3><span class="mw-headline" id="Operation_when_an_access_matches_multiple_segments">Operation when an access matches multiple segments</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=26" title="Edit section: Operation when an access matches multiple segments">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In the case when the accessed address matches two or more programmed segments, the XMC will assume the permission settings of the highest numbered segment and ignores the permission settings of the lower numbered segments. 
</p>
<h2><span id="System-Level_Memory_Protection_Units_(MPUs)"></span><span class="mw-headline" id="System-Level_Memory_Protection_Units_.28MPUs.29">System-Level Memory Protection Units (MPUs)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=27" title="Edit section: System-Level Memory Protection Units (MPUs)">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>On the TMS320TCI6616 device there are five system-level MPUs that protect the address ranges as described in <a href="#Table_6">Table 6</a>. Each MPU contains a number of programmable-size ranges (as described in <a href="#Table_6">Table 6</a>) within the memory range that the particular MPU is protecting. Each range has its corresponding MPPA register similar to that shown in Figure 2. For example, accesses directed to the main configuration crossbar (CFG SCR) memory space  0x01D00000-0x026203FF can be divided into 16 ranges with programmable sizes (1 kB granularity) and each range can be given access privileges according to the associated MPPA register. 
</p><p>The MPUs implement their own memory protection fault registers FLTADDRR, FLTSTAT and FLTCLR.
</p><p>The MPU is described in detail in <a href="http://www.ti.com/lit/pdf/sprugw5" class="extiw" title="tidoc:sprugw5">SPRUGW5</a>, and the device specific parts are documented in the device datasheet.
</p>
<table class="wikitable" id="Table_6">
<caption>Table 6: MPU memory regions on the TMS320TCI6616.
</caption>
<tbody><tr>
<th></th>
<th>Memory Protection</th>
<th>Start Address</th>
<th>End Address</th>
<th>Number of programmable ranges</th>
<th>Range granularity
</th></tr>
<tr>
<td>MPU0</td>
<td>Main CFG SCR</td>
<td>0x01D00000</td>
<td>0x026203FF</td>
<td>16</td>
<td>1 kB
</td></tr>
<tr>
<td>MPU1</td>
<td>Multicore Navigator Data Port</td>
<td>0x34000000</td>
<td>0x340BFFFF</td>
<td>5</td>
<td>1 kB
</td></tr>
<tr>
<td>MPU2</td>
<td>Multicore Navigator CFG Port</td>
<td>0x02A00000</td>
<td>0x02ABFFFF</td>
<td>16</td>
<td>1 kB
</td></tr>
<tr>
<td>MPU3</td>
<td>Semaphore</td>
<td>0x02640000</td>
<td>0x026407FF</td>
<td>1</td>
<td>1 kB
</td></tr>
<tr>
<td>MPU4</td>
<td>RAC</td>
<td>0x01F80000</td>
<td>0x0215FFFF</td>
<td>2</td>
<td>1 kB
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Note_on_the_protection_checks">Note on the protection checks</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=28" title="Edit section: Note on the protection checks">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The MPUs treat the protection checks somewhat differently than other memory protection modules (such as the CorePac local memory protection and MPAX units). The MPU units assume accesses to be allowed by default, if not specifically denied by the MPPA settings. In particular, the MPU first checks the transfer‚Äôs privilege ID against the AID bit settings of the MPPA registers. If the AID bit corresponding to the privilege ID is 0, then the range will not be checked (and access is allowed). This is different to, for example, the CorePac local memory protection operation where the access is denied if the AID bit corresponding to the privilege ID is 0. See also the following two subsections for further differences.
</p>
<h3><span class="mw-headline" id="Operation_when_an_access_does_not_match_any_range">Operation when an access does not match any range</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=29" title="Edit section: Operation when an access does not match any range">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In the case when the accessed address does not match any of the programmed ranges, the MPU considers the access as allowed. Note that this is different from the MPAX units, which consider access to a non-matching segment as violations (see sections <a href="#Operation_when_an_access_does_not_match_any_MPAX_segment">4.1.4.3</a> and <a href="#Operation_when_an_access_does_not_match_any_segment">4.2.3</a>). 
</p>
<h3><span class="mw-headline" id="Operation_when_an_access_matches_multiple_ranges">Operation when an access matches multiple ranges</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=30" title="Edit section: Operation when an access matches multiple ranges">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In the case when the accessed address matches two or more ranges, the MPU assumes the privilege rights of each type to be the lowest among the matching range. Therefore, in order for the access to be allowed, all the matching ranges need to allow it. Note that this is different from the MPAX units; when an access matches multiple segments, the MPAX units assumes the privilege rights of the highest priority (highest-numbered) segment register among the group of matching segments (see sections <a href="#Operation_when_an_access_matches_multiple_MPAX_segments">4.1.4.4</a> and <a href="https://processors.wiki.ti.com/index.php?title=Operation_when_an_access_matches_multiple_segments&amp;action=edit&amp;redlink=1" class="new" title="Operation when an access matches multiple segments (page does not exist)">4.2.4</a>). 
</p>
<h2><span class="mw-headline" id="EDMA3">EDMA3</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=31" title="Edit section: EDMA3">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The EDMA3 module implements two kinds of memory protection: active and proxied. This is documented in <a href="http://www.ti.com/lit/pdf/sprugs5" class="extiw" title="tidoc:sprugs5">SPRUGS5</a>. A brief overview is given here.
</p><p>Active memory protection covers protection of invalid accesses to the EDMA3 channel controller configuration registers and parameter RAM (PaRAM). For this purpose, EDMA3 implements nine MPPA registers, one to protect accesses to the global region registers and one each to protect accesses to each of the eight shadow regions (registers and PaRAM sets). EDMA3 also implements MPFAR, MPFSR and MPFCR registers for fault reporting.
</p><p>Proxied memory protection means that each EDMA3 transfer inherits the privilege level and privilege ID of the master that programs the transfer. These values will travel along with the transfer and will be used for potential memory protection checks at various modules within the path of the transfer.
</p>
<h2><span class="mw-headline" id="Summary_of_modules_that_support_memory_protection">Summary of modules that support memory protection</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=32" title="Edit section: Summary of modules that support memory protection">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="L1P">L1P</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=33" title="Edit section: L1P">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The L1P controller monitors:
</p>
<ul><li>DSP core instruction fetches from L1P and L2</li>
<li>Accesses to L1P memory protection and cache control registers</li>
<li>DMA accesses to L1P RAM</li></ul>
<p>There are two interrupt event outputs: DSP core violation and DMA violation. These are routed to CorePac interrupt controller input events 120 and 121, respectively.
</p>
<h3><span class="mw-headline" id="L1D">L1D</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=34" title="Edit section: L1D">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The L1D controller monitors:
</p>
<ul><li>DSP core data accesses that are directly serviced by L1D (includes reads from L2)</li>
<li>Accesses to L1D memory protection and cache control registers</li>
<li>DMA accesses to L1D RAM</li></ul>
<p>There are two interrupt event outputs: DSP core violation and DMA violation. These are routed to CorePac interrupt controller input events 122 and 123, respectively.
</p>
<h3><span class="mw-headline" id="L2">L2</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=35" title="Edit section: L2">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The L2 controller monitors:
</p>
<ul><li>DSP core data accesses that are directly serviced by L2 (e.g. writes to L2)</li>
<li>Accesses to L2 memory protection and cache control registers</li>
<li>DMA accesses to L2 RAM</li>
<li>MDMA Bus Transaction Errors</li></ul>
<p>There are three interrupt event outputs: DSP core violation, DMA violation, and MDMA error. These are routed to CorePac interrupt controller input events 124, 125 and 110, respectively. 
</p>
<h3><span class="mw-headline" id="EMC_Controller">EMC Controller</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=36" title="Edit section: EMC Controller">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The EMC controller monitors transaction errors that occur in the Configuration Bus when accessing global configuration space from the CorePac DSP core. Bus errors trigger an event that is routed to CorePac interrupt controller input event 127. 
</p>
<h3><span class="mw-headline" id="CorePac_Internal_Configuration_System">CorePac Internal Configuration System</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=37" title="Edit section: CorePac Internal Configuration System">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The CorePac monitors transaction errors in accesses to its internal configuration registers. Two events capture access faults. One captures access faults to the configuration registers of the Interrupt Controller and Power and Sleep Controller (PSC) modules, and the other captures access faults to other internal configuration registers. These are routed to CorePac interrupt controller input events 119 and 126, respectively.
</p>
<h3><span class="mw-headline" id="XMC_Controller">XMC Controller</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=38" title="Edit section: XMC Controller">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The XMC controller monitors:
</p>
<ul><li>Accesses to XMC configuration registers</li>
<li>Accesses to the segments programmed with the Memory Protection and Address eXtension Unit (MPAX)</li></ul>
<h3><span class="mw-headline" id="MSMC_Controller">MSMC Controller</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=39" title="Edit section: MSMC Controller">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The MSMC controller has the following monitoring capabilities:
</p>
<ul><li>MPAX units at SMS and SES control memory protection for non-CorePac system master accesses to SL2 and external memory</li>
<li>Protection checks when a master tries to program some other master‚Äôs segment registers</li></ul>
<h3><span id="Memory_Protection_Units_(MPUs)"></span><span class="mw-headline" id="Memory_Protection_Units_.28MPUs.29">Memory Protection Units (MPUs)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=40" title="Edit section: Memory Protection Units (MPUs)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The five chip-level MPUs in the TMS320TCI6616 have the following monitoring capabilities: 
</p>
<ul><li>Chip-level MPUs for CFG Teranet, Multicore Navigator Data Port, Multicore Navigator Configuration port, Semaphore and RAC</li>
<li>Protection check of master accesses to programmable address ranges within the slave endpoints</li>
<li>The MPU generates one external interrupt that combines the following two internal interrupt signals:
<ul><li>An address error interrupt (MPU_ADDR_ERR_INT), generated when there is an addressing violation due to an access to a non-existent location in the MPU register space.</li>
<li>A protection interrupt (MPU_PROT_ERR_INT), generated when there is a protection violation of the either in the defined ranges or to the MPU registers.</li></ul></li></ul>
<h3><span class="mw-headline" id="EDMA3_2">EDMA3</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=41" title="Edit section: EDMA3">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The EDMA3 has the following monitoring capabilities: 
</p>
<ul><li>Protection checks on its own configuration registers</li>
<li>Proxied protection: PrivID and Privilege level of the programmer are inherited by an EDMA3 transfer</li></ul>
<h2><span class="mw-headline" id="Summary_of_memory_protection_fault_events_and_reporting">Summary of memory protection fault events and reporting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=42" title="Edit section: Summary of memory protection fault events and reporting">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="#Table_7">Table 7</a> and <a href="#Table_8">Table 8</a> summarize the memory protection events and reporting registers when offending accesses are made to various locations in the memory map.
</p>
<table class="wikitable" id="Table_7">
<caption>Table 7: Memory Protection Faults reported by the CorePac.
</caption>
<tbody><tr>
<th>Address range</th>
<th>Event triggered on invalid access</th>
<th>Fault Capture Register</th>
<th>Fault Capture Register Address</th>
<th>Comments
</th></tr>
<tr>
<td>0x00000000 - 0x00FFFFFF</td>
<td>120: core to L1P<br />121: DMA to L1P<br />122: core to L1D<br />123: DMA to L1D<br />124: core to L2<br />125: DMA to L2</td>
<td>L1PMPFAR /<br />L1PMPFSR /<br />L1PMPFCR,<br />L1DMPFAR /<br />L1DMPFSR /<br />L1DMPFCR,<br />L2MPFAR /<br />L2MPFSR /<br />L2MPFCR</td>
<td>0x0184A400 /<br />0x0184A404 /<br />0x0184A408,<br />0x0184AC00 /<br />0x0184AC04 /<br />0x0184AC08,<br />0x0184A000 /<br />0x0184A004 /<br />0x0184A008</td>
<td>
</td></tr>
<tr>
<td>0x01000000 - 0x01BFFFFF</td>
<td>119 (SYS_CMPA),<br />126 (EMC_CMPA)</td>
<td>ICFG MPFAR/<br />ICFG MPFSR/<br />ICFG MPFCR</td>
<td>0x01820300 /<br />0x01820304 /<br />0x01820308</td>
<td>Note: The fault reporting registers are associated with event 126. Event 119 captures faults from the interrupt controller and PSC modules. There are no fault reporting registers associated with that event.
</td></tr>
<tr>
<td>0x01C00000 - 0x07FFFFFF</td>
<td>127 (EMC_BUSERR)</td>
<td>ECFGERR /<br />ECFGERRCLR</td>
<td>0x01820408 /<br />0x0182040C</td>
<td>
</td></tr>
<tr>
<td>0x08000000 - 0x0BFFFFFF</td>
<td>110 (MDMAERREVT)</td>
<td>MDMAERR /<br />MDMAERRCLR</td>
<td>0x01846020 /<br />0x01846024</td>
<td>
</td></tr>
<tr>
<td>0x0C000000 - 0xFFFFFFFF</td>
<td>110 (MDMAERREVT),<br />10 (MSMC_mpf_errorn)</td>
<td>MDMAERR /<br />MDMAERRCLR,<br />XMPFAR /<br />XMPFSR /<br />XMPFCR</td>
<td>0x01846020 /<br />0x01846024,<br />0x08000200 /<br />0x08000204 /<br />0x08000208</td>
<td>
</td></tr></tbody></table>
<table class="wikitable" id="Table_8">
<caption>Table 8: Memory Protection Faults reported by other modules.
</caption>
<tbody><tr>
<th>Address range</th>
<th>Event triggered on invalid access</th>
<th>Fault Capture Register</th>
<th>Fault Capture Register Address</th>
<th>Comments
</th></tr>
<tr>
<td>0x0C000000 - 0xFFFFFFFF</td>
<td>INTC0: 102-109 (MSMC_mpf_error8-15)<br />INTC0: 170-173 (MSMC_mpf_error4-7)</td>
<td>MSMC SMPFAR /<br />SMPFXR /<br />SMPFR /<br />SMPFCR</td>
<td>0x0BC0001C /<br />0x0BC00020 /<br />0x0BC00024 /<br />0x0BC00028</td>
<td>MSMC memory protection faults for PrivIDs 4-15. NOTE: Fault events for PrivID 0-3 (i.e., the CorePacs) are directly routed to the CorePac interrupt controllers.
</td></tr>
<tr>
<td>0x01D00000 - 0x026203FF</td>
<td>INTC0: 90 (MPU0)</td>
<td>MPU0 FLTADDRR /<br />FLTSTAT /<br />FLTCLR</td>
<td>0x02360300 /<br />0x02360304 /<br />0x02360308</td>
<td>MPU0: Main CFG SCR address space, 16 ranges.
<p>Note: covers also invalid accesses to MPU0 config registers at address range 0x02360000 - 0x023603FF
</p>
</td></tr>
<tr>
<td>0x34000000 - 0x340BFFFF</td>
<td>INTC0: 92 (MPU1)</td>
<td>MPU1 FLTADDRR /<br />FLTSTAT /<br />FLTCLR</td>
<td>0x02368300 /<br />0x02368304 /<br />0x02368308</td>
<td>MPU1: QM_SS DATA PORT, 4 ranges.
<p>Note: covers also invalid accesses to MPU1 config registers at address range 0x02368000 - 0x023683FF
</p>
</td></tr>
<tr>
<td>0x02A00000 - 0x02ABFFFF</td>
<td>INTC0: 94 (MPU2)</td>
<td>MPU2 FLTADDRR /<br />FLTSTAT /<br />FLTCLR</td>
<td>0x02370300 /<br />0x02370304 /<br />0x02370308</td>
<td>MPU2: QM_SS CFG PORT, 16 ranges.
<p>Note: covers also invalid accesses to MPU2 config registers at address range 0x02370000 - 0x023703FF
</p>
</td></tr>
<tr>
<td>0x02640000 - 0x026407FF</td>
<td>INTC0: 96 (MPU3)</td>
<td>MPU3 FLTADDRR /<br />FLTSTAT /<br />FLTCLR</td>
<td>0x02378300 /<br />0x02378304 /<br />0x02378308</td>
<td>MPU3: Semaphore, 1 range.
<p>Note: covers also invalid accesses to MPU3 config registers at address range 0x02378000 - 0x023783FF
</p>
</td></tr>
<tr>
<td>0x01F80000 - 0x0215FFFF</td>
<td>INTC0: 174 (MPU4)</td>
<td>MPU4 FLTADDRR /<br />FLTSTAT /<br />FLTCLR</td>
<td>0x02380300 /<br />0x02380304 /<br />0x02380308</td>
<td>MPU4: RAC, 2 ranges.
<p>Note: covers also invalid accesses to MPU4 config registers at address range 0x02380000 - 0x023803FF
</p>
</td></tr>
<tr>
<td>0x02700000 - 0x02707FFF,<br />0x02720000 - 0x02727FFF,<br />0x02740000 - 0x02747FFF</td>
<td>INTC0: 33 (TPCC0 EDMACC_MPINT)<br />INTC0: 1 (TPCC1 EDMACC_MPINT),<br />INTC0: 17 (TPCC2 EDMACC_MPINT)</td>
<td>CC0 MPFAR /<br />MPFSR /<br />MPFCR<br />CC1 MPFAR /<br />MPFSR /<br />MPFCR<br />CC2 MPFAR /<br />MPFSR /<br />MPFCR</td>
<td>0x02700800 /<br />0x02700804 /<br />0x02700808<br />0x02720800 /<br />0x02700804 /<br />0x02700808<br />0x02740800 /<br />0x02700804 /<br />0x02700808</td>
<td>Each CC contains one MPPA per each shadow region and the global region. Protects accesses to EDMA3 channel controller registers and PaRAM sets.
</td></tr></tbody></table>
<h1><span class="mw-headline" id="Considerations_for_memory_protection_configuration">Considerations for memory protection configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=43" title="Edit section: Considerations for memory protection configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Some considerations are presented in this chapter on what should be taken into account when designing the application to leverage the memory protection features of the TMS320TCI6616 device.
</p>
<h2><span class="mw-headline" id="Application_layout">Application layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=44" title="Edit section: Application layout">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Efficient use of the memory protection features requires careful planning of the application layout. When designing the layout, one should keep in mind the memory protection page sizes and granularity and aim for keeping similar code and data areas together to ensure that the orthogonality of access rights is maximized.
</p>
<h2><span class="mw-headline" id="Routing_of_events">Routing of events</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=45" title="Edit section: Routing of events">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Each memory protection violation will result in a system event being asserted. Tables <a href="#Table_7">7</a> and <a href="#Table_8">8</a> show the events generated by various modules. To make sure the SW is notified when a violation is made, these events need to be routed to the DSP core as an interrupt or exception. Some of the events are directly routed to the interrupt controller of the CorePacs, while other events are routed via the system level interrupt controller INTC0. Consult the device datasheet for specific routing of the events.
</p><p>The DSP cores could of course poll the events instead of using interrupts/exceptions. However, due to the nature of memory protection, the DSP cores should get notified as soon as possible of memory protection violations, while the violations should not occur at all in normal SW operation. Therefore it is recommended to use interrupts or exceptions instead of polling.
</p>
<h2><span class="mw-headline" id="Interrupts_vs._Exceptions">Interrupts vs. Exceptions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=46" title="Edit section: Interrupts vs. Exceptions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The C66x DSP core supports interrupts as well as exceptions. The main conceptual difference between these is that interrupts are considered normal disruptions of the processing flow, while exceptions are considered serious error situations that are sometimes non-recoverable. In particular, the C66x DSP core begins the processing of exceptions as soon as it detects them, even if the pipeline of the DSP core is in a non-interruptible state. In such cases it is not safe to return back to the interrupted program flow. A comprehensive description of the C66x interrupts and exceptions is given in <a href="http://www.ti.com/lit/pdf/sprugh7" class="extiw" title="tidoc:sprugh7">SPRUGH7</a>.
</p><p>Any events that correspond to faulting accesses done by the DSP core should typically be considered as fatal and routed as exceptions. Events corresponding to faulting DMA accesses could be routed as interrupts or exceptions depending of the intended use of the data, but in most cases exceptions is the right choice. The only reason to use interrupts instead is if it is known that the fault can be somehow taken care of in SW, and it is desired to always return to the original program flow after the interrupt.
</p>
<h2><span class="mw-headline" id="Exception_handler_considerations">Exception handler considerations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=47" title="Edit section: Exception handler considerations">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>When a memory protection violation results in an exception, the DSP core immediately saves the processor context and branches to the NMI vector for exception handling as described in <a href="http://www.ti.com/lit/pdf/sprugh7" class="extiw" title="tidoc:sprugh7">SPRUGH7</a>. The exception handler should find out which events caused the exception, and then read the associated memory protection fault registers to find out details of the fault. Note that due to the distributed memory protection architecture, it may be that a particular access causes memory protection events of several modules to be asserted, and thus also several fault registers may contain useful information of the fault. It can therefore be useful to dump and clear the fault registers of all modules (instead of only the one associated with the event that caused the exception) and save them to system logs for further analysis, along with register dumps, memory dumps, and other information that might be useful for post-mortem analysis.
</p>
<h1><span class="mw-headline" id="Example_application_and_memory_protection_configuration">Example application and memory protection configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=48" title="Edit section: Example application and memory protection configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In this chapter we present an example application layout and memory protection configuration at various levels for maximal robustness on the TMS320TCI6616 device. The test application will then perform a number of invalid accesses to various places in the memory map to demonstrate memory protection event generation. A simple exception handler queries the various memory protection fault status registers and prints the information out via CIO. For the purpose of the example we will assume the following:
</p>
<ul><li>CorePac 0 is the master for all the HW configurations</li>
<li>CorePac 0 also receives all the memory protection events from shared resources</li>
<li>Local internal memory layout is the same for all cores</li>
<li>The PAMAPn registers of the CorePacs are set with the following mapping
<ul><li>PrivID 0‚Ä¶3 (CorePac0‚Ä¶3) maps to AID0‚Ä¶3, respectively</li>
<li>All other PrivIDs map to AIDX</li></ul></li>
<li>Inter-core communication is performed via EDMA3. EDMA3 also has access to the private data areas in shared memory</li>
<li>The the following event mapping is assumed:
<ul><li>CorePac INTC input events 9, 10, 22-25, 56, 96, 97, 110, 113, 117 and 119-127 are routed as exceptions to the DSP core</li>
<li>INTC0 input (host) events are routed to INTC0 output channels as follows:</li></ul></li></ul>
<table class="wikitable" id="Table_9">
<caption>Table 9: INTC0 event routing in the example application.
</caption>
<tbody><tr>
<th>System Interrupt</th>
<th>Host Channel</th>
<th>CorePac event
</th></tr>
<tr>
<td>1 (CSL_INTC0_CPU_3_1_EDMACC_MPINT)</td>
<td>64</td>
<td>CorePac 0 input event 22
</td></tr>
<tr>
<td>17 (CSL_INTC0_CPU_3_2_EDMACC_MPINT)</td>
<td>64</td>
<td>CorePac 0 input event 22
</td></tr>
<tr>
<td>33 (CSL_INTC0_CPU_2_EDMACC_MPINT)</td>
<td>64</td>
<td>CorePac 0 input event 22
</td></tr>
<tr>
<td>170 (CSL_INTC0_MSMC_MPF_ERROR4)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>171 (CSL_INTC0_MSMC_MPF_ERROR5)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>172 (CSL_INTC0_MSMC_MPF_ERROR6)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>173 (CSL_INTC0_MSMC_MPF_ERROR7)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>102 (CSL_INTC0_MSMC_MPF_ERROR8)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>103 (CSL_INTC0_MSMC_MPF_ERROR9)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>104 (CSL_INTC0_MSMC_MPF_ERROR10)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>105 (CSL_INTC0_MSMC_MPF_ERROR11)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>106 (CSL_INTC0_MSMC_MPF_ERROR12)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>107 (CSL_INTC0_MSMC_MPF_ERROR13)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>108 (CSL_INTC0_MSMC_MPF_ERROR14)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>109 (CSL_INTC0_MSMC_MPF_ERROR15)</td>
<td>65</td>
<td>CorePac 0 input event 23
</td></tr>
<tr>
<td>90 (CSL_INTC0_MPU0_INTD)</td>
<td>66</td>
<td>CorePac 0 input event 24
</td></tr>
<tr>
<td>92 (CSL_INTC0_MPU1_INTD)</td>
<td>66</td>
<td>CorePac 0 input event 24
</td></tr>
<tr>
<td>94 (CSL_INTC0_MPU2_INTD)</td>
<td>66</td>
<td>CorePac 0 input event 24
</td></tr>
<tr>
<td>96 (CSL_INTC0_MPU3_INTD)</td>
<td>66</td>
<td>CorePac 0 input event 24
</td></tr>
<tr>
<td>174 (CSL_INTC0_MPU4_INTD)</td>
<td>66</td>
<td>CorePac 0 input event 24
</td></tr>
<tr>
<td>0 (CSL_INTC0_CPU_3_1_EDMACC_ERRINT)</td>
<td>67</td>
<td>CorePac 0 input event 25
</td></tr>
<tr>
<td>16 (CSL_INTC0_CPU_3_2_EDMACC_ERRINT)</td>
<td>67</td>
<td>CorePac 0 input event 25
</td></tr>
<tr>
<td>32 (CSL_INTC0_CPU_2_EDMACC_ERRINT)</td>
<td>67</td>
<td>CorePac 0 input event 25
</td></tr>
<tr>
<td>38 (CSL_INTC0_CPU_2_TPCCINT0)</td>
<td>68</td>
<td>CorePac 0 input event 26
</td></tr>
<tr>
<td>39 (CSL_INTC0_CPU_2_TPCCINT1)</td>
<td>78</td>
<td>CorePac 1 input event 26
</td></tr>
<tr>
<td>40 (CSL_INTC0_CPU_2_TPCCINT2)</td>
<td>88</td>
<td>CorePac 2 input event 26
</td></tr>
<tr>
<td>41 (CSL_INTC0_CPU_2_TPCCINT3)</td>
<td>98</td>
<td>CorePac 3 input event 26
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Example_Application_Layout">Example Application Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=49" title="Edit section: Example Application Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The application will configure memory protection of the following modules:
</p>
<ul><li>CorePac L1P, L1D and L2 memories</li>
<li>CorePac XMC MPAX units</li>
<li>MSMC MPAX units</li>
<li>MPU0...MPU4 modules</li>
<li>EDMA3 active memory protection</li></ul>
<p><a href="#Table_10">Table 10</a> shows the layout of the example application, along with CorePac local and MSMC memory protection configuration. The EDMA3 active memory protection is set so that the areas protected by MPPA0 are given access by CorePac0, MPPA1--&gt;CorePac1, and so on. The MPU modules are programmed in order to allow demonstration of their protection capabilities, please refer to the example project to see their configuration values.
</p>
<table class="wikitable" id="Table_10">
<caption>Table 10: Example Application Layout.
</caption>
<tbody><tr>
<th>Memory</th>
<th>Range</th>
<th>Usage</th>
<th>Memory Protection Configuration</th>
<th>Comments
</th></tr>
<tr>
<td>L1P</td>
<td>0x00E00000 - 0x00E07FFF</td>
<td>Full cache</td>
<td>L1PMPPA16‚Ä¶L1PMPPA32 = 0x00000000</td>
<td>Deny all accesses to protect cache
</td></tr>
<tr>
<td>L1D</td>
<td>0x00F00000 - 0x00F07FFF</td>
<td>Full cache</td>
<td>L1DMPPA16‚Ä¶L1DMPPA32 = 0x00000000</td>
<td>Deny all accesses to protect cache
</td></tr>
<tr>
<td>L2</td>
<td>0x00800000 - 0x0081FFFF</td>
<td>Platform + OS Code</td>
<td>L2MPPA0‚Ä¶ L2MPPA3 = 0x00000108</td>
<td>Allow local supervisor execute
</td></tr>
<tr>
<td></td>
<td>0x00820000 - 0x0082FFFF</td>
<td>Platform + OS Data</td>
<td>L2MPPA4‚Ä¶ L2MPPA5 = 0x00000103</td>
<td>Allow local supervisor read/write
</td></tr>
<tr>
<td></td>
<td>0x00830000 - 0x0086FFFF</td>
<td>Application Code</td>
<td>L2MPPA6‚Ä¶ L2MPPA13 = 0x00000109</td>
<td>Allow local user/supervisor execute
</td></tr>
<tr>
<td></td>
<td>0x00870000 - 0x0087FFFF</td>
<td>Application user data</td>
<td>L2MPPA14‚Ä¶L2MPPA15 = 0x00000106</td>
<td>Allow local user read/write
</td></tr>
<tr>
<td></td>
<td>0x00880000 - 0x0088FFFF</td>
<td>Application general data</td>
<td>L2MPPA16‚Ä¶L2MPPA17 = 0x00000136</td>
<td>Allow local user/supervisor read/write
</td></tr>
<tr>
<td></td>
<td>0x00890000 - 0x0089FFFF</td>
<td>Application user scratchpad</td>
<td>L2MPPA18‚Ä¶L2MPPA19 = 0x00000106</td>
<td>Allow local user read/write
</td></tr>
<tr>
<td></td>
<td>0x008A0000 - 0x008AFFFF</td>
<td>Application general scratchpad</td>
<td>L2MPPA20‚Ä¶L2MPPA21 = 0x00000136</td>
<td>Allow local user/supervisor read/write
</td></tr>
<tr>
<td></td>
<td>0x008B0000 - 0x008BFFFF</td>
<td>Inter-core comm.</td>
<td>L2MPPA22‚Ä¶L2MPPA23 = 0x00003D30</td>
<td>Allow read/write from all cores (only supervisor mode)
</td></tr>
<tr>
<td></td>
<td>0x008C0000 - 0x008FFFFF</td>
<td>Cache (256 kB)</td>
<td>L2MPPA24‚Ä¶L2MPPA31 = 0x00000000</td>
<td>Deny all accesses to protect cache
</td></tr>
<tr>
<td>Shared L2</td>
<td>0x0C000000 - 0x0C07FFFF</td>
<td>Shared code</td>
<td>XMPAXH1 = 0x0C000012, XMPAXL1 = 0x00C00089</td>
<td>XMC: 512kB segment, Allow User/Supervisor Execute<br />MSMC: No matching segment<br />(Note: XMPAXH0/XMPAXL0 are set to 0x0000001E/0x000000BF to map the 0x00000000..0x7FFFFFFF CorePac logical address space as such into physical address space by default. The higher-numbered XMPAX segments will override this as necessary.)
</td></tr>
<tr>
<td></td>
<td>0x0C080000 - 0x0C0FFFFF</td>
<td>Read-only data</td>
<td>XMPAXH2 = 0x0C080012, XMPAXL2 = 0x00C080A4</td>
<td>XMC: 512kB segment, Allow User/Supervisor Read<br />MSMC: No matching segment
</td></tr>
<tr>
<td></td>
<td>0x0C100000 - 0x0C11FFFF</td>
<td>Core0 private data</td>
<td>XMPAXH3(core0) = 0x0C100010, XMPAXL3(core0) = 0x00C100B6<br />SMS_MPAXH_0_0 = 0x0C100010, SMS_MPAXL_0_0 = 0x00C100B6</td>
<td>XMC &amp; MSMC: 128kB segment, Allow User/Supervisor Read/Write for core0
</td></tr>
<tr>
<td></td>
<td>0x0C100000 - 0x0C11FFFF</td>
<td>Core1 private data</td>
<td>XMPAXH3(core1) = 0x0C100010, XMPAXL3(core1) = 0x00C120B6<br />SMS_MPAXH_1_0 = 0x0C100010, SMS_MPAXL_1_0 = 0x00C120B6</td>
<td>XMC &amp; MSMC: 128kB segment, Allow User/Supervisor Read/Write for core1
</td></tr>
<tr>
<td></td>
<td>0x0C100000 - 0x0C11FFFF</td>
<td>Core2 private data</td>
<td>XMPAXH3(core2) = 0x0C100010, XMPAXL3(core2) = 0x00C140B6<br />SMS_MPAXH_2_0 = 0x0C100010, SMS_MPAXL_2_0 = 0x00C140B6</td>
<td>XMC &amp; MSMC: 128kB segment, Allow User/Supervisor Read/Write for core2
</td></tr>
<tr>
<td></td>
<td>0x0C100000 - 0x0C11FFFF</td>
<td>Core3 private data</td>
<td>XMPAXH3(core3) = 0x0C100010, XMPAXL3(core3) = 0x00C160B6<br />SMS_MPAXH_3_0 = 0x0C100010, SMS_MPAXL_3_0 = 0x00C160B6</td>
<td>XMC &amp; MSMC: 128kB segment, Allow User/Supervisor Read/Write for core3
</td></tr>
<tr>
<td></td>
<td>0x0C180000 - 0x0C1FFFFF</td>
<td>Shared data (fast path)</td>
<td>XMPAXH4 = 0x0C180012, XMPAXL4 = 0x00C180B6</td>
<td>XMC: 512kB segment, Allow User/Supervisor Read/Write<br />MSMC: No matching segment
</td></tr>
<tr>
<td></td>
<td>0xE0180000 - 0xE01FFFFF</td>
<td>Shared data (non-cached)</td>
<td>XMPAXH5 = 0xE0180012, XMPAXL5 = 0x00C180B6</td>
<td>XMC: 512kB segment, Allow User/Supervisor Read/Write<br />MSMC: No matching segment
</td></tr>
<tr>
<td>DDR3</td>
<td>0x80000000 - 0x807FFFFF</td>
<td>Shared code</td>
<td>XMPAXH6 = 0x80000016, XMPAXL6 = 0x80000089</td>
<td>XMC: 8MB segment, Allow User/Supervisor Execute<br />MSMC: No matching segment
</td></tr>
<tr>
<td></td>
<td>0x80800000 - 0x80FFFFFF</td>
<td>Read-only data</td>
<td>XMPAXH7 = 0x80800016, XMPAXL7 = 0x800800A4<br />SES_MPAXH_[0..3]_3 = 0x80800016, SES_MPAXL_[0..3]_3 = 0x800800A4</td>
<td>XMC &amp; MSMC: 8MB segment, Allow User/Supervisor Read
</td></tr>
<tr>
<td></td>
<td>0x81000000 - 0x81FFFFFF</td>
<td>Core0 private data</td>
<td>XMPAXH8(core0) = 0x81000017, XMPAXL8(core0) = 0x801000B6<br />SES_MPAXH_0_0 = 0x81000017, SES_MPAXL_0_0 = 0x801000B6</td>
<td>XMC &amp; MSMC: 16MB segment, Allow User/Supervisor Read/Write (Core0)
</td></tr>
<tr>
<td></td>
<td>0x81000000 - 0x81FFFFFF</td>
<td>Core1 private data</td>
<td>XMPAXH8(core1) = 0x81000017, XMPAXL8(core1) = 0x802000B6<br />SES_MPAXH_1_0 = 0x81000017, SES_MPAXL_1_0 = 0x802000B6</td>
<td>XMC &amp; MSMC: 16MB segment, Allow User/Supervisor Read/Write (Core1)
</td></tr>
<tr>
<td></td>
<td>0x81000000 - 0x81FFFFFF</td>
<td>Core2 private data</td>
<td>XMPAXH8(core2) = 0x81000017, XMPAXL8(core2) = 0x803000B6<br />SES_MPAXH_2_0 = 0x81000017, SES_MPAXL_2_0 = 0x803000B6</td>
<td>XMC &amp; MSMC: 16MB segment, Allow User/Supervisor Read/Write (Core2)
</td></tr>
<tr>
<td></td>
<td>0x81000000 - 0x81FFFFFF</td>
<td>Core3 private data</td>
<td>XMPAXH8(core3) = 0x81000017, XMPAXL8(core3) = 0x804000B6<br />SES_MPAXH_3_0 = 0x81000017, SES_MPAXL_3_0 = 0x804000B6</td>
<td>XMC &amp; MSMC: 16MB segment, Allow User/Supervisor Read/Write (Core3)
</td></tr>
<tr>
<td></td>
<td>0x85000000 - 0x88FFFFFF</td>
<td>Shared data (cacheable)</td>
<td>XMPAXH9 = 0x85000019, XMPAXL9 = 0x805000B6<br />SES_MPAXH_[0..3]_1 = 0x85000019, SES_MPAXL_[0..3]_1 = 0x805000B6</td>
<td>XMC &amp; MSMC: 64MB segment, Allow User/Supervisor Read/Write
</td></tr>
<tr>
<td></td>
<td>0x89000000 - 0x89FFFFFF</td>
<td>Shared data (non-cacheable)</td>
<td>XMPAXH10 = 0x89000017, XMPAXL10 = 0x809000B6<br />SES_MPAXH_[0..3]_2 = 0x89000017, SES_MPAXL_[0..3]_2 = 0x809000B6</td>
<td>XMC &amp; MSMC: 16MB segment, Allow User/Supervisor Read/Write
</td></tr></tbody></table>
<p><br />
</p>
<h1><span class="mw-headline" id="Questions_and_answers">Questions and answers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=50" title="Edit section: Questions and answers">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section contains frequently asked questions and answers to them.
</p>
<dl><dt>Question - If I don‚Äôt clear (acknowledge) a memory protection fault, what happens when I get a subsequent fault?</dt>
<dd>The subsequent fault will not be captured in the memory protection fault registers, and the corresponding event is not latched.</dd></dl>
<dl><dt>Question - I have protected a segment in L2 memory from direct DSP core reads. But when the DSP core reads from this segment, nothing is captured in the L2MPFSR/L2MPFAR registers. Why?</dt>
<dd>Faults are reported by the module that ultimately services the access. DSP core reads are ultimately serviced by the L1D controller, therefore the fault is also reported in L1DMPFSR/L1DMPFAR. In this case the CorePac interrupt controller input event 122 (L1D_CMPA) is asserted.</dd></dl>
<dl><dt>Question - I made an access to a reserved area in the memory map, but I'm not getting any memory protection faults. Why?</dt>
<dd>Memory protection is not guaranteed for all addresses in the device memory map. It could be that the address you are poiting to is actually implemented for internal testing purposes, but not documented. Such an access may not generate a memory protection fault.</dd></dl>
<dl><dt>Question - What would cause the special cache victim write-back memory protection fault?</dt></dl>
<ol><li>Map a location external to CorePac as read-write.</li>
<li>Allocate the line.</li>
<li>Make it dirty.</li>
<li>Change the mapping that covers the line to read only, or remove the mapping.</li>
<li>Evict the line.</li></ol>
<dl><dt>Question - Consider the following situation. Before configuring any memory protection features, I make an access to address 0x80000000 (beginning of external memory) so it gets cached in both L1D and L2 caches. Then I configure XMC MPAX to deny accesses from this core to the page containing address 0x80000000. When I make a subsequent access from the same core to 0x80000000, will I get a memory protection error?</dt>
<dd>Any cache hits for data cached before the change won't fault due to cached permissions. If you dirty the line but have removed write permissions, the XMC will record a fault when the cache sends the victim. If the line gets dropped from the cache and is later refetched, XMC will apply the new permissions. To keep MPAX and the cache in sync, you should clean the cache out first, and then change MPAX. This avoids faults due to victims.</dd></dl>
<dl><dt>Question - On prefetching and memory protection. Consider the following situation. I have enabled pre-fetch for an address range X. Then I have configured memory protection to deny accesses to address range Z which is contained in X as follows</dt>
<dd></dd></dl>
<table class="wikitable">

<tbody><tr>
<td colspan="2"><center>X</center>
</td></tr>
<tr>
<td><center>&#160;&#160;&#160;&#160;&#160;Y&#160;&#160;&#160;&#160;&#160;</center></td>
<td><center>&#160;&#160;&#160;&#160;&#160;Z&#160;&#160;&#160;&#160;&#160;</center>
</td></tr></tbody></table>
<dl><dt>If I now make an access to the end of Y (which is allowed), the pre-fetch mechanism will make accesses to the beginning of Z. Will this trigger a memory protection violation?</dt>
<dd>MPAX will kill the prefetches. No fault will be recorded.</dd></dl>
<h1><span class="mw-headline" id="Conclusions">Conclusions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=51" title="Edit section: Conclusions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Memory protection offers significant benefits to application development and product deployment. It helps to shorten the development cycle by catching SW issues at an early stage, and can help to make the SW robust against programming errors, misuse, etc. It can also significantly speed up post-mortem analysis by providing information of faulting accesses (address, privilege id, etc.) The benefits offered by the memory protection HW are maximized by carefully designing the application layout with memory protection HW features in mind.
</p>
<h1><span class="mw-headline" id="References">References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=52" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ol><li><a rel="nofollow" class="external text" href="http://www.ti.com/lit/gpn/tms320tci6616">TMS320TCI6616 Communications Infrastructure KeyStone SoC Data Manual (SPRS624)</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprugw0" class="extiw" title="tidoc:sprugw0">TMS320C66x DSP CorePac User Guide (SPRUGW0)</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprugs5" class="extiw" title="tidoc:sprugs5">KeyStone Architecture Enhanced Direct Memory Access (EDMA3) Controller User Guide (SPRUGS5)</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprugh7" class="extiw" title="tidoc:sprugh7">TMS320C66x DSP CPU and Instruction Set Reference Guide (SPRUGH7)</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprugw7" class="extiw" title="tidoc:sprugw7">KeyStone Architecture Multicore Shared Memory Controller User Guide (SPRUGW7)</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprugw5" class="extiw" title="tidoc:sprugw5">KeyStone Architecture Memory Protection Unit User Guide (SPRUGW5)</a></li></ol>
<h1><span class="mw-headline" id="Appendix_A._Example_code">Appendix A. Example code</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=53" title="Edit section: Appendix A. Example code">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The Example Code can be downloaded from here:
</p>
<ul><li><a href="https://processors.wiki.ti.com/images/1/1e/MemoryProtectionExample.zip" class="internal" title="MemoryProtectionExample.zip">MemoryProtectionExample.zip</a></li></ul>
<h1><span class="mw-headline" id="Appendix_B._Abbreviations">Appendix B. Abbreviations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;section=54" title="Edit section: Appendix B. Abbreviations">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<table class="wikitable" id="Table_B1">
<caption>Table B1. - Abbreviations
</caption>
<tbody><tr>
<td>AID</td>
<td>Allowed ID
</td></tr>
<tr>
<td>AIF</td>
<td>Antenna Interface
</td></tr>
<tr>
<td>CCn</td>
<td>Channel Controller n
</td></tr>
<tr>
<td>DMA</td>
<td>Direct Memory Access
</td></tr>
<tr>
<td>DSP</td>
<td>Digital Signal Processor
</td></tr>
<tr>
<td>EDMA3</td>
<td>Enhanced Direct Memory Access 3
</td></tr>
<tr>
<td>EMAC</td>
<td>Ethernet Media Access Controller
</td></tr>
<tr>
<td>EMC</td>
<td>External Memory Controller
</td></tr>
<tr>
<td>FFTC</td>
<td>Fast Fourier Transform Coprocessor
</td></tr>
<tr>
<td>HW</td>
<td>Hardware
</td></tr>
<tr>
<td>INTC</td>
<td>Interrupt Controller
</td></tr>
<tr>
<td>MDMA</td>
<td>Master Direct Memory Access
</td></tr>
<tr>
<td>MPAX</td>
<td>Memory Protection and Address Extension
</td></tr>
<tr>
<td>MPFAR</td>
<td>Memory Protection Fault Address Register
</td></tr>
<tr>
<td>MPFCR</td>
<td>Memory Protection Fault Command Register
</td></tr>
<tr>
<td>MPFSR</td>
<td>Memory Protection Fault Status Register
</td></tr>
<tr>
<td>MPPA</td>
<td>Memory Protection Page Attribute
</td></tr>
<tr>
<td>MPU</td>
<td>Memory Protection Unit
</td></tr>
<tr>
<td>MSMC</td>
<td>Multi-Core Shared Memory Controller
</td></tr>
<tr>
<td>OS</td>
<td>Operating System
</td></tr>
<tr>
<td>PA_SS</td>
<td>Packet Accelerator Subsystem
</td></tr>
<tr>
<td>PCIe</td>
<td>Peripheral Component Interconnect Express (PCI Express)
</td></tr>
<tr>
<td>RAC</td>
<td>Receive Accelerator
</td></tr>
<tr>
<td>SoC</td>
<td>System on Chip
</td></tr>
<tr>
<td>SRIO</td>
<td>Serial Rapid IO
</td></tr>
<tr>
<td>SW</td>
<td>Software
</td></tr>
<tr>
<td>TAC</td>
<td>Transmit Accelerator
</td></tr>
<tr>
<td>XMC</td>
<td>Extended Memory Controller
</td></tr></tbody></table>

<!-- 
NewPP limit report
Cached time: 20201201055041
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.154 seconds
Real time usage: 0.162 seconds
Preprocessor visited node count: 351/1000000
Preprocessor generated node count: 840/1000000
Post‚Äêexpand include size: 2643/2097152 bytes
Template argument size: 1276/2097152 bytes
Highest expansion depth: 6/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‚Äêexpand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    9.371      1 -total
 69.41%    6.504      1 Template:WikiNote
 28.54%    2.674      1 Template:Month
 27.57%    2.584      2 Template:Img
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:9012-0!canonical and timestamp 20201201055041 and revision id 57795
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MemoryProtectionOnKeystoneDevices</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MemoryProtectionOnKeystoneDevices</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>MemoryProtectionOnKeystoneDevices</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;oldid=57795">https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;oldid=57795</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="https://processors.wiki.ti.com/index.php?title=Category:WikiNote&amp;action=edit&amp;redlink=1" class="new" title="Category:WikiNote (page does not exist)">WikiNote</a></li><li><a href="Category_Keystone.html" title="Category:Keystone">Keystone</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=MemoryProtectionOnKeystoneDevices" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="MemoryProtectionOnKeystoneDevices.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:MemoryProtectionOnKeystoneDevices&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="MemoryProtectionOnKeystoneDevices.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/MemoryProtectionOnKeystoneDevices.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/MemoryProtectionOnKeystoneDevices.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;oldid=57795" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=MemoryProtectionOnKeystoneDevices&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 30 April 2011, at 14:40.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.154","walltime":"0.162","ppvisitednodes":{"value":351,"limit":1000000},"ppgeneratednodes":{"value":840,"limit":1000000},"postexpandincludesize":{"value":2643,"limit":2097152},"templateargumentsize":{"value":1276,"limit":2097152},"expansiondepth":{"value":6,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    9.371      1 -total"," 69.41%    6.504      1 Template:WikiNote"," 28.54%    2.674      1 Template:Month"," 27.57%    2.584      2 Template:Img"]},"cachereport":{"timestamp":"20201201055041","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":385});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/MemoryProtectionOnKeystoneDevices by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:22:51 GMT -->
</html>
