<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Power_Module_for_C6748_and_OMAP-L138 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:08:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Power Module for C6748 and OMAP-L138 - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Power_Module_for_C6748_and_OMAP-L138","wgTitle":"Power Module for C6748 and OMAP-L138","wgCurRevisionId":98417,"wgRevisionId":98417,"wgArticleId":14464,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["SYSBIOS"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Power_Module_for_C6748_and_OMAP-L138","wgRelevantArticleId":14464,"wgRequestId":"2aba0f6c93f08739de2072ec","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Power_Module_for_C6748_and_OMAP-L138 rootpage-Power_Module_for_C6748_and_OMAP-L138 skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Power Module for C6748 and OMAP-L138</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><br /> </p><div class="floatright"><a href="File_Sysbios_image.html" class="image" title="Sysbios image.png"><img alt="Sysbios image.png" src="https://processors.wiki.ti.com/images/0/05/Sysbios_image.png" width="180" height="160" /></a></div> 
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Power_is_a_Derivative_of_PWRM"><span class="tocnumber">1.1</span> <span class="toctext">Power is a Derivative of PWRM</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Module_Layering"><span class="tocnumber">1.2</span> <span class="toctext">Module Layering</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Theory_of_Operation"><span class="tocnumber">2</span> <span class="toctext">Theory of Operation</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#CPU_Idling"><span class="tocnumber">2.1</span> <span class="toctext">CPU Idling</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Resource_Tracking"><span class="tocnumber">2.2</span> <span class="toctext">Resource Tracking</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Scaling_Voltage_and_Frequency"><span class="tocnumber">2.3</span> <span class="toctext">Scaling Voltage and Frequency</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Using_Sleep_Modes"><span class="tocnumber">2.4</span> <span class="toctext">Using Sleep Modes</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Coordinating_Sleep_and_Scaling"><span class="tocnumber">2.5</span> <span class="toctext">Coordinating Sleep and Scaling</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Configuring_Power"><span class="tocnumber">3</span> <span class="toctext">Configuring Power</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#.E2.80.9CUsing.E2.80.9D_Power_in_Your_Application"><span class="tocnumber">3.1</span> <span class="toctext">“Using” Power in Your Application</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Configuration_Parameters"><span class="tocnumber">3.2</span> <span class="toctext">Configuration Parameters</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-13"><a href="#Miscellaneous"><span class="tocnumber">4</span> <span class="toctext">Miscellaneous</span></a>
<ul>
<li class="toclevel-2 tocsection-14"><a href="#Available_Setpoints"><span class="tocnumber">4.1</span> <span class="toctext">Available Setpoints</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Constraints_for_Power_SLEEP_and_Power_DEEPSLEEP"><span class="tocnumber">4.2</span> <span class="toctext">Constraints for Power_SLEEP and Power_DEEPSLEEP</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Examples"><span class="tocnumber">5</span> <span class="toctext">Examples</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#V.2FF_Scaling"><span class="tocnumber">5.1</span> <span class="toctext">V/F Scaling</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Sleep_Modes"><span class="tocnumber">5.2</span> <span class="toctext">Sleep Modes</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Known_Issues"><span class="tocnumber">6</span> <span class="toctext">Known Issues</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#I2C_Communication_Failures_on_Beta_SOMs"><span class="tocnumber">6.1</span> <span class="toctext">I2C Communication Failures on Beta SOMs</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#No_Update_of_DDR_Timing_Parameters"><span class="tocnumber">6.2</span> <span class="toctext">No Update of DDR Timing Parameters</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Linker_Error_when_Resource_Tracking_is_not_Enabled"><span class="tocnumber">6.3</span> <span class="toctext">Linker Error when Resource Tracking is not Enabled</span></a></li>
</ul>
</li>
</ul>
</div>
 
<h2><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Power is a SYS/BIOS module that enables you to reduce the power consumption of your C6748 or OMAP-L138 application. Power provides the following functionality: 
</p><p><b>CPU Idling</b> – You can configure Power to automatically idle the CPU in the Idle loop while waiting for an interrupt to trigger new processing. This is a “static” application configuration step, versus runtime API calls to Power. 
</p><p><b>Resource Tracking</b> – You can make runtime calls to Power to dynamically specify the power-manageable resources (for example, the functional clock for a UART) that your application is dependent upon. With this knowledge of required resources, Power can aggressively idle resources that have no active dependencies. 
</p><p><b>Scaling Voltage and Frequency</b> - You can dynamically change the operating voltage and frequency of the CPU domain and the peripheral domain. This is called V/F scaling, and can result in significant power savings. 
</p><p><b>Sleep Modes</b> - You can dynamically activate CPU and device sleep modes to save power during inactivity. 
</p><p><b>Coordinating Sleep and Scaling</b> - You can coordinate sleep modes and V/F scaling with other software components (e.g., drivers, componentized software ‘stacks’, etc.) using registration and notification mechanisms provided by the Power module. 
</p>
<h3><span class="mw-headline" id="Power_is_a_Derivative_of_PWRM">Power is a Derivative of PWRM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=2" title="Edit section: Power is a Derivative of PWRM">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The Power module is a “port” of the DSP/BIOS Power Manager (PWRM module) to SYS/BIOS. [PWRM is described in the DSP/BIOS User’s Guide (<a rel="nofollow" class="external free" href="http://www.ti.com/lit/ug/spru423h/spru423h.pdf">http://www.ti.com/lit/ug/spru423h/spru423h.pdf</a>).] Power provides the same basic functionality that PWRM did for the C6748 and OMAP-L138, but follows SYS/BIOS naming and configuration conventions. The one exception to the feature set is the load monitoring feature of PWRM – it was not ported forward to Power. SYS/BIOS provides a Load module (in the package ti.sysbios.utils) that can be used as an alternative, to collect basic CPU load information. 
</p>
<h3><span class="mw-headline" id="Module_Layering">Module Layering</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=3" title="Edit section: Module Layering">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>As with PWRM, Power sits on top of two interface layers: the Power Scaling Library (PSCL) for voltage/frequency scaling logic and configuration, and the Power Management Interface (PMI) hardware control layer. 
</p><p><a href="File_Power_layering_6748.html" class="image"><img alt="Power layering 6748.jpg" src="https://processors.wiki.ti.com/images/0/0c/Power_layering_6748.jpg" width="485" height="446" /></a> 
</p><p>Both PSCL and PMI are “straight C” code, provided in source form, in the ti.sysbios.family.c674.pscl and ti.sysbios.family.c674.pmi packages. 
</p><p>With DSP/BIOS, the PSCL and PMI libraries were each broken into a common library, and a set of board-specific companion libraries. With SYS/BIOS, this is done differently – each PSCL library, and each PMI library now contains all the code and data necessary for a particular board configuration. In other words, the shared, common libraries have been eliminated. This was done to simplify the build process for users creating custom PSCL or PMI libraries. 
</p>
<h2><span class="mw-headline" id="Theory_of_Operation">Theory of Operation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=4" title="Edit section: Theory of Operation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="CPU_Idling">CPU Idling</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=5" title="Edit section: CPU Idling">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In many applications, while the CPU is waiting for an interrupt (signaling new work is to be done, e.g., when an I/O operation is complete), the CPU simply spins continuously in an idle loop. Rather than spinning continuously, the CPU’s “idle” instruction can be invoked to reduce power consumption during the wait interval. Depending upon how much time is spent in this idle loop, the savings from idling might be significant. 
</p><p>The Power module provides a configuration parameter, “idleCpu” , that can be set to tell Power to automatically insert a function into the SYS/BIOS Idle loop, to idle the CPU while waiting for the next interrupt. When the “idle” instruction is invoked, the CPU will stop execution of new instructions, and will resume execution when the next enabled interrupt occurs. After the interrupt has been serviced, and any threads that have been readied have run, the CPU will return to the Idle loop, at the instruction after “idle”. The loop will then continue, making one pass through any other configured Idle functions, and then returning to “idle”, where the CPU will wait until the next interrupt occurs. 
</p>
<h3><span class="mw-headline" id="Resource_Tracking">Resource Tracking</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=6" title="Edit section: Resource Tracking">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A typical SYS/BIOS application uses a set of peripherals—timers, serial ports, etc.—to accomplish its purpose. Typically device drivers manage low-level peripheral accesses, but sometimes applications access peripherals directly. In both these scenarios, the SYS/BIOS kernel itself does not "know" which peripherals are being used. This information is distributed across the application code and drivers, and is not stored within the kernel. As a consequence, SYS/BIOS does not know what resources are actually required by an application at any given instant, so it cannot aggressively idle resources without possibly "breaking" the application. 
</p><p>The Power module provides a "resource tracking" feature to allow more aggressive power management. Applications, drivers, and other SYS/BIOS modules can call a Power API to declare dependencies upon specific resources, when those resources are actually needed. When resources are no longer needed—for example, when a serial port is closed, or when there is no work for an audio driver to do—a companion Power API call can be made to release the resource dependency. Power counts the "set" and "release" dependency calls, and automatically enables a resource when the first "set" operation occurs, and automatically disables that resource when the last "release" call occurs. 
</p><p>For the C6748 and OMAP-L138, Power supports the following enumerated resources: 
</p>
<pre>   enum Resource {
      RSRC_EDMA3_CC_0   = 0, /*! EDMA3_0 Channel Controller 0 */
      RSRC_EDMA3_TC_0   = 1, /*! EDMA3_0 Transfer Controller 0 */
      RSRC_EDMA3_TC_1   = 2, /*! EDMA3_0 Transfer Controller 1 */
      RSRC_EMIFA        = 3, /*! EMIFA */
      RSRC_SPI_0        = 4, /*! SPI0 */
      RSRC_MMCSD_0      = 5, /*! MMC/SD0 */
      RSRC_AINTC        = 6, /*! ARM Interrupt Controller */
      RSRC_RSVD1        = 7, /*! RESERVED */
      RSRC_UART_0       = 8, /*! UART0 */
      RSRC_RSVD2        = 9, /*! RESERVED */
      RSRC_EDMA3_CC_1   = 10, /*! EDMA3_1 Channel Controller 0 */
      RSRC_USB0         = 11, /*! USB0 */
      RSRC_USB1         = 12, /*! USB1 */
      RSRC_GPIO         = 13, /*! GPIO */
      RSRC_UHPI         = 14, /*! HPI */
      RSRC_EMAC         = 15, /*! EMAC */
      RSRC_DDR2         = 16, /*! DDR2/mDDR */
      RSRC_MCASP_0      = 17, /*! McASP0 */
      RSRC_SATA         = 18, /*! SATA */
      RSRC_VPIF         = 19, /*! VPIF */
      RSRC_SPI_1        = 20, /*! SPI1 */
      RSRC_I2C_1        = 21, /*! I2C1 */
      RSRC_UART_1       = 22, /*! UART1 */
      RSRC_UART_2       = 23, /*! UART2 */
      RSRC_MCBSP_0      = 24, /*! McBSP0 */
      RSRC_MCBSP_1      = 25, /*! McBSP1 */
      RSRC_LCDC         = 26, /*! LCDC */
      RSRC_EHRPWM       = 27, /*! eHRPWM0/1 */
      RSRC_MMCSD_1      = 28, /*! MMC/SD1 */
      RSRC_UPP          = 29, /*! uPP */
      RSRC_ECAP         = 30, /*! eCAP0/1/2 */
      RSRC_EDMA3_TC_2   = 31, /*! EDMA3_1 Transfer Controller 0 */
      RSRC_END          = 32
  };
</pre>
<p>These resources correspond to the Local Power Sleep Controllers (LPSC) for individual circuit modules. When a resource dependency is initially set, the module will be put into the ENABLE state (if it wasn’t already). When the last dependency for a module is released, the LPSC module will be put into the DISABLE state. 
</p><p>Note that the resources listed above are applicable for the C6748 or OMAP-L138. If Power is used on a C6746 or C6742 device, only the appropriate subset of the resources is applicable. 
</p>
<h3><span class="mw-headline" id="Scaling_Voltage_and_Frequency">Scaling Voltage and Frequency</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=7" title="Edit section: Scaling Voltage and Frequency">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Active power dissipation of a CMOS-based DSP is linearly proportional to the clock rate (frequency), and quadratically proportional to the operating voltage. Additionally, the operating voltage determines the maximum clock rate available. 
</p><p>If an application can reduce the CPU clock rate and still meet its processing deadlines, it can produce a linearly proportional savings in power dissipation. [However, reducing the CPU clock rate also proportionally extends the execution time, so the application must be carefully analyzed to make sure it can still meets its real-time requirements.] If the clock frequency can be reduced and the new frequency is compatible with a lower operating voltage supported by the DSP, then potentially significant additional savings can be also be made by reducing the voltage, due to the quadratic relationship. 
</p><p>Power provides the Power_changeSetpoint() API, which can be called by an application to change the operating voltage and frequency (V/F). [The combination of an operating voltage and an operating frequency is referred to as a “setpoint”.] So, for example, when an application switches to a mode with reduced processing requirements, it can step down the voltage and frequency (i.e., move to a lower setpoint) to reduce power consumption. Or, an application might accumulate "slack" time in its data-dependent processing, and then reduce V/F to absorb the slack time while running at lower power. 
</p><p>Portable applications can learn about the V/F scaling features supported on a platform via runtime queries, with the Power_getCurrentSetpoint(), Power_getNumSetpoints(), Power_getSetpointInfo(), and Power_getTransitionLatency() APIs. 
</p><p>The Power module also supports coordination of V/F changes across the application, through a registration and notification mechanism. Additionally, clients can indicate to Power the V/F setpoints they support. Power will check any client-registered constraints before attempting to transition to the requested setpoint. 
</p><p>The Power module calls to a platform-specific Power Scaling Library (PSCL) (an underlying abstraction layer) to make the actual changes to voltage and frequency. 
</p>
<h3><span class="mw-headline" id="Using_Sleep_Modes">Using Sleep Modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=8" title="Edit section: Using Sleep Modes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Power allows applications to activate sleep modes, which place the CPU and related device modules into low-power states. Sleep modes may include idling module clocks, reducing clock frequencies, reducing operating voltages (e.g., to retention levels), and powering off subsystems. For the C6748 and OMAP-L138 the following sleep modes are supported: 
</p><p><b>Power_STANDBY</b> – The CPU and other modules within the C674x megamodule &#160;are clock gated at the megamodule &#160;boundary. 
</p><p><b>Power_SLEEP</b> – In addition to clock-gating of C674x DSP megamodule (as in Power_STANDBY), the core voltage is reduced, and device PLLs are bypassed. 
</p><p><b>Power_DEEPSLEEP</b> – In addition to the actions for Power_SLEEP, the C674x megamodule clock is gated further up-stream (at its Power Sleep Controller (PSC)), memories are put into retention, and PLLs are powered down. 
</p>
<h3><span class="mw-headline" id="Coordinating_Sleep_and_Scaling">Coordinating Sleep and Scaling</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=9" title="Edit section: Coordinating Sleep and Scaling">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Power provides a synchronization framework for notifying application components (i.e., “clients”), that have registered to be notified, when specific power events occur. 
</p><p>Clients actively register for the specific power events that they care about, by calling Power_registerNotify(). Any type of code can register, e.g., drivers, straight-application code, and SYS/BIOS itself. When notifications are no longer needed (e.g., when a device driver is shutting down), the companion Power_unregisterNotify() API should be called to remove the client for the event notification list. 
</p><p>When registering, clients specify a callback function that Power should call when a specific event occurs. Clients can also specify a specific argument that gets passed back at notification time; this allows a common notification function to be used for multiple instances of a client. 
</p><p>At notification time, clients can indicate to Power that they are done (by returning Power_ NOTIFYDONE from the callback function), or that they need a “delayed completion” (by returning Power_ NOTIFYNOTDONE), meaning that they have received the notification, but must finish some processing before being ready for the power event transition. 
</p><p>In the case where a client has signaled it needs a delayed completion, when the client has completed its required action (for example, on the next interrupt from a peripheral), it should call the delayedCompletionFunction() returned to it from the Power_registerNotify() call for the event type. The Power module waits until all clients have signaled to Power that they are ready for the transition before performing the transition. If a client does not signal to Power that it is done within the specified timeout, the relevant Power API returns Power_ETIMEOUT, which is typically an indicator of a system failure. 
</p><p>Before notifying clients of a power event, Power first disables Task and Swi scheduling, to protect against preemption while the power event is being processed. Since Task and Swi scheduling are disabled during Power notifications, clients cannot rely on Task or Swi scheduling to finish Power event processing. Hardware interrupts are still enabled, and can be used to determine and signal completion of processing of the notification. For example, to allow an in-process DMA operation to complete, the DMA ISR can still run, and then call the delayedCompletionFunction() to signal to Power that the client has finished processing the event. 
</p><p>Finally, it is important to note that when notified of an event, it is truly a “notification”. Clients cannot “vote” on a power event or transition when they get the notification from Power. The application must determine if the transition should occur <b>before</b> calling Power (e.g., to change the setpoint); once the transition is started and notifications begin, clients must act upon the notifications appropriately. 
</p><p>The following figure illustrates the registration/notification concept: 
</p><p><a href="File_Notification.html" class="image"><img alt="Notification.jpg" src="https://processors.wiki.ti.com/images/7/74/Notification.jpg" width="420" height="500" /></a> 
</p><p>In this example, the numbered steps are as follows: 
</p><p>1. Application code registers to be notified of V/F setpoint changes. For example, different EMIF settings may be needed for different setpoints, so the application registers control code with Power so that it can change EMIF settings when there is a change to the setpoint. 
</p><p>2. A peripheral driver using DMA for transfers to/from external memory registers to be notified of V/F setpoint changes. For example, prior to a setpoint change, the driver may need to temporarily stop DMA operations to external memory. 
</p><p>3. Packaged target content (e.g., a protocol stack) similarly registers for notification on setpoint changes. 
</p><p>4. The application decides to change the V/F setpoint, and calls Power_changeSetpoint() to initiate the setpoint change. It may do this, for example, because of a change in the application's operation mode (for example, a switch between data collection mode and data processing mode). 
</p><p>5. Before the setpoint change, Power validates the change request versus any registered constraints, and then notifies all registered clients of the impending setpoint change. Clients are notified in the same order they registered for notification (i.e., FIFO order). 
</p><p>6. Power calls down to the Power Scaling Library (PSCL) to change the V/F setpoint. 
</p><p>7. After the setpoint change, Power notifies the registered clients that the setpoint has been changed. 
</p><p>On the C6748 and OMAP-L138, clients can use Power_registerNotify() to register to be notified about the following types of events: 
</p>
<pre>   enum Event {
      GOINGTOSTANDBY = 0, /*! Going to Power_STANDBY */
      AWAKEFROMSTANDBY,   /*! Awake from Power_STANDBY */
      GOINGTOSLEEP,       /*! Going to Power_SLEEP */
      AWAKEFROMSLEEP,     /*! Awake from Power_SLEEP */
      GOINGTODEEPSLEEP,   /*! Going to Power_DEEPSLEEP */
      AWAKEFROMDEEPSLEEP, /*! Awake from Power_DEEPSLEEP */
      PENDING_CPU_SETPOINTCHANGE, /*! A CPU setpoint change is about to occur */
      PENDING_PER_SETPOINTCHANGE, /*! A peripheral setpoint change is about to occur */
      DONE_CPU_SETPOINTCHANGE, /*! A CPU setpoint change has just completed */
      DONE_PER_SETPOINTCHANGE, /*! A peripheral setpoint change has just completed */
      INVALIDEVENT
  };
</pre>
<p><br /> 
</p>
<h2><span class="mw-headline" id="Configuring_Power">Configuring Power</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=10" title="Edit section: Configuring Power">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="“Using”_Power_in_Your_Application"></span><span class="mw-headline" id=".E2.80.9CUsing.E2.80.9D_Power_in_Your_Application">“Using” Power in Your Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=11" title="Edit section: “Using” Power in Your Application">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The Power module resides in the package ti.sysbios.family.c674, and is only applicable for C6748 and OMAP-L138 devices. And for the OMAP-L138, it applies for the DSP-side only. Separate Linux power management support is available for the ARM-side. 
</p><p>Note that there are other Power modules in other ‘family’ packages that ship with SYS/BIOS. With SYS/BIOS, the functionality and implementation of the Power module is “family-specific”, and you need to “use” the appropriate Power module for the device that you are building your application for. For example, for C6748 or OMAP-L138, in XGCONF you should select the Power module in the ti.sysbios.family.c674 package, or if writing the configuration script directly, add the following to your .cfg file: 
</p>
<pre>   var Power = xdc.useModule('ti.sysbios.family.c674.Power');
</pre>
<h3><span class="mw-headline" id="Configuration_Parameters">Configuration Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=12" title="Edit section: Configuration Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The configuration parameters for Power are described in the ‘cdoc’ in the SYS/BIOS release (in the “docs\cdoc” subdirectory), and summarized below: 
</p>
<table>

<tbody><tr>
<th><b>Configuration Parameter</b>
</th>
<th><b>Usage</b>
</th>
<th><b>Default</b>
</th></tr>
<tr>
<td>enableScaling
</td>
<td>Boolean: Enable voltage and frequency (V/F) scaling for the application?
</td>
<td>false
</td></tr>
<tr>
<td>scaleVoltage
</td>
<td>Boolean: Scale voltage along with frequency?
</td>
<td>true
</td></tr>
<tr>
<td>waitVoltage
</td>
<td>Boolean: Power should wait during downward voltage ramping?
</td>
<td>true
</td></tr>
<tr>
<td>initialSetpointCPU
</td>
<td>UInt: The initial CPU domain setpoint at boot time
</td>
<td>2
</td></tr>
<tr>
<td>initialSetpointPER
</td>
<td>UInt: The initial peripheral (PER) domain setpoint at boot time
</td>
<td>0
</td></tr>
<tr>
<td>moveToSetpoints
</td>
<td>Boolean: Should Power transition to the initial setpoints during program initialization?
</td>
<td>false
</td></tr>
<tr>
<td>trackResources
</td>
<td>Boolean: Enable resource tracking for the application?
</td>
<td>false
</td></tr>
<tr>
<td>idleCpu
</td>
<td>Boolean: Idle the CPU automatically during idle time (in the Idle loop)?
</td>
<td>false
</td></tr>
<tr>
<td>idleFunc
</td>
<td>FuncPtr: The idling function to be used by Power when “idleCpu” is true
</td>
<td>Power.idleStopClock
</td></tr>
<tr>
<td>onChipRegion
</td>
<td>String: The on-chip memory region to place Power's code and data that must reside on-chip
</td>
<td>IRAM
</td></tr>
<tr>
<td>pmiControlLib
</td>
<td>pmiLib: The PMI library to be used (linked)
</td>
<td>Power.pmiLib_evm6748
</td></tr>
<tr>
<td>psclConfigLib
</td>
<td>psclLib: The PSCL library to be used (linked)
</td>
<td>Power.psclLib_evm6748
</td></tr></tbody></table>
<p>An example snippet from an application configuration script: 
</p>
<pre>   var Power = xdc.useModule('ti.sysbios.family.c674.Power');  /* ‘use’ Power in the app*/
  Power.enableScaling = true;                                 /* enable V/F scaling */
  Power.initialSetpointCPU = 2;                               /* initial CPU domain setpoint = 2 */
  Power.initialSetpointPER= 0;                                /* initial PER domain setpoint = 0 */
  Power.moveToSetpoints = true;                               /* move to initial setpoints at boot */
  Power.scaleVoltage = true;                                  /* scale voltage along with frequency */
  Power.waitVoltage = true;                                   /* wait during downward voltage ramps */
  Power.psclConfigLib = Power.psclLib_lcdk;                   /* select the pre-built PSCL library for LCDK */ 
  Power.pmiControlLib = Power.pmiLib_lcdk;                    /* select the pre-built PMI library for LCDK */
  Power.onChipRegion = "L3_CBA_RAM";                          /* place Power’s on-chip code/data in L3_CBA_RAM */
</pre>
<h2><span class="mw-headline" id="Miscellaneous">Miscellaneous</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=13" title="Edit section: Miscellaneous">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Available_Setpoints">Available Setpoints</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=14" title="Edit section: Available Setpoints">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following tables indicate the default V/F setpoints provided with the different pre-built PSCL configuration libraries: 
</p><p><b>psclLib_evm6748.a674</b> and <b>psclLib_evm6748.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>200MHz
</td>
<td>1.1V
</td></tr>
<tr>
<td>2
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<p><br /> <b>psclLib_evm6748_372.a674</b> and <b>psclLib_evm6748_372.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>200MHz
</td>
<td>1.1V
</td></tr>
<tr>
<td>2
</td>
<td>372MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<p><br /> <b>psclLib_evm6748_408.a674</b> and <b>psclLib_evm6748_408.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>200MHz
</td>
<td>1.1V
</td></tr>
<tr>
<td>2
</td>
<td>372MHz
</td>
<td>1.2V
</td></tr>
<tr>
<td>3
</td>
<td>408MHz
</td>
<td>1.3V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<p><br /> <b>psclLib_evm6748_456.a674</b> and <b>psclLib_evm6748_456.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>200MHz
</td>
<td>1.1V
</td></tr>
<tr>
<td>2
</td>
<td>372MHz
</td>
<td>1.2V
</td></tr>
<tr>
<td>3
</td>
<td>456MHz
</td>
<td>1.3V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<p><br /> <b>psclLib_lcdk.a674</b> and <b>psclLib_lcdk.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.3V
</td></tr>
<tr>
<td>1
</td>
<td>200MHz
</td>
<td>1.3V
</td></tr>
<tr>
<td>2
</td>
<td>300MHz
</td>
<td>1.3V
</td></tr>
<tr>
<td>3
</td>
<td>456MHz
</td>
<td>1.3V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.3V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.3V
</td></tr></tbody></table>
<p><br /> <b>psclLib_C6742.a674</b> and <b>psclLib_C6742.ae674</b>: 
</p>
<table>

<tbody><tr>
<th><b>CPU Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>100MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>150MHz
</td>
<td>1.1V
</td></tr>
<tr>
<td>2
</td>
<td>200MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<table>

<tbody><tr>
<th><b>PER Setpoint</b>
</th>
<th><b>Frequency</b>
</th>
<th><b>Voltage</b>
</th></tr>
<tr>
<td>0
</td>
<td>264MHz
</td>
<td>1.0V
</td></tr>
<tr>
<td>1
</td>
<td>300MHz
</td>
<td>1.2V
</td></tr></tbody></table>
<p><br /> 
</p>
<h3><span class="mw-headline" id="Constraints_for_Power_SLEEP_and_Power_DEEPSLEEP">Constraints for Power_SLEEP and Power_DEEPSLEEP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=15" title="Edit section: Constraints for Power SLEEP and Power DEEPSLEEP">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To operate within TMS320C6748 and OMAPL138 device constraints, it must be ensured that no off-chip accesses to DDR memories occur while PLL1 is bypassed. The Power Manager (Power) provides two sleep modes where this constraint is a concern: Power_SLEEP, when PLL1 is allowed to be bypassed, and Power_DEEPSLEEP. 
</p><p>Power, and the underlying PSCL and PMI layers have been implemented with the goal of minimizing the impact of this constraint upon the user. However, there remain some user-domain memory placement requirements, for invoking these two sleep modes. 
</p><p>When PLL1 is being bypassed the following sections must be explicitly placed in on-chip memory: 
</p>
<pre>   .text
  .bss
  .vecs
  .far
</pre>
<p>Either L2 or L3 memory (referred to as IRAM or L3_CBA_RAM in the SYS/BIOS configuration) can be used. Note that L2 memory will provide faster performance compared to L3. The following snippet from an application .cfg file shows how these sections can be placed into L3_CBA_RAM: 
</p>
<pre>   Program.sectMap[".text"] = "L3_CBA_RAM";
  Program.sectMap[".bss"] = "L3_CBA_RAM";
  Program.sectMap[".vecs"] = "L3_CBA_RAM";
  Program.sectMap[".far"] = "L3_CBA_RAM";
</pre>
<p>Power's own on-chip section (.ti_sysbios_family_c674_pmi_onchip) will be automatically placed in the on-chip section specified in Power's configuration (i.e., Power.onChipRegion). 
</p>
<h2><span class="mw-headline" id="Examples">Examples</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=16" title="Edit section: Examples">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="V/F_Scaling"></span><span class="mw-headline" id="V.2FF_Scaling">V/F Scaling</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=17" title="Edit section: V/F Scaling">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This example queries the Power module for the available V/F setpoints for the CPU, prints out the values, and then steps the processor thru these setpoints. The application first registers for notification of CPU setpoint changes, and when the notifications occur, prints out the notification parameters. Note that in this test only frequency is actually scaled; voltage scaling is disabled, to allow the test to run on a wider-selection of hardware. 
</p><p>To build this example you can create a CCS project using the two files: vfscale6x.c and vfscale6x.cfg. For example… Start the new project wizard to create a project. Select device Family of “C6000”, device variant of “Generic C674x Device”. Select the “Empty RTSC project” template and then click Next. Select the platform “ti.platforms.evm6748” from the drop list of available platforms. In the list of Product and Repositories, uncheck all the boxes except those for SYS/BIOS. Then click Finish. Unzip this file [<a rel="nofollow" class="external text" href="http://processors.wiki.ti.com/images/d/d1/Vfscale6x.zip">vfscale6x.zip</a>], copy and paste the vfscale6x.c and vfscale6x.cfg files into the project, and then build the project. 
</p><p>Load and run the example, and the CCS console output should look similar to the following: 
</p>
<pre>registered for PENDING_CPU_SETPOINTCHANGE event
registered for DONE_CPU_SETPOINTCHANGE event
number CPU setpoints = 3
CPU setpoint info:
 setpoint 0:
    freq = 100MHz, voltage = 1000mV
 setpoint 1:
    freq = 200MHz, voltage = 1100mV
 setpoint 2:
    freq = 300MHz, voltage = 1200mV
current CPU setpoint = 2
changing to CPU setpoint 0 ...
   myNotifyFxn - PENDING_CPU_SETPOINTCHANGE
     current = 2, next = 0
   myNotifyFxn - DONE_CPU_SETPOINTCHANGE
     previous = 2, current = 0
new setpoint = 0, measured CPU speed = 100MHz
BIOS.cpuFreq.lo = 100000000 Hz
changing to CPU setpoint 1 ...
   myNotifyFxn - PENDING_CPU_SETPOINTCHANGE
     current = 0, next = 1
   myNotifyFxn - DONE_CPU_SETPOINTCHANGE
     previous = 0, current = 1
new setpoint = 1, measured CPU speed = 199MHz
BIOS.cpuFreq.lo = 200000000 Hz
changing to CPU setpoint 2 ...
   myNotifyFxn - PENDING_CPU_SETPOINTCHANGE
     current = 1, next = 2
   myNotifyFxn - DONE_CPU_SETPOINTCHANGE
     previous = 1, current = 2
new setpoint = 2, measured CPU speed = 299MHz
BIOS.cpuFreq.lo = 300000000 Hz
</pre>
<h3><span class="mw-headline" id="Sleep_Modes">Sleep Modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=18" title="Edit section: Sleep Modes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This example demonstrates activation and wake from sleep modes. The application first registers for notification of sleep mode transitions. It then activates the Power_STANDBY and Power_SLEEP modes, with wakeup via the Clock timer tick. It then sets up an RTC alarm to wake the device in 15 seconds, and then activates Power_DEEPSLEEP. 
</p><p>To build this example you can create a CCS project using the two files: sleep6x.c and sleep6x.cfg. Create a CCS project like done for the previous example… Start the new project wizard to create a project. Select device Family of “C6000”, device variant of “Generic C674x Device”. Select the “Empty RTSC project” template and then click Next. Select the platform “ti.platforms.evm6748” from the drop list of available platforms. In the list of Product and Repositories, uncheck all the boxes except those for SYS/BIOS. Then click Finish. Unzip this file [<a rel="nofollow" class="external text" href="http://processors.wiki.ti.com/images/7/7a/Sleep6x.zip">sleep6x.zip</a>], copy and paste the sleep6x.c and sleep6x.cfg files into the project, and then build the project. 
</p><p>NOTE: Because this example activates the device DEEPSLEEP mode, to run it with CCS it is critical that CCS is “Free Run”. So after loading the program, select Run-&gt;Free Run, and then halt the DSP after at least 15 seconds. Also, if this test is run on an OMAP-L138, the ARM processor must be “Free Run” during the test as well, otherwise there will be emulation failure messages to the console. 
</p><p>After halting the DSP, you can look at the output using the ROV tool. (Normally there won’t be any CCS console output for this test.) In ROV, look at the SysMin buffer contents. You should see output similar to the following: 
</p>
<pre>registered for GOINGTOSLEEP event
registered for AWAKEFROMSLEEP event
registered for GOINGTODEEPSLEEP event
registered for AWAKEFROMDEEPSLEEP event
current Clock ticks = 0
going to STANDBY ...
awake from STANDBY, status = 0x0
current Clock ticks = 1
going to SLEEP ...
   myNotifyFxn - GOINGTOSLEEP
   myNotifyFxn - AWAKEFROMSLEEP
awake from SLEEP, status = 0x0
current Clock ticks = 2
current RTC time = 0 sec
going to DEEPSLEEP ...
   myNotifyFxn - GOINGTODEEPSLEEP
   myNotifyFxn - AWAKEFROMDEEPSLEEP
awake from DEEPSLEEP, status = 0x0
current RTC time = 15 sec
</pre>
<h2><span class="mw-headline" id="Known_Issues">Known Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=19" title="Edit section: Known Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="I2C_Communication_Failures_on_Beta_SOMs">I2C Communication Failures on Beta SOMs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=20" title="Edit section: I2C Communication Failures on Beta SOMs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>I2C communication instabilities occur on certain Beta C6748 and OMAPL138 SOMs on the evm6748. The instability occurs after commanding the DCDC3 output of the TPS65070 to move to or from 1.0V. The output voltage changes as expected, but further I2C communication with the TPS65070 may fail. (No issue has been seen for setpoints with voltages of 1.1V and 1.2V.) The defect was root-caused to an inappropriate signal buffer on the I2C clock signal line. For affected SOMs, scaling to/from 1.0V should be avoided. 
</p>
<h3><span class="mw-headline" id="No_Update_of_DDR_Timing_Parameters">No Update of DDR Timing Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=21" title="Edit section: No Update of DDR Timing Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Power does not update DDR timing parameters as part of scaling PLL1 (i.e., the Peripheral domain) on the C6748 and OMAPL138 devices. This is not clearly described in current documentation. Depending upon your DDR configuration, it may be necessary for you to update timing parameters, after calling Power_changeSetpoint() to scale PLL1. 
</p>
<h3><span class="mw-headline" id="Linker_Error_when_Resource_Tracking_is_not_Enabled">Linker Error when Resource Tracking is not Enabled</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;section=22" title="Edit section: Linker Error when Resource Tracking is not Enabled">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The Power module is designed to be scalable, meaning that if certain features are disabled, then the corresponding code and data won’t get linked into the application (reducing application memory footprint). The default configuration for Power has the Resource Tracking feature disabled. If the application makes Power_setDependency() or Power_releaseDependency() calls in C code, without first enabling the Resource Tracking feature in the application configuration, then a linker error like the following will occur: 
</p>
<pre>   undefined symbol                       first referenced in file
  ----------------                       ------------------------
  ti_sysbios_family_c674_Power_database  C:\Program Files\TexasInstruments\bios_6_33_01_25\
                                     packages\ti\sysbios\family\c674\lib\debug\
                                     ti.sysbios.family.c674.ae674&lt;Power.oe674&gt;
  
  error: unresolved symbols remain
</pre>
<p>To avoid this error, and allow Power’s resource database to be linked into the application, the Resource Tracking feature needs to be enabled in the application configuration. This can be done either via the graphical configuration tool (by checking the box next to “Enable resource tracking” in the Power module page), or by adding the following to the application configuration script: 
</p>
<pre>   Power.trackResources = true;
</pre>
<!-- 
NewPP limit report
Cached time: 20201130050743
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.093 seconds
Real time usage: 0.096 seconds
Preprocessor visited node count: 87/1000000
Preprocessor generated node count: 92/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:14464-0!canonical and timestamp 20201130050742 and revision id 98417
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Power Module for C6748 and OMAP-L138</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Power Module for C6748 and OMAP-L138</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Power Module for C6748 and OMAP-L138</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;oldid=98417">https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;oldid=98417</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_SYSBIOS.html" title="Category:SYSBIOS">SYSBIOS</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Power+Module+for+C6748+and+OMAP-L138" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Power_Module_for_C6748_and_OMAP-L138.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Power_Module_for_C6748_and_OMAP-L138&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Power_Module_for_C6748_and_OMAP-L138.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Power_Module_for_C6748_and_OMAP-L138.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Power_Module_for_C6748_and_OMAP-L138.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;oldid=98417" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Power_Module_for_C6748_and_OMAP-L138&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 27 February 2012, at 15:32.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.093","walltime":"0.096","ppvisitednodes":{"value":87,"limit":1000000},"ppgeneratednodes":{"value":92,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130050743","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":229});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Power_Module_for_C6748_and_OMAP-L138 by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:08:41 GMT -->
</html>
