<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TInk by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 05:20:51 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TInk - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TInk","wgTitle":"TInk","wgCurRevisionId":204324,"wgRevisionId":204324,"wgArticleId":31671,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Applications"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TInk","wgRelevantArticleId":31671,"wgRequestId":"8c167afa94443a26752355c4","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->

                    <script>var w=window;if(w.performance||w.mozPerformance||w.msPerformance||w.webkitPerformance){var d=document;AKSB=w.AKSB||{},AKSB.q=AKSB.q||[],AKSB.mark=AKSB.mark||function(e,_){AKSB.q.push(["mark",e,_||(new Date).getTime()])},AKSB.measure=AKSB.measure||function(e,_,t){AKSB.q.push(["measure",e,_,t||(new Date).getTime()])},AKSB.done=AKSB.done||function(e){AKSB.q.push(["done",e])},AKSB.mark("firstbyte",(new Date).getTime()),AKSB.prof={custid:"295384",ustr:"",originlat:"0",clientrtt:"185",ghostip:"23.11.215.94",ipv6:false,pct:"10",clientip:"163.125.46.158",requestid:"17234baa",region:"26813",protocol:"",blver:14,akM:"g",akN:"ae",akTT:"O",akTX:"1",akTI:"17234baa",ai:"181835",ra:"false",pmgn:"",pmgi:"",pmp:"",qc:""},function(e){var _=d.createElement("script");_.async="async",_.src=e;var t=d.getElementsByTagName("script"),t=t[t.length-1];t.parentNode.insertBefore(_,t)}(("https:"===d.location.protocol?"https:":"http:")+"//ds-aksb-a.akamaihd.net/aksb.min.js")}</script>
                    </head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TInk rootpage-TInk skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TInk</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Welcome_to_TInk"><span class="tocnumber">1</span> <span class="toctext"><b>Welcome to TInk</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#The_TI_Balancing_Tank_Project"><span class="tocnumber">2</span> <span class="toctext">The TI Balancing Tank Project</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Project_Goal"><span class="tocnumber">2.1</span> <span class="toctext">Project Goal</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Hardware_Overview"><span class="tocnumber">2.2</span> <span class="toctext">Hardware Overview</span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Tank_Chassis"><span class="tocnumber">2.2.1</span> <span class="toctext">Tank Chassis</span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Battery.2C_USB_Regulator_Power_Source_.26_Battery_Holder"><span class="tocnumber">2.2.2</span> <span class="toctext">Battery, USB Regulator Power Source &amp; Battery Holder</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#LM4F120_Stellaris_Launchpad"><span class="tocnumber">2.2.3</span> <span class="toctext">LM4F120 Stellaris Launchpad</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#SensorHub_Booster_Pack"><span class="tocnumber">2.2.4</span> <span class="toctext">SensorHub Booster Pack</span></a></li>
<li class="toclevel-3 tocsection-9"><a href="#CC3000EM_Wifi_Adapter"><span class="tocnumber">2.2.5</span> <span class="toctext">CC3000EM Wifi Adapter</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Motor_Driver"><span class="tocnumber">2.2.6</span> <span class="toctext">Motor Driver</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Software_Overview"><span class="tocnumber">2.3</span> <span class="toctext">Software Overview</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Code_Composer_Studio"><span class="tocnumber">2.3.1</span> <span class="toctext">Code Composer Studio</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#TI_Real_Time_Operating_System"><span class="tocnumber">2.3.2</span> <span class="toctext">TI Real Time Operating System</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Pulse_Width_Modulation_Driver"><span class="tocnumber">2.3.3</span> <span class="toctext">Pulse Width Modulation Driver</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#SensorLib"><span class="tocnumber">2.3.4</span> <span class="toctext">SensorLib</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#HTTP_Server"><span class="tocnumber">2.3.5</span> <span class="toctext">HTTP Server</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Websocket"><span class="tocnumber">2.3.6</span> <span class="toctext">Websocket</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#HTML5_Webpage"><span class="tocnumber">2.3.7</span> <span class="toctext">HTML5 Webpage</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-19"><a href="#Applications"><span class="tocnumber">2.4</span> <span class="toctext">Applications</span></a>
<ul>
<li class="toclevel-3 tocsection-20"><a href="#Drive"><span class="tocnumber">2.4.1</span> <span class="toctext">Drive</span></a>
<ul>
<li class="toclevel-4 tocsection-21"><a href="#Drive-By-Tilt"><span class="tocnumber">2.4.1.1</span> <span class="toctext">Drive-By-Tilt</span></a></li>
<li class="toclevel-4 tocsection-22"><a href="#Drive-By-Keyboard"><span class="tocnumber">2.4.1.2</span> <span class="toctext">Drive-By-Keyboard</span></a></li>
<li class="toclevel-4 tocsection-23"><a href="#No_Sensor_Feedback"><span class="tocnumber">2.4.1.3</span> <span class="toctext">No Sensor Feedback</span></a></li>
<li class="toclevel-4 tocsection-24"><a href="#Semi-Autonomous_With_Sensor_Feedback"><span class="tocnumber">2.4.1.4</span> <span class="toctext">Semi-Autonomous With Sensor Feedback</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-25"><a href="#Balance"><span class="tocnumber">2.4.2</span> <span class="toctext">Balance</span></a></li>
<li class="toclevel-3 tocsection-26"><a href="#Smart_Config"><span class="tocnumber">2.4.3</span> <span class="toctext">Smart Config</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-27"><a href="#Current_Project_Status"><span class="tocnumber">2.5</span> <span class="toctext">Current Project Status</span></a>
<ul>
<li class="toclevel-3 tocsection-28"><a href="#Known_Problems"><span class="tocnumber">2.5.1</span> <span class="toctext">Known Problems</span></a>
<ul>
<li class="toclevel-4 tocsection-29"><a href="#Server_Instability"><span class="tocnumber">2.5.1.1</span> <span class="toctext">Server Instability</span></a></li>
<li class="toclevel-4 tocsection-30"><a href="#Web_Socket_Instability"><span class="tocnumber">2.5.1.2</span> <span class="toctext">Web Socket Instability</span></a></li>
<li class="toclevel-4 tocsection-31"><a href="#I2C_Bus_Corruption"><span class="tocnumber">2.5.1.3</span> <span class="toctext">I2C Bus Corruption</span></a></li>
<li class="toclevel-4 tocsection-32"><a href="#Sensor_Hub_Sleeping"><span class="tocnumber">2.5.1.4</span> <span class="toctext">Sensor Hub Sleeping</span></a></li>
<li class="toclevel-4 tocsection-33"><a href="#Balancing_Integration"><span class="tocnumber">2.5.1.5</span> <span class="toctext">Balancing Integration</span></a></li>
<li class="toclevel-4 tocsection-34"><a href="#Server_Failure_When_Running_Motors_Near_Full_Power"><span class="tocnumber">2.5.1.6</span> <span class="toctext">Server Failure When Running Motors Near Full Power</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-35"><a href="#CCS_Project"><span class="tocnumber">2.5.2</span> <span class="toctext">CCS Project</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-36"><a href="#Project_Hurdles"><span class="tocnumber">2.6</span> <span class="toctext">Project Hurdles</span></a>
<ul>
<li class="toclevel-3 tocsection-37"><a href="#Hardware_Design_Notes"><span class="tocnumber">2.6.1</span> <span class="toctext">Hardware Design Notes</span></a>
<ul>
<li class="toclevel-4 tocsection-38"><a href="#Power_Issues"><span class="tocnumber">2.6.1.1</span> <span class="toctext">Power Issues</span></a></li>
<li class="toclevel-4 tocsection-39"><a href="#CC3000EM_Wifi_Inrush"><span class="tocnumber">2.6.1.2</span> <span class="toctext">CC3000EM Wifi Inrush</span></a></li>
<li class="toclevel-4 tocsection-40"><a href="#Motor_Inrush"><span class="tocnumber">2.6.1.3</span> <span class="toctext">Motor Inrush</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-41"><a href="#Application_Software_Notes"><span class="tocnumber">2.6.2</span> <span class="toctext">Application Software Notes</span></a>
<ul>
<li class="toclevel-4 tocsection-42"><a href="#SensorLib_Integration"><span class="tocnumber">2.6.2.1</span> <span class="toctext">SensorLib Integration</span></a></li>
<li class="toclevel-4 tocsection-43"><a href="#HTTP_Server_Integration"><span class="tocnumber">2.6.2.2</span> <span class="toctext">HTTP Server Integration</span></a></li>
<li class="toclevel-4 tocsection-44"><a href="#WebSocket_Integration"><span class="tocnumber">2.6.2.3</span> <span class="toctext">WebSocket Integration</span></a></li>
<li class="toclevel-4 tocsection-45"><a href="#Driving_Straight"><span class="tocnumber">2.6.2.4</span> <span class="toctext">Driving Straight</span></a></li>
<li class="toclevel-4 tocsection-46"><a href="#Balancing"><span class="tocnumber">2.6.2.5</span> <span class="toctext">Balancing</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-47"><a href="#The_TInk_Team"><span class="tocnumber">3</span> <span class="toctext">The TInk Team</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Welcome_to_TInk"><b>Welcome to TInk</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=1" title="Edit section: Welcome to TInk">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Welcome to the official page for TInk, The TI Balancing Tank Project. TInk was a project done by the TI Santa Barbara interns in the summer of 2013.
</p>
<h1><span class="mw-headline" id="The_TI_Balancing_Tank_Project">The TI Balancing Tank Project</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=2" title="Edit section: The TI Balancing Tank Project">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Project_Goal">Project Goal</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=3" title="Edit section: Project Goal">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><span style="line-height: 1.5em;">Using a Stellaris launchpad, SensorHub booster pack, and a CC3000 wifi interface, design a robotic tank that can be remotely controlled over wifi using an HTML5-enabled browser interface. When driven into a wall, the robot will automatically detect that it has 'gone vertical' and begin balancing itself on its back wheels. Subsequent drive commands will be obeyed in this vertical position.</span><br />
</p>
<h2><span class="mw-headline" id="Hardware_Overview">Hardware Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=4" title="Edit section: Hardware Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Tank_Chassis">Tank Chassis</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=5" title="Edit section: Tank Chassis">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The tank chassis consists of three sub-components:<br />
</p>
<ol><li><a rel="nofollow" class="external text" href="http://www.tamiyausa.com/items/geniuseries-educational-kits-50/educational-construction-38000/universal-plate-70098">Universal Plate Set</a></li>
<li><a rel="nofollow" class="external text" href="http://www.tamiyausa.com/items/geniuseries-educational-kits-50/educational-construction-38000/track-and-wheel-set-70100">Track &amp; Wheel Set</a></li>
<li><a rel="nofollow" class="external text" href="http://www.tamiyausa.com/items/geniuseries-educational-kits-50/educational-construction-38000/twin-motor-gearbox-70097">Twin-Motor Gearbox</a><br /></li></ol>
<p>All of these products are produced by Tamiya and can be purchased from their online store. Instruction on how to build the twin motor gearbox are available <a rel="nofollow" class="external text" href="http://www.sparkfun.com/products/319">here</a>.<br />
</p><p>Mount the gearbox one hole back from the rear of the tank. &#160;Mount the front axle as forward as possible. &#160;Mount the bottom wheels as shown in the picture below. Finally, place the treads around the wheels.
</p>
<h3><span id="Battery,_USB_Regulator_Power_Source_&amp;_Battery_Holder"></span><span class="mw-headline" id="Battery.2C_USB_Regulator_Power_Source_.26_Battery_Holder">Battery, USB Regulator Power Source &amp; Battery Holder</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=6" title="Edit section: Battery, USB Regulator Power Source &amp; Battery Holder">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span style="line-height: 1.5em;">Tink is powered by a <a rel="nofollow" class="external text" href="http://www.amazon.com/gp/product/B00AT66CEI/ref=oh_details_o05_s00_i00">3.7V 18650 rechargeable lithium ion battery</a>. The tank itself has a <a rel="nofollow" class="external text" href="http://www.amazon.com/Gino-Black-Batteries-Battery-Holder/dp/B00CQKBQBE/ref=sr_1_cc_2?s=aps&amp;ie=UTF8&amp;qid=1376433698&amp;sr=1-2-catcorr&amp;keywords=18650+battery+holder">18650 battery holder</a> that is attached to the chassis, right behind the front axle. A battery holder and corresponding battery can be found at various suppliers but links to recommended ones are provided.</span><br />
</p><p>Tink’s board needs a 5V power source through USB. In order to provide this, a USB <a rel="nofollow" class="external text" href="http://www.ebay.com/itm/Mini-Mobile-Charger-Power-Supply-DC-Step-Up-Converter-USB-Output-for-Charging-/390634266618">power source regulator</a> must be used along side the lithium ion battery.<br />
</p><p>The Battery holder has two wires, a black wire and a red wire. The red wire is soldered to the IN+ corner of the USB regulator and the black wire is soldered to the IN- corner of the USB regulator. There is another red wire that is soldered to the IN+ corner of the USB regulator, but the other end goes to the VIN pin of the motor driver. &#160;This is further explained in the Motor Driver Section.
</p>
<h3><span class="mw-headline" id="LM4F120_Stellaris_Launchpad">LM4F120 Stellaris Launchpad</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=7" title="Edit section: LM4F120 Stellaris Launchpad">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span style="line-height: 1.5em;">TInk has an&#160;</span><a rel="nofollow" class="external text" href="http://www.ti.com/lit/ug/spmu289b/spmu289b.pdf">LM4F120</a><span style="line-height: 1.5em;"> ARM micro-controller with a USB 2.0 interface. This LaunchPad has:</span>
</p>
<ul><li>32-bit ARM Cortex-M4 based MCU with a floating point unit</li>
<li>256 KB Flash</li>
<li>32 KB SRAM</li>
<li>2 KB EEPROM on-chip memory</li></ul>
<p>These features give developers a lot of options. TInk takes advantage of all the space and processing power on the LaunchPad. The floating point unit is used to do PWM calculations. The efs file system, used to house the webpage that TInk serves up, is stored in the abundant SRAM. Lastly, The vast amounts of Flash memory are used to store movement data during semi-autonomous operation. The launchpad is on top of the motor driver. It has the sensor hub and the CC3000 on top of it.
</p>
<h3><span class="mw-headline" id="SensorHub_Booster_Pack">SensorHub Booster Pack</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=8" title="Edit section: SensorHub Booster Pack">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <a rel="nofollow" class="external text" href="http://www.ti.com/lit/ug/spmu290/spmu290.pdf">SensorHub Booster Pack</a>&#160;houses several pieces of hardware. First it has a 9 axis motion sensor with a magnetometer, a gyroscope, and an acceleration. The SensorHub also has an infrared temperature sensor, a pressure sensor, a humidity sensor and an infrared light sensor.
</p><p>Of these sensors, only the 9 axis motion sensor is used in the TInk project. At one tme the temperature sensor was used but it caused too many problems and the functionality was removed. &#160;The communication that is done from the SensorHub to the Stalleris is through I2C and those pins are PB6 through PB7. There are also two pins used for interrupts for the two types of data. Pin PB2 is used for incoming of motion data and pin PE0 was used for incoming temperature data.
</p>
<div class="thumb tleft"><div class="thumbinner" style="width:182px;"><a href="File_CC3000EM.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/0/0a/CC3000EM.JPG" width="180" height="152" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_CC3000EM.html" class="internal" title="Enlarge"></a></div>CC3000EM Module</div></div></div>
<h3><span class="mw-headline" id="CC3000EM_Wifi_Adapter">CC3000EM Wifi Adapter<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=9" title="Edit section: CC3000EM Wifi Adapter">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The <a rel="nofollow" class="external text" href="CC3000_Wi-Fi_EM.html">CC3000EM</a> provides the Wifi connection for TInk. This module attaches to the RF headers on theSensorHub BoosterPack that attaches to the LaunchPad and communicates through the SPI interface. Pins A2 through A5 from the Stalleris are used for the SPI interface to the CC3000. The CC3000 is placed on top of the Sensor Hub on the RF headers.
</p>
<h3><span class="mw-headline" id="Motor_Driver">Motor Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=10" title="Edit section: Motor Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This <a rel="nofollow" class="external text" href="http://longhornengineer.com/projects/pcb/motor-driver-booster-pack/">motor driver</a> is a low voltage booster pack. The parts are TI made and grouped together by a third party. The motor driver takes two inputs for each motor that drive the tank in a certian direction. On page eight of the TI <a rel="nofollow" class="external text" href="http://www.ti.com/lit/ds/symlink/drv8833.pdf">dual H-Bridge motor driver user guide</a> there is a table of inputs that are mapped to outputs and a direction. The outputs are forward, reverse, coasting and brake.
</p><p>The pins that go with one motor are PB0 and PB1 and the motor has pins PB4 and PB5 in the Stalleris launchpad. Those pins are going to be directly mapped to the same pins in the motor driver. Those pins will have to be wired to pins AIN1, AN2, BN1 and BN2 with A and B being the two different motors. The pins that say Motor_A and Motor_B are what will be connected to the two different motors using two wires for each motor. Also there need to be a wire directly connected from the battery holder to the VIN next to Motor_B.
</p>
<h2><span class="mw-headline" id="Software_Overview">Software Overview<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=11" title="Edit section: Software Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Code_Composer_Studio">Code Composer Studio<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=12" title="Edit section: Code Composer Studio">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span style="line-height: 1.5em;">Code Composer Studio (CCS) is the microprocessing development environment produced by Texas Instruments. CCS is available freely to developers. CCS has many tools that are useful for embedded development. TInk was made entirely with CS version 5.4. CCS is available to download <a rel="nofollow" class="external text" href="http://software-dl.ti.com/ccs/esd/documents/ccs_downloads.html">here</a>.</span>
</p>
<h3><span class="mw-headline" id="TI_Real_Time_Operating_System">TI Real Time Operating System</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=13" title="Edit section: TI Real Time Operating System">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:202px;"><a href="File_TI-RTOS.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/a/ad/TI-RTOS.png" width="200" height="154" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_TI-RTOS.html" class="internal" title="Enlarge"></a></div>TI-RTOS Multiple Tasks</div></div></div>
<p><span style="line-height: 1.5em;">TI Real Time Operating System (TI-RTOS) is a micro-controller real time operating system developed by Texas Instruments. There are many benefits to a real time operating system over a traditional synchronous micro-controller operating system. TI-RTOS allows more utilization of the ARM processor by running asynchronous processes in one program. In the TInk project there are four tasks, which run at different times. These tasks are the HTTP Server task, the Websocket task, the Control task, and the Idle task. The Idle task is in every TI-RTOS application. Each task has their own time to run based on their priority. For TInk, the Control task has the highest priority of 5. The Websocket task has a priority of 4 and the HTTP Server task has a priority of 3. The idle task is the lowest priority and runs when there is nothing else that needs to be done. TI-RTOS also supports most drivers form Stellarisware. TInk was developed using TI-RTOS version 1.10.00.23. TI-RTOS is available <a rel="nofollow" class="external text" href="http://www.ti.com/tool/ti-rtos">here</a>.</span>&#160;
</p>
<h3><span class="mw-headline" id="Pulse_Width_Modulation_Driver">Pulse Width Modulation Driver<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=14" title="Edit section: Pulse Width Modulation Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A Pulse Width Modulation (PWM) Driver is not included with TI-RTOS. A PWM driver needs to be installed. Follow closely, a mistake could corrupt your TI-RTOS install.
</p>
<ol><li>First make a backup of your TI-RTOS install.</li>
<li>Next unzip the TI-RTOS folder that is available <a rel="nofollow" class="external text" href="https://www.dropbox.com/s/dixpaug8b7p5cq7/PWM_Driver_rev4.zip">here</a>, save it over the original.</li>
<li>Now TInk should have PWM funcitonality.</li></ol>
<h3><span class="mw-headline" id="SensorLib">SensorLib</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=15" title="Edit section: SensorLib">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The SensorLib Library provides the backend for use of the SensorHub and the many sensors that it houses. There are functions in the sensor library that initialize the SensorHub. These are called at startup of Tink. There are function calls that take data from the SensorHub, through the I2C bus and translate that information into numbers that one can understand. These calls are done in the control task in the Tink project. The data is placed in a queue for use in steering and balancing operations. Then the data is placed in a secondary queue for a different use. This data is then taken from the queue by the WebSocket task which sends the data over Wifi to be displayed to the user.
</p>
<h3><span class="mw-headline" id="HTTP_Server">HTTP Server</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=16" title="Edit section: HTTP Server">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="thumb tright"><div class="thumbinner" style="width:362px;"><a href="File_Tinkinterface.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/2/27/Tinkinterface.png" width="360" height="178" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Tinkinterface.html" class="internal" title="Enlarge"></a></div>TInk Web Interface</div></div></div>
<p>The HTTP Server serves up the HTML page to those who browse to it. The task is set to serve up to the page the one controlling Tink and no one else so that way control is not interrupted by others.
</p>
<h3><span class="mw-headline" id="Websocket">Websocket<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=17" title="Edit section: Websocket">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>HTTP is a very useful protocol but it is based on a request and response system. When controlling TInk it is more useful to be able to send commands down to it in real time in order to control the tank with minimal lag. This is where WebSockets come in. WebSockets allow for bidirectional communication between a client and host.<br />
</p><p>TInk uses a fairly simple communication protocol. TInk sends up motion data. It is sent as a string. Index 0 of the string has 'D' to signify data. An acknowledgement packet is sent back. &#160;This acknowledgement is a string with the single character 'A'. PWM commands are sent down to TInk. These commends are strings of length 4. Index 0 of the string is the character 'C', to signify control. Index 1 is the direction the tank is to be moving. The character 'F' is sent for forward and 'R' is sent for reverse. Index 2 of the string is turning data. &#160;'L' for left, 'R' for right. Index 3 of the string is speed. There are 10 speeds (0 - 9) to choose from.
</p>
<h3><span class="mw-headline" id="HTML5_Webpage">HTML5 Webpage<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=18" title="Edit section: HTML5 Webpage">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>TInk serves up a webpage in order for users to drive the tank. This page is HTML5 based and functions on most modern browsers. The page is dynamic and adjusts it's size based on the screen of the device it is loaded up on. All of the graphics are HTML5 canvas elements. This allows for light weight code that looks like a native app. HTML can request information from a browser and that is what TInk does. There is code that asks the browser if the device has a touch screen and if the device supports motion events. Based on the responses to these queries, the page looks and functions slightly differently. On a PC, the page displays keyboard controls. On tablets and smartphones, the page takes tilt data from the device and uses that for controlling TInk.
</p>
<h2><span class="mw-headline" id="Applications">Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=19" title="Edit section: Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>TInk has several applications. {{#ev:youtube|I-0c4I7Gc8I|Drive-By-Tilt|right}}
</p>
<h3><span class="mw-headline" id="Drive">Drive</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=20" title="Edit section: Drive">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><span style="line-height: 1.5em;">TInk, like any other tank, can be driven. But, unlike any other tank, Tink has two different methods of control.</span>
</p>
<h4><span class="mw-headline" id="Drive-By-Tilt">Drive-By-Tilt</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=21" title="Edit section: Drive-By-Tilt">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="line-height: 1.5em;">TInk can be controlled by tilting your smartphone or tablet with support for HTML5 canvas and websockets. There are several devices that TInk is known to work with: iPhone/iPad/iPod Touch with iOS 4.2+ and Android devices using&#160;<a rel="nofollow" class="external text" href="https://play.google.com/store/apps/details?id=org.mozilla.firefox">Firefox</a>. The Firefox browser is available on the <a rel="nofollow" class="external text" href="https://play.google.com/store?hl=en">Google Play Store</a>. TInk does not function on Windows Phone 7 and has not been tested on Windows Phone 8.</span>
</p>
<h4><span class="mw-headline" id="Drive-By-Keyboard">Drive-By-Keyboard</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=22" title="Edit section: Drive-By-Keyboard">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="line-height: 1.5em;">TInk can also be driven using your traditional keyboard interface. This form of control should work with any desktop or laptop with a keyboard running a modern browser that supports HTML5 canvas.</span>
</p>
<h4><span class="mw-headline" id="No_Sensor_Feedback">No Sensor Feedback</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=23" title="Edit section: No Sensor Feedback">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="line-height: 1.5em;">Currently, TInk is driven without any sensor feedback. This means that each motor is given the same amount of power when driven straight. This may sound appropriate but due to differences in manufacturing each motor performs slightly differently. Thus, giving each motor the same power leads to a slight curve in the tank’s motion.</span>
</p>
<h4><span class="mw-headline" id="Semi-Autonomous_With_Sensor_Feedback">Semi-Autonomous With Sensor Feedback</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=24" title="Edit section: Semi-Autonomous With Sensor Feedback">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="line-height: 1.5em;">Functionality for semi-autonomous control that corrects the motor differences through use of sensor data has been implemented. This has not been integrated into the main TInk project at this time but will be in the future.</span><br />
</p>
<h3><span class="mw-headline" id="Balance">Balance<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=25" title="Edit section: Balance">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Once in the vertical position, TInk can balance itself on its hind axle. At the present time, this is a separate app from the main TInk program.
</p>
<table width="200" border="1" cellpadding="1" cellspacing="1">

<tbody><tr>
<td>SfSoGB1gcv0|TInk Balance Progress}}
</td>
<td>CqnyA51CdHA|TInk Balancing}}
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Smart_Config">Smart Config</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=26" title="Edit section: Smart Config">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Smart Config is a TI provided app for configuring the CC3000 to connect to Wifi access points. &#160;There is an included version of this that runs when button one is held down on the LaunchPad. There have been difficulties getting this to function so a separate app was created to allow for easier configuration. This app will need to be flashed onto the LaunchPad separately from TInk. The app is called EasyConfig and it is designed for use with the CC3000EM module. Once the app is loaded up, follow these instructions:
</p>
<ol><li>Start with the Stellaris turned off.</li>
<li>If the CC3000EM has been configured in the past continue to step 3. If this is the first time configuring the CC3000, go to step 4.</li>
<li>Hold down switch 2 (SW2).</li>
<li>Turn on the Stellaris. Press switch 1 (SW1).</li>
<li>The CC3000 is now Smart Config mode (the blue LED should be blinking). There is an app available for smart phones on their respective app stores (iOS and Android) called SmartConfig. &#160;Run this app to configure the CC3000 to an access point.</li>
<li>The CC3000 should be configured now. TInk can now be reloaded onto the Stellaris and should function.</li></ol>
<p><br />
</p>
<h2><span class="mw-headline" id="Current_Project_Status">Current Project Status</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=27" title="Edit section: Current Project Status">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Development on the project has ended. Most of the goals that were set at the start of the project were achieved. There are some reliability issues to still squash but the tank functions for the most part, and is a fun gadget to play around with.
</p>
<h3><span class="mw-headline" id="Known_Problems">Known Problems</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=28" title="Edit section: Known Problems">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There are several known problems with the current version of TInk.
</p>
<h4><span class="mw-headline" id="Server_Instability">Server Instability</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=29" title="Edit section: Server Instability">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Sometimes the webpage fails to load. This often leaves the server in a state where a power cycle is required.
</p>
<h4><span class="mw-headline" id="Web_Socket_Instability">Web Socket Instability</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=30" title="Edit section: Web Socket Instability">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The Websocket stops functioning at times. It gets stuck in a loop in the hci event handler. Rebooting the system does fix this. This problem happens frequently. Fixes with the temperature sensor my have fixed this problem.
</p>
<h4><span class="mw-headline" id="I2C_Bus_Corruption">I2C Bus Corruption</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=31" title="Edit section: I2C Bus Corruption">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The I2C bus is sometimes not cleared. This chokes up the bus and it does not function properly. A power cycle fixes this problem
</p>
<h4><span class="mw-headline" id="Sensor_Hub_Sleeping">Sensor Hub Sleeping</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=32" title="Edit section: Sensor Hub Sleeping">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The sensor hub at times does not return any real time data because it goes to sleep and never wakes back up.&#160;
</p>
<h4><span class="mw-headline" id="Balancing_Integration">Balancing Integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=33" title="Edit section: Balancing Integration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The balancing and autonomous behavior have not been integrated into the main project. They can be run as separate projects on the same hardware though.
</p>
<h4><span class="mw-headline" id="Server_Failure_When_Running_Motors_Near_Full_Power">Server Failure When Running Motors Near Full Power</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=34" title="Edit section: Server Failure When Running Motors Near Full Power">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>There is an issue when running the motors at very high speeds (near or at&#160;%100). Over time (usually a few seconds) this will cause the Server to get stuck in the hci event handler and be unresponsive. The only way to fix this is to perform a power cycle. Through testing, power issues have been ruled out. It could be interference from the motors causing hardware issues with the CC3000EM.
</p>
<h3><span class="mw-headline" id="CCS_Project">CCS Project</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=35" title="Edit section: CCS Project">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The CCS projects for TInk will be posted to this wiki in the near future. Importing the project into CCS and loading it onto TInk hardware will give it the full functionality of the TInk bot. Projects are available for balancing and corrected driving as well as the Wifi easyconfig.
</p>
<h2><span class="mw-headline" id="Project_Hurdles">Project Hurdles</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=36" title="Edit section: Project Hurdles">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Hardware_Design_Notes">Hardware Design Notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=37" title="Edit section: Hardware Design Notes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Power_Issues">Power Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=38" title="Edit section: Power Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>We had power issues using the LIPO battery booster pack. It is a booster pack made by a 3rd party using all TI parts. The battery boosterpack is based on old revision that was never meant to be released. It had many issues but, the one that affected the project most was everything turned off when the motor driver was on at random instances, so what we did was scrap the booster pack and use the lithium battery for power.
</p><p>It was later found that there was not a common ground between the Stellaris and the lithium battery. There would be a voltage difference of about .3 V. To fix that, a wire was added from the contact on the battery to the ground on the Stellaris.
</p>
<h4><span class="mw-headline" id="CC3000EM_Wifi_Inrush">CC3000EM Wifi Inrush</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=39" title="Edit section: CC3000EM Wifi Inrush">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="line-height: 1.5em;">The CC3000 is available in two flavors. The booster pack version is the latest and works great. Originally the CC3000 was released as an EM module to be placed on top RF headers, such as the ones on the Sensor Hub Booster Pack. This original model has the exact same spec as the boosterpack model but had one flaw, a very large inrush at startup. This inrush causes problems with the LaunchPad, the brownout switch goes off and causes an infinite reboot cycle. This problem is well documented and people have found a solution: external power. The brownout switch on the Stellaris was removed and a diode was added, pointing to the CC3000 voltage header and then connected that to the VBUS of the Stellaris for more current to stop the dip that the board initially sustains. With that fix, the boot cycle issue is no longer a problem.</span>
</p>
<h4><span class="mw-headline" id="Motor_Inrush">Motor Inrush<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=40" title="Edit section: Motor Inrush">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Early on in the project the team had planned on using a battery boosterpack. This boosterpack powered the whole tank, including the motors. The battery couldn't push out enough juice for the motors to run along with the Wifi with enough power. Due to this the power source was changed to the lithium ion battery. In order to isolate the 5V USB launchpad power source from the inrush and back EMF generated by the motors, the motor driver's motor voltage is routed directly from the battery's positive terminal, bypassing the USB regulator. This solved the motor inrush problem.
</p>
<h3><span class="mw-headline" id="Application_Software_Notes">Application Software Notes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=41" title="Edit section: Application Software Notes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="SensorLib_Integration">SensorLib Integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=42" title="Edit section: SensorLib Integration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Integrating the SensorLib Library was not trivial. &#160;We wanted the control task to have the primary access to the sensor data. So the control task calls SensorLib calls to get the data from the SensorHub that is then analyzed and used for steering and balancing. First the data is placed in a queue so that it can be processed and averaged. Then the data is placed in a secondary queue for the websocket task to access. This is because extra calls to collect data for the websocket task would be inefficient.
</p><p>Later in the project there were issues with the queue being filled. &#160;It was found that the collection of temperature data was causing this problem. &#160;All temperature data collection calls were removed and now the queue is consistantly filled with data.
</p>
<h4><span class="mw-headline" id="HTTP_Server_Integration">HTTP Server Integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=43" title="Edit section: HTTP Server Integration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The HTTP server portion of TInk was very early example code from another TIer. There were integration problems early on which caused the webpage to not load. An easy solution for this was to set the priority of the HTTP server task higher in order to make sure the webpage is served up properly.
</p>
<h4><span class="mw-headline" id="WebSocket_Integration">WebSocket Integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=44" title="Edit section: WebSocket Integration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>WebSocket code was implemented from a third party source. The code worked on its own but, when added to TInk, there were major stability issues. We found that increasing the priority of the WebSocket Task over the HTTPserver corrected it for the most part. Also, adding a gate so that neither task could access Wifi driver calls at the same time added another layer of safety. There was also a memory leak when the websocket did not disconnect properly. This was fixed by freeing up the memory when there was a sudden disconnect of the websocket. &#160;
</p>
<h4><span class="mw-headline" id="Driving_Straight">Driving Straight</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=45" title="Edit section: Driving Straight">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<div class="thumb tright"><div class="thumbinner" style="width:402px;"><a href="File_Calibration_period.html" class="image"><img alt="" src="https://processors.wiki.ti.com/images/8/88/Calibration_period.PNG" width="400" height="379" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Calibration_period.html" class="internal" title="Enlarge"></a></div>Gyro Calibration Period</div></div></div>
<p><span style="line-height: 1.5em;">As TInk uses two motors to drive, the mechanical differences between the two prevent the tank from driving in a straight line when the two motors are given the same amount of power. While this is less of an issue when driving by tilt, its effects are apparent when using the keyboard to control the tank.</span><br /><i>Note: feature has not yet been integrated into the main project.</i><br /><b>Solution: </b><br />Using the integrated data from the gyroscopes on the sensor hub to determine the rotational position of the tank, TInk can correct its own motion (ie. if the data indicates the tank was facing right, more power is given to the motor that would make it turn left.) A one-second calibration period is necessary to determine the inherent offset apparent in the gyro data (see graph at left.) To mitigate the effects of gyro drift, there are running counts for the number of corrections Tink has made to the right and left. Whichever count is greater allows the tank to determine which way it has drifted and to correct its motion based on the difference between the two values.
</p><p>If knocked off course, the tank will correct and return to its original direction while assisted driving is active.
</p>
<table width="200" border="1" cellpadding="1" cellspacing="1">

<tbody><tr>
<td>PdbgiwILudo|Unassisted vs Assisted}}
</td>
<td>8cnaFapi-4w|TInk Correcting Movement}}
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Balancing">Balancing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=46" title="Edit section: Balancing">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>TInk has the ability to balance itself when it has been placed in a vertical position. Once data is collected from the SensorHub, it is placed in a queue. The data is then processed and used in a PID loop in order to know the tank's position. This data is then interpreted so that a reactionary signal can be sent to the motors. The motors are given the appropriate PWM commands in order to keep the tank balanced while in this vertical position.
</p>
<h1><span class="mw-headline" id="The_TInk_Team">The TInk Team</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit&amp;section=47" title="Edit section: The TInk Team">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<table width="200" border="1" cellpadding="1" cellspacing="1">

<tbody><tr>
<td>Bader Ali-Saleh
</td>
<td>Peter Samyn
</td>
<td>Evan Lew
</td>
<td>Sophie Russo
</td></tr>
<tr>
<td><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="File_Bader_tink.html" class="image"><img alt="Bader tink.JPG" src="https://processors.wiki.ti.com/images/7/72/Bader_tink.JPG" width="300" height="402" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Bader_tink.html" class="internal" title="Enlarge"></a></div></div></div></div></div><br />
</td>
<td><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="File_Image.html" class="image"><img alt="Image.jpeg" src="https://processors.wiki.ti.com/images/e/e4/Image.jpeg" width="300" height="224" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Image.html" class="internal" title="Enlarge"></a></div></div></div></div></div>
</td>
<td><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="File_TInk.html" class="image"><img alt="TInk.JPG" src="https://processors.wiki.ti.com/images/3/36/TInk.JPG" width="300" height="401" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_TInk.html" class="internal" title="Enlarge"></a></div></div></div></div></div><br />
</td>
<td><div class="center"><div class="thumb tnone"><div class="thumbinner" style="width:302px;"><a href="File_Sofie_tink.html" class="image"><img alt="Sofie tink.JPG" src="https://processors.wiki.ti.com/images/5/5c/Sofie_tink.JPG" width="300" height="224" class="thumbimage" /></a>  <div class="thumbcaption"><div class="magnify"><a href="File_Sofie_tink.html" class="internal" title="Enlarge"></a></div></div></div></div></div>
</td></tr></tbody></table>

<!-- 
NewPP limit report
Cached time: 20201130203037
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.092 seconds
Real time usage: 0.100 seconds
Preprocessor visited node count: 214/1000000
Preprocessor generated node count: 368/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:31671-0!canonical and timestamp 20201130203037 and revision id 204324
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TInk</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TInk</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TInk</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TInk</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TInk&amp;oldid=204324">https://processors.wiki.ti.com/index.php?title=TInk&amp;oldid=204324</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Applications.html" title="Category:Applications">Applications</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TInk" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TInk.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TInk&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TInk.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TInk.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TInk.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;oldid=204324" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TInk&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 30 July 2015, at 16:19.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.092","walltime":"0.100","ppvisitednodes":{"value":214,"limit":1000000},"ppgeneratednodes":{"value":368,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130203037","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":233});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TInk by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 05:21:04 GMT -->
</html>
