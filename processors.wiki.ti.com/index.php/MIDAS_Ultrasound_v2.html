<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/MIDAS_Ultrasound_v2.0_Demo by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 13:11:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>MIDAS Ultrasound v2.0 Demo - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MIDAS_Ultrasound_v2.0_Demo","wgTitle":"MIDAS Ultrasound v2.0 Demo","wgCurRevisionId":182003,"wgRevisionId":182003,"wgArticleId":5417,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MIDAS_Ultrasound_v2.0_Demo","wgRelevantArticleId":5417,"wgRequestId":"fbe7174aa11edc62dbd33738","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MIDAS_Ultrasound_v2_0_Demo rootpage-MIDAS_Ultrasound_v2_0_Demo skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">MIDAS Ultrasound v2.0 Demo</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#MIDAS_Versions"><span class="tocnumber">1</span> <span class="toctext">MIDAS&#160;Versions</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Overview"><span class="tocnumber">2</span> <span class="toctext">Overview<b></b></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#GForge_Project_Page"><span class="tocnumber">3</span> <span class="toctext">GForge Project Page</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Requirements"><span class="tocnumber">4</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Notation"><span class="tocnumber">5</span> <span class="toctext">Notation</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Troubleshooting"><span class="tocnumber">6</span> <span class="toctext">Troubleshooting</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Build_Process_Overview"><span class="tocnumber">7</span> <span class="toctext">Build Process Overview</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#PSP_and_DVSDK_Setup"><span class="tocnumber">8</span> <span class="toctext">PSP and DVSDK&#160;Setup</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Touchscreen_Setup"><span class="tocnumber">9</span> <span class="toctext">Touchscreen Setup</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Qt_Setup"><span class="tocnumber">10</span> <span class="toctext">Qt Setup</span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Qt_Libraries"><span class="tocnumber">10.1</span> <span class="toctext">Qt Libraries</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Common_Gotchas"><span class="tocnumber">10.2</span> <span class="toctext">Common Gotchas</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Qt_SDK"><span class="tocnumber">10.3</span> <span class="toctext">Qt SDK</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Build_MIDAS"><span class="tocnumber">11</span> <span class="toctext">Build MIDAS</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Common_Gotchas_2"><span class="tocnumber">11.1</span> <span class="toctext">Common Gotchas</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#SD_Card"><span class="tocnumber">12</span> <span class="toctext">SD Card</span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#EVM_Settings"><span class="tocnumber">12.1</span> <span class="toctext">EVM Settings</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Linux"><span class="tocnumber">12.2</span> <span class="toctext">Linux</span></a></li>
<li class="toclevel-2 tocsection-19"><a href="#Windows"><span class="tocnumber">12.3</span> <span class="toctext">Windows</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-20"><a href="#Run_MIDAS"><span class="tocnumber">13</span> <span class="toctext">Run MIDAS</span></a>
<ul>
<li class="toclevel-2 tocsection-21"><a href="#Common_Gotchas_3"><span class="tocnumber">13.1</span> <span class="toctext">Common Gotchas</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-22"><a href="#Using_Custom_Input_Datasets"><span class="tocnumber">14</span> <span class="toctext">Using Custom Input Datasets</span></a></li>
<li class="toclevel-1 tocsection-23"><a href="#Software_Design"><span class="tocnumber">15</span> <span class="toctext">Software Design</span></a>
<ul>
<li class="toclevel-2 tocsection-24"><a href="#Overview_2"><span class="tocnumber">15.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-2 tocsection-25"><a href="#ARM_Application_Implementation"><span class="tocnumber">15.2</span> <span class="toctext">ARM Application Implementation</span></a>
<ul>
<li class="toclevel-3 tocsection-26"><a href="#Main_Function"><span class="tocnumber">15.2.1</span> <span class="toctext">Main Function</span></a></li>
<li class="toclevel-3 tocsection-27"><a href="#Acquire_Thread"><span class="tocnumber">15.2.2</span> <span class="toctext">Acquire Thread</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Process_Thread"><span class="tocnumber">15.2.3</span> <span class="toctext"><b>Process Thread</b></span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Display_Thread"><span class="tocnumber">15.2.4</span> <span class="toctext">Display Thread</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Control_Thread"><span class="tocnumber">15.2.5</span> <span class="toctext">Control Thread</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-31"><a href="#DSP_Module_Integration"><span class="tocnumber">15.3</span> <span class="toctext">DSP Module Integration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-32"><a href="#Useful_References"><span class="tocnumber">16</span> <span class="toctext">Useful References</span></a>
<ul>
<li class="toclevel-2 tocsection-33"><a href="#Medical_Imaging"><span class="tocnumber">16.1</span> <span class="toctext">Medical Imaging</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#ARM_and_DSP_development"><span class="tocnumber">16.2</span> <span class="toctext">ARM and DSP development</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-35"><a href="#Disclaimer"><span class="tocnumber">17</span> <span class="toctext">Disclaimer</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="MIDAS_Versions">MIDAS&#160;Versions<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=1" title="Edit section: MIDAS Versions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Please note that the newer <a href="MIDAS_Ultrasound_v4.html" title="MIDAS Ultrasound v4.0 Demo">MIDAS Ultrasound version 4.0</a> is available now.
</p><p>Please see the <a href="Medical_Imaging_Demo_Application_Starter_(MIDAS).html" title="Medical Imaging Demo Application Starter (MIDAS)">main MIDAS wiki page</a> to compare different versions of MIDAS and see what suits your use-case the best.<br />
</p>
<h1><span class="mw-headline" id="Overview">Overview<b><br /></b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=2" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Texas Instruments' Medical Imaging Demo Application Starter (MIDAS) illustrates the integration of key medical imaging algorithm modules on Texas Instruments (TI) DSPs and System-on-Chips. This version incorporates the Ultrasound v2.0 demo which integrates components from the ultrasound signal chain including the B-mode Processing Unit (BPU), the Doppler Processing Unit (DPU) and the Scan Conversion Unit (SCU) from the <a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/s2meddus.html">Embedded Processor Software Toolkit for Medical Imaging Applications v2.0</a>, on the <a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/tmdsevm3530.html">TI OMAP3530 Mistral EVM</a>. In addition, MIDAS showcases the use of Qt and tslib to create a touchscreen-based Graphical User Interface (GUI) that allows users to interact with the ARM&#160;and DSP&#160;in real-time.<br />
</p><p>The <a rel="nofollow" class="external text" href="http://focus.ti.com/dsp/docs/dspcontent.tsp?contentId=53403">TI&#160;OMAP3530</a> consists of a 720MHz ARM Cortex A-8 general processor and a 520MHz C64x+ DSP core, which together provide a powerful, yet power-efficient solution to handle system controller and back-end processing functions in diagnostic ultrasound imaging systems. <br />
</p><p>This document covers various aspects of MIDAS, including a discussion on the software design, a guide to create a bootable SD card that plugs into your EVM and runs MIDAS, as well as step-by-step instructions to obtain the MIDAS source code, and setup your development environment to&#160;build and run the demo.
</p><p>The figure below showcases the function of the ARM and DSP cores for MIDAS:
</p><p><a href="File_Midas_algorithm_overview.html" class="image" title="Midas algorithm overview.png"><img alt="Midas algorithm overview.png" src="https://processors.wiki.ti.com/images/e/e6/Midas_algorithm_overview.png" width="599" height="274" class="thumbborder" /></a>
</p><p>Here is a snapshot showing the MIDAS Ultrasound demo in 'Imaging' mode:
</p><p><a href="File_Midas_sd.html" class="image" title="MIDAS Ultrasound v2.0 running on TI OMAP3530 Mistral EVM"><img alt="MIDAS Ultrasound v2.0 running on TI OMAP3530 Mistral EVM" src="https://processors.wiki.ti.com/images/f/fe/Midas_sd.png" width="320" height="240" class="thumbborder" /></a>
</p>
<h1><span class="mw-headline" id="GForge_Project_Page">GForge Project Page<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=3" title="Edit section: GForge Project Page">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>We use the GForge portal to provide access to source files, SD card images and other related information. The portal also allows us to collaborate with the community.<br />
</p><p>Our MIDAS&#160;project page is located at <a rel="nofollow" class="external free" href="https://gforge.ti.com/gf/project/med_ultrasound/">https://gforge.ti.com/gf/project/med_ultrasound/</a><br />
</p>
<h1><span class="mw-headline" id="Requirements">Requirements<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=4" title="Edit section: Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/tmdsevm3530.html">TI OMAP3530 Mistral EVM</a> with at least 256 MB DDR (processor modules Rev C or up)<br /></li>
<li>EVM&#160;5V&#160;Power Supply (included with EVM)<br /></li></ul>
<p>If building the demo from source:<br />
</p>
<ul><li>Linux workstation<br /></li>
<li>RS-232 cable (included with EVM)<br /></li>
<li>Ethernet cable (included with EVM)<br /></li></ul>
<p>If creating a bootable SD card:<br />
</p>
<ul><li>Linux/Windows workstation<br /></li>
<li>2GB SD&#160;card<br /></li>
<li>SD card reader</li></ul>
<h1><span class="mw-headline" id="Notation">Notation<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=5" title="Edit section: Notation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>1. Commands are preceded by prompts that indicate the environment where the command is to be typed. For example:
</p>
<blockquote><p><b>host $ </b><br /> Indicates command to be typed into the shell window of the host Linux workstation. <br /><b>EVM #</b> <br /> Indicates commands to be typed into the U-Boot shell in a console window connected to the EVM board’s serial port.<br /><b>target $</b> <br /> Indicates commands to be typed into the Linux shell in the terminal window connected to the EVM board's serial port.<br /> </p></blockquote>
<p>2. &lt;&gt; represents a variable that can change from one development environment to another. For example, /home/&lt;username&gt;<br />
</p><p>3. ~ represents the user's home directory, i.e. /home/&lt;username&gt;<br />
</p><p>4. You are free to use any Linux distribution for your host machine but please note that commands on this page have been tested on a host machine with the Ubuntu Linux distribution<br />
</p><p>5. Some basic Linux knowledge is assumed<br />
</p>
<h1><span class="mw-headline" id="Troubleshooting">Troubleshooting</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=6" title="Edit section: Troubleshooting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>If you run into any build errors or issues through the course of this setup, we urge you to please first go through the <b>Common Gotchas</b> which are at the end of most sections on this page. If you do not find a solution, please post it to <a rel="nofollow" class="external free" href="http://e2e.ti.com/">http://e2e.ti.com</a> and we will try to answer your questions on there. Thanks!
</p>
<h1><span class="mw-headline" id="Build_Process_Overview">Build Process Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=7" title="Edit section: Build Process Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Here's an overview of the steps you will take to setup your development environment and build MIDAS from source. Alternately if you are just interested in a bootable SD card image, skip to the 'SD Card' section of this document.
</p><p><a href="File_Midas_build.html" class="image" title="MIDAS Build Process Overview"><img alt="MIDAS Build Process Overview" src="https://processors.wiki.ti.com/images/7/7a/Midas_build.PNG" width="500" height="359" class="thumbborder" /></a>
</p>
<h1><span class="mw-headline" id="PSP_and_DVSDK_Setup">PSP and DVSDK&#160;Setup<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=8" title="Edit section: PSP and DVSDK Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>MIDAS is built on top of Texas Instrument's Linux Digital Video Software Development Kit (DVSDK) for OMAP3530 package, which incorporates all software components required to kickstart application development including the Linux kernel, U-boot, and TI provided framework components like <a href="Codec_Engine.html" title="Codec Engine">Codec Engine</a> and <a href="DMAI.html" class="mw-redirect" title="DMAI">DMAI</a>. <br />
</p><p>1. For the PSP&#160;and DVSDK 3.00.02.44 software installers click <a rel="nofollow" class="external text" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/dvsdk/DVSDK_3_00/3_00_02_44/index_FDS.html">here</a><br />
</p><p>2. Please note the important guidelines below and then follow instructions <a href="GSG__OMAP35x_DVEVM_Software_Setup.html" title="GSG: OMAP35x DVEVM Software Setup">here</a> to setup the PSP and DVSDK software
</p>
<blockquote><p><b>Important:</b>
</p><ul><li>Make sure to follow the guide's instructions to rebuild u-boot (and flash it to NAND), Linux kernel, DVSDK, and NFS since the pre-existing binary images may not be configured for the OMAP3530<br /></li>
<li>Before you proceed to build the DVSDK software, there is a software bug in DVSDK that will be fixed in later versions, but needs to be manually corrected for now. <br /></li></ul>
</blockquote><blockquote><pre>File ~/dvsdk_3_02_00_44/dmai_2_00_01_04/packages/ti/sdo/dmai/linux/Display_v4l2.c

Function: static Int cleanup (Display_Handle hDisplay)

Current:
if (munmap(Buffer_getUserPtr(hDispBuf), Buffer_getSize(hDispBuf)) == -1) {
   Dmai_err1("Failed to unmap capture buffer%d\n", bufIdx);
   ret = Dmai_EFAIL;
}

Fix:
if (munmap(Buffer_getUserPtr(hDispBuf), hDisplay-&gt;bufDescs[bufIdx].v4l2buf.length) == -1) {
Dmai_err1("Failed to unmap capture buffer%d\n", bufIdx);
ret = Dmai_EFAIL;
}
</pre></blockquote><blockquote></blockquote> <blockquote>
<ul><li>To export the ~/workdir/filesys for NFS, you need to install the nfs-kernel-server package as follows:<br /></li></ul>
<pre>host $ sudo apt-get install nfs-kernel-server
</pre>
<ul><li>It is assumed through this guide that DVSDK and PSP software is stored at ~. For example, ~/dvsdk_3_00_02_44 and ~/OMAP35x-PSP-SDK-02.01.03.11<br /></li></ul>
</blockquote>
<p>3. Once you have completed step 2, you should have the following pieces of software setup on your linux host:<br />
</p>
<blockquote>
<ul><li>DVSDK&#160;at ~/dvsdk_3_00_02_44<br /></li>
<li>NFS at ~/workdir/filesys<br /></li>
<li>PSP at ~/workdir/opt/.<br /></li>
<li>Toolchain at ~/toolchain/arm-2009q1<br /></li></ul>
</blockquote>
<p>4. Setup the EVM board to boot via TFTP using NFS filesystem<br />
</p>
<blockquote>
<ul><li>Click <a href="Setting_Up_a_TFTP_Server.html" title="Setting Up a TFTP Server">here</a> for instructions to setup a TFTP&#160;client on your host. <br /></li>
<li>Copy the kernel 'uImage' you built during 'PSP and DVSDK&#160;setup' and place it in your TFTP&#160;directory on the host (Eg: /var/lib/tftpboot)</li>
<li>On your EVM, set the following parameters at the u-boot prompt after you abort the automatic boot sequence. Note that for Ubuntu 10.04 up, you need to specify the entire path for the bootfile, as in '/var/lib/tftpboot/uImage' instead of just 'uImage.' The rootpath is typically '/home/&lt;username&gt;/workdir/filesys'<br /></li></ul>
</blockquote><blockquote><pre>OMAP3EVM # setenv bootcmd 'dhcp;bootm'
OMAP3EVM # setenv serverip &lt;ip addr of tftp server&gt;
OMAP3EVM # setenv bootfile &lt;name of kernel image&gt;
OMAP3EVM # setenv rootpath &lt;root directory to mount&gt;
OMAP3EVM # setenv nfshost &lt;ip addr of nfs host&gt;
OMAP3EVM # setenv bootargs console=ttyS0,115200n8 noinitrd rw ip=dhcp root=/dev/nfs nfsroot=$(nfshost):$(rootpath),nolock
mem=99M@0x80000000 mem=128M@0x88000000 mpurate=600 omapfb.rotate=1 omapfb.rotate_type=1 omap_vout.vid1_static_vrfb_alloc=y
</pre></blockquote><blockquote></blockquote>
<h1><span class="mw-headline" id="Touchscreen_Setup">Touchscreen Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=9" title="Edit section: Touchscreen Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>MIDAS utilizes the tslib library for touchscreen support on the OMAP3530 EVM. This section will guide you through setting up tslib. <br />
</p><p>1. Install required packages on host
</p>
<blockquote><pre>host $ sudo apt-get install autogen autoconf libtool</pre></blockquote>
<p>2. For cross-compiling, define environment variables in ~/.bashrc on host as:
</p>
<blockquote><pre>export CC=/home/&lt;username&gt;/arm-2009q1/bin/arm-none-linux-gnueabi-gcc
export CXX=/home/&lt;username/arm-2009q1/bin/arm-none-linux-gnueabi-g++
export CONFIG_SITE=omap3evm.autogen
</pre></blockquote>
<p>3. Download the source files for tslib from <a rel="nofollow" class="external text" href="http://prdownload.berlios.de/tslib/tslib-1.0.tar.bz2">here</a> and save it at ~<br />
</p><p>4. Untar the source
</p>
<blockquote><pre>host $ cd ~host $ tar xjf tslib-1.0.tar.bz2</pre></blockquote>
<p>5. Configure tslib
</p>
<blockquote><pre>host $ cd ~/tslib-1.0
host $ ./autogen.sh
host $ ./configure --prefix=/home/&lt;username&gt;/workdir/filesys --host=arm-linux-gnu</pre></blockquote>
<p>6. Comment the line ‘AC_FUNC_MALLOC’ in ~/tslib-1.0/configure.ac
</p><p>7. Comment ‘#define malloc rpl_malloc’ in ~/tslib-1.0/config.h if it exists
</p><p>8. Build and install tslib<br />
</p>
<blockquote><pre>host $ make
host $ make install</pre></blockquote>
<p>9. Edit ~/workdir/filesys/etc/ts.conf to use linux layer event interface by uncommenting ‘module_raw input’
</p><p>10. Modify the device’s startup script to export the required touchscreen related environment variables.<br />
</p><p>&#160;&#160;&#160; Add these lines to the file ~/development/workdir/filesys/etc/profile:
</p>
<blockquote><pre>export QWS_MOUSE_PROTO='Tslib:/dev/input/event1'
export TSLIB_CALIBFILE='/etc/pointercal'
export TSLIB_CONFFILE='/etc/ts.conf'
export TSLIB_CONSOLEDEVICE='none'
export TSLIB_FBDEVICE='/dev/fb0'
export TSLIB_PLUGINDIR='/lib/ts'
export TSLIB_TSDEVICE='/dev/input/event1'</pre></blockquote>
<p>11. Remember to run ‘ts_calibrate’ on the target the first time you start the board, to calibrate the touch screen.<br />
</p>
<h1><span class="mw-headline" id="Qt_Setup">Qt Setup<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=10" title="Edit section: Qt Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>MIDAS utilizes the Qt application and UI&#160;framework to create the Graphical User Interface for MIDAS. The GUI allows users to interact with the application via the touchscreen and modify processing parameters for algorithms running on the DSP, start-stop imaging, change modes and see results of these actions in real-time. This section describes the setup of Qt libraries and the Qt SDK&#160;both components essential for Qt UI&#160;development.<br />
</p>
<h2><span class="mw-headline" id="Qt_Libraries">Qt Libraries<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=11" title="Edit section: Qt Libraries">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Download the Qt libraries 4.6.2 for embedded Linux from <a rel="nofollow" class="external text" href="http://qt.nokia.com/downloads">here</a>, save it in ~, and extract the source as:<br />
</p>
<blockquote><pre>host $ cd ~
host $ gunzip qt-everywhere-opensource-src-4.6.2.tar.gz
host $ tar xvf qt-everywhere-opensource-src-4.6.2.tar
</pre></blockquote>
<p>2. <b>Important:</b> Ensure that Qt uses the host g++ for compiling the Qt libraries. To do this, check your ~/.bashrc file to ensure that CC, CXX variables are not set for cross-compile, i.e. comment any custom definitions as below if present by adding the # sign, as:<br />
</p>
<blockquote><pre>#export CC=~/toolchain/arm-2009q1/bin/arm-none-linux-gnueabi-gcc
#export CXX=~/toolchain/arm-2009q1/bin/arm-none-linux-gnueabi-g++
</pre></blockquote>
<p>&#160;&#160; Run the following command to reset paths. <br />
</p>
<blockquote><pre>host $ source ~/.bashrc
</pre></blockquote>
<p>&#160;&#160;&#160;It is recommended that you close this command window and open a new one before proceeding to ensure environment variables have been picked up.<br /><b>&#160;&#160; NOTE:</b> If you see an error with this please see Gotcha 1 for a common mistake in this step.<br />
</p><p>3. Edit ~/qt-everywhere-opensource-src-4.6.2/mkspecs/common/linux.conf and add the “-lts” option to QMAKE_LIBS_THREAD as:
</p>
<blockquote><pre>QMAKE_LIBS_THREAD     = -lpthread -lts</pre></blockquote>
<p>4. Create an omap3 qmake configuration as follows:<br />
</p>
<blockquote><pre>host $ cd ~/qt-everywhere-opensource-src-4.6.2/mkspecs/qws/
host $ cp -r ./linux-arm-g++ ./linux-omap3-g++
host $ gedit ./linux-omap3-g++/qmake.conf
</pre></blockquote>
<p>&#160;&#160;&#160; Replace the text in qmake.conf with the following. Make sure to change &lt;username&gt; as per your host:
</p>
<blockquote><pre># qmake configuration for building with arm-linux-g++

include(../../common/g++.conf)
include(../../common/linux.conf)
include(../../common/qws.conf)

# modifications to g++.conf

# To include ts-lib
QMAKE_INCDIR += /home/&lt;username&gt;/workdir/filesys/include
QMAKE_LIBDIR += /home/&lt;username&gt;/workdir/filesys/lib

#Compiler Flags to take advantage of the ARM architecture
QMAKE_CFLAGS_RELEASE = -O3 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp
QMAKE_CXXFLAGS_RELEASE= -O3 -march=armv7-a -mtune=cortex-a8 -mfpu=neon -mfloat-abi=softfp
QMAKE_CC = arm-none-linux-gnueabi-gcc
QMAKE_CXX = arm-none-linux-gnueabi-g++
QMAKE_LINK = arm-none-linux-gnueabi-g++
QMAKE_LINK_SHLIB = arm-none-linux-gnueabi-g++

# modifications to linux.conf
QMAKE_AR = arm-none-linux-gnueabi-ar cqs
QMAKE_OBJCOPY = arm-none-linux-gnueabi-objcopy
QMAKE_STRIP = arm-none-linux-gnueabi-strip

load(qt_config)</pre></blockquote>
<p>5. Configure qmake and build Qt libraries.&#160;
</p>
<blockquote><pre>host $ cd ~/qt-everywhere-opensource-src-4.6.2
host $ ./configure -prefix /opt/qt -embedded arm -platform /qws/linux-x86-g++ -xplatform /qws/linux-omap3-g++ -depths 16,24,32 \
-no-mmx -no-3dnow -no-sse -no-sse2 -no-glib -no-cups -no-largefile -no-accessibility -no-openssl -no-gtkstyle -qt-mouse-pc \
-qt-mouse-linuxtp -qt-mouse-linuxinput -plugin-mouse-linuxtp -plugin-mouse-pc -fast -qt-mouse-tslib
host $ make
host $ make install INSTALL_ROOT=/home/&lt;username&gt;/workdir/filesys</pre></blockquote>
<p><b>&#160;&#160;&#160; Important:</b>
</p>
<blockquote>
<ul><li>For a 64-bit host machine, use "-platform /qws/linux-x86_64-g++" instead of "-platform /qws/linux-x86-g++."<br /></li>
<li>Make sure to change &lt;username&gt; as per your host. <br /></li>
<li>In case you need to run configure again with different settings, first do a 'make confclean' followed by your './configure...' command.</li>
<li>This build can take upto a few hours to complete.</li></ul>
</blockquote>
<p>6. Add 'qmake' to the host's PATH. Edit ~/.bashrc and add the following lines:
</p>
<blockquote></blockquote> <blockquote><pre>export PATH=/home/&lt;username&gt;/qt-everywhere-opensource-src-4.6.2/bin:$PATH
export QMAKESPEC=/home/&lt;username&gt;/qt-everywhere-opensource-src-4.6.2/mkspecs/qws/linux-omap3-g++/</pre></blockquote>
<p>&#160;&#160;&#160; Run the following command to reset paths<br />
</p>
<blockquote></blockquote><blockquote><pre>host $ source ~/.bashrc
</pre></blockquote>
<h2><span class="mw-headline" id="Common_Gotchas">Common Gotchas<u></u><br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=12" title="Edit section: Common Gotchas">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><u>Gotcha 1</u></li></ul>
<blockquote><p><i>Error message 1: </i> <br />~/qt-everywhere-opensource-src-4.6.2/bin/qmake: 1: Syntax error: word unexpected (expecting ")") make: <br />*** No targets specified and no makefile found.&#160; Stop.” </p></blockquote><blockquote><p><i>Error message 2: <br /></i>project.o: could not read symbols: File in wrong format<br />collect2: ld returned 1 exit status<br />make: *** <br />[~/qt-everywhere-opensource-src-4.6.2/bin/qmake] Error 1
</p><p><i><br />Solution:</i><br /> This is typically due to a compiler mismatch and you have most likely skipped step 2. Ensure that when you give the ./configure command you see:<br />“Creating qmake. Please wait... g++ -c -o ……”<br /> And not:<br /> “Creating qmake. Please wait…arm-none-linux-gnueabi-g++ -c -o
</p>
</blockquote><blockquote><p><b>Important:</b> If you have first accidently cross-compiled, before giving the configure command again, it is important that you go to your ~/qt-everywhere-opensource-src-4.6.2/qmake directory and delete all the *.o files, since if you try and continue the build without cleaning these out, it will try to link in these cross-compiled files. Do this as:</p></blockquote><blockquote><pre>host $ cd ~/qt-everywhere-opensource-src-4.6.2/qmake
host $ rm *.o
</pre></blockquote>
<ul><li><u>Gotcha 2</u></li></ul>
<blockquote><p><i>Error message</i>: ~/qt-everywhere-opensource-src-4.6.2/lib/libQtGui.so: undefined reference to `ts_read_raw'<br />~/qt-everywhere-opensource-src-4.6.2/lib/libQtGui.so: undefined reference to `ts_open'<br />~/qt-everywhere-opensource-src-4.6.2/lib: undefined reference to `ts_fd'<br />~/qt-everywhere-opensource-src-4.6.2/libundefined reference to `ts_config'<br />~/qt-everywhere-opensource-src-4.6.2/lib: undefined reference to `ts_close'<br /></p></blockquote><blockquote><p><i>Solution: </i> This is a bug in Qt 4.6. The current workaround is mentioned in step 3. Click <a rel="nofollow" class="external text" href="http://bugreports.qt.nokia.com/browse/QTBUG-7855?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel">here</a> for the bug report and more details.<br /></p></blockquote>
<h2><span class="mw-headline" id="Qt_SDK">Qt SDK<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=13" title="Edit section: Qt SDK">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Install required packages on host:<br />
</p>
<blockquote><pre>$ sudo apt-get install libglib2.0-dev libSM-dev libxrender-dev libfontconfig1-dev libxext-dev</pre></blockquote>
<p>2. Download the Qt SDK for Linux installation file from <a rel="nofollow" class="external text" href="http://qt.nokia.com/downloads">here</a><br />
</p><p>3. Make the file executable and run as follows. When prompted for the Installation Directory, store as ~/development/qtsdk-2010.02. Select both Qt Creator and Qt Development Libraries for the install.<br />
</p>
<blockquote><pre>$ chmod +x ~/qt-sdk-linux-x86-opensource-2010.02.bin
$ ~/qt-sdk-linux-x86-opensource-2010.02.bin
</pre></blockquote>
<p>4. After the installation is complete, in Ubuntu you can launch Qt Creator from Applications --&gt; Programming --&gt; Qt Creator
</p>
<h1><span class="mw-headline" id="Build_MIDAS">Build MIDAS<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=14" title="Edit section: Build MIDAS">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section will guide you through obtaining the MIDAS source code and building the application executables<br />
</p><p>1. Create an output directory for MIDAS executables in the NFS directory, ~/workdir/filesys, as:
</p>
<blockquote><pre>host $ mkdir ~/workdir/filesys/opt/midas</pre></blockquote>
<p>2. Create a project directory for MIDAS source code<br />
</p>
<blockquote><pre>host $ mkdir ~/midas</pre></blockquote>
<p>3. Download the IQ Math Libary from <a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/sprc542.html">here</a>. Note that at this point, the IQ Math installer is only available in '.exe' form, so you'll need to run the setup.exe on a Windows Machine and copy the 'IQMath_v213' into ~ on your Linux host.
</p><p>4. Install Subversion (optional)<br />
</p>
<blockquote><pre>host $ sudo apt-get install subversion
</pre></blockquote><blockquote>
<ul><li>If you are behind a proxy, edit ~/.subversion/servers to configure subversion with your network proxy settings. In the section [global], add the lines below, where &lt;proxy url&gt; and &lt;proxy port&gt; are specific to your network:<br /></li></ul>
</blockquote><blockquote><pre>http-proxy-host = &lt;proxy url&gt;
http-proxy-port = &lt;proxy port&gt;
</pre></blockquote>
<p>5. Download the MIDAS source code onto your linux host. There are two ways you can do this. We would recommend option 2 if you plan to contribute back to the MIDAS project.<br />
</p>
<ul><li>Option 1: Tar package<br /></li></ul>
<blockquote><p>You can download the entire tar package, midas.tar.gz from <a rel="nofollow" class="external text" href="https://gforge.ti.com/gf/download/frsrelease/345/3660/midas.tar.gz">here</a> and store it in ~. Untar the package as:<br /> </p></blockquote><blockquote><pre>host $ tar -zxvf midas.tar.gz
</pre></blockquote>
<ul><li>Option 2: Subversion<br /></li></ul>
<blockquote><p>Please make sure you have completed 'Initial Setup: Step 4', if you plan to take this route. If you are member of the project, &lt;un&gt; is your GForge username else it is 'anonymous.' Password is your GForge password if you are a member, else just hit Enter when prompted for a password.<br /> </p></blockquote><blockquote><pre>host $ cd ~/midas
host $ svn checkout --username &lt;un&gt; https://gforge.ti.com/svn/med_ultrasound/trunk/midas .</pre></blockquote>
<p>6. Set Paths appropriate to your environment:<br />
</p>
<blockquote>
<ul><li>Modify ~/midas/Paths.mak to set paths. Note that &lt;DVSDK&gt; and &lt;IQMATH_DIR&gt; are relative to &lt;DEVHOME&gt;. Here's 'Paths.mak':<br /></li></ul>
</blockquote><blockquote><pre>DEVHOME = /home/&lt;username&gt;
EXEC_INSTALL_DIR = /home/&lt;username&gt;/workdir/filesys/opt/midas
LINUX_INSTALL_DIR = /home/&lt;username&gt;/workdir/opt/linux-##.##.##.##
DVSDK = dvsdk_3_00_02_44
IQMATH_DIR = IQmath_v213
</pre></blockquote><blockquote>
<ul><li>In ~/midas/ultrasound/servers/serverconfig.bld set the C64P.rootDir&#160;variable to point to the C6000 code generation tools as:<br /></li></ul>
</blockquote><blockquote><pre>C64P.rootDir = "/home/&lt;username&gt;/dvsdk_3_00_02_44/cg6x_6_0_16";
</pre>
<ul><li>In ~/midas/ultrasound/apps/appconfig.bld set the GCArmv5T.rootDir variable to point to the Code Sourcery toolchain as:</li></ul>
<pre>GCArmv5T.rootDir = "/home/&lt;username&gt;/toolchain/arm-2009q1";
</pre></blockquote>
<p>7. Copy initscripts to NFS. Do make backup copies of your original file in case you need to use them later. The ~/midas/ultrasound/initscripts folder contains the following:<br />
</p>
<blockquote>
<ul><li><b>profile:&#160;</b>We've added the necessary environment variables here for tslib and Qt, so that the OMAP&#160;picks these up during initialization. Copy this file as follows: <br /></li></ul>
<pre>host $ cp ~/midas/ultrasound/initscripts/profile ~/workdir/filesys/etc/profile
</pre>
<ul><li><b>fstab: </b>We've modified this file to increase the size for tmpfs (DDR) to 128MB. This allows us to copy the input raw data files to DDR&#160;during application initialization. Copy this file as follows:<br /></li></ul>
<pre>host $ cp ~/midas/ultrasound/initscripts/fstab ~/workdir/filesys/etc/fstab
</pre>
<ul><li><b>S99omap-demo:</b> We've modified this initialization script to set environment variables and start MIDAS automatically after the EVM&#160;has booted up. Copy this file as follows:<br /></li></ul>
<pre>host $ cp ~/midas/ultrasound/initscripts/omap-demo ~/workdir/filesys/etc/init.d/omap-demo
</pre>
<ul><li><b>loadmodules.sh:</b> The MIDAS application uses this shell script to load the CMEM, DSPLink, SDMAK, and LPM modules. In addition, the memory address and size of CMEM pools is defined here based on the size of contiguous buffers the MIDAS application requires. CMEM buffers are used for data that is shared between ARM&#160;and DSP. This is data dependent, so if you plan to test your own raw input data with MIDAS&#160;you might have to modify these pool sizes. More on this later. Copy this file as follows:<br /></li></ul>
<pre>host $ cp ~/midas/ultrasound/initscripts/loadmodules.sh ~/workdir/filesys/opt/midas/.
</pre></blockquote> <blockquote>
<ul><li><b>unloadmodules.sh</b>: The MIDAS application uses this shell script to unload the CMEM, DSPLink, SDMAK, and LPM modules. Copy this file as follows:</li></ul>
</blockquote><blockquote><pre>host $ cp ~/workdir/filesys/opt/dvsdk/omap3530/unloadmodules.sh ~/workdir/filesys/opt/midas/.
</pre></blockquote><blockquote>
<ul><li><b>cmemk.ko, dsplinkk.ko, lpm_omap3530.ko, sdmak.ko:</b> These are the module files for CMEM, DSPLink, SDMAK and LPM. Copy these files as follows:<br /></li></ul>
<pre>host $ cp ~/workdir/filesys/opt/dvsdk/omap3530/*.ko ~/workdir/filesys/opt/midas/.
</pre></blockquote>
<p>8. The input files (post-RF demod data, parameter files, LUTs) that will be needed by the MIDAS executable are stored in ~/midas/ultrasound/userdata. Copy these files to your &lt;EXEC_INSTALL_DIR&gt; as:
</p>
<blockquote><pre>host $ cp -r ~/midas/ultrasound/userdata ~/workdir/filesys/opt/midas/.
</pre></blockquote>
<p>9. Create a symbolic link for Qt tools. Since we configure Qt to build with the prefix '/opt/qt' when you build a Qt appliction, it looks for the tools like 'uic' under '/opt/qt' in your host system. Please create a symbolic link here to point '/opt/qt' to '~/workdir/filesys/opt/qt' as:<br />
</p>
<blockquote><pre>host $ ln -s ~/workdir/filesys/opt/qt /opt/qt</pre></blockquote>
<p>10. Build the application as follows. This builds the DSP&#160;server executable 'mud.x64P' and 'ultrasound' ARM&#160;executable.<br />
</p>
<blockquote><pre>host $ cd ~/midas
host $ make midas
</pre></blockquote>
<p>11. Once the build process is complete, verify that ~/workdir/filesys/opt/midas/. contains the 'mud.x64P' and 'ultrasound' executables<br />
</p><p>12. You are now ready to run the demo off NFS and start development. For a guide to the user interface see the 'Run MIDAS' section on this page.<br />
</p>
<h2><span class="mw-headline" id="Common_Gotchas_2">Common Gotchas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=15" title="Edit section: Common Gotchas">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><u>Gotcha 1</u></li></ul>
<blockquote><p><i>Error message:</i><br /> /opt/qt/bin/uic mainwindow.ui -o ui_mainwindow.h<br />make[1]: /opt/qt/bin/uic: Command not found<br />make[1]: *** [ui_mainwindow.h] Error 127<br />make[1]: Leaving directory `~/midas/ultrasound'<br />make: *** [all] Error 2<br /> Solution:<br /> The Makefile uses 'uic' to convert the mainwindow.ui file into a header file ui_mainwindow.h. This error occurs when the Makefile cannot find this 'uic' tool. Please ensure that you have performed step 9 above, to create a symbolic link for Qt tools.<br /></p></blockquote>
<h1><span class="mw-headline" id="SD_Card">SD Card<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=16" title="Edit section: SD Card">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section describes how you can obtain a bootable SD&#160;card image for MIDAS and write it to an SD card that can be used to run the demo on the OMAP3530 Mistral EVM. You can write the demo SD&#160;card on either a Linux or Windows machine. <br />
</p>
<h2><span class="mw-headline" id="EVM_Settings">EVM Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=17" title="Edit section: EVM Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Please ensure that your EVM&#160;has 256MB DDR before proceeeding. While the EVM is switched off, ensure that the boot mode is set for SD card boot.&#160;To do this, set the SW4 DIP switches on the main board as follows:
</p>
<ul><li>For Micron NAND Flash,<br /></li></ul>
<blockquote>
<table cellspacing="1" cellpadding="1" border="1" align="left" width="200">

<tbody><tr>
<th scope="row">Switch<br />
</th>
<td>8<br />
</td>
<td>7<br />
</td>
<td>6<br />
</td>
<td>5<br />
</td>
<td>4<br />
</td>
<td>3<br />
</td>
<td>2<br />
</td>
<td>1<br />
</td></tr>
<tr>
<th scope="row">State<br />
</th>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td><b>ON</b><br />
</td>
<td><b>ON</b><br />
</td>
<td><b>ON</b><br />
</td></tr></tbody></table>
</blockquote>
<p><br />
</p><p><br />
</p><p><br />
</p>
<ul><li>For Samsung OneNAND Flash,</li></ul>
<blockquote>
<table cellspacing="1" cellpadding="1" border="1" align="left" width="200">

<tbody><tr>
<th scope="row">&#160;Switch<br />
</th>
<td>8<br />
</td>
<td>7<br />
</td>
<td>6<br />
</td>
<td>5<br />
</td>
<td>4<br />
</td>
<td>3<br />
</td>
<td>2<br />
</td>
<td>1<br />
</td></tr>
<tr>
<th scope="row">State<br />
</th>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td><b>ON</b><br />
</td>
<td><b>ON</b><br />
</td>
<td>OFF<br />
</td>
<td>OFF<br />
</td>
<td><b>ON</b>
</td></tr></tbody></table>
</blockquote> <blockquote></blockquote>
<p><br />
</p><p><br />
</p><p><br />
</p><p>Once the SD&#160;card is ready, insert it into the SD&#160;card slot on the EVM and power it on. Once the board boots up, the MIDAS&#160;demo will start automatically. For a guide to navigate the GUI, see the 'Run MIDAS' section of this page.<br />
</p>
<h2><span class="mw-headline" id="Linux">Linux<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=18" title="Edit section: Linux">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Create a directory named 'SDCardImages' on the Linux host where you would like to download the SD card image:<br />
</p>
<blockquote><pre> host $ mkdir SDCardImages
</pre></blockquote>
<p>2. To obtain the SD card image, click <a rel="nofollow" class="external text" href="https://gforge.ti.com/gf/download/frsrelease/344/3659/midas.tar.gz">here</a>&#160;to download the file 'midas.tar.gz.' Make sure you place this into the 'SDCardImages' folder
</p><p><br />3. Uncompress this file as below. Once this uncompresses, you will see a file 'midas.img' in this directory.<br />
</p>
<blockquote><pre>host $&#160;cd SDCardImages
host $ tar –xzf midas_sdcard.tar.gz
</pre></blockquote>
<p>4. <b>WARNING!</b>&#160;<span style="font-weight: bold;">It is important you perform this step very carefully. Not doing so can lead to complete data loss! </span>Plug in your SD card reader with the SD card (min. size of 2GB) and write the image 'midas.img' to the card. Replace &lt;partition&gt; in the command below with sdb, sdc, sdd, etc. depending on where your SD card is mounted. <br />
</p>
<blockquote><pre>host $  sudo dd bs=4096 if=midas.img of=/dev/&lt;partition&gt;
</pre></blockquote>
<p>5. That’s it, your MIDAS SD card is ready to use! Go to the 'Run&#160;MIDAS' section of this for instructions to run the demo<br />
</p>
<h2><span class="mw-headline" id="Windows">Windows<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=19" title="Edit section: Windows">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>1. Download and install Cygwin from <a rel="nofollow" class="external text" href="http://cygwin.com/setup.exe">here</a><br />
</p><p>2. Create a new folder with the name SDCardImages in the path C:/cygwin<br />
</p><p>3. To obtain the SD card image, click <a rel="nofollow" class="external text" href="https://gforge.ti.com/gf/project/med_ultrasound/frs/">here</a> and download the file 'midas_sdcard.tar.gz' into the 'SDCardImages' folder<br />4. Double click the Cygwin icon on your Desktop to start Cygwin and type the following commands:<br />
</p>
<blockquote><pre>host $ cd /cygdrive/c/cygwin/SDCardImages
host $ tar xzf midas_sdcard.tar.gz
</pre></blockquote>
<p>5. <b>WARNING! It is important you perform these steps very carefully. Not doing so can lead to complete data loss!</b><br />
</p>
<blockquote>
<ul><li>Plug in your SD card reader with the SD card (min. size of 2GB)<br /></li>
<li>Click on Start --&gt; Control Panel --&gt; Administrative Tools --&gt; 'Computer Management.' On the left hand side, click on the 'Disk Management' tab.<br /></li>
<li>The SD card should show up as “Disk1” or “Disk2”. If it shows up as Disk 1 replace &lt;partition&gt; in the command below with “sdb”; if it shows up as Disk 2 use “sdc” and so on.&#160;<br /></li></ul>
<pre>host $ dd bs=4096 if=midas.img of=/dev/&lt;partition&gt;
</pre>
<ul><li>This process can take quite some time to complete and while the image is copying, the terminal does not show any progress or update information. Once copying is successful, you should see a message similar to:<br /></li></ul>
</blockquote>
<p>6. That’s it, your MIDAS SD card is ready to use! Go to the 'Run MIDAS' section for instructions to run the demo<br />
</p>
<h1><span class="mw-headline" id="Run_MIDAS">Run MIDAS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=20" title="Edit section: Run MIDAS">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>1. Though the 'S99omap-demo' init script brings up the MIDAS at startup, if you'd like to run the demo application from the target command prompt run as follows:
</p>
<blockquote><pre>target $ cd /opt/midas
target $ ./ultrasound -qws
</pre></blockquote>
<p>2.&#160;Once the application starts, you will first see an initialization screen as below:
</p>
<blockquote><div class="floatleft"><a href="File_Midas_splashscreen_640x480.html" class="image"><img alt="Midas splashscreen 640x480.png" src="https://processors.wiki.ti.com/images/3/3c/Midas_splashscreen_640x480.png" width="320" height="240" /></a></div> </blockquote><blockquote><p><br /> </p></blockquote>
<p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p>&#160;
</p><p>Once the application completes initialization, you should see MIDAS's GUI. You can use a stylus or your finger to interact with the touchscreen-based GUI.<br />
</p><p>3. The layout for the MIDAS GUI&#160;is as below. When the application starts, you will see only two tabs 'Home' and 'About.' This is the 'Basic' screen. The 'Advanced' screen includes the 'BPU', 'DPU', 'SCU B', 'SCU C' and 'Data' tabs. <br />
</p>
<blockquote><p><a href="File_MIDAS_GUI.html" class="image" title="MIDAS Qt Touchscreen GUI"><img alt="MIDAS Qt Touchscreen GUI" src="https://processors.wiki.ti.com/images/d/d3/MIDAS_GUI.png" width="320" height="240" class="thumbborder" /></a><br /></p></blockquote>
<p>4. <b>Home:</b> This tab window provides users with functionality as described below:
</p>
<blockquote>
<ul><li><b>Scan Type</b>: This allows users to select between datasets. As released, MIDAS comes with the Carotid Artery dataset and the Heart dataset. A dataset includes:
<ol><li><u>B-mode input data:</u> Multiple frames of post-RF-demod raw data. Reside at ~/midas/ultrasound/userdata/InputData/.</li>
<li><u>Color Flow input data:</u> Multiple frames of post-RF-demod raw data. Reside at ~/midas/ultrasound/userdata/InputData/.<br /></li>
<li><u>Data-specific parameter file:</u> One per dataset, which includes data-specific parameters like #scanlines, #samples, #ensembles, LUT file names, and default module parameter file names. Reside at ~/midas/ultrasound/userdata/.<br /></li>
<li><u>LUTs:</u> Lookup tables for color mapping B-mode and Color Flow, Arbitration, and B-mode Compression. Reside at ~/midas/ultrasound/userdata/LUTs<br /></li>
<li><u>Module-specific parameter files:</u> Default parameters for each of the modules i.e. B-mode Processing Unit (BPU), Doppler Processing Unit (DPU) and Scan Converter Unit (SCU)&#160;for B-mode and Color Flow. Reside at ~/midas/ultrasound/InputData/.<br /></li></ol></li></ul>
</blockquote><blockquote>
<ul><li><b>Contrast:&#160;</b>Three contrast settings for B-mode, High, Medium and Low are available. Related parameters are defined in the BPU&#160;parameter file and are customizable</li>
<li><b>Start/Stop: </b>This enables users to Start and Stop image processing to toggle between 'Imaging' and 'Idle' states. When in 'Imaging' state, the ARM&#160;reads the raw input data files and sends it to the DSP&#160;to perform BPU, DPU&#160;and SCU&#160;processing. The output frames are displayed on the LCD screen. The same button allows users to stop imaging.</li>
<li><b>Advanced/Basic: </b>As described earlier, this is used to toggle between the 'Basic' and 'Advanced' screens.</li>
<li><b>Bmode/Color: </b>This allows users to toggle between B-mode and Color. When imaging is started, both B-mode and Color Flow data is processed and displayed on the screen.</li>
<li><b>Freeze/Unfreeze: </b>When the user touches this button to 'Freeze' it pauses image processing, and a still frame is continuously displayed on the LCD. The user can now touch this button to 'Unfreeze' and continue image processing.</li>
<li><b>Hide:&#160;</b>When in 'Imaging' state, output frames are displayed on the LCD along with the user interface overlayed as translucent. The user can use this 'Hide' button to hide the user interface to have a closer look at the processed output frames.</li>
<li><b>DSP and ARM Load: </b>Displays the DSP&#160;and ARM&#160;CPU&#160;loading in real-time</li>
<li><b>OSD:</b> When in 'Imaging' state, this button allows users to toggle the user interface transparency between translucent and fully opaque (no processed frames can be seen). This allows users the choice to have a closer look at the user interface in 'Imaging' state.<br /></li></ul>
</blockquote>
<p>5. <b>About: </b>This tab window displays a summary of the MIDAS demo<br />
</p><p>6. <b>BPU/DPU/SCU B/SCU&#160;C: </b>These tab windows appear in the 'Advanced' screen, and allow users to modify processing parameters for these DSP&#160;modules and select LUTs. The textboxes in each of these tabs is populated with default values based on the dataset selected and the parameters defined in the module-specific parameter text files. Users can also change these processing parameters in real-time, in 'Imaging' or 'Idle' state, using the UI. Please note that at this point there is no error checking code for user inputs in the parameter text-boxes, so it is recommended that you play with these parameters only once you are familiar with the specific modules. Documentation is available for each of these modules with the Embedded Processor Software Toolkit for Medical Imaging Applications v2.0, which is free and can be requested&#160;<a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/s2meddus.html">here</a>.<br />
</p><p>7. <b>Data:&#160;</b>This tab allows users to modify data-specific parameters in 'Idle' state or view these parameters in 'Imaging' state. Typically these parameters are specific to a dataset and are provided in the default data-specific parameter files.<br />
</p>
<h2><span class="mw-headline" id="Common_Gotchas_3">Common Gotchas</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=21" title="Edit section: Common Gotchas">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><u>Gotcha 1</u></li></ul>
<blockquote><p><i>Issue:</i> <br />Touchscreen doesn't work! I can see the menu, but it doesn't respond to touch events.<br /> <i>Solution:</i><br />1. Let's first rule out a hardware or touchscreen library issue. On your omap's console please type the following to run the touchscreen calibration:<br /> </p><pre>target $ ts_calibrate
</pre></blockquote><blockquote>
<p>You will now see “x=640, y=480” on the console, and should also see a crosshair on the EVM LCD screen. You should touch the crosshair and as you do that, it will move the crosshair to different places, where you need to touch the screen at that spot, so that the touchscreen gets calibrated. After 5 of these cross-hairs, the program will execute. <br />
</p><p>2. Next, let's run the touchscreen test. On the omap console, please type the command below. Here you can either 'drag' or 'draw' to test the touchscreen<br />
</p>
<pre>target $ ts_test
</pre></blockquote><blockquote>
<p>3. Next, let's make sure that the&#160;process 'cat /dev/zero &gt; /dev/null' is running on your omap target in the background when you try to run midas. This process is&#160;required so that we ensure that the CPU does not go into idle state during midas execution. Typically, this should be started in the initscript 'omap-demo' but in case it's not running, we'll need to restart it. On your target type 'ps' to verify this, and if the process doesn't exist&#160;please execute the following command before attempting to execute the 'ultrasound' application.<br />
</p>
<pre>target $ cat /dev/zero &gt; /dev/null
</pre></blockquote>
<ul><li><u>Gotcha 2</u><br /></li></ul>
<blockquote><p><i>Issue: </i><br />The LCD screen goes dark after a few seconds and comes back up when I hit enter on the console or press a button on the EVM, and this repeats.<br /> <i>Solution:<br /></i>To save power, the EVM's LCD is set to timeout after a few seconds of idle time. To avoid timeout, we can increase this timeout interval, so that it stays on longer. Let's set this as follows:<br /> </p><pre>target $ echo 600000 &gt; /sys/devices/platform/omapfb/sleep_timeout</pre></blockquote>
<p><br />
</p>
<h1><span class="mw-headline" id="Using_Custom_Input_Datasets">Using Custom Input Datasets</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=22" title="Edit section: Using Custom Input Datasets">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>As the Software Design block diagram above indicates, MIDAS incorporates the ultrasound signal processing blocks after the data has undergone IQ demodulation. If you are unfamiliar with the ultrasound signal chain, click <a href="http://www.ti.com/lit/pdf/sprab12" class="extiw" title="tidoc:sprab12">here</a> for a whitepaper that provides an overview of signal processing blocks in a typical ultrasound system.&#160;
</p><p>MIDAS includes two input datasets, a sector scan of the heart and a linear scan of the carotid artery. In this discussion, we use the carotid artery data as an example to outline the steps you would need to follow to incorporate your dataset within MIDAS.
</p><p>Each dataset, includes binary IQ data for a given ultrasound scan, and configuration text files and look-up tables specific to the given input data.&#160;The dataset is identified by a data configuration file that defines data parameters like the number of scanlines, samples and ensembles as well as the look-up tables and module parameter files that are specific to the given dataset. The data configuration file resides at 'midas/ultrasound/userdata/.' For the carotid artery dataset, this is 'TI_Carotid.txt.'&#160;Please ensure that you follow the guidelines in the table below when you start to incorporate your own dataset.
</p>
<table cellspacing="1" cellpadding="1" border="1" align="center" width="800">

<tbody><tr>
<th scope="col">Parameter
</th>
<th scope="col">Value
</th>
<th width="500" scope="col">Guidelines
</th></tr>
<tr>
<td>Label
</td>
<td>Carotid
</td>
<td>Label that will be displayed in 'Scan Type' combo box on UI
</td></tr>
<tr>
<td>BmodeData
</td>
<td>TI_Carotid_tissdata_512x256x69.bin
</td>
<td>Bmode IQ demodulated data 32bit/sample,16bit I &amp;16bit Q interleaved
</td></tr>
<tr>
<td>BScanLines
</td>
<td>256
</td>
<td>Should be multiple of 16
</td></tr>
<tr>
<td>BSamples
</td>
<td>512
</td>
<td>Should be multiple of 32
</td></tr>
<tr>
<td>DopplerData
</td>
<td>TI_Carotid_velturbdata_48x256x10x69.bin
</td>
<td>Color IQ demodulated data 32bits/sample,16bit I &amp;16bit Q interleaved
</td></tr>
<tr>
<td>DScanLines
</td>
<td>48
</td>
<td>Should be multiple of 16
</td></tr>
<tr>
<td>DSamples
</td>
<td>256
</td>
<td>Should be multiple of 32
</td></tr>
<tr>
<td>DEnsembles
</td>
<td>10
</td>
<td>Should be multiple of 2
</td></tr>
<tr>
<td>WallFilterCoeffFile
</td>
<td>TI_Carotid_WallFilterCoeffx10.bin
</td>
<td>Wall filter coeff, 16bits/sample, Q15, DEnsembles*DEnsembles in size
</td></tr>
<tr>
<td>TissueTableFile
</td>
<td>TISSUETable_TI_Carotid.txt
</td>
<td>Bmode Color Mapping LUT 256 samples, 32bits/sample
</td></tr>
<tr>
<td>FlowTableFile
</td>
<td>FLOWTable_TI_Carotid.txt
</td>
<td>Doppler Color Mapping LUT 4096 samples, 32bits/sample
</td></tr>
<tr>
<td>ArbTableFile
</td>
<td>ARBTable_TI_Carotid.txt
</td>
<td>Arbitration LUT 4096 samples. 8bit/sample
</td></tr>
<tr>
<td>CompressionTableFile
</td>
<td>COMPRESSTable_TI_Carotid.txt
</td>
<td>Compression LUT 256 samples, 16bits/sample
</td></tr>
<tr>
<td>BPUParamFile
</td>
<td>TI_Carotid_bpuparam.txt
</td>
<td>Configuration parameters for BPU module
</td></tr>
<tr>
<td>DPUParamFile
</td>
<td>TI_Carotid_dpuparam.txt
</td>
<td>Configuration parameters for DPU module
</td></tr>
<tr>
<td>SCUBParamFile
</td>
<td>TI_Carotid_scubparam.txt
</td>
<td>Configuration parameters for SCU module (Bmode)
</td></tr>
<tr>
<td>SCUCParamFile
</td>
<td>TI_Carotid_scucparam.txt
</td>
<td>Configuration parameters for SCU module (Color)
</td></tr></tbody></table>
<p><br />If you look at the loadmodules.sh script in ~/workdir/filesys/opt/midas/ on your filesystem, you will see that the CMEM memory area is defined to be 16MB in size (from 0x86300000 to 0x87300000). The CMEM pool sizes are defined by the command:
</p><p>“insmod cmemk.ko phys_start=0x86300000 phys_end=0x87300000 pools=3x4096,2x131072,8x524288,4x131072,6x32768,2x16384,4x614400,4x307200 allowOverlap=1”
</p><p>You will see that the number of pools defined here correspond to the data sizes as shown below for the Carotid data. Note that the number of “bytes/sample” is as required by the DSP modules in use. The “pipe-size” is as defined in DISPLAY_PIPE_SIZE, PROCESS_PIPE_SIZE, both of which are defined as 4 in our current implementation.
</p><p>So basically, once you know the following 5 data-specific numbers, you can calculate the CMEM pool sizes for your dataset: <br /><i>BScanlines, BSamples, DScanlines, DSamples, DEnsembles.</i>
</p><p>Let's go through an analysis for the Carotid Dataset as an example: <br />
</p><p><b>Inputs</b><br /><u>Bmode Input</u> (post RF demod): 256 scanlines x 512 samples/scanline x 4 bytes/sample = 524288 bytes x 4 pipe-size
</p><p><u>Color Input</u> (post RF demo): 64 scanlines x 256 samples/scanline x 8 ensembles x 4 bytes/sample = 524288 bytes x 4 pipe-size
</p><p><b>Intermediate Outputs</b><br /><u>BPUOut:</u> 256 scanlines x 512 samples/scanline x 1 byte/sample = 131072 bytes x 4 pipe-size
</p><p><u>DPUOut:</u> 64 scanlines x 256 samples/scanline x 2 bytes/sample = 32768 bytes x 4 pipe-size
</p><p><u>DPUTemp16:</u> 64 scanlines x 256 samples/scanline x 2 bytes/sample = 32768 x 2 pipe-size
</p><p><u>DPUTemp8:</u> 64 scanlines x 256 samples/scanline x 1 byte/sample = 16384 bytes x 2 pipe-size
</p><p><b>Outputs</b>
</p><p><u>SCUOut16:</u> 640 pixels x 480 pixels x 2bytes/sample = 614400 x 4 pipe-size
</p><p><u>SCUOut8:</u> 640 pixels x 480 pixels x 1byte/sample = 307200 x 4 pipe-size
</p><p>In addition you will notice that, there are 3 pools of 4096 and 2 pools of 131072 that aren’t accounted for in the calculation above. These are code-specific used for allocation of some configuration structures, so you can retain those as the same (i.e. pools = 3x4096, 2x131072, and then whatever you calculate).
</p><p>Please remember to follow the multiplicity requirements described in the table above. Another thing to keep in mind is that CMEM total size defined above is 16MB (0x86300000 to 0x87300000). Please either ensure that when you add all the pool sizes your total CMEM size is under 16MB, or modify the memory map as per guidelines <a href="Changing_the_DVEVM_memory_map.html" title="Changing the DVEVM memory map">here</a>.<br />
</p><p><br />
</p>
<h1><span class="mw-headline" id="Software_Design">Software Design<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=23" title="Edit section: Software Design">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section discusses the software architecture for MIDAS and showcases how easy it is to setup ARM-DSP&#160;communication by leveraging TI's Codec Engine, DMAI and IUNIVERSAL&#160;APIs. <br />
</p>
<h2><span class="mw-headline" id="Overview_2">Overview<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=24" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The figure below summarizes the MIDAS&#160;software implementation. OMAP3530’s C64x+ DSP core runs the DSP/BIOS real-time operating system and handles algorithm processing. There are three main algorithm modules managed by the DSP:<br />
</p>
<ol><li>B-mode Processing Unit (BPU): Envelope Detection and Compression<br /></li>
<li>Doppler Processing Unit (DPU): Ensemble Aggregation and Velocity Estimation<br /></li>
<li>Scan Conversion Unit (SCU): Scan converts both B-mode and Color Flow data from the acquired polar/cartesian co-ordinates to the display cartesian co-ordinates<br /></li></ol>
<p>The BPU, DPU, and SCU algorithm modules are packaged into a 'DSP Algorithm Server' that is managed by the Codec Engine and executed on the DSP core. On the ARM, the demo application uses Codec Engine APIs to make a remote procedure call to this 'Algorithm Server'. <br />
</p><p>The ARM core runs the Linux operating system, and all peripherals are controlled through Linux device drivers, which are part of the PSP. The MIDAS application resides on this Linux filesystem and uses a multithreaded framework to achieve data FIFO management, and to manage the Qt GUI on the On Screen Display (OSD) and service user interrupts via touchscreen events.
</p><p><a href="File_Midas_software_framework.html" class="image" title="MIDAS Software Framework"><img alt="MIDAS Software Framework" src="https://processors.wiki.ti.com/images/a/ad/Midas_software_framework.png" width="600" height="339" class="thumbborder" /></a>
</p>
<h2><span class="mw-headline" id="ARM_Application_Implementation">ARM Application Implementation<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=25" title="Edit section: ARM Application Implementation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The ARM application consists of a main function, and four execution threads running in parallel viz. acquisition, process, display and control threads. All four threads are configured as preemptive/ priority-based scheduled. The display thread has the highest priority, while acquire, process and control are of an equal, lower priority.
</p>
<blockquote>
<ul><li>The main function draws the Qt GUI and then becomes the event handling loop <br /></li>
<li>The acquire thread reads the raw input ultrasound data (post IQ demod) into the system<br /></li>
<li>The process thread engages the C64x+ DSP for b-mode processing, doppler processing and scan conversion</li>
<li>The display thread transfers ultrasound image frames to the frame buffer of the FBDev display driver<br /></li>
<li>The control thread computes the ARM and DSP load and services touchscreen events for unhiding the GUI</li></ul>
</blockquote>
<p>Fixed-size buffers are exchanged between acquisition-process, and process-display threads for data movement. The thread where the data originates creates and maintains the set of data buffers, and FIFOs are used to put and get buffer pointers, as shown in the figure below. Each data path consists of a set of two FIFOs, one in the direction of data flow, and the other in the reverse direction. The use of the reverse FIFO is to acknowledge that the receiving thread has consumed the data buffer. For example, once the process thread consumes the buffer it receives from the acquire thread on the <i>Acq2ProcFifo</i> it puts the consumed buffer on the <i>Proc2AcqFifo</i>. Only once the acquire thread receives this acknowledgment on <i>Proc2AcqFifo</i> does it free up that buffer and fill up another input buffer on <i>Acq2ProcFif</i>o. In the following subsections we will delve into each of the threads discussed above. It might be useful to follow along with the source code as we discuss these elements.<br />
</p>
<h3><span class="mw-headline" id="Main_Function">Main Function<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=26" title="Edit section: Main Function">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The main function in <i>main.cpp</i> performs necessary initialization tasks, which include loading CMEM, DSPLink, SDMA and LPM modules and moving input data to DDR, before setting up the user interface. Once the main window is setup, this main thread becomes the event handling loop that makes function callbacks in response to touchscreen events. All trigger events (slots) and their associated callback functions (signals) are defined in <i>mainwindow.cpp.'</i><br />
</p><p>The <i>image()</i> function is the most important signal in <i>mainwindow.cpp</i> and is triggered when the user touches the 'Start/Stop' button to begin/end image processing. The <i>image()</i> function is responsible for spawning the acquire, process, display and control threads mentioned above, allocating memory for data FIFOs, setting up the <i>Rendezvous</i> and <i>Pause</i> objects that allow thread synchronization, and populating the BPU, DPU, SCU&#160;configuration structures with the default parameter values defined in the module-specific configuration files identified. For more details on how configuration and data files are organized and customizable, see the section on this page titled "Using custom input datasets." <br />
</p><p>Each thread performs its initialization and signals the <i>Rendezvous</i> object when completed. When all threads have finished initializing, they are unlocked simultaneously and start executing their loops. Thread cleanup also uses the same principle. This ensures that buffers which are shared between threads are not freed in one thread while still being used in another thread.
</p>
<h3><span class="mw-headline" id="Acquire_Thread">Acquire Thread<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=27" title="Edit section: Acquire Thread">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The acquire thread function defined in <i>UsAcquire.c</i> reads raw, post-IQ-demodulated ultrasound data from user-specified input file/s. The intended purpose of a separate thread for data acquisition is to try and recreate a real scenario and show independence between the acquisition and display rates. However, this rate independence is not yet implemented in this demo version, and the display thread currently drives the rate of acquisition.
</p><p>Before the main function spawns the acquire thread, it creates a <i>UsAcquire</i> object and allocates memory for input buffers using the <i>UsAcquire_create()</i> call. As shown in the code section below, the DMAI API <code>Buftab_create()</code> allocates <i>PROCESS_PIPE_SIZE+1</i> number of input frame buffers, each of the size of a frame, in contiguous memory (CMEM). All data buffers that are shared between ARM and DSP need to be allocated in physically contiguous blocks of memory, which is what this API call helps achieve.
</p><p>&lt;syntaxhighlight lang="c"&gt;
hAcq-&gt;hBPUBufTabIn = BufTab_create(PROCESS_PIPE_SIZE+1, hAcq-&gt;frameSize, &amp;bAttrs);
hAcq-&gt;hDPUBufTabIn = BufTab_create(PROCESS_PIPE_SIZE+1, hAcq-&gt;frameSize2, &amp;bAttrs);
&lt;/syntaxhighlight&gt;
</p><p>For example, for the Heart dataset included with the demo, the BufTab would be created of <code>(PROCESS_PIPE_SIZE + 1)</code> buffers with each buffer as:
</p>
<ul><li>BPUBufTabIn: 128 scanlines x 416 depth points x 4 bytes/sample = 208 KB/frame</li>
<li>DPUBufTabIn: 64 scanlines x 256 depth points x 8 ensembles x 4 bytes/sample = 512 KB/frame</li></ul>
<p>Next, let's focus on how raw Bmode data is acquired. When the acquire thread <i>UsAcquire_thrFxn</i> starts, it first reads <i>PROCESS_PIPE_SIZE</i> number of input frames from the input file, and lines them up in the <i>Acq2ProcFifo</i> using the DMAI <code>Fifo_put()</code> method. Once the FIFO is primed, acquire releases the process thread using the DMAI <i>Pause</i> object, so that process can start taking input buffers off the <i>Acq2ProcFifo</i> for DSP image processing.
</p><p>As the code fragment below shows, at this point the acquire thread enters its <code>while(!gblSetQuit())</code> loop, reads the next frame from the input file into the final buffer space left in the allocated Buftab, and places it on the <i>Acq2ProcFifo</i>. Now acquire waits for process to return a consumed buffer/s on the <i>Proc2AcqFifo</i> as acknowledgment, and only then does it free that/those buffer/s and reuses it/them by populating it/them with the next input frame/s. It uses the DMAI's <code>Fifo_get()</code> blocking call on Proc2AcqFifo to achieve this.
</p><p>&lt;syntaxhighlight lang="c"&gt;
pDst = (unsigned char *)Buffer_getUserPtr( hBuf );
bytesRead = fread( pDst, 1, hAcq-&gt;frameSize, hAcq-&gt;fid );
</p><p>/* ... */
</p><p>Fifo_put( hAcq-&gt;hAcq2ProcFifo, hBuf );
numInFifo = Fifo_getNumEntries( hAcq-&gt;hProc2AcqFifo );
if (numInFifo &gt; 0) {
</p>
<pre>   for (i = 0; i &lt; numInFifo; i++) {
       Fifo_get( hAcq-&gt;hProc2AcqFifo, &amp;hBuf );
</pre>
<pre>       /* ... */
</pre>
<pre>       BufTab_freeBuf( hBuf );
</pre>
<pre>       /* ... */
   }
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p><p>The acquire <code>while(!gblSetQuit())</code> loop continues until the global quit flag is true, which indicates that the user has touched the 'Stop' button and the ARM application needs to exit. When this happens, acquire makes sure that it meets up with the other threads using the <code>Rendezvous_meet()</code> method and deallocates any memory associated with it before it exits. The scenario for acquiring raw Color Flow data is similar.<br />
</p>
<h3><span class="mw-headline" id="Process_Thread"><b>Process Thread</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=28" title="Edit section: Process Thread">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The process thread function defined in <i>UsProcess.c</i> interacts with the C64x+ and engages the DSP to run the BPU, DPU and SCU processing algorithm modules. Just like we saw with the acquire thread, since the output buffers will be shared between ARM&#160;and DSP, the process thread also allocates contiguous memory for these using the DMAI API <i>Buftab_create()</i>There are 8 output buffers allocated in the <i>UsProcess_create()&#160;</i>function: <br />
</p>
<ul><li>1 buffer for the BPU Output:<br /></li></ul>
<blockquote><pre>hUsProcess-&gt;hBPUBufTabOut = BufTab_create(DISPLAY_PIPE_SIZE+1, IBPU_ALLOC_PARAMS.size.numSamples, &amp;bAttrs);</pre></blockquote><blockquote>
<p>For example, for the Heart dataset included with the demo, the BufTab would be created of (DISPLAY_PIPE_SIZE + 1) buffers with each buffer as:
</p>
</blockquote><blockquote>
<ul><li>BPUBufTabOut: 128 scanlines x 416 depth points x 1 byte/sample = 52 KB/frame<br /></li></ul>
</blockquote>
<ul><li>1 buffer for the lumped velocity/variance DPU&#160;Output:<br /></li></ul>
<blockquote><pre>hUsProcess-&gt;hDPUBufTabOut = BufTab_create(DISPLAY_PIPE_SIZE+1, (hUsProcess-&gt;pDpuConfig-&gt;varianceConfig.depthPointsToProcess)*(hUsProcess-&gt;pDpuConfig-&gt;numScanLines)*sizeof(uint_least16_t), &amp;bAttrs);</pre></blockquote><blockquote>
<p>For example, for the Heart dataset included with the demo, the BufTab would be created of (DISPLAY_PIPE_SIZE + 1) buffers with each buffer as:
</p>
</blockquote><blockquote>
<ul><li>DPUBufTabOut: 64 scanlines x 256 depth points x 2 bytes/sample = 32 KB/frame<br /></li></ul>
</blockquote>
<ul><li>4 buffers for power, velocity, variance and outflow DPU Outputs:<br /></li></ul>
<blockquote><pre>hUsProcess-&gt;hDPUBufTabOut16 = BufTab_create(2, (hUsProcess-&gt;pDpuConfig-&gt;varianceConfig.depthPointsToProcess)*(hUsProcess-&gt;pDpuConfig-&gt;numScanLines)*sizeof(uint_least16_t), &amp;bAttrs);

hUsProcess-&gt;hDPUBufTabOut8 = BufTab_create(2, (hUsProcess-&gt;pDpuConfig-&gt;varianceConfig.depthPointsToProcess)*(hUsProcess-&gt;pDpuConfig-&gt;numScanLines), &amp;bAttrs);
</pre></blockquote><blockquote>
<p>For example, for the Heart dataset included with the demo, the BufTab would be created of (DISPLAY_PIPE_SIZE + 1) buffers with each buffer as:
</p>
</blockquote><blockquote>
<ul><li>DPUBufTabOut8: 64 scanlines x 256 depth points x 2 bytes/sample = 32 KB/frame<br /></li>
<li>DPUBufTabOut8: 64 scanlines x 256 depth points x 1 byte/sample = 16 KB/frame<br /></li></ul>
</blockquote>
<ul><li>1 buffer for the intermediary B-mode only Scan-Converted Output<br /></li></ul>
<blockquote><pre>hUsProcess-&gt;hSCUBufTabOut8 = BufTab_create(DISPLAY_PIPE_SIZE+1, gfxAttrs.dim.width*gfxAttrs.dim.height, BufferGfx_getBufferAttrs(&amp;gfxAttrs));
</pre></blockquote><blockquote>
<p>For example, for the Heart dataset included with the demo, the BufTab would be created of (DISPLAY_PIPE_SIZE + 1) buffers with each buffer as:
</p>
</blockquote><blockquote>
<ul><li>SCUBufTabOut8: 640 pixels x 480 pixels x 1 byte/sample = 300 KB/frame<br /></li></ul>
</blockquote>
<ul><li>1 buffer for the final Scan-Converted Output<br /></li></ul>
<blockquote><pre>hUsProcess-&gt;hSCUBufTabOut16 = BufTab_create(DISPLAY_PIPE_SIZE+1, (sizeof(uint_least16_t))*gfxAttrs.dim.width*gfxAttrs.dim.height, BufferGfx_getBufferAttrs(&amp;gfxAttrs));</pre></blockquote><blockquote>
<p>For example, for the Heart dataset included with the demo, the BufTab would be created of (DISPLAY_PIPE_SIZE + 1) buffers with each buffer as:
</p>
</blockquote><blockquote>
<ul><li>SCUBufTabOut16: 640 pixels x 480 pixels x 2 bytes/sample = 600 KB/frame<br /></li></ul>
</blockquote>
<p>In addition to allocating these buffers, the <i>UsProcess_create()</i> call resets, loads and starts the DSP Engine, and allocates and initializes the BPU, DPU&#160;and SCU algorithm modules on the DSP using the iUniversal API as shown in the code section below. This ARM-DSP interaction is explained in further detail later.<br />
</p>
<blockquote><pre>hEng = Engine_open(engineName, NULL, NULL)
hAlg = UNIVERSAL_create(hEng, algName, (IUNIVERSAL_Params*)&amp;ISCU_ALLOC_PARAMS)
</pre></blockquote>
<p>When the process thread is spawned, <i>UsProcess_thrFxn</i> begins and starts receiving input buffers from the acquire thread on the <i>Acq2ProcFifo/2 </i>FIFOs. It passes a pointer to this BPU/DPU input buffer and a pointer to the allocated BPU/DPU output buffers to the <i>UsProcess_BPU and UsProcess_DPU</i> functions respectively. The output pointer to BPU is then passed to the <i>UsProcess_scanConvertB() </i>function. The outputs of <i>UsProcess_DPU&#160;</i>and <i>UsProcess_scanConvertB() </i>are passed as inputs to the <i>UsProcess_scanConvertColor()</i> function. Once scan conversion is complete, the process thread places the pointer to the final output buffer on the <i>Proc2DispFifo</i>. <br />
</p><p>To illustrate this let's look at the relevant code section for processing in the B-mode only imaging mode:<br />
</p>
<blockquote><pre>Fifo_get( hProc-&gt;hAcq2ProcFifo, &amp;hInBuf8 );

hBPUOutBuf = BufTab_getFreeBuf(hProc-&gt;hBPUBufTabOut);

pBPUOutData = (unsigned char *)Buffer_getUserPtr( hBPUOutBuf );

UsProcess_BPU( hProc, pAcqData, pBPUOutData );

Fifo_put(hProc-&gt;hProc2AcqFifo, hInBuf8);

hSCUOutBuf16 = BufTab_getFreeBuf(hProc-&gt;hSCUBufTabOut16);

pDispData = (unsigned char *)Buffer_getUserPtr( hSCUOutBuf16 );

UsProcess_scanConvertB( hProc, pBPUOutData, pDispData, inputFrameSize );
</pre></blockquote>
<p>The <i>UsProcess_BPU()</i> and <i>UsProcess_scanConvertB()</i> functions invoke the DSP-side scan conversion methods using the IUNIVERSAL API. The <i>UNIVERSAL_process() </i>call invokes the connected function on the DSP-side. <br />
</p><p>For example for BPU, this is done as:<br />
</p>
<blockquote><pre>outBufDesc.numBufs = 1;
inpBufDesc.numBufs = 1;
inpBufDesc.descs[0].bufSize = (sizeof(cplx_least16_t)*bufSize);
inpBufDesc.descs[0].buf = (XDAS_Int8 *)pInp;

outBufDesc.descs[0].bufSize = bufSize;
outBufDesc.descs[0].buf = (XDAS_Int8 *)pOut;

status = UNIVERSAL_process(hUsProcess-&gt;hAlgBPU, &amp;inpBufDesc, &amp;outBufDesc, NULL,inArgs, &amp;outArgs);
</pre></blockquote>
<p>Initially, the process thread’s prime loop repeats this series of steps for DISPLAY_PIPE_SIZE number of frame buffers. When the process thread is fully primed it releases the display thread for it to start accepting buffers on the <i>Proc2DispFifo</i>. Once the Display thread is triggered, the acquire, process and display threads continue to run till the user touches the 'Stop' button. Since we have used small datasets for demo purposes the acquire loop rewinds to the first input frame and processing and display threads continue to output frames processed in real-time.<br />
</p>
<h3><span class="mw-headline" id="Display_Thread">Display Thread<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=29" title="Edit section: Display Thread">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The display thread function defined in <i>UsDisplay.c</i> transfers the final scan-converted ultrasound image frames that it receives on the <i>Proc2DispFifo</i> to the frame buffer of the FBDev display device driver. The <i>Display_create()</i> DMAI method opens the display device driver, and the display thread uses a handle to this to copy output buffers to the driver. When the application main spawns the display thread, it waits until the process thread primes the display pipeline, as discussed earlier. Once primed, the display thread pulls in buffers from the process thread, which in turn pulls in buffers from the acquire thread. Based on the display refresh rate specified by the user, 5 / 10 / 15 / 20 / 30 / 60 fps, the display thread gets a new frame from the the <i>Proc2DispFifo</i> and returns a consumed buffer on the <i>Disp2ProcFifo</i>. Therefore it is the display refresh rate that actually controls how fast acquire and process threads can provide buffers. <br />
</p><p>The display thread uses the H/W resizer to copy the output buffer to the display device driver, instead of using a <i>memcpy()</i> to ensure execution efficiency. DMAI’s <i>Framecopy</i> API is used to perform this buffer copy. The code section below is from the display thread and illustrates the execution flow.
</p><p>&lt;syntaxhighlight lang="c"&gt;
Pause_test(hUsDisp-&gt;hPausePrime);
</p><p>if (frmNmbr&#160;% dispRateFactor == 0) {
</p>
<pre>   fifoRet = Fifo_get(hUsDisp-&gt;hProc2DispFifo, &amp;hSrcBuf);
</pre>
<p>}
</p><p>Display_get(hUsDisp-&gt;hDisp, &amp;hDstBuf)
Framecopy_config(hFc, hSrcBuf, hDstBuf)
Framecopy_execute(hFc, hSrcBuf, hDstBuf)
if (frmNmbr&#160;% dispRateFactor == dispRateFactor - 1) {
</p>
<pre>   Fifo_put(hUsDisp-&gt;hDisp2ProcFifo, hSrcBuf
</pre>
<p>}
</p><p>Display_put(hUsDisp-&gt;hDisp, hDstBuf)
&lt;/syntaxhighlight&gt;
</p>
<h3><span class="mw-headline" id="Control_Thread">Control Thread</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=30" title="Edit section: Control Thread">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The control thread calculates the ARM CPU load and DSP CPU load using the Codec Engine calls to the <code>getArmCpuLoad()</code> and <code>Engine_getCpuLoad()</code> API functions, respectively. The CPU loading is updated every few seconds on the GUI's 'Home' tab and is represented as a percentage.
</p>
<h2><span class="mw-headline" id="DSP_Module_Integration">DSP Module Integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=31" title="Edit section: DSP Module Integration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In this section we outline the steps we took to integrate the BPU, DPU and SCU algorithm modules to plug-and-play with the Codec Engine using IUNIVERSAL. As <a href="Codec_Engine_Roles.html" title="Codec Engine Roles">Codec Engine Application Developers</a> it is possible to use simple API calls to pass data and configuration parameters between the ARM and DSP cores.
</p><p>The BPU, DPU and SCU modules, as provided in the Medical Imaging Software Toolkit, are both XDAIS compliant. The term XDAIS refers to an algorithm standard that DSP programmers are recommended to follow to ensure that their algorithms easily integrate into the system and can be called through the Codec Engine. The algorithm modules use the IUNIVERSAL APIs, which provide an interface for the ARM to create and interact with XDAIS algorithms that reside on the DSP. You can find many articles on this wiki that guide you through the process of making your codecs XDAIS compliant.
</p><p>Since the steps for BPU, DPU and SCU modules are similar, we will focus on the SCU module to illustrate how IUNIVERSAL is setup in this scenario.
</p><p>MIDAS capitalizes on the IUNIVERSAL API's capability to make a remote procedure call from the ARM to the DSP algorithm, without the need to write any system software for the C64x+. To initiate the ARM-DSP communication, the ARM creates a Codec Engine instance with an <code>Engine_open()</code> call that resets, loads and starts the DSP Engine and returns a handle to the same. Using this handle <code>hEng</code>, the <code>UNIVERSAL_create()</code> API creates an SCU algorithm instance using parameters from the <code>ISCU_Params</code> structure that specify the size of memory to allocate on the DSP. It is important to note that the SCU header file at “midas/ultrasound/algos/scu/src/scu.h” is shared between the DSP and the ARM, which makes it possible for the two cores to share the same interpretation of SCU-specific structures and datatypes, even when both are compiled using different compilers. The <code>UNIVERSAL_create()</code> call returns a handle to the IUNIVERSAL algorithm instance <i>hAlg</i> as:
</p><p>&lt;syntaxhighlight lang="c"&gt;
hAlg = UNIVERSAL_create(hEng, algName, (IUNIVERSAL_Params*)&amp;ISCU_ALLOC_PARAMS);
&lt;/syntaxhighlight&gt;
</p><p>Next, the ARM populates the SCU configuration structure, <i>scuConfig_t</i>, with parameter values from the user-provided configuration file/s, and with the tissue and flow color mapping lookup tables specified in "midas/ultrasound/userdata/LUTs". The SCU configuration structure is also defined in the SCU header file that ARM and DSP share. To send this configuration information to the DSP, the ARM passes a pointer to the <i>scuConfig_t</i> structure and the handle to the SCU algorithm instance <i>hAlg</i>, using the <code>UNIVERSAL_control()</code> API as shown in the code section below. <code>UNIVERSAL_control()</code> calls the corresponding SCU configuration function <code>SCU_TI_control()</code> on the DSP.
</p><p>&lt;syntaxhighlight lang="c"&gt;
universalStatus.data.numBufs = 1;
universalStatus.data.descs[0].bufSize = sizeof(scuConfig_t);
universalStatus.data.descs[0].buf =(XDAS_Int8 *)(hUsProcess-&gt;pScuConfigB);
status = UNIVERSAL_control(hUsProcess-&gt;hAlg, XDM_SETPARAMS, &amp;universalDynParams, &amp;universalStatus);
&lt;/syntaxhighlight&gt;
</p><p>It is important to note here that any buffers that the ARM shares with the DSP, it allocates in contiguous memory. This is necessary because unlike the ARM, the DSP does not have a virtual memory manager and therefore assumes that the buffer is aligned to a 64-bit boundary and is contiguous. In this demo implementation, the allocated buffers reside in CMEM, a contiguous memory manager by TI. When the ARM allocates contiguous memory using the <code>Memory_contigAlloc()</code> or <code>BufTab_create()</code> DMAI API, a CMEM pool that fits the buffer size requested is reserved for this buffer. The number and total size of CMEM pools is defined in the 'loadmodules.sh' script (from /opt/midas/. on the target), which the ARM application runs during initialization. Since both ARM and DSP have access to this CMEM memory space, they only need to exchange buffer pointers. <br />
</p><p>Once the SCU algorithm instance on the DSP is configured with the parameters it requires, it is ready to begin scan conversion processing. The ARM uses the <code>UNIVERSAL_process()</code> API to call the DSP-side <code>SCU_TI_process()</code> function; based on the scan conversion mode in the configuration, the DSP runs the corresponding processing function. Again, all input and output buffer pointers that the ARM and DSP exchange point to buffers allocated in CMEM.
</p><p>&lt;syntaxhighlight lang="c"&gt;
status = UNIVERSAL_process(hUsProcess-&gt;hAlg, &amp;inpBufDesc, &amp;outBufDesc, NULL, &amp;inArgs, &amp;outArgs);
&lt;/syntaxhighlight&gt;
</p><p>Finally, when the user stops imaging, the <code>UNIVERSAL_delete()</code> API deletes the SCU algorithm instance <code>hAlg</code>. This deallocates all the dynamic memory that was associated with the <code>hAlg</code> instance. The algorithm instance deletion is accompanied with an <code>Engine_close()</code> call which deletes the Codec Engine instance created for ARM-DSP interaction as:
</p><p>&lt;syntaxhighlight lang="c"&gt;
UNIVERSAL_delete(hUsProcess-&gt;hAlg);
Engine_close(hUsProcess-&gt;hEng);
&lt;/syntaxhighlight&gt;
</p><p>To summarize, the Codec Engine and IUNIVERSAL APIs allow application developers to seamlessly plug in XDAIS-compliant algorithm modules into their ARM application.
</p>
<h1><span class="mw-headline" id="Useful_References">Useful References</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=32" title="Edit section: Useful References">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>For more information on ARM and DSP application development and application notes, white papers and information on TI’s latest offerings in the Medical Imaging space, the following are useful references.
</p>
<h2><span class="mw-headline" id="Medical_Imaging">Medical Imaging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=33" title="Edit section: Medical Imaging">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/medicalimaging">Texas Instruments Medical Imaging homepage</a></li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/docs/toolsw/folders/print/s2meddus.html">Medical Imaging Software Toolkits</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/litv/pdf/sprab12">Signal Processing Overview of Ultrasound Systems for Medical Imaging</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lit/an/sprab32/sprab32.pdf">Ultrasound Scan Conversion on TI’s C64x+ DSPs</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lit/an/sprab11/sprab11.pdf">Ultrasound Color Doppler Algorithms on TI's C64x DSP Platforms</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/litv/pdf/sprab18a">DSPs for Portable Ultrasound</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lit/wp/slyy019/slyy019.pdf">DSPs in Medical Imaging</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lit/wp/slyy020/slyy020.pdf">The Future of Medical Imaging</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/general/docs/lit/getliterature.tsp?baseLiteratureNumber=slyb155%7CMedical">Medical Imaging Applications Guide</a></li></ul>
<h2><span class="mw-headline" id="ARM_and_DSP_development">ARM and DSP development</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=34" title="Edit section: ARM and DSP development">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li><a rel="nofollow" class="external text" href="http://focus.ti.com/dsp/docs/dspsplash.tsp?contentId=52451">OMAP and DaVinci Software for Dummies</a></li>
<li><a href="Codec_Engine_Overview.html" title="Codec Engine Overview">Codec Engine Overview</a></li>
<li><a href="Codec_Engine_Roles.html" title="Codec Engine Roles">Codec Engine Roles</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprued6" class="extiw" title="tidoc:sprued6">Codec Engine Algorithm Creator User’s Guide</a></li>
<li><a href="http://www.ti.com/lit/pdf/sprued5b" class="extiw" title="tidoc:sprued5b">Codec Engine Server Integrator User’s Guide</a></li>
<li><a href="Codec_Engine_Application_Developers_Guide.html" title="Codec Engine Application Developers Guide">Codec Engine Application Developer’s Guide</a></li>
<li><a href="DMAI.html" class="mw-redirect" title="DMAI">DMAI – DaVinci Multimedia Application Interface Guide</a></li>
<li><a href="Getting_started_with_IUNIVERSAL.html" title="Getting started with IUNIVERSAL">Getting Started with the IUNIVERSAL API</a></li>
<li><a href="XDAIS_Documentation.html" title="XDAIS Documentation">XDAIS Documentation</a></li>
<li><a href="Porting_GPP_code_to_DSP_and_Codec_Engine.html" title="Porting GPP code to DSP and Codec Engine">Porting GPP code to DSP and Codec Engine</a></li>
<li><a rel="nofollow" class="external text" href="C6Accel__ARM_access_to_DSP_software_on_TI_SoCs.html">C6Accel: ARM access to DSP software on TI SoCs</a></li>
<li><a href="C6EZRun.html" title="C6EZRun">C6EZRun</a><br /></li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="Disclaimer">Disclaimer<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;section=35" title="Edit section: Disclaimer">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>System and equipment manufacturers and designers are responsible to ensure that their systems (and any TI devices incorporated in their systems) meet all applicable safety, regulatory and system-level performance requirements. All application-related information on this website (including application descriptions, suggested TI devices and other materials) is provided for reference only. This information is subject to customer confirmation, and TI disclaims all liability for system designs and for any applications assistance provided by TI. Use of TI devices in life support and/or safety applications is entirely at the buyer's risk, and the buyer agrees to defend, indemnify and hold harmless TI from any and all damages, claims, suits or expense resulting from such use.
</p><p>All software is licensed under BSD with the following terms and conditions:
</p><p>Copyright (C) 2011 Texas Instruments Incorporated - <a rel="nofollow" class="external free" href="http://www.ti.com/">http://www.ti.com/</a><br />Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:<br />Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.<br />Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.<br />Neither the name of Texas Instruments Incorporated nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.<br />This software is provided by the copyright holders and contributors "as is" and any express or implied warranties, including, but not limited to, the implied warranties of merchantability and fitness for a particular purpose are disclaimed. In no event shall the copyright owner or contributors be liable for any direct, indirect, incidental, special, exemplary, or consequential damages (including, but not limited to, procurement of substitute goods or services; loss of use, data, or profits; or business interruption) however caused and on any theory of liability, whether in contract, strict liability, or tort (including negligence or otherwise) arising in any way out of the use of this software, even if advised of the possibility of such damage.<br />
</p><p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20201201103309
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.140 seconds
Real time usage: 0.146 seconds
Preprocessor visited node count: 652/1000000
Preprocessor generated node count: 1286/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 8488/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:5417-0!canonical and timestamp 20201201103308 and revision id 182003
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MIDAS Ultrasound v2.0 Demo</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MIDAS Ultrasound v2.0 Demo</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>MIDAS Ultrasound v2.0 Demo</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;oldid=182003">https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;oldid=182003</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=MIDAS+Ultrasound+v2.0+Demo" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="MIDAS_Ultrasound_v2.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:MIDAS_Ultrasound_v2.0_Demo&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="MIDAS_Ultrasound_v2.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/MIDAS_Ultrasound_v2.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/MIDAS_Ultrasound_v2.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;oldid=182003" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=MIDAS_Ultrasound_v2.0_Demo&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 21 July 2014, at 05:51.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.140","walltime":"0.146","ppvisitednodes":{"value":652,"limit":1000000},"ppgeneratednodes":{"value":1286,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":8488,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201201103309","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":379});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/MIDAS_Ultrasound_v2.0_Demo by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 13:11:11 GMT -->
</html>
