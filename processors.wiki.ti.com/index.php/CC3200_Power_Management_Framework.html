<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/CC3200_Power_Management_Framework by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:09:45 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>CC3200 Power Management Framework - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"CC3200_Power_Management_Framework","wgTitle":"CC3200 Power Management Framework","wgCurRevisionId":227434,"wgRevisionId":227434,"wgArticleId":34687,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Pages with script errors","Templates"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"CC3200_Power_Management_Framework","wgRelevantArticleId":34687,"wgRequestId":"10342a08a706fe2a195c0fd9","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-CC3200_Power_Management_Framework rootpage-CC3200_Power_Management_Framework skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">CC3200 Power Management Framework</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="clear:both; margin:0; padding:0;"></div>
<div class="floatright"><a href="CC31xx_%26_CC32xx.html" title="CC31xx &amp; CC32xx"><img alt="Cc31xx cc32xx return home.png" src="https://processors.wiki.ti.com/images/2/29/Cc31xx_cc32xx_return_home.png" width="415" height="42" /></a></div>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Device_PM_overview"><span class="tocnumber">2</span> <span class="toctext">Device PM overview</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Overview_-_PMF_Design"><span class="tocnumber">3</span> <span class="toctext">Overview - PMF Design</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Software_Interface"><span class="tocnumber">4</span> <span class="toctext">Software Interface</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Timer_framework"><span class="tocnumber">5</span> <span class="toctext">Timer framework</span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Overview"><span class="tocnumber">5.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Real_Time_Clock_.28RTC.29_Infrastructure_:_Low_precision.2C_Aids_power_management"><span class="tocnumber">5.2</span> <span class="toctext">Real Time Clock (RTC) Infrastructure&#160;: Low precision, Aids power management</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Monotone_Clock_infrastructure_:_High_precision"><span class="tocnumber">5.3</span> <span class="toctext">Monotone Clock infrastructure&#160;: High precision</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Exercising_Low_Power_Modes"><span class="tocnumber">6</span> <span class="toctext">Exercising Low Power Modes</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Low_Power_Deep_Sleep"><span class="tocnumber">6.1</span> <span class="toctext">Low Power Deep Sleep</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#GPIO_as_wake_source"><span class="tocnumber">6.1.1</span> <span class="toctext">GPIO as wake source</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#RTC_as_wake_source"><span class="tocnumber">6.1.2</span> <span class="toctext">RTC as wake source</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Network_activity_as_wake_source"><span class="tocnumber">6.1.3</span> <span class="toctext">Network activity as wake source</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-14"><a href="#Hibernate"><span class="tocnumber">6.2</span> <span class="toctext">Hibernate</span></a>
<ul>
<li class="toclevel-3 tocsection-15"><a href="#GPIO_as_wake_source_2"><span class="tocnumber">6.2.1</span> <span class="toctext">GPIO as wake source</span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#RTC_as_wake_source_2"><span class="tocnumber">6.2.2</span> <span class="toctext">RTC as wake source</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-17"><a href="#IO_Parking_while_entering_LPDS"><span class="tocnumber">7</span> <span class="toctext">IO Parking while entering LPDS</span></a></li>
<li class="toclevel-1 tocsection-18"><a href="#Recommendations_for_use_of_PM_framework"><span class="tocnumber">8</span> <span class="toctext">Recommendations for use of PM framework</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Choice_of_low_power_mode"><span class="tocnumber">8.1</span> <span class="toctext">Choice of low power mode</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Choice_of_wake_source"><span class="tocnumber">8.2</span> <span class="toctext">Choice of wake source</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Working_with_time_of_day_.28real_time.29"><span class="tocnumber">8.3</span> <span class="toctext">Working with time of day (real time)</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Disabling_PM_framework"><span class="tocnumber">8.4</span> <span class="toctext">Disabling PM framework</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Extending.2FCustomizing_PM_framework"><span class="tocnumber">8.5</span> <span class="toctext">Extending/Customizing PM framework</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#PM_framework_details"><span class="tocnumber">9</span> <span class="toctext">PM framework details</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#LPDS_entry-exit_sequence"><span class="tocnumber">9.1</span> <span class="toctext">LPDS entry-exit sequence</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Folder_structure_and_API_listing"><span class="tocnumber">9.2</span> <span class="toctext">Folder structure and API listing</span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#Folder_structure"><span class="tocnumber">9.2.1</span> <span class="toctext">Folder structure</span></a></li>
<li class="toclevel-3 tocsection-28"><a href="#Core_PM_framework_APIs"><span class="tocnumber">9.2.2</span> <span class="toctext">Core PM framework APIs</span></a></li>
<li class="toclevel-3 tocsection-29"><a href="#Platform_Service_APIs"><span class="tocnumber">9.2.3</span> <span class="toctext">Platform Service APIs</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-30"><a href="#Reference_Implementation"><span class="tocnumber">10</span> <span class="toctext">Reference Implementation</span></a></li>
<li class="toclevel-1 tocsection-31"><a href="#Limitations_and_known_issues"><span class="tocnumber">11</span> <span class="toctext">Limitations and known issues</span></a></li>
<li class="toclevel-1 tocsection-32"><a href="#Links"><span class="tocnumber">12</span> <span class="toctext">Links</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Optimizing device power consumption is inherently complex and can be overwhelming to application developers. For the CC3200, TI offers a ready-made, deployment agnostic and easy-to-use software component called Power Management Framework (PMF). The PMF offering is intended to assist  developers who are eagerly focused on the end-solution to take the system to production and deployment in a short amount of time. To facilitate the application developer's creation of a solution that is ready for end use, the PMF offers services in diverse aspects of the system. The following diagram captures the breadth of the feature scope of the PMF.
</p>
<div class="center"><div class="floatnone"><a href="File_CC3200_PMFW_Overview.html" class="image" title="CC3200_PMFW_Overview.jpg"><img alt="CC3200_PMFW_Overview.jpg" src="https://processors.wiki.ti.com/images/3/3a/CC3200_PMFW_Overview.jpg" width="642" height="400" /></a></div></div><p><br />
</p><p>The concept of moving the system to the lowest possible configured power state, and then restoring the context of the system without any intervention of the application(s) is the central idea behind PMF. 
</p><p>The subsequent sections provide information about CC3200 power states and the services and API provided by the PMF and its supporting modules.
</p>
<h2><span class="mw-headline" id="Device_PM_overview">Device PM overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=2" title="Edit section: Device PM overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The low power modes supported in the CC3200 subsystem are: Sleep, Deep Sleep, Low Power Deep Sleep (LPDS) and Hibernate (HIB).
</p><p>The diagram below captures the key considerations that a developer needs to take in choosing the power mode suitable for a given use case.
</p><p>The key points to note are:<br />1. Sleep:&#160;By default, the sleep clock to the peripherals are disabled. If the application chooses to enter sleep anytime and&#160;requires certain peripherals to be active (as a&#160;source of wakeup), the sleep clock to the peripheral has to be enabled. This is an APPs processor control.
</p><p>2. Deep Sleep: It is recommended&#160;to use Deep Sleep only when using networking services. Using peripherals in conjunction with Deep Sleep is not recommended. This is an APPs processor control.<br />
</p><p>3. Low Power Deep Sleep (LPDS): &#160;The CPU and peripheral context needs to be restored on exit from LPDS. Only 1 out of the 6 GPIOs can be used as a wake source from LPDS. This is an APPs processor control.<br />
</p><p>4. Hibernate (HIB): This is equivalent to a Power On Reset except for the fact that the SlowClockCOunter continues to tick and a minimal set of registers (two 32 bit registers) are retained across HIB cycles. This is a complete CC3200 subsystem control.
</p><p><br />&#160; <a href="File_Low_power_modes.html" class="image" title="CC3200 low power modes.jpg"><img alt="CC3200 low power modes.jpg" src="https://processors.wiki.ti.com/images/c/c2/Low_power_modes.jpg" width="809" height="600" /></a>
</p>
<h2><span class="mw-headline" id="Overview_-_PMF_Design">Overview - PMF Design</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=3" title="Edit section: Overview - PMF Design">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The objective of the power management framework is to provide an easy to use infrastructure for developers to create a power aware solution. The framework abstracts the inherently complex power management by providing simple services that can be invoked by application developers.
</p><p>The salient features of the PM framework are:
</p>
<ul><li>Ease of use through intuitive and handful API(s)</li>
<li>Under the application control selects the lowest power state</li>
<li>Restores the system context after wake-up</li>
<li>Clear separation of concerns across apps, peripheral drivers &amp; platform - Enables developers to focus on application and value addition</li></ul>
<div class="center"><div class="floatnone"><a href="File_CC3200_PMFramework_overview.html" class="image" title="CC3200 PMFramework overview.png"><img alt="CC3200 PMFramework overview.png" src="https://processors.wiki.ti.com/images/f/fe/CC3200_PMFramework_overview.png" width="288" height="336" /></a></div></div><p><br />
</p><h2><span class="mw-headline" id="Software_Interface">Software Interface</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=4" title="Edit section: Software Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The programming interface provided by the power management framework is as described in the diagram below.
</p><p>APIs can be divided into: Core APIs and User hook functions. Key points to note on the APIs are as follows:
</p><p>1. PM framework initialization APIs - Mandatory
</p><p>2. Device driver registration and control APIs - These APIs aid the peripheral power state transitions in sync with the system power state transitions.
</p><p>3. PM framework control: User applications have a choice of controlling the PM framework kicking in (enable/disable)&#160;to better control the execution flow. The APIs are reference counted.
</p><p>4. PM framework core execution API - The API has to be placed in the idle loop of the application. It attempts to enter the low power modes in the order HIB►LPDS►DeepSleep►Sleep. Before entry into HIB, LPDS or&#160;DeepSleep, the user callback function "can_try_pm_state" is invoked to get the approval to enter a particular state.
</p><p>5. User hook functions - A reference implementation of the user hook functions are provided along with the package (middleware\soc\cc_pm_ops). These APIs can be overridden by the applications as deemed fit. The key user hook function to be implemented&#160;are:
</p>
<ul><li>&#160;"can_try_pm_state"&#160;- approves the PM framework to enter a particular low power mode.</li>
<li>"back_up_soc_data" - saves any peripheral context before entering LPDS. Invokes the IO parking as desired (middleware\soc\cc_io_park).</li>
<li>"restore_soc_data" - restores any peripheral context saved. PinMuxConfig() API has to be reinvoked - to enable clocks to the peripherals.</li></ul>
<div class="center"><div class="floatnone"><a href="File_CC3200_PMF_SoftwareInterface.html" class="image" title="CC3200 PMF SoftwareInterface.jpg"><img alt="CC3200 PMF SoftwareInterface.jpg" src="https://processors.wiki.ti.com/images/4/43/CC3200_PMF_SoftwareInterface.jpg" width="600" height="722" /></a></div></div>
<h2><span class="mw-headline" id="Timer_framework">Timer framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=5" title="Edit section: Timer framework">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=6" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Timer framework provides a software timer infrastructure built on top of 2 of the hardware resources (Slow clock counter and GeneralPurposeTimer (GPT)) available in the CC3200 device.
</p><p><br />
</p>
<div class="center"><div class="floatnone"><a href="File_CC3200_timer_fmwk.html" class="image" title="CC3200 timer fmwk.jpg"><img alt="CC3200 timer fmwk.jpg" src="https://processors.wiki.ti.com/images/8/8d/CC3200_timer_fmwk.jpg" width="600" height="313" /></a></div></div>
<h3><span id="Real_Time_Clock_(RTC)_Infrastructure_:_Low_precision,_Aids_power_management"></span><span class="mw-headline" id="Real_Time_Clock_.28RTC.29_Infrastructure_:_Low_precision.2C_Aids_power_management">Real Time Clock (RTC) Infrastructure&#160;: Low precision, Aids power management</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=7" title="Edit section: Real Time Clock (RTC) Infrastructure : Low precision, Aids power management">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Clock tick at 32.768Khz.</li>
<li>Uses a countinuously ticking slow clock counter and configures the match values accordingly to realize multiple software timers.</li>
<li>Ticks across all low power modes (HIB, LPDS, DeepSleep, Sleep, Active).</li>
<li>Can be used for usecases that need to work with absolute time. This uses up 2 of the available user HIB registers that are saved across HIB cycles. If there is information that needs to be retained across HIB cycles by the application, the NVMEM (SFlash) can be used alternately.</li>
<li>Mandatory to be used in usecases that need to excercise low power modes.<br /></li></ul>
<h3><span class="mw-headline" id="Monotone_Clock_infrastructure_:_High_precision">Monotone Clock infrastructure&#160;: High precision</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=8" title="Edit section: Monotone Clock infrastructure : High precision">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Clock tick at 80 Mhz.</li>
<li>Uses a countinuously ticking GPT and configures the match values accordingly to realize multiple software timers.</li>
<li>Ticks only in Active and Sleep (by enabling the sleep clock) modes.</li>
<li>Cannot be used in conjunction with other low power modes (HIB, LPDS, DeepSleep) and hence is the applications resposibility to not enter any of these low power modes when the timer is running.</li></ul>
<h2><span class="mw-headline" id="Exercising_Low_Power_Modes">Exercising Low Power Modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=9" title="Edit section: Exercising Low Power Modes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The low power modes discussed in this section are HIBernate and LowPowerDeepSleep.
</p><p>Exercising low power modes involves
</p>
<ul><li><b>Backing up information</b></li></ul>
<p><u>HIB:</u> There are two 32 bit registers that are retained (These are not available if the RTC is enabled). The NVMEM (SFlash) can also be used.
</p><p><u>LPDS:</u> CPU and peripheral context need to be saved (in RAM). Also the desired amount of RAM needs to be retained.
</p>
<ul><li><b>Setting up the wake sources</b></li></ul>
<p><u>HIB:</u> The wake sources are: PRCM_HIB_SLOW_CLK_CTR,&#160;PRCM_HIB_GPIO2,&#160;PRCM_HIB_GPIO4,&#160;PRCM_HIB_GPIO11,&#160;PRCM_HIB_GPIO13,&#160;PRCM_HIB_GPIO17,&#160;PRCM_HIB_GPIO24
</p><p><u>LPDS</u>: The wake sources are: PRCM_HIB_SLOW_CLK_CTR, [PRCM_HIB_GPIO2 or&#160;PRCM_HIB_GPIO4 or&#160;PRCM_HIB_GPIO11 or&#160;PRCM_HIB_GPIO13 or PRCM_HIB_GPIO17 or&#160;PRCM_HIB_GPIO24] - any one GPIO at a time only, Network activity based wakeup
</p>
<ul><li><b>Entering the low power mode</b></li>
<li><b>Restoring the information on wakeup</b></li></ul>
<p><u>HIB: </u>The information can be read back from and restored. PRCMSysResetCauseGet API can be invoked to determine the wake cause.
</p><p><u>LPDS: </u>The CPU and peripheral context needs to be restored.
</p><p><br />
</p><p>The PM framework abstracts out the information mentioned above and is indirectly derived by the choices the user application. The same are described in the diagram and subsection below.
</p><p><br />
</p><p>
&#160;</p><div class="center"><div class="floatnone"><a href="File_CC3200_low_power_wakesources.html" class="image" title="CC3200 low power wakesources.jpg"><img alt="CC3200 low power wakesources.jpg" src="https://processors.wiki.ti.com/images/e/e9/CC3200_low_power_wakesources.jpg" width="611" height="423" /></a></div></div>
<h3><span class="mw-headline" id="Low_Power_Deep_Sleep">Low Power Deep Sleep</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=10" title="Edit section: Low Power Deep Sleep">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="GPIO_as_wake_source">GPIO as wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=11" title="Edit section: GPIO as wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Applications have to use the gpio_hal.c APIs for the&#160;usage of GPIOs. Notifications have to be enabled for the GPIO to be used as a wake source.
</p>
<pre>//
// setting up GPIO as a wk up source and configuring other related
// parameters
//
tGPIOHndl = cc_gpio_open(GPIO_SRC_WKUP, GPIO_DIR_INPUT);
cc_gpio_enable_notification(tGPIOHndl, GPIO_SRC_WKUP, INT_FALLING_EDGE, (GPIO_TYPE_NORMAL | GPIO_TYPE_WAKE_SOURCE));</pre>
<p>This selection by the application is used by the PM framework to configure the GPIO as a wake source anytime the system can enter LPDS. On wakeup from LPDS, the registered&#160;application callback is invoked.
</p>
<h4><span class="mw-headline" id="RTC_as_wake_source">RTC as wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=12" title="Edit section: RTC as wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Applications have to use the cc_timer.c, rtc_hal.c APIs for the usage of RTC as wake source.
</p><p>The PM framework internally manages the setting up of LPDS waketimer value before entering LPDS.
</p>
<pre>//
// setting up Timer as a wk up source
//
/* Setup the RTC initial value - This can be obtained from NTP too */
init_time.secs = 0;
init_time.nsec = 0;
cc_rtc_set(&amp;init_time);

/* Create a real time timer */
realtime_timer.source = HW_REALTIME_CLK;
realtime_timer.timeout_cb = timer_intr_hndlr;
realtime_timer.cb_param = NULL;

timer_hndl = cc_timer_create(&amp;realtime_timer);

/* Configure the timer for a periodic wakeup */
interval_time.secs = LPDS_DUR_SEC;
interval_time.nsec = LPDS_DUR_NSEC;
cc_timer_start(timer_hndl, &amp;interval_time, OPT_TIMER_PERIODIC); </pre>
<p>In the above sequence, after the timer is setup, the PM framework internally manages the entry into LPDS for (interval_time - WAKEUP_TIME_LPDS). Then the timer fires and the application can perform its desired action. This loop continues periodically.
</p>
<h4><span class="mw-headline" id="Network_activity_as_wake_source">Network activity as wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=13" title="Edit section: Network activity as wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Once the sl_start API is invoked by the application (and HostIRQ enabled), thereafter anytime the&#160;APPs processor enters LPDS, the wake on network activity is always enabled.&#160;
</p>
<h3><span class="mw-headline" id="Hibernate">Hibernate</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=14" title="Edit section: Hibernate">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="GPIO_as_wake_source_2">GPIO as wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=15" title="Edit section: GPIO as wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Applications have to use the gpio_hal.c APIs for the usage of GPIOs. Notifications have to be enabled for the GPIO to be used as a wake source.
</p>
<pre>// setting up GPIO as a wk up source and configuring other related parameters
tGPIOHndl = cc_gpio_open(GPIO_SRC_WKUP, GPIO_DIR_INPUT);
cc_gpio_enable_notification(tGPIOHndl, GPIO_SRC_WKUP, INT_FALLING_EDGE, (GPIO_TYPE_NORMAL | GPIO_TYPE_WAKE_SOURCE));
</pre>
<p>This selection by the application is used by the PM framework to configure the GPIO as a wake source anytime the system can enter HIB. On wakeup from HIB, the application execution resumes from the reset vector.
</p>
<h4><span class="mw-headline" id="RTC_as_wake_source_2">RTC as wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=16" title="Edit section: RTC as wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Applications have to use the cc_timer.c, rtc_hal.c APIs for the usage of RTC as wake source.
</p><p>The PM framework internally manages the setting up of HIB SlowClockMatch value before entering HIB.
</p><p><br />
</p>
<pre> //
// setting up Timer as a wk up source and other timer configurations
//
/* Setup the RTC initial value - This can be obtained from NTP too */'''
'''
sInitTime.secs = 0;
sInitTime.nsec = 0;
cc_rtc_set(&amp;sInitTime);

/* Create a real time timer */
sRealTimeTimer.source = HW_REALTIME_CLK;
sRealTimeTimer.timeout_cb = NULL;
sRealTimeTimer.cb_param = NULL;
tTimerHndl = cc_timer_create(&amp;sRealTimeTimer);

/* Configure the timer for a absolute wakeup */
sIntervalTimer.secs = HIB_DUR_SEC;
sIntervalTimer.nsec = HIB_DUR_NSEC;
cc_timer_start(tTimerHndl, &amp;sIntervalTimer, OPT_TIME_ABS_VALUE);</pre>
<p>In the above sequence, after the timer is setup, the PM framework internally manages the entry into HIB for (sIntervalTimer - WAKEUP_TIME_HIB). On wakeup from HIB, the application execution resumes from the reset vector.
</p>
<h2><span class="mw-headline" id="IO_Parking_while_entering_LPDS">IO Parking while entering LPDS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=17" title="Edit section: IO Parking while entering LPDS">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In order to save power (to avoid any leakage currents) when the system enters LPDS, it is recommended to park the IOs appropriately. The application is expected to specify the IO parking scheme. The various options available are:
</p>
<ul><li>DONT_CARE - No parking of the pin</li>
<li>NO_PULL_HIZ - No pulls, only HiZ the pin</li>
<li>WEAK_PULL_UP_STD - Weak pullup as well as HiZ</li>
<li>WEAK_PULL_DOWN_STD - Weak pulldown as well as HiZ</li>
<li>WEAK_PULL_UP_OD - Weak pullup, Opendrain as well as HiZ</li>
<li>WEAK_PULL_DOWN_OD - Weak pulldown, Opendrain as well as HiZ</li></ul>
<p>An example of IO parking scheme table&#160;is as below:
</p>
<pre>struct soc_io_park cc32xx_io_park[] = {
{PIN_01, "GPIO_10", WEAK_PULL_DOWN_STD},
{PIN_02, "GPIO_11", WEAK_PULL_DOWN_STD},
{PIN_03, "GPIO_12", WEAK_PULL_DOWN_STD},
{PIN_04, "GPIO_13", WEAK_PULL_DOWN_STD},
{PIN_05, "GPIO_14", WEAK_PULL_DOWN_STD},
{PIN_06, "GPIO_15", WEAK_PULL_DOWN_STD},
{PIN_07, "GPIO_16", WEAK_PULL_DOWN_STD},
{PIN_08, "GPIO_17", WEAK_PULL_DOWN_STD},
{PIN_15, "GPIO_22", WEAK_PULL_DOWN_STD},
{PIN_16, "GPIO_23/JTAG_TDI", WEAK_PULL_DOWN_STD},
{PIN_17, "GPIO_24/JTAG_TDO", WEAK_PULL_DOWN_STD},
{PIN_18, "GPIO_28", WEAK_PULL_DOWN_STD},
{PIN_19, "GPIO_28//JTAG_TCK", WEAK_PULL_DOWN_STD},
{PIN_20, "GPIO_29/JTAG_TMS", WEAK_PULL_DOWN_STD},
{PIN_21, "GPIO_25/SOP2", WEAK_PULL_DOWN_STD},
{PIN_45, "DCDC_FLASH_SW_P", WEAK_PULL_DOWN_STD},
{PIN_50, "GPIO_00", WEAK_PULL_DOWN_STD},
{PIN_53, "GPIO_30", WEAK_PULL_DOWN_STD},
{PIN_55, "GPIO_01", WEAK_PULL_DOWN_STD},
{PIN_57, "GPIO_02", WEAK_PULL_DOWN_STD},
{PIN_58, "GPIO_03", WEAK_PULL_DOWN_STD},
{PIN_59, "GPIO_04", WEAK_PULL_DOWN_STD},
{PIN_60, "GPIO_05", WEAK_PULL_DOWN_STD},
{PIN_61, "GPIO_06", WEAK_PULL_DOWN_STD},
{PIN_62, "GPIO_07", WEAK_PULL_DOWN_STD},
{PIN_63, "GPIO_08", WEAK_PULL_DOWN_STD},
{PIN_64, "GPIO_09", WEAK_PULL_DOWN_STD}
};</pre>
<h2><span class="mw-headline" id="Recommendations_for_use_of_PM_framework">Recommendations for use of PM framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=18" title="Edit section: Recommendations for use of PM framework">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Choice_of_low_power_mode">Choice of low power mode</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=19" title="Edit section: Choice of low power mode">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Some of the key considerations for the choice of the low power mode can be the following (These are generic suggestions only):
</p>
<ul><li>No activity duration</li></ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; No activity duration - Order of minutes - Choose HIB
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; No activity duration - Order of seconds - Choose LPDS<br />&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; No activity duration - Order of milliseconds - Choose Deepsleep/Sleep<br />
</p>
<ul><li>Acceptable lead time on wakeup</li></ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; HIB - The application is reloaded from the SFLASH. Connection to the AP needs to be re-established. All desired actions must be performed again.
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; LPDS - On using the PM framework, the CPU context is restored. Reinitialization of peripherals is required. The connection to the AP is retained.
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Sleep - Fastest response time with maximum power penalty.
</p>
<ul><li>Retention of context</li></ul>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; HIB - All context lost. All desired actions must be performed again. NVMEM or the two 32 bit registers can be used to store information across HIB cycles.
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; LPDS - Using the power management framework the CPU and registered peripheral context can be retained. All peripheral context need to be restored on exit from LPDS. Desired&#160;&#160;&#160;&#160;&#160;
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; amount of RAM can be retained (in multiples of 64 KB).
</p>
<h3><span class="mw-headline" id="Choice_of_wake_source">Choice of wake source</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=20" title="Edit section: Choice of wake source">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The choice of wake source is dependent on the application usecase. Summarizing the wake sources below:
</p><p>1. Sleep - Any interrupt
</p><p>2. Deepsleep - Any interrupt
</p><p>3. LowPowerDeepSleep - Waketimer (specific counter that ticks only during LPDS), Any 1 GPIO (2,4,11,13,17,24), Network activity based wakeup - HostIRQ (This is in response to an API issued by the application before entering LPDS (for ex., sl_recv()))
</p><p>4. HIBernate - SlowClockCounter (match value is set, the slow clock counter once started in PRCMCC3200MCUInit, continues to tick), Any combination of GPIOs (2,4,11,13,17,24)
</p><p><br />
</p><p>Note: In case of HIBernate, the source of the wakeup cannot be determined.
</p>
<h3><span id="Working_with_time_of_day_(real_time)"></span><span class="mw-headline" id="Working_with_time_of_day_.28real_time.29">Working with time of day (real time)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=21" title="Edit section: Working with time of day (real time)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The time of day information can be obtained using NTP. This information can be passed to the timer framework and then can be used as the basis of having timed events based on time of day. Many usecases can be realized using this feature (alarms...).
</p><p>Working with time of day requires setting up of the initial RTC time. Thereafter, the framework maintains the synchronization between the Real time and the free running SlowClockCounter.
</p><p>The code could be like below:
</p>
<pre>//
// setting up Timer as a wk up source
//
/* Setup the RTC initial value obtained from NTP */
init_time.secs = NTP_TIME_SECS;
init_time.nsec = NTP_TIME_NSECS;
cc_rtc_set(&amp;init_time);

/* Create a real time timer */
realtime_timer.source = HW_REALTIME_CLK;
realtime_timer.timeout_cb = timer_intr_hndlr;
realtime_timer.cb_param = NULL;
timer_hndl = cc_timer_create(&amp;realtime_timer);

/* Configure the timer for a periodic wakeup */
interval_time.secs = WAKEUP_SEC_TIMEOFDAY;
interval_time.nsec = WAKEUP_NSEC_TIMEOFDAY;
cc_timer_start(timer_hndl, &amp;interval_time, OPT_TIMER_PERIODIC);
</pre>
<p>There precision of the timer is only in the order of milliseconds. The input of nanoseconds is retained to be able to pass the values obtained over NTP to the API directly.
</p><p>Note:
</p>
<ul><li>The two 32bit HIB registers are used to maintain the mapping of initial timeofday with the slow clock counter ticks and hence are not available for application use.</li>
<li>The APIs donot take care of the timezone correction (to be applied to the GMT time obtained over NTP). The timezone correction is expected to be handled by the application before initializing the RTC.</li></ul>
<h3><span class="mw-headline" id="Disabling_PM_framework">Disabling PM framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=22" title="Edit section: Disabling PM framework">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The APIs to control the enabling and disabling of PM framework are: cc_app_resume_pm and cc_app_putoff_pm. These APIs are reference counted and the resumption of PM framework happens accordingly.
</p><p>The intervention from the PM framework can be controlled by using these APIs. An example is as below:
</p>
<pre>SELECT_LPDS_LOW_POWER_MODE();

while(FOREVER){
	/* Resume the PM framwork operations before entering the Idle wait in the application */
        cc_app_resume_pm();
        /*&#160;Enter the Wait for registered event (for ex., sl_recv) */
        WAIT_HERE();  /* --------- Application will enter LPDS here on executing IDLE loop ----*/
        /* Put off the PM framework the process the event */
        cc_app_putoff_pm();

        /* --------- Application will remain ACTIVE here ----*/
        ..... /* Processing */
}
</pre>
<h3><span id="Extending/Customizing_PM_framework"></span><span class="mw-headline" id="Extending.2FCustomizing_PM_framework">Extending/Customizing PM framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=23" title="Edit section: Extending/Customizing PM framework">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>A reference implementation of the user hook functions have been provided in the file cc3200-sdk\middleware\soc\cc_pm_ops.c. While this may suffice for most of the implementations, the applications can choose to override this implementation by hooking an alternate function.
</p><p>The default user hook registration function will be as below:
</p>
<pre>lp3p0_pm_ops-&gt;set_up_wkup_srcs = cc_set_up_wkup_srcs;
lp3p0_pm_ops-&gt;handle_S3_wakeup = cc_handle_S3_wakeup;
lp3p0_pm_ops-&gt;are_irqs_pending = cc_are_irqs_pending;
lp3p0_pm_ops-&gt;can_try_pm_state = lp3p0_can_try_pm_state;
lp3p0_pm_ops-&gt;enter_S4 = cc_enter_S4;
lp3p0_pm_ops-&gt;enter_S3 = cc_enter_S3;
lp3p0_pm_ops-&gt;enter_S2 = cc_enter_S2;
lp3p0_pm_ops-&gt;enter_S1 = cc_enter_S1;
lp3p0_pm_ops-&gt;back_up_soc_data = lp3p0_back_up_soc_data;
lp3p0_pm_ops-&gt;restore_soc_data = lp3p0_restore_soc_data;
lp3p0_pm_ops-&gt;dsbl_sys_irq = osi_EnterCritical;
lp3p0_pm_ops-&gt;enbl_sys_irq = osi_ExitCritical;</pre>
<p>The application is expected to implement the following functions consciously:
</p>
<ul><li>can_try_pm_state - approval of the entry into low power state</li>
<li>back_up_soc_data - save any information (peripheral)&#160;if required before entering LPDS</li>
<li>restore_soc_data -&#160;restore peripheral&#160;context (or reinitialize peripherals) on exiting&#160;LPDS</li></ul>
<p>&#160;
</p>
<h2><span class="mw-headline" id="PM_framework_details">PM framework details</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=24" title="Edit section: PM framework details">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="LPDS_entry-exit_sequence">LPDS entry-exit sequence</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=25" title="Edit section: LPDS entry-exit sequence">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div class="center"><div class="floatnone"><a href="File_CC3200_LPDS_entryexit.html" class="image" title="CC3200 LPDS entryexit.jpg"><img alt="CC3200 LPDS entryexit.jpg" src="https://processors.wiki.ti.com/images/4/4c/CC3200_LPDS_entryexit.jpg" width="600" height="716" /></a></div></div>
<h3><span class="mw-headline" id="Folder_structure_and_API_listing">Folder structure and API listing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=26" title="Edit section: Folder structure and API listing">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Folder_structure">Folder structure</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=27" title="Edit section: Folder structure">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The folder structure of the middleware component is as below:
</p><p>+middleware
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; +ccs --- CCS project files
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+ewarm --- IAR project files
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; +driver --- driver implementation (synchronouns drivers are spi_drv and uart_drv)
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +hal --- Hardware abstraction layer for the peripherals&#160;
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; +framework
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;+pm --- Power management framework
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; +timer --- Timer framework
</p><p>&#160;&#160;&#160;&#160;&#160;&#160;&#160; +soc --- Reference implementation of the PM framework user hook functions
</p>
<h4><span class="mw-headline" id="Core_PM_framework_APIs">Core PM framework APIs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=28" title="Edit section: Core PM framework APIs">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<table style="width: 813px; height: 227px" border="1" cellspacing="1" cellpadding="1" width="813">

<tbody><tr>
<th scope="col">API
</th>
<th scope="col">Description
</th></tr>
<tr>
<td>cc_pm_framework_init
</td>
<td>Initialize the power management framework
</td></tr>
<tr>
<td>cc_pm_platform_ops_register
</td>
<td>Register the user hook functions with the PM framework
</td></tr>
<tr>
<td>cc_modules_load
</td>
<td>Load the registered modules
</td></tr>
<tr>
<td>cc_module_drv_register
</td>
<td>Register a new module driver with the PM framework
</td></tr>
<tr>
<td>cc_module_drv_unregister
</td>
<td>UnRegister a&#160;module driver&#160;from the PM framework
</td></tr>
<tr>
<td>cc_module_clk_enable
</td>
<td>TBD
</td></tr>
<tr>
<td>cc_module_clk_disable
</td>
<td>TBD
</td></tr>
<tr>
<td>cc_app_putoff_pm
</td>
<td>Put off the PM framework
</td></tr>
<tr>
<td>cc_app_resume_pm
</td>
<td>Resume the PM fra
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Platform_Service_APIs">Platform Service APIs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=29" title="Edit section: Platform Service APIs">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<table style="width: 813px; height: 255px" border="1" cellspacing="1" cellpadding="1" width="813">

<tbody><tr>
<th scope="col">API
</th>
<th scope="col">Description
</th></tr>
<tr>
<td>cc_set_up_wkup_srcs
</td>
<td>Sets up wake-up sources for indicated power mode
</td></tr>
<tr>
<td>cc_handle_S3_wakeup
</td>
<td>Process events that have woken up system from S3 (LPDS) by triggering a software interrupt
</td></tr>
<tr>
<td>cc_are_irqs_pending
</td>
<td>Check if any interrupts are pending in the system
</td></tr>
<tr>
<td>cc_enter_S4
</td>
<td>Enter HIBernate
</td></tr>
<tr>
<td>cc_enter_S3
</td>
<td>Enter LPDS
</td></tr>
<tr>
<td>cc_enter_S2
</td>
<td>Enter DeepSleep
</td></tr>
<tr>
<td>cc_enter_S1
</td>
<td>Enter Sleep
</td></tr>
<tr>
<td>cc_back_up_soc_data
</td>
<td>Enables the SRAM retention, Saves the NVIC registers
</td></tr>
<tr>
<td>cc_restore_soc_data
</td>
<td>Restores the NVIC registers, Acquires the I2C and GPIO semaphore
</td></tr>
<tr>
<td>wake_interrupt_handler
</td>
<td>Handles the Power and Reset Control Module (PRCM) wake events
</td></tr></tbody></table>
<h2><span class="mw-headline" id="Reference_Implementation">Reference Implementation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=30" title="Edit section: Reference Implementation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Reference implementations using the power management framework is available in the SDK package. The example apps are the following:
</p><p>1. Idle profile:
</p><p>The CC3200 device is connected to an AP and is continuously waiting for a packet over the air (UDP Rx) to wakeup. For all the times when the application is idling, it enters LPDS. In order to showcase all wake sources, GPIO13 and timer based wakeup from LPDS is also supported. Please refer to the link for more details: <a href="CC3200_Idle_Profile_Application.html" class="mw-redirect" title="CC32xx Idle Profile Application">CC32xx Idle Profile Application</a>
</p><p>2. Sensor profile:
</p><p>The CC3200 device periodically wakes up from HIBernate, broadcasts a message and then enters HIBernate. The application also allows for wakeup from HIBernate based on GPIO13. Please refer to the link for more details: <a href="CC3200_Sensor_Profile_Application.html" class="mw-redirect" title="CC32xx Sensor Profile Application">CC32xx Sensor Profile Application</a>
</p>
<h2><span class="mw-headline" id="Limitations_and_known_issues">Limitations and known issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=31" title="Edit section: Limitations and known issues">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>This is a feature complete version of the PM framework. System tests have been performed successfully. The production version of the framework would be released after system test cycles on ES 1.33 device.</li>
<li>ARM CM-4 Clock gating (WFI/WFE instructions) cannot be invoked if Low power deep sleep is invoked in the user application. Above restriction would be relaxed with production devices.</li>
<li>Usage of Deepsleep while using peripherals other than GPIO is not recommended due to the variation in clock frequency during the transition to the power state.</li>
<li>The drivers have not been tested for all possible input configurations.</li>
<li>Power Management framework would not work with ES 1.21 devices.</li></ol>
<h2><span class="mw-headline" id="Links">Links</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit&amp;section=32" title="Edit section: Links">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>{{#invoke: Navbox | navbox }}
</p>
<!-- 
NewPP limit report
Cached time: 20201130215921
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.100 seconds
Real time usage: 0.109 seconds
Preprocessor visited node count: 262/1000000
Preprocessor generated node count: 8569/1000000
Post‐expand include size: 363/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 4/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 4704/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%   20.192      1 -total
 77.71%   15.692      1 Template:CC31xx_&amp;_CC32xx_Map
 59.96%   12.108      1 Template:Navbox_with_collapsible_groups
 19.22%    3.880      1 Template:Navbox
 13.70%    2.766      1 Template:Return_to_CC31xx_&amp;_CC32xx_Home_Page
  6.41%    1.294      1 Template:Clr
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:34687-0!canonical and timestamp 20201130215921 and revision id 227434
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>CC3200 Power Management Framework</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>CC3200 Power Management Framework</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>CC3200 Power Management Framework</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;oldid=227434">https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;oldid=227434</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="https://processors.wiki.ti.com/index.php?title=Category:Pages_with_script_errors&amp;action=edit&amp;redlink=1" class="new" title="Category:Pages with script errors (page does not exist)">Pages with script errors</a></li><li><a href="https://processors.wiki.ti.com/index.php?title=Category:Templates&amp;action=edit&amp;redlink=1" class="new" title="Category:Templates (page does not exist)">Templates</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=CC3200+Power+Management+Framework" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="CC3200_Power_Management_Framework.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:CC3200_Power_Management_Framework&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="CC3200_Power_Management_Framework.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/CC3200_Power_Management_Framework.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/CC3200_Power_Management_Framework.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;oldid=227434" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=CC3200_Power_Management_Framework&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 9 May 2017, at 15:17.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.100","walltime":"0.109","ppvisitednodes":{"value":262,"limit":1000000},"ppgeneratednodes":{"value":8569,"limit":1000000},"postexpandincludesize":{"value":363,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":4,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":4704,"limit":5000000},"timingprofile":["100.00%   20.192      1 -total"," 77.71%   15.692      1 Template:CC31xx_\u0026amp;_CC32xx_Map"," 59.96%   12.108      1 Template:Navbox_with_collapsible_groups"," 19.22%    3.880      1 Template:Navbox"," 13.70%    2.766      1 Template:Return_to_CC31xx_\u0026amp;_CC32xx_Home_Page","  6.41%    1.294      1 Template:Clr"]},"cachereport":{"timestamp":"20201130215921","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":264});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/CC3200_Power_Management_Framework by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:09:57 GMT -->
</html>
