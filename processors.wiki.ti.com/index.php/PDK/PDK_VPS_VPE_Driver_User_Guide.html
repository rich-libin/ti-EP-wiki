<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/PDK/PDK_VPS_VPE_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 08:06:05 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>PDK/PDK VPS VPE Driver User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"PDK/PDK_VPS_VPE_Driver_User_Guide","wgTitle":"PDK/PDK VPS VPE Driver User Guide","wgCurRevisionId":229117,"wgRevisionId":229117,"wgArticleId":45037,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Software \u0026 Tools"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"PDK/PDK_VPS_VPE_Driver_User_Guide","wgRelevantArticleId":45037,"wgRequestId":"040389f65cc003dc7a74f58e","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-PDK_PDK_VPS_VPE_Driver_User_Guide rootpage-PDK skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">PDK/PDK VPS VPE Driver User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Memory_to_Memory_Drivers"><span class="tocnumber">1</span> <span class="toctext"><b>Memory to Memory Drivers</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Introduction"><span class="tocnumber">1.1</span> <span class="toctext"><b>Introduction</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#VPE_Memory_to_Memory_Driver"><span class="tocnumber">2</span> <span class="toctext"><b>VPE Memory to Memory Driver</b></span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Introduction_2"><span class="tocnumber">2.1</span> <span class="toctext"><b>Introduction</b></span></a>
<ul>
<li class="toclevel-3 tocsection-5"><a href="#Features_Supported"><span class="tocnumber">2.1.1</span> <span class="toctext"><b>Features Supported</b></span></a></li>
<li class="toclevel-3 tocsection-6"><a href="#Hardware_Overview"><span class="tocnumber">2.1.2</span> <span class="toctext"><b>Hardware Overview</b></span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Overview"><span class="tocnumber">2.1.3</span> <span class="toctext"><b>Overview</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Software_Application_Interfaces"><span class="tocnumber">2.2</span> <span class="toctext"><b>Software Application Interfaces</b></span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#System_Init_Phase"><span class="tocnumber">2.3</span> <span class="toctext"><b>System Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#VPS_Init"><span class="tocnumber">2.3.1</span> <span class="toctext"><b>VPS Init</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-11"><a href="#Create_Phase"><span class="tocnumber">2.4</span> <span class="toctext"><b>Create Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#FVID2_Create"><span class="tocnumber">2.4.1</span> <span class="toctext"><b>FVID2 Create</b></span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#FVID2_Control_-_Set_VPE_Parameters"><span class="tocnumber">2.4.2</span> <span class="toctext"><b>FVID2 Control - Set VPE Parameters</b></span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#FVID2_Control_-_Set_Scalar_Coefficient"><span class="tocnumber">2.4.3</span> <span class="toctext"><b>FVID2 Control - Set Scalar Coefficient</b></span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#FVID2_Control_-_Get_DEI_Context_Information"><span class="tocnumber">2.4.4</span> <span class="toctext"><b>FVID2 Control - Get DEI Context Information</b></span></a></li>
<li class="toclevel-3 tocsection-16"><a href="#FVID2_Control_-_Set_DEI_Context_Buffers"><span class="tocnumber">2.4.5</span> <span class="toctext"><b>FVID2 Control - Set DEI Context Buffers</b></span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#FVID2_Control_-_Get_DEI_Context_Buffers"><span class="tocnumber">2.4.6</span> <span class="toctext"><b>FVID2 Control - Get DEI Context Buffers</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="#Run_Phase"><span class="tocnumber">2.5</span> <span class="toctext"><b>Run Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Start"><span class="tocnumber">2.5.1</span> <span class="toctext"><b>Start</b></span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Stop"><span class="tocnumber">2.5.2</span> <span class="toctext"><b>Stop</b></span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Queue_De-queue"><span class="tocnumber">2.5.3</span> <span class="toctext"><b>Queue De-queue</b></span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#FVID2_Process_Frames"><span class="tocnumber">2.5.4</span> <span class="toctext"><b>FVID2 Process Frames</b></span></a></li>
<li class="toclevel-3 tocsection-23"><a href="#FVID2_Get_Processed_Frames"><span class="tocnumber">2.5.5</span> <span class="toctext"><b>FVID2 Get Processed Frames</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-24"><a href="#Delete_Phase"><span class="tocnumber">2.6</span> <span class="toctext"><b>Delete Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-25"><a href="#FVID2_Delete"><span class="tocnumber">2.6.1</span> <span class="toctext"><b>FVID2 Delete</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-26"><a href="#System_De-Init_Phase"><span class="tocnumber">2.7</span> <span class="toctext"><b>System De-Init Phase</b></span></a>
<ul>
<li class="toclevel-3 tocsection-27"><a href="#FVID2_de-Init"><span class="tocnumber">2.7.1</span> <span class="toctext"><b>FVID2 de-Init</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-28"><a href="#Sample_Application"><span class="tocnumber">2.8</span> <span class="toctext"><b>Sample Application</b></span></a>
<ul>
<li class="toclevel-3 tocsection-29"><a href="#VPE_DEI.2FScale"><span class="tocnumber">2.8.1</span> <span class="toctext"><b>VPE DEI/Scale</b></span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Memory_to_Memory_Drivers"><b>Memory to Memory Drivers</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Memory to Memory Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=2" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Memory to Memory drivers takes the video buffer from the memory, optionally process the buffer, processing done on the buffer depends on the specific memory to memory driver and puts it back to memory. Memory to memory driver follows the FVID2 interface for the applications.
</p><p>Following are the general feature set for the memory to memory drivers: 
</p>
<ul><li>All the memory to memory driver supports multiple handle. This means the driver can be opened multiple times.</li>
<li>All the memory drivers supports multiple channels request submission per handle. Multiple channels means the video stream coming from multiple streams like frames coming from decoder over network, multiple capture streams each having same/different frame parameters like height, width etc.</li>
<li>Memory driver supports parameter configuration for the buffer processing per channel of the handle. There can be individual set of parameters for each channel of the handle like height, width, data format etc or else application can have the same parameters for all the channels of the handle.</li>
<li>Application can submit multiple channels for processing in a single request call.</li>
<li>Fvid2_processFrames (queue) and Fvid2_getProcessFrames (de-queue) FVID2 calls for all the memory to memory drivers are non blocking. While the control commands like programming of the scalar coefficients are blocking.</li>
<li>All memory to memory driver calls the application call back function on completion of the request. Application should de-queue the request after the callback.</li></ul>
<h1><span class="mw-headline" id="VPE_Memory_to_Memory_Driver"><b>VPE Memory to Memory Driver</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=3" title="Edit section: VPE Memory to Memory Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=4" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This chapter describes the hardware overview, application software
interfaces, typical application flow and sample application usage for
VPE memory to memory driver.
</p><p>The features and limitations of current driver implementation are listed
in subsequent sections.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>The features supported or NOT supported in any release of the driver may
vary from one PDK driver release to another.
See respective release notes for exact release specific details.
</p>
</div>
<h3><span class="mw-headline" id="Features_Supported"><b>Features Supported</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=5" title="Edit section: Features Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<table border="1">
<tbody><tr>
<th><b>Features</b>
</th>
<th><b>Supported in TDA2SEDx</b>
</th>
<th><b>Supported in TI814x</b>
</th></tr>
<tr>
<td><b>Instances</b>
</td>
<td><br />
</td></tr>
<tr>
<td>VPS_M2M_INST_VPE1 single scale path
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td><b>Input Formats</b>
</td>
<td><br />
</td></tr>
<tr>
<td>YUV422 Interleaved
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>YUV420 Semi-Planar
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>YUV422 Semi-Planar
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>YUV422 Semi-Planar Tiled
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td>YUV420 Semi-Planar Tiled
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td><b>Output Formats</b>
</td>
<td><br />
</td></tr>
<tr>
<td>YUV422 Interleaved
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>YUV420 Semi-Planar
</td>
<td>YES
</td>
<td>NO/NA
</td></tr>
<tr>
<td>YUV422 Semi-Planar
</td>
<td>YES
</td>
<td>NO/NA
</td></tr>
<tr>
<td>YUV420 Semi-Planar Tiled
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td>YUV422 Semi-Planar Tiled
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td>RGB888
</td>
<td>YES
</td>
<td>NO/NA
</td></tr>
<tr>
<td>YUV444
</td>
<td>YES
</td>
<td>NO/NA
</td></tr>
<tr>
<td><b>DEI Features</b>
</td>
<td><br />
</td></tr>
<tr>
<td>DEI in deinterlacing mode
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>DEI in progressive bypass mode
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Line averaging and field averaging mode of DEI operation
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td><b>SC Features</b>
</td>
<td><br />
</td></tr>
<tr>
<td>Optional scaling using SC1
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Scaling from 1/8x to 2048 maximum pixels in horizontal direction
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Different types of scalar like poly phase and running average
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Horizontal and vertical cropping of the image before scaling
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Lazy loading of coefficient
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>User programmable scalar coefficients
</td>
<td>NO
</td>
<td>NO
</td></tr>
<tr>
<td><b>Other Features</b>
</td>
<td><br />
</td></tr>
<tr>
<td>Frame drop feature to enable load balancing
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td>Multi-channel (up to <code>VPS_M2M_MAX_CH_PER_INST</code> channels per instance)
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Multi-handle (up to <code>VPS_M2M_MAX_CH_PER_HANDLE</code> channels per instance)
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Error callbacks
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Slice based scaling when DEI is in progressive bypass mode
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr>
<tr>
<td>Slice based scaling when DEI is in deinterlacing mode
</td>
<td>NO
</td>
<td>NO
</td></tr>
<tr>
<td>Interlaced bypass mode
</td>
<td>NO
</td>
<td>NO
</td></tr>
<tr>
<td><b>Runtime Configurations</b>
</td>
<td><br />
</td></tr>
<tr>
<td>Input resolution change when DEI is in progressive bypass mode
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Input resolution change when DEI is in deinterlacing mode
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>Output resolution change
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>SC crop and config change on SC1
</td>
<td>YES
</td>
<td>YES
</td></tr>
<tr>
<td>DEI reset
</td>
<td>NOT TESTED
</td>
<td>NOT TESTED
</td></tr></tbody></table>
<h3><span class="mw-headline" id="Hardware_Overview"><b>Hardware Overview</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=6" title="Edit section: Hardware Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Below figures show the complete VPE Hardware.
</p><p><b>VPE Driver Path</b>
As shown in below figures, the VPE memory to memory driver takes in YUYV422/YUV420 interlaced/progressive input via the
DEI path and provide single scaled output of the deinterlaced/bypassed output
</p>
<div class="center"><div class="floatnone"><a href="../File_VPE1_HW_BlockDiagram.html" class="image" title="VPE Hardware Block Diagram"><img alt="VPE Hardware Block Diagram" src="https://processors.wiki.ti.com/images/8/86/VPE1_HW_BlockDiagram.jpeg" width="800" height="810" /></a></div></div>
<h3><span class="mw-headline" id="Overview"><b>Overview</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=7" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>De-interlacing operation of a field requires two previous fields.
This requirement is abstracted by the driver, the drivers holds back required input fields as context fields.
The following expand on the behavior of the driver.
</p>
<dl><dd><dl><dd><ul><li>Considering a single channel operation for <code>VPS_M2M_INST_VPE1</code>,</li></ul></dd></dl></dd></dl>
<p>following steps describe the operations performed on Fvid2_ProcessList.inFrameList referred as inFrameList
</p>
<dl><dd><dl><dd><ul><li>First <code>Fvid2_processFrames()</code> assuming F1 was submitted to be de-interlaced, on completion of this API,</li></ul></dd></dl></dd></dl>
<p><code>Fvid2_getProcessedFrames()</code> could be called to retrieve the output frame and input field.
However the input field would be held back by the driver (F1 in this case). i.e. the <code>numFrames</code> of
inFrameList is set 0x1 and inFrameList-&gt;frames[0x0] = NULL.
The output frame would be available, i.e. the <code>numFrames</code> of outFrameList is set to 0x01 and
outFrameList-&gt;frames[0x0] will point to a valid frame.
The applications are expected to check for valid frames, before performing further operations on the frame.
</p>
<dl><dd><dl><dd><dl><dd>inFrameList.numFrame = 0x01</dd>
<dd>inFrameList.frames[0x0] = NULL</dd>
<dd>outFrameList.numFrames = 0x01</dd>
<dd>outFrameList.frames[0x0] = valid frame</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><ul><li>On second <code>Fvid2_processFrames()</code> assuming F2 was submitted to be de-interlaced, the above step is repeated for field F2.</li></ul></dd></dl></dd></dl>
<p>i.e. F2 is also held back the driver
</p>
<dl><dd><dl><dd><ul><li>On third <code>Fvid2_processFrames()</code> assuming F3 was submitted to be de-interlaced, the above step is repeated for field F3.</li></ul></dd></dl></dd></dl>
<p>i.e. F3 is also held back the driver
</p>
<dl><dd><dl><dd><ul><li>On fourth <code>Fvid2_processFrames()</code> assuming F4 was submitted to be de-interlaced, on completion of this API,</li></ul></dd></dl></dd></dl>
<p><code>Fvid2_getProcessedFrames()</code> could be called to retrieve the output frame and input field.
The first input field and fourth output frame is given back. i.e.
</p>
<dl><dd><dl><dd><dl><dd>inFrameList.numFrame = 0x01</dd>
<dd>inFrameList.frames[0x0] = F1</dd>
<dd>outFrameList.numFrames = 0x01</dd>
<dd>outFrameList.frames[0x0] = valid frame</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><ul><li>On fifth <code>Fvid2_processFrames()</code> assuming F5 was submitted to be de-interlaced,</li></ul></dd></dl></dd></dl>
<p>the above step is performed with following output
</p>
<dl><dd><dl><dd><dl><dd>inFrameList.numFrame = 0x01</dd>
<dd>inFrameList.frames[0x0] = F2</dd>
<dd>outFrameList.numFrames = 0x01</dd>
<dd>outFrameList.frames[0x0] = valid frame</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><ul><li>The driver would hold back previous N-1 and N-2 input fields as context buffers. This buffer could be retrieved using Fivd2_stop API.</li></ul></dd></dl></dd></dl>
<dl><dd><dl><dd><ul><li>Multiple channel - The same procedures described for single channel applies.</li></ul></dd></dl></dd></dl>
<p>The <code>numFrames</code> of inFrameList and outFramesList defines the number of frames/fields that application
should look for in the frames array.
</p>
<dl><dd><dl><dd><dl><dd>inFrameList.numFrame = 0x04</dd>
<dd>inFrameList.frames[0x0] = CH1F1</dd>
<dd>inFrameList.frames[0x1] = CH2F1</dd>
<dd><b>inFrameList.frames[0x2] = NULL</b></dd>
<dd>inFrameList.frames[0x3] = CH3F1</dd></dl></dd></dl></dd></dl>
<dl><dd><dl><dd><dl><dd>outFrameList.numFrames = 0x04</dd>
<dd>outFrameList.frames[0x0] = valid frame</dd>
<dd>outFrameList.frames[0x1] = valid frame</dd>
<dd>outFrameList.frames[0x2] = valid frame</dd>
<dd>outFrameList.frames[0x3] = valid frame</dd></dl></dd></dl></dd></dl>
<p>Note that, in above example the driver has held back input field of channel 3,
while releasing input fields of other channels. This would mean that channel 3 did not have enough context buffers.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>Applications should take into account that any input field could be held back by the driver,
an NULL check on field should be performed before using it.
</p>
</div>
<p><br />
</p>
<h2><span class="mw-headline" id="Software_Application_Interfaces"><b>Software Application Interfaces</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=8" title="Edit section: Software Application Interfaces">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The driver operation can be partitioned into the below phases:
</p>
<ul><li>System Init Phase: Here the driver sub-system is initialized</li>
<li>Create Phase: Here the driver handle is created or instantiated</li>
<li>Run Phase: Here driver is used to submit the frames for processing and getting the processed frames from the driver.</li>
<li>Delete Phase: Here the driver handle or instance is deallocated</li>
<li>System De-init Phase: Here the driver sub-system is de-initialized</li></ul>
<p>The subsequent sections describe each phase in detail.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(74, 67, 68);"><b>Note</b><br />
<p>Details of the structure, enumerations and #defines mentioned in the section can be found in PDK API Guide
</p>
</div>
<p><br />
</p>
<h2><span class="mw-headline" id="System_Init_Phase"><b>System Init Phase</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=9" title="Edit section: System Init Phase">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>VPE M2M driver initialization happens as part of overall VPS system init.
This API must be the the first API call before making any other FVID2 calls.
Below section lists the APIs which are part of the System Init phase.
</p>
<h4><span class="mw-headline" id="VPS_Init"><b>VPS Init</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=10" title="Edit section: VPS Init">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>Int32 Fvid2_init(Ptr args);
</pre>
<p><b>args</b> - <code>NULL</code> currently not used.
</p>
<pre>Int32 Vps_init(const Vps_InitParams *initPrms);
</pre>
<p><b>initPrms</b> - <code>Vps_InitParams *</code> VPS Initialization parameters.
</p>
<pre>    /* Init FVID2 */
    retVal = Fvid2_init(NULL);
    if (FVID2_SOK&#160;!= retVal)
    {
        System_printf("FVID2 Init failed\n");
    }

    /* Init VPS */
    VpsInitParams_init(&amp;vpsInitPrms);
    retVal = Vps_init(&amp;vpsInitPrms);
    if (FVID2_SOK&#160;!= retVal)
    {
        System_printf("VPS Init failed\n");
    }
</pre>
<h2><span class="mw-headline" id="Create_Phase"><b>Create Phase</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=11" title="Edit section: Create Phase">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In this phase user application opens or creates a driver instance.
Each instance of the driver supports VPS_M2M_MAX_CH_PER_INST (defined in vps_m2m.h) handles creation.
Operation commands from the different handles of the same instance will be serialized by the driver
and will be served by the singe instance of the hardware.
Below sections lists the API interfaces to be used in the create phase.
Create phase allows the application to do the configuration either through control commands
exposed by driver or through the parameters passed with the driver create API.
</p>
<h4><span class="mw-headline" id="FVID2_Create"><b>FVID2 Create</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=12" title="Edit section: FVID2 Create">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This API is used to open the driver. This is a blocking call and it
returns the handle which is to be used in subsequent call to this driver.
</p>
<pre>Fvid2_Handle Fvid2_create(UInt32 drvId,
                          UInt32 instanceId,
                          Ptr createArgs,
                          Ptr createStatusArgs,
                          const Fvid2_CbParams *cbParams);
</pre>
<p><b>drvId</b> - <code>FVID2_VPS_M2M_DRV</code>
to open the driver.
</p><p><b>instanceId</b> -
<code>VPS_M2M_INST_VPE1</code> macro to open VPE1 memory driver.
</p><p><b>createArgs</b> - Pointer to
<code>Vps_M2mCreateParams</code> structure containing valid create
params. This parameter should not be NULL.
</p><p><b>createStatusArgs</b> - Pointer to
<code>Vps_M2mCreateStatus</code> structure containing the return value
of create function and other driver information.
This parameter should not be NULL.
</p><p><b>cbParams</b> - Pointer to <code>Fvid2_CbParams</code>
structure containing FVID2 callback parameters.
This parameter should not be NULL.
</p>
<pre>

    Fvid2_Handle            fvidHandle;
    Fvid2_CbParams          cbParams;
    Vps_M2mVpeChParams      chPrms;
    Vps_M2mCreateParams     createPrms;
    Vps_M2mCreateStatus     createStatus;

    /* Init create params */
    VpsM2mCreateParams_init(&amp;createPrms);
    createPrms.numCh           = 1;
    createPrms.chInQueueLength = VPS_M2M_DEF_QUEUE_LEN_PER_CH;
    createPrms.isDeiFmdEnable  = FALSE;

    /* Init callback parameters */
    Fvid2CbParams_init(&amp;cbPrms);
    cbPrms.cbFxn     = &amp;App_m2mVpeAppCbFxn;
    cbPrms.errCbFxn  = &amp;App_m2mVpeAppErrCbFxn;
    cbPrms.errList   = &amp;errProcessList;
    cbPrms.appData   = appObj;

    /* Open the driver */
    fvidHandle = Fvid2_create(
                     FVID2_VPS_M2M_DRV,
                     VPS_M2M_INST_VPE1,
                     &amp;createPrms,
                     &amp;createStatus,
                     &amp;cbPrms);
    if (NULL == fvidHandle)
    {
        System_printf("Create failed!!\n");
    }

</pre>
<h4><span class="mw-headline" id="FVID2_Control_-_Set_VPE_Parameters"><b>FVID2 Control - Set VPE Parameters</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=13" title="Edit section: FVID2 Control - Set VPE Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><code>IOCTL_VPS_M2M_SET_VPE_PARAMS</code> IOCTL can be used to set the VPE hardware
specific parameters. This IOCTL should be called after creating VPE M2M driver instance
and before queueing or starting the M2M driver. Starting the M2M driver without
calling this IOCTL will result in error.
This is a blocking call.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>This API should not be called when there are any pending request with the driver.
</p>
</div>
<pre>Int32 Fvid2_control(Fvid2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmd</b> - <code>IOCTL_VPS_M2M_SET_VPE_PARAMS</code>
ioctl.
</p><p><b>cmdArgs</b> - Pointer to
<code>Vps_M2mVpeParams</code> structure.
This parameter should not be NULL.
</p><p><b>cmdStatusArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Set_Scalar_Coefficient"><b>FVID2 Control - Set Scalar Coefficient</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=14" title="Edit section: FVID2 Control - Set Scalar Coefficient">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This is used to issue a control command to the driver.
<code>IOCTL_VPS_SET_COEFFS</code> ioctl is used to set
the scalar coefficients. This is a blocking call.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>This API should not be called when there are any pending request with the driver.
</p>
</div>
<pre>Int32 Fvid2_control(Fvid2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmd</b> - <code>IOCTL_VPS_SET_COEFFS</code>
ioctl.
</p><p><b>cmdArgs</b> - Pointer to
<code>Vps_ScCoeffParams</code> structure containing valid scaling
coefficient. This parameter should not be NULL. To set the scalar
coefficient for VPE1 scalar, <code>scalarId</code> should be set to <code>VPS_M2M_VPE_SCALER_ID_SC0</code>.
</p><p><b>cmdStatusArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Get_DEI_Context_Information"><b>FVID2 Control - Get DEI Context Information</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=15" title="Edit section: FVID2 Control - Get DEI Context Information">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>When DEI is in de-interlacing mode, DEI
requires previous fields and motion vectors. Buffers for storing
these context information must be allocated by the application
and provided to the driver
before starting M2M operation. <code>IOCTL_VPS_GET_DEI_CTX_INFO</code>
ioctl is used to get the number of internal buffers to be allocated and
their sizes. Application should get this information from the driver and
allocate these buffers and provide the buffers to the driver before
issuing any request. Once these buffers are given to the driver,
application should not modify these buffers.
This should be done for each and every channel.
This is a blocking call.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>This API should not be called when there are any pending request with the driver.
</p>
</div>
<pre>Int32 Fvid2_control(Fvid2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmd</b> - <code>IOCTL_VPS_GET_DEI_CTX_INFO</code>
ioctl.
</p><p><b>cmdArgs</b> - Pointer to
<code>Vps_DeiCtxInfo</code> structure where the DEI context information
will be filled by driver. This parameter should not be NULL.
</p><p><b>cmdStatusArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Set_DEI_Context_Buffers"><b>FVID2 Control - Set DEI Context Buffers</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=16" title="Edit section: FVID2 Control - Set DEI Context Buffers">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><code>IOCTL_VPS_SET_DEI_CTX_BUF</code> ioctl is used to set the DEI context
buffers for a channel before providing any request to the driver.
This is a blocking call.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>This API should not be called when there are any pending request with the driver.
</p>
</div>
<pre>Int32 Fvid2_control(Fvid2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmd</b> - <code>IOCTL_VPS_SET_DEI_CTX_BUF</code>
ioctl.
</p><p><b>cmdArgs</b> - Pointer to
<code>Vps_DeiCtxBuf</code> structure valid buffer pointers as requested
by the driver for a particular DEI mode of operation.
This parameter should not be NULL.
</p><p><b>cmdStatusArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Control_-_Get_DEI_Context_Buffers"><b>FVID2 Control - Get DEI Context Buffers</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=17" title="Edit section: FVID2 Control - Get DEI Context Buffers">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><code>IOCTL_VPS_GET_DEI_CTX_BUF</code> ioctl is used to get the DEI context
buffers for a channel from the driver. Once the DEI context buffer
is returned to the application, no more request should be provided
to the driver.
This is a blocking call.
</p>
<div style="padding:5px; background: #eeeeee; color: #348017"><b>Important</b><br />
<p>This API should not be called when there are any pending request with the driver.
</p>
</div>
<pre>Int32 Fvid2_control(Fvid2_Handle handle,
                    UInt32 cmd,
                    Ptr cmdArgs,
                    Ptr cmdStatusArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmd</b> - <code>IOCTL_VPS_GET_DEI_CTX_BUF</code>
ioctl.
</p><p><b>cmdArgs</b> - Pointer to
<code>Vps_DeiCtxBuf</code> structure where the driver returns back the DEI
context buffer to the application.
This parameter should not be NULL.
</p><p><b>cmdStatusArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h2><span class="mw-headline" id="Run_Phase"><b>Run Phase</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=18" title="Edit section: Run Phase">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>M2m drivers are non-streaming drivers.
This phase is used to submit the requests for processing and getting the processes request back.
</p>
<h4><span class="mw-headline" id="Start"><b>Start</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=19" title="Edit section: Start">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>NA
</p>
<h4><span class="mw-headline" id="Stop"><b>Stop</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=20" title="Edit section: Stop">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The driver would retained 3 fields, as context fields. Once application has completed all the
de-interlacing operation, this command could be used to retrieve the context fields.
</p>
<dl><dd><dl><dd><ul><li>Should only be used when de-interlacing, i.e. should not be used in bypass mode</li>
<li>Normally when applications are ready to close, this control command is expected to be used.</li>
<li>Is a blocking call</li></ul></dd></dl></dd></dl>
<pre>Int32 Fvid2_stop(Fvid2_Handle handle,
                 Ptr cmdArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>cmdArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h4><span class="mw-headline" id="Queue_De-queue"><b>Queue De-queue</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=21" title="Edit section: Queue De-queue">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h4><span class="mw-headline" id="FVID2_Process_Frames"><b>FVID2 Process Frames</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=22" title="Edit section: FVID2 Process Frames">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This API is used to submit video buffers to the driver for processing
operation. This is a non-blocking call and should be called from
task context. Once the buffer is queued the application loses
ownership of the buffer and is not suppose to modify or use the buffer.
</p>
<pre>Int32 Fvid2_processFrames(Fvid2_Handle handle,
                          Fvid2_ProcessList *processList);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>processList</b> - Pointer to <code>Fvid2_ProcessList</code>
structure containing the pointer to the FVID2 frames/framelist.
This parameter should not be NULL.
</p>
<h4><span class="mw-headline" id="FVID2_Get_Processed_Frames"><b>FVID2 Get Processed Frames</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=23" title="Edit section: FVID2 Get Processed Frames">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This API is used by the application to get ownership of the processed
video buffer from the memory driver.
This is a non-blocking call and could be called from task or ISR context.
</p>
<pre>Int32 Fvid2_getProcessedFrames(Fvid2_Handle handle,
                               Fvid2_ProcessList *processList,
                               UInt32 timeout);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>processList</b> - Pointer to <code>Fvid2_ProcessList</code>
structure where the driver will copy the processed FVID2 frames/framelist.
This parameter should not be NULL.
</p><p><b>timeout</b> - Not used currently as only
non-blocking queue/dequeue operation is supported.
This parameter should be set to FVID2_TIMEOUT_NONE.
</p>
<h2><span class="mw-headline" id="Delete_Phase"><b>Delete Phase</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=24" title="Edit section: Delete Phase">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In this phase FVID2 delete API is called to close the driver handle.
Hardware resources are freed once all the handles of the particular instance are freed.
Handle can be opened again with different configuration.
</p>
<h4><span class="mw-headline" id="FVID2_Delete"><b>FVID2 Delete</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=25" title="Edit section: FVID2 Delete">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This API is used to close the memory driver.
This is a blocking call and returns after closing the handle.
</p>
<pre>Int32 Fvid2_delete(Fvid2_Handle handle, Ptr deleteArgs);
</pre>
<p><b>handle</b> - Driver handle returned by
create function call. This parameter should not be NULL.
</p><p><b>deleteArgs</b> - Not used currently.
This parameter should be set to NULL.
</p>
<h2><span class="mw-headline" id="System_De-Init_Phase"><b>System De-Init Phase</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=26" title="Edit section: System De-Init Phase">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h4><span class="mw-headline" id="FVID2_de-Init"><b>FVID2 de-Init</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=27" title="Edit section: FVID2 de-Init">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Drivers gets de-initializes as a part of BSP sub-system de-Initialization. Here all resources acquired during system initialization are free'ed. Make sure all driver instances and handles are deleted before calling this API. Typically this is done during system shutdown.
</p>
<pre>Int32 Fvid2_deInit(Ptr args);</pre>
<p><b>args</b> - Not used
</p>
<h2><span class="mw-headline" id="Sample_Application"><b>Sample Application</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=28" title="Edit section: Sample Application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span id="VPE_DEI/Scale"></span><span class="mw-headline" id="VPE_DEI.2FScale"><b>VPE DEI/Scale</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;section=29" title="Edit section: VPE DEI/Scale">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This example illustrates the VPE SC/DEI operation supportted by VPE memory to
memory driver
</p>
<ul><li>VPE Instance: VPS_M2M_INST_VPE1</li></ul>
<p>Example features: 720x240 interlaced YUV420 data is fed into the DEI path.
DEI is configured in deinterlacing mode.
The deinterlaced input is scaled to 360x240 (YUV422) and output via the
output path.
</p>
<ul><li>Load <i>vps_examples_m2mVpeScale_ipu1_0_release.xem4</i> executable file found at <i>$(rel_folder)\packages\ti\binary\vps_examples_m2mVpeScale\bin\&lt;platform&gt;</i></li></ul>
<p>to IPU1 Core 0
</p>
<ul><li>Run the application</li>
<li>The application will halt for the user to load the input frames and to select driver path. Using loadRaw command in script console of CCS, load 10 fields of</li></ul>
<p>720 x 240 YUV420 semiplanar video to location mentioned in the console print. (Ignore "syntax error" if it appears during loading)
</p>
<pre>loadRaw(&lt; Location &gt;, 0, " &lt; File Path &gt; ", 32, false);</pre>
<ul><li>User can save the outputs to a file using the saveraw command as printed from the console window.</li></ul>
<pre>saveRaw(0, &lt; Location &gt;, " &lt; File Path &gt; ", 432000, 32, true);
saveRaw(0, &lt; Location &gt;, " &lt; File Path &gt; ", 1296000, 32, true);
</pre>
<ul><li>Application will stop after processing 10 frames</li></ul>

<!-- 
NewPP limit report
Cached time: 20201130160240
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.089 seconds
Real time usage: 0.090 seconds
Preprocessor visited node count: 270/1000000
Preprocessor generated node count: 490/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3166/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:45037-0!canonical and timestamp 20201130160240 and revision id 229117
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="../File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>PDK/PDK VPS VPE Driver User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="../File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;oldid=229117">https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;oldid=229117</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="../Category_Software_%26_Tools.html" title="Category:Software &amp; Tools">Software &amp; Tools</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=PDK%2FPDK+VPS+VPE+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="../Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="PDK_VPS_VPE_Driver_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="PDK_VPS_VPE_Driver_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="../Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="../Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="../Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/PDK/PDK_VPS_VPE_Driver_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/PDK/PDK_VPS_VPE_Driver_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;oldid=229117" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=PDK/PDK_VPS_VPE_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 1 July 2017, at 01:48.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="../Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.089","walltime":"0.090","ppvisitednodes":{"value":270,"limit":1000000},"ppgeneratednodes":{"value":490,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3166,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130160240","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":233});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/PDK/PDK_VPS_VPE_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 08:06:08 GMT -->
</html>
