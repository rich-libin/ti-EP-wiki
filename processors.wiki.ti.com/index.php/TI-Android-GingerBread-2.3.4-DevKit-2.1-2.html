<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:15:39 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides","wgTitle":"TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides","wgCurRevisionId":106191,"wgRevisionId":106191,"wgArticleId":13702,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["AM335x","Android","Sitara Android"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides","wgRelevantArticleId":13702,"wgRequestId":"37762b860c2e9449b9eadb94","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI-Android-GingerBread-2_3_4-DevKit-2_1_1_PortingGuides rootpage-TI-Android-GingerBread-2_3_4-DevKit-2_1_1_PortingGuides skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a> 
<br />
</p><p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#About_this_manual"><span class="tocnumber">1</span> <span class="toctext">About this manual</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#WLAN"><span class="tocnumber">2</span> <span class="toctext">WLAN</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Introduction"><span class="tocnumber">2.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Features_Overview"><span class="tocnumber">2.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Android_WLAN_Sub-System_Overview"><span class="tocnumber">2.3</span> <span class="toctext">Android WLAN Sub-System Overview</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Application"><span class="tocnumber">2.3.1</span> <span class="toctext">Application</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Application_Framework"><span class="tocnumber">2.3.2</span> <span class="toctext">Application Framework</span></a></li>
<li class="toclevel-3 tocsection-8"><a href="#Libraries"><span class="tocnumber">2.3.3</span> <span class="toctext">Libraries</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-9"><a href="#Driver_Configuration"><span class="tocnumber">2.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Android_WiFi_HAL_Configuration"><span class="tocnumber">2.5</span> <span class="toctext">Android WiFi HAL Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Bluetooth"><span class="tocnumber">3</span> <span class="toctext">Bluetooth</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Introduction_2"><span class="tocnumber">3.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Features_Overview_2"><span class="tocnumber">3.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Android_BT_Sub-System_Overview"><span class="tocnumber">3.3</span> <span class="toctext">Android BT Sub-System Overview</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Driver_Configuration_2"><span class="tocnumber">3.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Android_BT_HAL_Configuration"><span class="tocnumber">3.5</span> <span class="toctext">Android BT HAL Configuration</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Adding_bluetooth_profile"><span class="tocnumber">3.6</span> <span class="toctext">Adding bluetooth profile</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-18"><a href="#Audio"><span class="tocnumber">4</span> <span class="toctext">Audio</span></a>
<ul>
<li class="toclevel-2 tocsection-19"><a href="#Introduction_3"><span class="tocnumber">4.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-20"><a href="#Features_Overview_3"><span class="tocnumber">4.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Android_Audio_Sub-System_Overview"><span class="tocnumber">4.3</span> <span class="toctext">Android Audio Sub-System Overview</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Driver_Configuration_3"><span class="tocnumber">4.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Android_Audio_HAL_Configuration"><span class="tocnumber">4.5</span> <span class="toctext">Android Audio HAL Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Display"><span class="tocnumber">5</span> <span class="toctext">Display</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Introduction_4"><span class="tocnumber">5.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Features_Overview_4"><span class="tocnumber">5.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Android_Display_Subsystem_Overview"><span class="tocnumber">5.3</span> <span class="toctext">Android Display Subsystem Overview</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Driver_Configuration_4"><span class="tocnumber">5.4</span> <span class="toctext">Driver Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-29"><a href="#Frame_Buffer_Driver"><span class="tocnumber">5.4.1</span> <span class="toctext">Frame Buffer Driver</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#Modification_in_Board_File_and_LCD_driver"><span class="tocnumber">5.4.2</span> <span class="toctext">Modification in Board File and LCD driver</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#MMC"><span class="tocnumber">6</span> <span class="toctext">MMC</span></a>
<ul>
<li class="toclevel-2 tocsection-32"><a href="#Introduction_5"><span class="tocnumber">6.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Features_Overview_5"><span class="tocnumber">6.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-34"><a href="#Driver_Configuration_5"><span class="tocnumber">6.3</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-35"><a href="#Android_MMC_HAL_or_Vold_Configuration"><span class="tocnumber">6.4</span> <span class="toctext">Android MMC HAL or Vold Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#Touchscreen"><span class="tocnumber">7</span> <span class="toctext">Touchscreen</span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#Introduction_6"><span class="tocnumber">7.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Features_Overview_6"><span class="tocnumber">7.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Driver_Configuration_6"><span class="tocnumber">7.3</span> <span class="toctext">Driver Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-40"><a href="#Add_touchscreen_driver_support"><span class="tocnumber">7.3.1</span> <span class="toctext">Add touchscreen driver support</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Test_touch_driver_using_getevent"><span class="tocnumber">7.3.2</span> <span class="toctext">Test touch driver using getevent</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Touch_Calibration"><span class="tocnumber">7.3.3</span> <span class="toctext">Touch Calibration</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#Test_Touch_Calibration_in_Android"><span class="tocnumber">7.3.4</span> <span class="toctext">Test Touch Calibration in Android</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-44"><a href="#Keypad"><span class="tocnumber">8</span> <span class="toctext">Keypad</span></a>
<ul>
<li class="toclevel-2 tocsection-45"><a href="#Introduction_7"><span class="tocnumber">8.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-46"><a href="#Features_Overview_7"><span class="tocnumber">8.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#Driver_Configuration_7"><span class="tocnumber">8.3</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-48"><a href="#Android_Keypad_Configuration"><span class="tocnumber">8.4</span> <span class="toctext">Android Keypad Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-49"><a href="#NAND"><span class="tocnumber">9</span> <span class="toctext">NAND</span></a>
<ul>
<li class="toclevel-2 tocsection-50"><a href="#Introduction_8"><span class="tocnumber">9.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#Features_Overview_8"><span class="tocnumber">9.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Driver_Configuration_8"><span class="tocnumber">9.3</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Fastboot"><span class="tocnumber">9.4</span> <span class="toctext">Fastboot</span></a>
<ul>
<li class="toclevel-3 tocsection-54"><a href="#Establishing_Fastboot_connectivity"><span class="tocnumber">9.4.1</span> <span class="toctext">Establishing Fastboot connectivity</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="#Supported_Fastboot_commands"><span class="tocnumber">9.4.2</span> <span class="toctext">Supported Fastboot commands</span></a></li>
<li class="toclevel-3 tocsection-56"><a href="#Fastboot_Porting_guide"><span class="tocnumber">9.4.3</span> <span class="toctext">Fastboot Porting guide</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-57"><a href="#USB_Host_and_Gadget"><span class="tocnumber">10</span> <span class="toctext">USB Host and Gadget</span></a>
<ul>
<li class="toclevel-2 tocsection-58"><a href="#Introduction_9"><span class="tocnumber">10.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-59"><a href="#Driver_Configuration_9"><span class="tocnumber">10.2</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-60"><a href="#Android_USB_Configuration"><span class="tocnumber">10.3</span> <span class="toctext">Android USB Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-61"><a href="#USB_Mass_storage"><span class="tocnumber">11</span> <span class="toctext">USB Mass storage</span></a>
<ul>
<li class="toclevel-2 tocsection-62"><a href="#Introduction_10"><span class="tocnumber">11.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-63"><a href="#Android_Configuration_for_USB_mass_storage"><span class="tocnumber">11.2</span> <span class="toctext">Android Configuration for USB mass storage</span></a></li>
<li class="toclevel-2 tocsection-64"><a href="#Test_mass_storage_in_Android"><span class="tocnumber">11.3</span> <span class="toctext">Test mass storage in Android</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-65"><a href="#USB_3G_Modem"><span class="tocnumber">12</span> <span class="toctext">USB 3G Modem</span></a>
<ul>
<li class="toclevel-2 tocsection-66"><a href="#Introduction_11"><span class="tocnumber">12.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-67"><a href="#Kernel_Configuration_for_USB_Modem"><span class="tocnumber">12.2</span> <span class="toctext">Kernel Configuration for USB Modem</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="#File_System_Changes"><span class="tocnumber">12.3</span> <span class="toctext">File System Changes</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#Usage"><span class="tocnumber">12.4</span> <span class="toctext">Usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-70"><a href="#Disclaimer"><span class="tocnumber">13</span> <span class="toctext">Disclaimer</span></a></li>
<li class="toclevel-1 tocsection-71"><a href="#Technical_Support_and_Product_Updates"><span class="tocnumber">14</span> <span class="toctext">Technical Support and Product Updates</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="About_this_manual">About this manual</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=1" title="Edit section: About this manual">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The goal of Porting Guide is to provide valuable information and instructions to people who want to run Android OS on their (new) HW. Information covered here will mainly be useful to port Android GingerBread DevKit 2.1.1 (with kernel 3.1) on AM335x based devices.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b> Detailed porting information in the different technical areas is dependent on the respective h/w architecture.
</p>
<h1><span class="mw-headline" id="WLAN">WLAN</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=2" title="Edit section: WLAN">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=3" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of guide provides a step by step explanation of what's involved in adding a new WiFi driver and making WiFi work in a custom Android build like Rowboat.
<br />
</p>
<h2><span class="mw-headline" id="Features_Overview">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=4" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>WLAN (802.11 b/g/n)</li>
<li>Core IP pre-tested against WiFi specifications.</li>
<li>Currently only station mode is supported.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Android_WLAN_Sub-System_Overview">Android WLAN Sub-System Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=5" title="Edit section: Android WLAN Sub-System Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="File_WLAN_Stack.html" class="image"><img alt="WLAN Stack.jpg" src="https://processors.wiki.ti.com/images/4/4a/WLAN_Stack.jpg" width="960" height="720" /></a>
<br />
<br />
Diagram explains WLAN event flow from application to h/w with respect to rowboat android source tree.
</p>
<h4><span class="mw-headline" id="Application">Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=6" title="Edit section: Application">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>Settings/Connection Manager:<b>&lt;android-src&gt;/packages/apps/Settings/src/com/android/settings/WirelessSettings.java</b></li></ul>
<h4><span class="mw-headline" id="Application_Framework">Application Framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=7" title="Edit section: Application Framework">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>WiFi manager:<b>&lt;android-src&gt;/frameworks/base/wifi/java/android/net/wifi</b></li>
<li>JNI Implementation:<b>&lt;android-src&gt;/frameworks/base/core/jni/android_net_wifi_Wifi.cpp</b></li></ul>
<h4><span class="mw-headline" id="Libraries">Libraries</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=8" title="Edit section: Libraries">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>libhardware_legacy:<b>&lt;android-src&gt;/hardware/libhardware_legacy/wifi/wifi.c</b></li>
<li>wpa_supplicant (Daemon):<b>&lt;android-src&gt;/external/hostap/wpa_supplicant</b></li>
<li>Higher level network management is done in <b>&lt;android-src&gt;/frameworks/base/core/java/android/net</b>.</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=9" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In this Devkit release we are using WL12XX Compat wireless SDK. The drivers and firmwares of WL12XX Compat release are at <b>hardware/ti/wlan/WL1271_compat</b>
</p><p>To enable WLAN support in kernel the following settings need to be enabled:
</p>
<ul><li>First enable Wireless LAN device driver as shown below:</li></ul>
<pre>   Device Drivers  ---&gt;
       [*] Network device support  ---&gt;
           [*]   Wireless LAN ---&gt;
</pre>
<ul><li>Enable WLAN Networking support as shown below:</li></ul>
<pre>   [*] Networking support  ---&gt;
       -*-   Wireless  ---&gt;
           [*]   Wireless extensions sysfs files
</pre>
<p>This enables the following CONFIG options in kernel and allows WL12xx compat wlan drivers to be built:
</p>
<pre>   CONFIG_WLAN=y
   CONFIG_WIRELESS_EXT=y
   CONFIG_WEXT_CORE=y
   CONFIG_WEXT_PROC=y
   CONFIG_WEXT_PRIV=y
</pre>
<ul><li>The following additional options need to be enabled in kernel for WLAN to operate</li></ul>
<pre>  CONFIG_KEYS=y
  CONFIG_SECURITY=y
  CONFIG_CRYPTO=y
  CONFIG_CRYPTO_ARC4=y
  CONFIG_CRYPTO_ECB=y
  CONFIG_CRYPTO_AES=y
  CONFIG_CRYPTO_MICHAEL_MIC=y
  CONFIG_CRC7=y
</pre>
<ul><li>On AM335x EVM WL1271 SDIO is connected to MMC2 bus. Its relevant initialization and pin-muxing is done at <b>arch/arm/mach-omap2/board-am335xevm.c</b>. Do take care of this initialization and pin-muxing if using any other MMC bus e.g. MMC3.</li></ul>
<h2><span class="mw-headline" id="Android_WiFi_HAL_Configuration">Android WiFi HAL Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=10" title="Edit section: Android WiFi HAL Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Enable building of wpa_supplicant 0.8.x in your BoardConfig.mk (e.g. <b>device/ti/am335xevm/BoardConfig.mk</b>)</li></ul>
<p>This is by simply adding following options in BoardConfig.mk:
</p>
<pre>  BOARD_WLAN_DEVICE            &#160;:= wl12xx_mac80211
  BOARD_SOFTAP_DEVICE          &#160;:= wl12xx_mac80211
  WPA_SUPPLICANT_VERSION       &#160;:= VER_0_8_X
  BOARD_WPA_SUPPLICANT_DRIVER  &#160;:= NL80211
  WIFI_DRIVER_MODULE_PATH      &#160;:= "/system/etc/wifi/wl12xx_sdio.ko"
  WIFI_DRIVER_MODULE_NAME      &#160;:= "wl12xx_sdio"
</pre>
<p>This will set  WPA_BUILD_SUPPLICANT to true in <b>external/hostap/wpa_supplicant/Android.mk</b> enabling building of wpa_supplicant 0.8 with NL80211. At run time <b>wl12xx_sdio</b> will get loaded from <i>WIFI_DRIVER_MODULE_PATH</i>. We don't need any external <i>WIFI_FIRMWARE_LOADER</i> because our driver module <b>wl12xx_sdio</b> is capable of loading the firmware by itself.
</p>
<ul><li>Next we need to provide a proper wpa_supplicant.conf for our device. That we will keep in <b>/data/misc/wifi</b>.</li></ul>
<ul><li>Set the correct permissions and paths created from init.rc</li></ul>
<pre>   # give system access to wpa_supplicant.conf for backup and restore
   mkdir /system/etc/wifi 0770 system wifi
   chmod 0770 /system/etc/wifi
   chmod 0660 /system/etc/wifi/wpa_supplicant.conf
   chown system wifi /system/etc/wifi/wpa_supplicant.conf
   mkdir /data/misc/wifi 0770 system wifi
   mkdir /data/misc/wifi/sockets 0770 system wifi
   chmod 0770 /data/misc/wifi
   chmod 0660 /data/misc/wifi/wpa_supplicant.conf
   chown wifi wifi /data/misc/wifi
   chown wifi wifi /data/misc/wifi/wpa_supplicant.conf
</pre>
<p><b>Important</b>
We use System user(uid: 1000) to initiate wpa_supplicant service that way are able to enable WiFi over Android NFS rootfs. Here is the detailed discussion on that <a rel="nofollow" class="external text" href="http://groups.google.com/group/rowboat/browse_thread/thread/698e2b6e049e53e8/7e273dfb2afe87d1?pli=1">WiFi does not work when booting from an NFS file system</a>
</p>
<ul><li>Set the wifi interface name</li></ul>
<pre>  setprop wifi.interface wlan0:0
</pre>
<ul><li>Start <b>wpa_supplicant</b> and <b>dhcpcd</b> from init.rc.</li></ul>
<pre>   # wpa_supplicant and dhcp daemon
   service wpa_supplicant /system/bin/wpa_supplicant -Dnl80211 -iwlan0 -c/data/misc/wifi/wpa_supplicant.conf -dd -qq
       socket wpa_wlan0:0 dgram 660 wifi wifi
       group system wifi inet
       disabled
</pre>
<pre>   service dhcpcd /system/bin/dhcpcd  -ABKL wlan0:0
       disabled
       oneshot
</pre>
<p><b>Note:</b> AOSP 2.3.4 requires using <i>dhcpcd_&lt;ifname&gt;</i> for dhcpc service, but currently this does not work correctly for wlan0:0 interface. This patch is <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/system-core/commit/b604c52e44d0460a5e3e6759313cd53da0feaff0%7C">reverted</a> in TI-Android-Gingerbread-2.3.4-DevKit-2.1.1 sources and the service name is changed to <i>dhcpcd</i>.
</p>
<h1><span class="mw-headline" id="Bluetooth">Bluetooth</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=11" title="Edit section: Bluetooth">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=12" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section describes how to enable Bluetooth support on Android for wl1271 chipset.
<br />
</p>
<h2><span class="mw-headline" id="Features_Overview_2">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=13" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Bluetooth 2.1</li>
<li>OPP, A2DP, AVRCP profiles are supported.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Android_BT_Sub-System_Overview">Android BT Sub-System Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=14" title="Edit section: Android BT Sub-System Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="File_BT_Stack.html" class="image"><img alt="BT Stack.jpg" src="https://processors.wiki.ti.com/images/e/e0/BT_Stack.jpg" width="960" height="720" /></a>
</p><p><br />
</p><p>Enable Bluetooth with the following setting in BoardConfig.mk (e.g. <b>device/ti/am335xevm/BoardConfig.mk</b>) 
</p>
<pre>   # Bluetooth
   BOARD_HAVE_BLUETOOTH&#160;:= true
</pre>
<p>This enables bluez <b>external/bluez</b> HAL layer, which is used to connect with Android Frameworks (<b>frameworks/base/core/jni/android_bluetooth_*.cpp</b>, <b>frameworks/base/core/java/android/bluetooth/*.java</b> and <b>SystemServer</b> via DBUS .
</p>
<h2><span class="mw-headline" id="Driver_Configuration_2">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=15" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>WL12xx BT is interfaced to UART1. UART1 initialization and BT module on/off using rfkill is implemented at <b>arch/arm/mach-omap2/board-am335xevm.c</b></li></ul>
<ul><li>Bluetooth support is enabled in the kernel as shown below:</li></ul>
<pre>   [*] Networking support  ---&gt; 
       &lt;*&gt;   Bluetooth subsystem support  ---&gt;
           [*]   L2CAP protocol support
           &lt;*&gt;   RFCOMM protocol support
           &lt;*&gt;   RFCOMM protocol support
           &lt;*&gt;   BNEP protocol support
           [*]     Multicast filter support
           [*]     Protocol filter support 
           &lt;*&gt;   HIDP protocol support 
                 Bluetooth device drivers  ---&gt;
                   &lt;*&gt; HCI UART driver
                   [*]   UART (H4) protocol support 
                   [*]   HCILL protocol support
       &lt;*&gt;   RF switch subsystem support
</pre>
<p>This enables the following CONFIG options:
</p>
<pre>CONFIG_BT=y
CONFIG_BT_L2CAP=y
CONFIG_BT_RFCOMM=y
CONFIG_BT_RFCOMM_TTY=y
CONFIG_BT_BNEP=y
CONFIG_BT_BNEP_MC_FILTER=y
CONFIG_BT_BNEP_PROTO_FILTER=y
CONFIG_BT_HIDP=y
CONFIG_BT_HCIUART=y
CONFIG_BT_HCIUART_H4=y
CONFIG_BT_HCIUART_LL=y
CONFIG_RFKILL=y
</pre>
<ul><li>The following kernel configs are required for Bluetooth AVRCP support:</li></ul>
<pre>CONFIG_INPUT_MISC=y
CONFIG_INPUT_UINPUT=y
</pre>
<p>You can check this as follows:
</p>
<pre>   Device Drivers  ---&gt;
       Input device support  ---&gt;
           [*]   Miscellaneous devices  ---&gt;
                   &lt;*&gt;   User level driver support
</pre>
<h2><span class="mw-headline" id="Android_BT_HAL_Configuration">Android BT HAL Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=16" title="Edit section: Android BT HAL Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Set the correct permissions and paths created from init.rc</li></ul>
<pre>   #Owners, Modes for Bluetooth
   #console changed to ttyO* from ttyS* since 2.6.37 kernel.
   chmod 0660 /dev/ttyO1
   chown bluetooth bluetooth /dev/ttyO1
   chmod 0660 sys/class/rfkill/rfkill0/state
   chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
   write /sys/class/rfkill/rfkill0/state 0
</pre>
<ul><li>The following services are registered in init.rc for Bluetooth operation:</li></ul>
<ul><li>dbus-daemon: (deal connections between hcid and system server)</li></ul>
<pre>   service dbus /system/bin/dbus-daemon --system --nofork
   socket dbus stream 660 bluetooth bluetooth
   user bluetooth
   group bluetooth net_bt_admin
</pre>
<ul><li>bluetoothd: create hcid (Bluetooth Host Controller Interface Daemon) service, but disabled at first</li></ul>
<pre>   service bluetoothd /system/bin/bluetoothd -n
   socket bluetooth stream 660 bluetooth bluetooth
   socket dbus_bluetooth stream 660 bluetooth bluetooth
   group bluetooth net_bt_admin misc
   disabled
</pre>
<ul><li>hciattach - Project <b>external/bluetooth/bluez</b> is patched to enable TI-WL1271 chipset specific <i>hciattach</i> tool. This service attaches the BT UART HCI interface to the bluetooth stack at 3000000 baud rate. It is also responsible for loading the BT firmware on WL1271.</li></ul>
<pre>   service hciattach /system/bin/hciattach -n /dev/ttyO1 texas 3000000
   user root
   group bluetooth net_bt_admin misc
   disabled
   oneshot
</pre>
<ul><li>opush - BT Object Push Profile</li></ul>
<pre>   service opush /system/bin/sdptool add --channel=12 OPUSH
   user bluetooth
   group bluetooth net_bt_admin
   disabled
   oneshot
</pre>
<h2><span class="mw-headline" id="Adding_bluetooth_profile">Adding bluetooth profile</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=17" title="Edit section: Adding bluetooth profile">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Kindly refer the following wiki guide: <a href="Android-Adding_Bluetooth_Profile.html" title="Android-Adding Bluetooth Profile">Android-Adding Bluetooth Profile</a>
</p>
<h1><span class="mw-headline" id="Audio">Audio</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=18" title="Edit section: Audio">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_3">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=19" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>AM335x EVM uses AIC31 for audio analog inputs and outputs. It is connected to the main processor through the TDM / I2S interface and used to transmit and receive audio data. The AIC31 audio codec is connected via Multi-Channel Audio Serial Port (McASP) interface, a communication peripheral, to the main processor. 
</p><p>McASP provides a full-duplex direct serial interface between the main processor (AM335x) and other devices in the system such as the AIC31 codec. It provides a direct interface to industry standard codecs, analog interface chips (AICs) and other serially connected A/D and D/A devices: 
</p>
<ul><li>Inter-IC Sound (I2S) compliant devices</li>
<li>Pulse Code Modulation (PCM) devices</li>
<li>Time Division Multiplexed (TDM) bus devices.</li></ul>
<p>The AIC31 audio module is controlled by internal registers that can be accessed by the high speed I2C control interface.
</p><p>This user manual section defines and describes the user level and&#160;platform level interfaces of the ALSA SoC Audio driver.
</p>
<h2><span class="mw-headline" id="Features_Overview_3">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=20" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The features supported by ALSA SoC Audio driver are: 
</p>
<ul><li>Supports AIC31 audio codec (on AM335x EVM only) in ALSA SoC framework.</li>
<li>Multiple sample rates support (8 KHz, 16 KHz, 22.05 KHz, 32 KHz, 44.1 KHz, 48 KHz etc) for both capture and playback.</li>
<li>Supports audio in stereo mode.</li>
<li>Supports simultaneous playback and record (full-duplex mode).</li>
<li>Start, stop, pause and resume feature.</li>
<li>Supports mixer interface for audio codecs.</li>
<li>Supports MMAP mode for both playback and capture.</li>
<li>McASP is configured as slave and AIC31 Codec is configured as master.</li></ul>
<p><b>Important</b>
</p><p>Please note that enabling any line-in inputs necessitates connecting an audio playback source's output; connecting a (non-preamplified) microphone input (like the one from a head-set jack) might not work.
</p>
<h2><span class="mw-headline" id="Android_Audio_Sub-System_Overview">Android Audio Sub-System Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=21" title="Edit section: Android Audio Sub-System Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="File_Audio_Stack.html" class="image"><img alt="Audio Stack.jpg" src="https://processors.wiki.ti.com/images/1/18/Audio_Stack.jpg" width="960" height="720" /></a>
</p><p><br />
</p>
<ul><li>To use ALSA framework as HAL we need to build Rowboat with following options in BoardConfig.mk:</li></ul>
<pre>BOARD_USES_ALSA_AUDIO&#160;:= true
BUILD_WITH_ALSA_UTILS&#160;:= true
</pre> 
<ul><li>Generic ALSA as AudioFlinger Interface(<b>libaudio.so</b>) is implemented at <b>hardware/alsa_sound</b>.</li>
<li>Audio device specific settings and controls(<b>alsa.omap3.so</b>) are implemented at <b>hardware/ti/omap3/modules/alsa</b>.</li>
<li>ALSA library(<b>libasound.so</b>) is implemented at <b>external/alsa-libs</b>.</li>
<li>ALSA core utils(<b>alsa_aplay, alsa_amixer</b>) are implemented at <b>external/alsa-utils</b>.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Driver_Configuration_3">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=22" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To enable/disable audio support, start the <i>Linux Kernel Configuration</i>&#160;tool: 
</p>
<pre>$ make ARCH=arm menuconfig
</pre> 
<ul><li>Select <i>Device Drivers</i> from the main menu.</li></ul>
<pre>   ...
   ...
   Power management options ---&gt;
   [*] Networking support ---&gt;
   <b>Device Drivers ---&gt;</b>
   File systems ---&gt;
   Kernel hacking ---&gt;
   ...
   ...
</pre>
<ul><li>Select <i>Sound card support</i> as shown here:</li></ul>
<pre>   ...
   ...
   Multimedia devices ---&gt;
   Graphics support ---&gt;
   <b>&lt;*&gt; Sound card support ---&gt;</b>
   [*] HID Devices ---&gt;
   [*] USB support ---&gt;
   ...
   ...
</pre>
<ul><li>Select <i>Advanced Linux Sound Architecture</i> as shown here:</li></ul>
<pre>   --- Sound card support
   <b>&lt;*&gt; Advanced Linux Sound Architecture ---&gt;</b>
   &lt; &gt; Open Sound System (DEPRECATED) ---&gt;
</pre>
<ul><li>Select <i>ALSA for SoC audio support </i>as shown here:</li></ul>
<pre>   ...
   ...
   [*] ARM sound devices  ---&gt;
   [*] SPI sound devices  ---&gt;
   [*] USB sound devices  ---&gt;
   <b>&lt;*&gt; ALSA for SoC audio support ---&gt;</b>
</pre>
<ul><li>Select <i>SoC Audio for the AM33XX chip</i> as shown here:</li></ul>
<pre>   --- ALSA for SoC audio support
   <b>&lt;*&gt; SoC Audio for the AM33XX chip</b>
   <b>&lt;*&gt; SoC Audio support for AM335X EVM</b>
   &lt; &gt; SoC Audio for the Texas Instruments OMAP chips
   &lt; &gt; Build all ASoC CODEC drivers
</pre>
<ul><li>Enabling "SoC Audio support for AM335X EVM" option (as selected above) will enable McASP support and TLV320AIC3X codec.</li></ul>
<p><br />
<i>See also: <a href="AM335x_Audio_Driver%27s_Guide.html" title="AM335x Audio Driver&#39;s Guide">AM335x Audio Driver's Guide</a></i>
</p>
<h2><span class="mw-headline" id="Android_Audio_HAL_Configuration">Android Audio HAL Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=23" title="Edit section: Android Audio HAL Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Before diving into Android ALSA hardware layer, we have to verify whether ALSA driver is properly working or not. We will use ALSA utilities(alsa_aplay, alsa_arecord, and alsa_amixer) which got build along with Rowboat and is a part of <b>external/alsa-utils</b> package.
</p>
<ul><li>alsa_amixer is used to set ALSA controls &amp; settings.</li>
<li>alsa_arecord and alsa_aplay are used for record and playback purpose respectively.</li></ul>
<p><br />
By default alsa_arecord doesn't exist. It is a soft link to alsa_aplay. So to create the link run the following command from Android prompt.
</p>
<pre># ln -s /system/bin/alsa_aplay /system/bin/alsa_arecord
</pre>
<p><br /> 
<b>Important (for AM335x EVM ONLY)</b><br />
</p>
<ul><li>AM335x ASoC driver default configuration is sufficient for audio capture and playback.</li></ul>
<ul><li>Software loopback command to test capture-playback. Following command will record in "CD" format and play the recorded data.</li></ul>
<pre># alsa_arecord -f cd | alsa_aplay
</pre>
<p>The <tt>--help</tt> option provides a comprehensive list of command-line options for ALSA utilities.
</p><p>The above procedure should get your Audio Capture and Playback working from command line. If it is then we are all set to make the corresponding changes in Android HAL layer and that will be all.
</p><p>Hardware specific ALSA configurations will go here to <b>hardware/ti/omap3/modules/alsa/alsa_module.cpp</b> file.
</p><p><b> Select and configure hardware devices </b>
</p>
<ul><li>List down all the Audio devices available on target/AM335x.</li></ul>
<pre># alsa_aplay -l
**** List of PLAYBACK Hardware Devices ****
card 0: EVM [AM335X EVM], device 0: AIC3X tlv320aic3x-hifi-0 []
  Subdevices: 1/1
  Subdevice #0: subdevice #0
</pre>
<ul><li>We got that default out device is <b>hw 0:0</b></li></ul>
<ul><li>Define: <tt> deviceName() </tt> to return correct out device on query. See the implementation for details.</li></ul>
<ul><li>In <tt> alsa_handle_t _defaults[] </tt> goes the ALSA handle settings:</li></ul>
<pre>.....
    {
        module     &#160;: 0,
        devices    &#160;: OMAP3_OUT_DEFAULT,
        curDev     &#160;: 0,
        curMode    &#160;: 0,
        handle     &#160;: 0,
        format     &#160;: SND_PCM_FORMAT_S16_LE, // AudioSystem::PCM_16_BIT
        channels   &#160;: 2,
        sampleRate &#160;: DEFAULT_SAMPLE_RATE,
        latency    &#160;: 200000, // Desired Delay in usec
        bufferSize &#160;: DEFAULT_SAMPLE_RATE / 11, // Desired Number of samples
        mmap       &#160;:0,
        modPrivate &#160;: (void *)&amp;setDefaultControls,
    },
.....
</pre>
<ul><li>In <tt> setDefaultControls() </tt> we set the ALSA controls. It is similar to setting the ALSA Switch and Volume controls using <tt> alsa_amixer </tt>.</li></ul>
<ul><li>Additional default setting is not required in ALSA HAL as default ALSA ASoC driver configuration is sufficient for capture and playback.</li></ul>
<p><br /> 
<b>Important</b><br /> 
Please note that enabling any line-in inputs necessitates connecting an audio playback source's output&#160;; connecting a (non-preamplified) microphone input (like the one from a head-set jack) might not work.
</p><p><br />
</p>
<h1><span class="mw-headline" id="Display">Display</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=24" title="Edit section: Display">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_4">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=25" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of the porting guide describes the display system with respect to AM335x EVM. Display Sub-System hardware integrates one graphics pipeline (for digital interface). Digital interface is used for LCD out.
</p><p><b>TFC_S9700RTWV35TR_01B LCD Panel</b> is used on AM335x EVM. Porting explanation for <b>TFC_S9700RTWV35TR_01B LCD Panel</b> is given in this section
</p>
<h2><span class="mw-headline" id="Features_Overview_4">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=26" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Supports LCD display interface at WVGA resolution (800*480)</li>
<li>Supports rotation - 0, 90, 180 and 270 degrees on LCD</li></ul>
<h2><span class="mw-headline" id="Android_Display_Subsystem_Overview">Android Display Subsystem Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=27" title="Edit section: Android Display Subsystem Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The block diagram below shows the display subsystem in GingerBread android.
Android display system is based on a Client/Server Architecture.<br />
Server side: 
Surface Flinger is a service coded in C++
</p>
<ul><li>Manages access to display subsystem</li>
<li>Seamlessly composites 2D and 3D graphic layers from multiple applications</li></ul>
<p>Client side: 
Applications can draw on surfaces using two paths:
</p>
<ul><li>Use widgets/View/Canvas provided by the JAVA APIs and managed by C++ external SKIA library</li>
<li>Access OpenGL through JNI to directly create 3D surfaces</li></ul>
<p>Surface Flinger Provides system-wide surface “composer”, handling all surface rendering to frame buffer device. Uses OPENGL and hardware accelerator for composing surfaces. Surfaces passed as buffers via binder IPC calls.
</p>
<div class="floatleft"><a href="File_Display_system_overview.html" class="image" title="Display_system_overview.jpg"><img alt="Display_system_overview.jpg" src="https://processors.wiki.ti.com/images/f/fe/Display_system_overview.jpg" width="800" height="600" /></a></div>
<p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p><p><br />
</p>
<h2><span class="mw-headline" id="Driver_Configuration_4">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=28" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Frame_Buffer_Driver">Frame Buffer Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=29" title="Edit section: Frame Buffer Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Select "Device Drivers" from the main menu.</li></ul>
<pre>   ...
   ...
    Power management options  ---&gt;
[*] Networking support  ---&gt;
    <b>Device Drivers  ---&gt;</b>
    File systems  ---&gt;
    Kernel hacking  ---&gt;
    ...
    ...
</pre>
<ul><li>Select "Graphics support" from the menu.</li></ul>
<pre>    ...
    ...
[*] Voltage and Current Regulator Support  ---&gt;
&lt;*&gt; Multimedia support  ---&gt;
    <b>Graphics support  ---&gt;</b>
&lt;*&gt; Sound card support  ---&gt;
[*] HID Devices  ---&gt;
    ...
    ...
</pre>
<ul><li>Select "Support for frame buffer devices" from the menu.</li></ul>
<pre>    ...
    ...
&lt;M&gt; Lowlevel video output switch controls
<b>&lt;*&gt; Support for frame buffer devices  ---&gt;</b>
&lt; &gt; Virtual Frame Buffer support (ONLY FOR TESTING!)
    ...
    ...
</pre>
<ul><li>Select "DA8xx/OMAP-L1xx Framebuffer support" from the menu.</li>
<li>Configure default DMA size to the required/expected size of buffer, the default is 4MB.</li></ul>
<pre>   ...
    ...
&lt; &gt; Displaylink USB Framebuffer support
<b>&lt;*&gt; DA8xx/OMAP-L1xx Framebuffer support  ---&gt;</b>
<b>(4)   Consistent DMA memory size (MB)</b>
&lt; &gt; Virtual Frame Buffer support (ONLY FOR TESTING)  ---&gt;
    ...
    ...
</pre>
<h3><span class="mw-headline" id="Modification_in_Board_File_and_LCD_driver">Modification in Board File and LCD driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=30" title="Edit section: Modification in Board File and LCD driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>TFC_S9700RTWV35TR_01B LCD panel
LCD timing need to be configure in drivers/video/da8xx-fb.c.
</p>
<ul><li>LCD interface related pin mux state and set as per requirement. It may required to check default pin muxing setup in u-boot as well.</li>
<li>Implement lcdc_init() and link to display driver. Where DSS module will use it in runtime. e.g. @<i>arch/arm/mach-omap2/board-am335xevm.c</i></li></ul>
<pre> static const struct display_panel disp_panel = {
        WVGA,
        32,
        32,
        COLOR_ACTIVE,
};

static struct lcd_ctrl_config lcd_cfg = {
        &amp;disp_panel,
        .ac_bias                = 255,
        .ac_bias_intrpt         = 0,
        .dma_burst_sz           = 16,
        .bpp                    = 32,
        .fdd                    = 0x80,
        .tft_alt_mode           = 0,
        .stn_565_mode           = 0,
        .mono_8bit_mode         = 0,
        .invert_line_clock      = 1,
        .invert_frm_clock       = 1,
        .sync_edge              = 0,
        .sync_ctrl              = 1,
        .raster_order           = 0,
};

struct da8xx_lcdc_platform_data TFC_S9700RTWV35TR_01B_pdata = {
        .manu_name              = "ThreeFive",
        .controller_data        = &amp;lcd_cfg,
        .type                   = "TFC_S9700RTWV35TR_01B",
}; </pre>
<ul><li>LCD timing need to set as per datasheet information. e.g. @<i>drivers/video/da8xx-fb.c</i></li></ul>
<pre> static struct da8xx_panel known_lcd_panels[] = {
        ...
        ...
        /* ThreeFive S9700RTWV35TR */
        [2] = {
                .name = "TFC_S9700RTWV35TR_01B",
                .width = 800,
                .height = 480,
                .hfp = 39,
                .hbp = 39,
                .hsw = 47,
                .vfp = 13,
                .vbp = 29,
                .vsw = 2,
                .pxl_clk = 30000000,
                .invert_pxl_clk = 0,
        },
     };</pre>
<p><br />
<i>See also: <a href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Foundational_Components/Kernel/Kernel_Drivers/Display/LCDC.html" title="AM335x LCD Controller Driver&#39;s Guide">AM335x LCD Controller Driver's Guide</a></i>
</p>
<h1><span class="mw-headline" id="MMC">MMC</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=31" title="Edit section: MMC">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_5">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=32" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>TI AM335x has an multimedia card high-speed/secure data/secure
digital I/O (MMC/SD/SDIO) host controller, which provides an interface
between microprocessor and either MMC, SD memory cards, or SDIO
cards. The current version of the user guide talks about the MMC/SD
controller. The MMC driver is implemented on top of host controller as
a HS-MMC controller driver and supports MMC, SD, SD High Speed and
SDHC cards. The salient features of the aforementioned HS-MMC host
controller are:
</p>
<ul><li>Full compliance with MMC/SD command/response sets as defined in the Specification.</li>
<li>Supports 1-bit or 4-bit transfer mode specifications for SD and SDIO cards</li>
<li>Supports 1-bit, 4-bit, or 8-bit transfer mode specifications for MMC cards</li>
<li>Built-in 1024-byte buffer for read or write</li>
<li>32-bit-wide access bus to maximize bus throughput</li>
<li>Single interrupt line for multiple interrupt source events</li>
<li>Two slave DMA channels (1 for TX, 1 for RX)</li>
<li>Designed for low power and Programmable clock generation</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Features_Overview_5">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=33" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The MMC/SD/SDIO driver supports following features
<br /> 
</p>
<ul><li>The driver is built in-kernel (part of vmlinux).</li>
<li>MMC cards including High Speed cards.</li>
<li>SD cards including SD High Speed and SDHC cards</li>
<li>Uses block bounce buffer to aggregate scattered blocks</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Driver_Configuration_5">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=34" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The default kernel configuration enables support for MMC/SD(built-in to kernel). The selection of MMC/SD/SDIO driver can be modified as follows:  
</p>
<ul><li>start Linux Kernel Configuration tool.</li></ul>
<pre>$ make menuconfig  ARCH=arm
</pre>
<ul><li>Select Device Drivers from the main menu.</li></ul>
<pre>...
...
Kernel Features  ---&gt;
Boot options  ---&gt;
CPU Power Management  ---&gt;
Floating point emulation  ---&gt;
Userspace binary formats  ---&gt;
Power management options  ---&gt;
[*] Networking support  ---&gt;
<b>Device Drivers  ---&gt;</b>
...
...
</pre>
<ul><li>Select MMC/SD/SDIO card support from the menu.</li></ul>
<pre>...
...
[*] USB support  ---&gt;
<b>&lt;*&gt; MMC/SD/SDIO card support  ---&gt;</b>
&lt; &gt; Sony MemoryStick card support (EXPERIMENTAL)  ---&gt;
...
...
</pre>
<ul><li>Select OMAP HS MMC driver</li></ul>
<pre>...
[ ] MMC debugging
[ ] Assume MMC/SD cards are non-removable (DANGEROUS) 
     *** MMC/SD/SDIO Card Drivers ***
<b>&lt;*&gt; MMC block device driver</b>
<b>[*]  Use bounce buffer for simple hosts</b>
...
<b>&lt;*&gt;   TI OMAP High Speed Multimedia Card Interface support </b>
...
</pre>
<p><i>See also: <a href="AM335x_MMC/SD_Driver%27s_Guide.html" title="AM335x MMC/SD Driver&#39;s Guide">AM335x MMC/SD Driver's Guide</a></i>
</p>
<h2><span class="mw-headline" id="Android_MMC_HAL_or_Vold_Configuration">Android MMC HAL or Vold Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=35" title="Edit section: Android MMC HAL or Vold Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Android system uses vold as the mount daemon, which detects, mounts and monitors the status of sdcard. The mount daemon needs a configuration file to tell it what the sdcard device is. Since Android 2.2 (froyo), it ships with a new implementation of vold (aka vold2). The configuration is changed to /etc/vold.fstab and its format is also changed. See <b>system/core/rootdir/etc/vold.fstab</b> in the Android source tree for the detailed explanations of the format.
</p><p>However, a fixed vold.fstab can only support block device with fixed name. 
</p>
<pre># cat /etc/vold.fstab
<b>dev_mount sdcard /mnt/sdcard 3 /devices/platform/omap/omap_hsmmc.0/mmc_host/mmc0</b>
dev_mount usb /mnt/usb2 auto /devices/platform/omap/ti81xx-usbss/musb-hdrc.1/usb2
</pre>
<p>Depending on the interface used these values can change. Best way is to probe sysfs directories to find the fixed name. For MMC the entry will be of the form:
</p>
<pre> /sys/devices/platform/omap/omap_hsmmc.X/mmc_host/mmcY
</pre>
<h1><span class="mw-headline" id="Touchscreen">Touchscreen</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=36" title="Edit section: Touchscreen">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_6">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=37" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The touch controller is TSCADC with ADC interface (in AM335x EVM). This is resistive touch screen controllers.
</p>
<h2><span class="mw-headline" id="Features_Overview_6">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=38" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The features supported by Touchscreen in Android are:
</p>
<ul><li>Single touch input</li>
<li>Single click</li>
<li>Single long click</li>
<li>Uni-direction motion touch</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration_6">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=39" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Add_touchscreen_driver_support">Add touchscreen driver support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=40" title="Edit section: Add touchscreen driver support">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Start the <i>Linux Kernel Configuration</i> tool:</li></ul>
<pre>    $ make ARCH=arm menuconfig
</pre> 
<ul><li>Select <span style="color: BLUE;"><i>Device Drivers</i></span> from the main menu.</li></ul>
<pre>   ...
   Power management options ---&gt;
   [*] Networking support ---&gt;
   <b>Device Drivers ---&gt;</b>
   File systems ---&gt;
   Kernel hacking ---&gt;
   ...
</pre>
<ul><li>Select <span style="color: BLUE;"><i>Input device support</i></span> form the next menu:</li></ul>
<pre>   ...
   [ ] ISDN support  ---&gt;
   &lt; &gt; Telephony support  ---&gt;
   <b>Input device support  ---&gt;</b>
   Character devices  ---&gt;
   -*- I2C support  ---&gt;
   ...
</pre>
<ul><li>Select <span style="color: BLUE;"> <i>Touchscreens</i> </span> from the next menu:</li></ul>
<pre>   ...
   [ ]   Joysticks/Gamepads  ---&gt;
   [ ]   Tablets  ---&gt;
   <b>[*]   Touchscreens  ---&gt;</b>
   [*]   Miscellaneous devices  ---&gt;
   Hardware I/O ports  ---&gt;
   ...
</pre>
<ul><li>Select <span style="color: BLUE;"><i>TI Touchscreen Interface</i> </span> from the next menu:</li></ul>
<pre>   ...
   --- Touchscreens
   &lt; &gt;   Touchwin serial touchscreen
   <b>&lt;*&gt;   TI Touchscreen Interface</b>
   &lt; &gt;   USB Touchscreen Driver
   ...
</pre>
<ul><li>Add the ADC touch controller configuration values in board file (e.g. board-am335xevm.c).</li></ul>
<pre>static struct resource tsc_resources[]  = {
        [0] = {
                .start  = AM33XX_TSC_BASE,
                .end    = AM33XX_TSC_BASE + SZ_8K - 1,
                .flags  = IORESOURCE_MEM,
        },
        [1] = {
                .start  = AM33XX_IRQ_ADC_GEN,
                .end    = AM33XX_IRQ_ADC_GEN,
                .flags  = IORESOURCE_IRQ,
        },
};

static struct tsc_data am335x_touchscreen_data  = {
        .wires  = 4,
        .x_max = 0x0fff,
        .y_max = 0x0fff,
};

static struct platform_device tsc_device = {
        .name   = "tsc",
        .id     = -1,
        .dev    = {
                        .platform_data  = &amp;am335x_touchscreen_data,
        },
        .num_resources  = ARRAY_SIZE(tsc_resources),
        .resource       = tsc_resources,
};
</pre>
<p><i>See also: <a href="AM335x_Touchscreen_Driver%27s_Guide.html" title="AM335x Touchscreen Driver&#39;s Guide">AM335x Touchscreen Driver's Guide</a></i>
</p>
<h3><span class="mw-headline" id="Test_touch_driver_using_getevent">Test touch driver using getevent</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=41" title="Edit section: Test touch driver using getevent">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Once ADC Touchscreen driver is up through board file (e.g. board-am335xevm.c) configuration.</li>
<li>Test with AndroidFS as events are coming while touching the LCD display. Run on command prompt:</li></ul>
<pre>    # getevent
    add device 1: /dev/input/event1
      name:     "ti-tsc-adcc"

    /dev/input/event1: 0003 0000 00000659
    /dev/input/event1: 0003 0001 00000a31
    /dev/input/event1: 0001 014a 00000001
    /dev/input/event1: 0000 0000 00000000
    /dev/input/event1: 0003 0000 00000654
    /dev/input/event1: 0000 0000 00000000
    </pre>
<ul><li>It confirms that touch inputs and irq based event generation is working fine.</li></ul>
<h3><span class="mw-headline" id="Touch_Calibration">Touch Calibration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=42" title="Edit section: Touch Calibration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Touch inputs (x, y, pressure) need to calibrate based on touch controller used.</li>
<li>To define the touch input boundaries, the following macros are used in driver (e.g. drivers/input/touchscreen/ti_tscadc.c)
<ul><li><b>AM335X_XMIN</b> -- Minimum raw x input possible</li>
<li><b>AM335X_XMAX</b> -- Maximum raw x input possible</li>
<li><b>AM335X_YMIN</b> -- Minimux raw y input possible</li>
<li><b>AM335X_YMAX</b> -- Maximum raw y input possible</li></ul></li>
<li>add the log to get print of x, y and pressure values as raw and absolute both in function <b>tscadc_interrupt()</b>:</li></ul>
<pre>    /* Calibrate absolute value of x and y co-ordinate */
    val_x = ts_dev-&gt;x_max -
                ((ts_dev-&gt;x_max * (val_x - AM335X_TS_XMIN)) /
                    (AM335X_TS_XMAX - AM335X_TS_XMIN));
    val_y = ts_dev-&gt;y_max -
                ((ts_dev-&gt;y_max * (val_y - AM335X_TS_YMIN)) /
                    (AM335X_TS_YMAX - AM335X_TS_YMIN));
</pre>
<ul><li>Get the debug log for x, y and pressure at following points on the touchscreen
<ul><li>Left Top Most Point</li>
<li>Right Top Most Point</li>
<li>Left Bottom Down Point</li>
<li>Right Bottom Down Point</li></ul></li>
<li>Update the macros based on observation of above input points
<ul><li>set AM335X_XMIN value as "minimum x input possible value from the reading of left top most touch"</li>
<li>set AM335X_XMAX value as "maximum x input possible value from the reading of right top most touch"</li>
<li>set AM335X_YMIN value as "minimux y input possible value from the reading of left top most touch"</li>
<li>set AM335X_YMAX value as "maximum y input possible value from the reading of left bottom down touch"</li></ul></li></ul>
<p><i>Note:</i> Above four macros need to be fine tune to get the correct absolute value of x and y.
</p>
<ul><li>For example in ads7846.c:</li></ul>
<pre>#ifdef CONFIG_MACH_AM335XEVM
#define AM335X_XMIN           0x0A5
#define AM335X_XMAX           0xFB0
#define AM335X_YMIN           0x0DC
#define AM335X_YMAX           0xF43
#endif
</pre>
<p><span style="color: BLUE;"><b>Note:</b> sometimes calculation method return negative values. Then method needs some modification to get positive calculated touch inputs.</span>
<br />
</p>
<h3><span class="mw-headline" id="Test_Touch_Calibration_in_Android">Test Touch Calibration in Android</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=43" title="Edit section: Test Touch Calibration in Android">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Run android on the board.</li>
<li>select "Menu" -&gt; "Dev Tools" -&gt; "Pointer Location" utility</li>
<li>Touch and draw on the screen and observe that the expected points are getting marked on the LCD screen.</li>
<li>if drawing on LCD is not proper then driver needs to be fine tune the above mentioned macros.</li></ul>
<h1><span class="mw-headline" id="Keypad">Keypad</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=44" title="Edit section: Keypad">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_7">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=45" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The matrix gpio keypad and Volume gpio keys are in AM335x EVM. Here porting explanation for matrix gpio keypad controller.
</p>
<h2><span class="mw-headline" id="Features_Overview_7">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=46" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>3x2 matrix key layout supported</li>
<li>single click input</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration_7">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=47" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b> Add keypad driver support </b>
</p>
<ul><li>start the <i>Linux Kernel Configuration</i> tool:</li></ul>
<pre>    $ make ARCH=arm menuconfig
</pre> 
<ul><li>Select <span style="color: BLUE;"><i>Device Drivers</i></span> from the main menu.</li></ul>
<pre>    ...
    Power management options ---&gt;
    [*] Networking support ---&gt;
    '''Device Drivers ---&gt;'''
    File systems ---&gt;
    Kernel hacking ---&gt;
    ...</pre>
<ul><li>Select <span style="color: BLUE;"><i>Input device support</i></span> form the next menu:</li></ul>
<pre>    ...
    [ ] ISDN support  ---&gt;
    &lt; &gt; Telephony support  ---&gt;
    '''Input device support  ---&gt;'''
    Character devices  ---&gt;
    -*- I2C support  ---&gt;
    ...</pre>
<ul><li>Select <span style="color: BLUE;"> <i>Keyboards</i> </span> from the next menu:</li></ul>
<pre>    ...
    &lt; &gt;   Reset key
          *** Input Device Drivers ***
    '''[*]   Keyboards  ---&gt;'''
    [ ]   Mice  ---&gt;
    [ ]   Joysticks/Gamepads  ---&gt;
....</pre>
<ul><li>Select <span style="color: BLUE;"> <i>GPIO driven matrix keypad support</i> and <i>GPIO Buttons</i></span> from the next menu:</li></ul>
<pre>    ....
 &lt; &gt;   DECstation/VAXstation LK201/LK401 keyboard
 &lt;*&gt;   GPIO Buttons
 &lt; &gt;   Polled GPIO buttons
 &lt; &gt;   TCA6416/TCA6408A Keypad Support
 &lt;*&gt;   GPIO driven matrix keypad support
 &lt; &gt;   Maxim MAX7359 Key Switch Controller
....</pre>
<p><b>Board-specific Configuration</b>
The board-specific configuration includes, specifying the GPIOs, no. of rows and columns, debounce, scan settings etc. The following code snippet shows the configuration for AM335x EVM (arch/arm/mach-omap2/board-am335xevm.c).
</p>
<pre>static const uint32_t am335x_evm_matrix_keys[] = {
        KEY(0, 0, KEY_MENU),
        KEY(1, 0, KEY_BACK),
        KEY(2, 0, KEY_LEFT),

        KEY(0, 1, KEY_RIGHT),
        KEY(1, 1, KEY_ENTER),
        KEY(2, 1, KEY_DOWN),
};

const struct matrix_keymap_data am335x_evm_keymap_data = {
        .keymap      = am335x_evm_matrix_keys,
        .keymap_size = ARRAY_SIZE(am335x_evm_matrix_keys),
};

static const unsigned int am335x_evm_keypad_row_gpios[] = {
        GPIO_TO_PIN(1, 25), GPIO_TO_PIN(1, 26), GPIO_TO_PIN(1, 27)
};

static const unsigned int am335x_evm_keypad_col_gpios[] = {
        GPIO_TO_PIN(1, 21), GPIO_TO_PIN(1, 22)
};

static struct matrix_keypad_platform_data am335x_evm_keypad_platform_data = {
        .keymap_data       = &amp;am335x_evm_keymap_data,
        .row_gpios         = am335x_evm_keypad_row_gpios,
        .num_row_gpios     = ARRAY_SIZE(am335x_evm_keypad_row_gpios),
        .col_gpios         = am335x_evm_keypad_col_gpios,
        .num_col_gpios     = ARRAY_SIZE(am335x_evm_keypad_col_gpios),
        .active_low        = false,
        .debounce_ms       = 5,
        .col_scan_delay_us = 2,
};

...

static struct gpio_keys_button am335x_evm_volume_gpio_buttons[] = {
        {
                .code                   = KEY_VOLUMEUP,
                .gpio                   = GPIO_TO_PIN(0, 2),
                .active_low             = true,
                .desc                   = "volume-up",
                .type                   = EV_KEY,
                .wakeup                 = 1,
        },
        {
                .code                   = KEY_VOLUMEDOWN,
                .gpio                   = GPIO_TO_PIN(0, 3),
                .active_low             = true,
                .desc                   = "volume-down",
                .type                   = EV_KEY,
                .wakeup                 = 1,
        },
};

static struct gpio_keys_platform_data am335x_evm_volume_gpio_key_info = {
        .buttons        = am335x_evm_volume_gpio_buttons,
        .nbuttons       = ARRAY_SIZE(am335x_evm_volume_gpio_buttons),
};
</pre>
<p><b> Test keypad driver using getevent </b>
</p>
<ul><li>Once matrix gpio keypad and volume gpio keys driver is up through board file (e.g. board-am335xevm.c) configuration.</li>
<li>Test with AndroidFS as events are coming while pressing the keys. Run on command prompt:</li></ul>
<pre>    # getevent
    add device 1: /dev/input/event2
            name: "gpio-keys"
    add device 2: /dev/input/event0
            name: "matrix-keypad"

    /dev/input/event0: 0004 0004 00000002
    /dev/input/event0: 0001 009e 00000001
    /dev/input/event0: 0000 0000 00000000
    /dev/input/event0: 0004 0004 00000002
    /dev/input/event0: 0001 009e 00000000
    /dev/input/event0: 0000 0000 00000000
    </pre>
<ul><li>It confirms that keypad inputs and irq based event generation is working fine.</li></ul>
<h2><span class="mw-headline" id="Android_Keypad_Configuration">Android Keypad Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=48" title="Edit section: Android Keypad Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>The &lt;matrix keypad driver name&gt;.kl (e.g. QWERTY_Keypad.kl) should be present in root directory of AndroidFS.</li>
<li>Check and confirm the key mappings are same as expected.</li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="NAND">NAND</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=49" title="Edit section: NAND">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 10, 10);">
<p><b>Important Note</b><br />This section is not applicable for TI-Android-GingerBread-2.3.4-DevKit-2.1.1 and shall be updated later.
</p>
</div><p><br />
</p><h2><span class="mw-headline" id="Introduction_8">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=50" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of porting guide will describe the NAND layout present on AM335x EVM and how to integrate Fastboot functionality in u-boot. Micron MT29F2G08ABA Nand part (AM335x EVM) is supported.
</p><p><b>NAND Layout</b>
</p><p>The NAND on the EVM has been configured in the following manner.
</p>
<pre> +------------+--&gt;0x00000000-&gt; SPL start
 |            |
 |            |--&gt;0x0001FFFF-&gt; SPL end  
 |            |--&gt;0x00020000-&gt; SPL.backup1 start
 |            |
 |            |--&gt;0x0003FFFF-&gt; SPL.backup1 end  
 |            |--&gt;0x00040000-&gt; SPL.backup2 start
 |            |
 |            |--&gt;0x0005FFFF-&gt; SPL.backup2 end  
 |            |--&gt;0x00060000-&gt; SPL.backup3 start
 |            |
 |            |--&gt;0x0007FFFF-&gt; SPL.backup3 end  
 |            |--&gt;0x00080000-&gt; U-Boot start
 |            |
 |            |--&gt;0x0025FFFF-&gt; U-Boot end  
 |            |--&gt;0x00260000-&gt; U-Boot ENV start
 |            |
 |            |
 |            |--&gt;0x0027FFFF-&gt; ENV end
 |            |--&gt;0x00280000-&gt; Linux Kernel start
 |            |
 |            |
 |            |
 |            |
 |            |--&gt;0x0077FFFF-&gt; Linux Kernel end
 |            |--&gt;0x00780000-&gt; Filesystem start
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 +------------+--&gt;0x10000000-&gt; Filesystem end
</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Features_Overview_8">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=51" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><br />
</p>
<h2><span class="mw-headline" id="Driver_Configuration_8">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=52" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Start the Kernel configuration tool to enable/disable NAND and UBIFS support:</li></ul>
<pre>$ make ARCH=arm menuconfig
</pre>
<ul><li>Enable NAND support from the main menu. Select Device Drivers -&gt; MTD support -&gt; NAND support.</li></ul>
<pre>-&gt; Device Drivers
   -&gt; Memory Technology Device (MTD) support (MTD [=y])
      -&gt; NAND Device Support (MTD_NAND [=y])     
</pre>
<ul><li>Enable UBI support. Select Device Drivers -&gt; MTD support -&gt; Enable UBI.</li></ul>
<pre>-&gt; Device Drivers
   -&gt; Memory Technology Device (MTD) support (MTD [=y])
      -&gt; Enable UBI - Unsorted block images (MTD_UBI [=y])
</pre>
<ul><li>Enable UBIFS support. Select Filesystems -&gt; Misc filesystems -&gt; UBIFS support.</li></ul>
<pre>-&gt; File systems
   -&gt; Miscellaneous filesystems (MISC_FILESYSTEMS [=y])
      -&gt; UBIFS file system support (UBIFS_FS [=y])
</pre>
<p><br />
</p>
<h2><span class="mw-headline" id="Fastboot">Fastboot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=53" title="Edit section: Fastboot">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Fastboot flashing utility is for updating the different software components of Android. Here is a guide to re-flash the spl, u-boot, kernel and root-filesystem (UBIFS image). This guide assume that Rowboat has been compiled before trying out these instructions.
</p>
<h3><span class="mw-headline" id="Establishing_Fastboot_connectivity">Establishing Fastboot connectivity</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=54" title="Edit section: Establishing Fastboot connectivity">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Connect serial port to host PC via null modem cable.</li>
<li>Serial port settings: 115200 8N1, No flow control.</li>
<li>Apply power to the board.</li>
<li>Press any key in serial port utility during boot and get U-boot command prompt.</li>
<li>Run "fastboot" on u-boot command prompt (u-boot will echo "fastboot initialized").</li>
<li>Connect USB cable between USB OTG port of the board and host PC.</li></ul>
<p><b> Setup on Linux host </b>
</p>
<ul><li>On command prompt, run</li></ul>
<pre>   $ export ANDROID_ROOT=&lt;rowboat top level directory&gt;
</pre>
<pre>   $ cd $ANDROID_ROOT/out/host/linux-x86/bin
</pre>
<pre>   $ sudo ./fastboot devices
</pre>
<p>if a device number is echoed, fastboot is working.
</p><p><b> Setup on Windows host </b>
</p>
<ul><li>Refer <a rel="nofollow" class="external text" href="TI-Android-FroYo-DevKit-V2_UserGuide.html#adb_over_USB_on_Windows_Machine">ADB over USB on Windows Machine</a></li>
<li>Edit android_winusb.inf - under section [Google.NTx86], add line as below:</li></ul>
<pre>  &#160;%SingleBootLoaderInterface% = USB_Install, USB\VID_0451
</pre>
<ul><li>Proceed installing, with the difference that device to be selected is "Android Bootloader Interface" instead of "Android ADB Interface".</li></ul>
<h3><span class="mw-headline" id="Supported_Fastboot_commands">Supported Fastboot commands</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=55" title="Edit section: Supported Fastboot commands">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>   $ export ANDROID_ROOT=&lt;rowboat_top_level_build_directory&gt;
</pre>
<pre>   $ cd $ANDROID_ROOT/out/host/linux-x86/bin
</pre>
<ul><li>List connected devices</li></ul>
<pre>   $ sudo ./fastboot devices
</pre>
<ul><li>Boot with new kernel image</li></ul>
<pre>   $ sudo ./fastboot boot &lt;image_path&gt;
</pre>
<ul><li>Update <i>images</i></li></ul>
<pre>   $ sudo ./fastboot flash &lt;image_name&gt; &lt;image_path&gt;
</pre>
<p><b>Note:</b> Where "image_name" can be spl, uboot, kernel or filesystem.
</p>
<ul><li>Erasing <i>images</i> or partition.</li></ul>
<pre>   $ sudo ./fastboot erase &lt;partition_name&gt; (eg. spl)
</pre>
<p><b>Note:</b> Where "partition_name" can be spl, uboot, environment, kernel or filesystem.
</p>
<ul><li>Display fastboot variable</li></ul>
<pre>   $ sudo ./fastboot getvar &lt;variable&gt;
</pre>
<ul><li>Exit fastboot mode in uboot</li></ul>
<pre>   $ sudo ./fastboot continue
</pre>
<h3><span class="mw-headline" id="Fastboot_Porting_guide">Fastboot Porting guide</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=56" title="Edit section: Fastboot Porting guide">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Fastboot implementation have a generic board independent function driver (cmd_fastboot.c), which will communicate with USB gadget driver, in the present case USB gadget stack is handled by MUSB driver. In the board dependent files, configurations like the available partition name, offset, size, method of <i>nand write</i> etc are defined.
</p><p>In the <i>Config file</i>:
</p>
<ul><li>Enable CONFIG_FASTBOOT</li>
<li>Enable CONFIG_MUSB_UDC, disable CONFIG_MUSB_HCD (assumption: gadget driver used is MUSB)</li>
<li>Enable CONFIG_CMD_FASTBOOT</li>
<li>Define CONFIG_FASTBOOT_TRANSFER_BUFFER (location to which fastboot data has to be downloaded)</li>
<li>Define CONFIG_FASTBOOT_TRANSFER_BUFFER_SIZE (maximum fastboot data that can be downloaded, make sure it does not overlap bootloader memory)</li>
<li>Define FASTBOOT_NAND_BLOCK_SIZE</li>
<li>Define FASTBOOT_NAND_OOB_SIZE</li>
<li>Define FASTBOOT_PRODUCT_NAME, make sure that string is same as value of TARGET_PRODUCT used for compiling Android</li>
<li>Define USB_BCD_VERSION to 0x0200, if HS USB support is required</li></ul>
<p>In the <i>Board file</i>:
</p>
<ul><li>Add header file - fastboot.h</li>
<li>Define "struct fastboot_ptentry" array with entries equal to the number of partitions required</li>
<li>Each entry to have name - this is the variable used for flashing, erasing.</li>
<li>Each entry to provide NAND start address &amp; length</li>
<li>Each entry to specify flags, options as follows,</li>
<li>FASTBOOT_PTENTRY_FLAGS_WRITE_HW_ECC - flash the partition using HW ECC</li>
<li>FASTBOOT_PTENTRY_FLAGS_HW_ECC_LAYOUT_1 - Sets the NANDECC to use Kernel/FS layout for writing</li>
<li>FASTBOOT_PTENTRY_FLAGS_HW_ECC_LAYOUT_2 - Sets the NANDECC to use X-loader/U-boot layout for writing</li>
<li>FASTBOOT_PTENTRY_FLAGS_WRITE_SW_ECC - flash the partition using SW ECC</li>
<li>FASTBOOT_PTENTRY_FLAGS_WRITE_I - Use write.i for NAND write</li>
<li>FASTBOOT_PTENTRY_FLAGS_WRITE_JFFS2 - Use write.jffs2 for NAND write</li>
<li>FASTBOOT_PTENTRY_FLAGS_WRITE_ENV - Add this flag to indicate to fastboot driver the partition for storing environmental variable</li>
<li>FASTBOOT_PTENTRY_FLAGS_REPEAT_4 - Use this to indicate that partition will be written 4 times</li>
<li>Additional flags can be defined to write till 15 times, last 4 bits are reserved for repeat value, Define required value &amp; OR the value in flag</li>
<li>Invoke fastboot API, ' fastboot_flash_add_ptn' for each partition so as to inform about the partition details to fastboot driver.</li></ul>
<p><i>Notes</i>
</p>
<ul><li>Existing USB gadget supported only FS, this was modified so that HS USB can be handled. Changes were done in USB header files, MUSB files.</li>
<li>AM335X was having problems due to the wrapper over MUSB IP. Fix in MUSB UDC; read TI EP interrupt register instead of MUSB register.</li>
<li>A fix with respect to the index for EP array has also been done.</li>
<li>MUSB EP setup has been modified to be more in line with the USB TRM.</li>
<li>Portions of the code that has been ported from OmapZoom is included within the macro FASTBOOT_PORT_OMAPZOOM_NAND_FLASHING.</li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="USB_Host_and_Gadget">USB Host and Gadget</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=57" title="Edit section: USB Host and Gadget">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_9">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=58" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For AM335x the usb0 or usb1 can either act as Host or device mode. On the AM335x EVM, usb0 is set up for device mode and usb1 is set up for host mode operation. We use the Android USB Gadget driver on usb0 to enable the adb feature.
</p>
<h2><span class="mw-headline" id="Driver_Configuration_9">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=59" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>USB support for host and device mode is enabled in the kernel as shown below:
</p>
<pre>Device Drivers  ---&gt;
  [*] USB support  ---&gt;
    &lt;*&gt;   Support for Host-side USB
    &lt;*&gt;   Inventra Highspeed Dual Role Controller (TI, ADI, ...)
            *** Platform Glue Layer ***
          ...
    &lt;*&gt;     TI81XX onward
    [*]   Disable DMA (always use PIO)
    &lt;*&gt;   USB Mass Storage support
    ...
    &lt;*&gt;   USB Gadget Support  ---&gt;
        &lt;*&gt;   USB Peripheral Controller (Inventra HDRC USB Peripheral (TI, ADI, ...))  ---&gt;
        &lt;*&gt;   USB Gadget Drivers (Android Gadget)  ---&gt;
        ...
        &lt;M&gt;       Android gadget Zero (DUMMY)
</pre>
<p><i>See also: <a href="AM335x_USB_Driver%27s_Guide.html" title="AM335x USB Driver&#39;s Guide">AM335x USB Driver's Guide</a></i>
</p>
<h2><span class="mw-headline" id="Android_USB_Configuration">Android USB Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=60" title="Edit section: Android USB Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>Android USB Gadget Configuration</b>
</p><p>The Android gadget driver is enabled via the script at <b>/system/bin/usb/rc.usb</b>. For enabling Android gadget features, the following sysfs entries are done after the gadget driver is loaded and running:
</p>
<pre>echo 0       &gt; /sys/class/android_usb/android0/enable
echo adb,acm &gt; /sys/class/android_usb/android0/functions
echo 2       &gt; /sys/class/android_usb/android0/f_acm/instances
echo 1       &gt; /sys/class/android_usb/android0/enable
</pre>
<p>The sysfs settings need to be done depending on the features required to be enabled. The above settings enable <i>adb</i> and <i>acm</i> modes in the Android gadget driver.
</p>
<h1><span class="mw-headline" id="USB_Mass_storage">USB Mass storage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=61" title="Edit section: USB Mass storage">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The USB mass storage device class, otherwise known as USB MSC or UMS, is a protocol that allows file transfers between device and host to which it is connected. Mass storage is very good source of carrying media as well as other data files.
</p>
<h2><span class="mw-headline" id="Introduction_10">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=62" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The Android system uses vold as the mount daemon which detects, mounts and monitors the status of external storage.This mount daemon needs a configuration file(vold.fstab) to determine the mount device and location where it should be mounted.<br />
Vold reads /etc/vold.fstab configuration file and mounts the device specified in the file.
The basic format of the vold.fstab is
</p>
<pre>  dev_mount &lt;label&gt; &lt;mount_point&gt; &lt;part&gt; &lt;sysfs_path1...&gt; 
  
  where
  label - Label for the volume
  mount_point - Where the volume will be mounted
  part - Partition # (1 based), or 'auto' for first usable partition.
  &lt;sysfs_path&gt; - List of sysfs paths to source devices
</pre>
<p>sysfs_path is the full or partial path where kernel exports the udev information about the device currently pluged into system.<br />
See system/core/rootdir/etc/vold.fstab in the Android source tree for the detailed explanations of the format.
</p>
<h2><span class="mw-headline" id="Android_Configuration_for_USB_mass_storage">Android Configuration for USB mass storage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=63" title="Edit section: Android Configuration for USB mass storage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In case of AM335xevm, Kernel populates udev entries for the following path for USB.
</p>
<pre>  /sys/devices/platform/omap/ti81xx-usbss/musb-hdrc.1/usb2
</pre>
<p>The following changes are done to detect connected usb mass storage device and mount/unmount it automatically when plugged/unplugged.
</p>
<ul><li>An entry is added in vold.fstab for USB storage</li></ul>
<pre>  dev_mount sdcard /mnt/sdcard 3 /devices/platform/omap/omap_hsmmc.0/mmc_host/mmc0
  <b>dev_mount usb /mnt/usb2 auto /devices/platform/omap/ti81xx-usbss/musb-hdrc.1/usb2</b>
</pre>
<ul><li>init.rc is updated as follows</li></ul>
<pre># create mountpoints
    mkdir /mnt 0775 root system
    mkdir /mnt/sdcard 0000 system system
    <b>mkdir /mnt/usb2 0000 system system</b>

... 
# Backwards Compat - XXX: Going away in G*
    symlink /mnt/sdcard /sdcard
    <b>symlink /mnt/usb2 /usb2</b>

    mkdir /system
    mkdir /data 0771 system system
</pre>
<h2><span class="mw-headline" id="Test_mass_storage_in_Android">Test mass storage in Android</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=64" title="Edit section: Test mass storage in Android">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Connect USB mass storage device to board and check whether it is mounted properly.
</p>
<ul><li>Use mount command to see the list of mount points. Here is the sample output of mount command.</li></ul>
<pre>  # mount
  rootfs / rootfs rw 0 0
  /dev/root / ext3 rw,relatime,errors=continue,barrier=1,data=writeback 0 0
  tmpfs /dev tmpfs rw,relatime,mode=755 0 0
  devpts /dev/pts devpts rw,relatime,mode=600 0 0
  proc /proc proc rw,relatime 0 0
  sysfs /sys sysfs rw,relatime 0 0
  tmpfs /mnt/asec tmpfs rw,relatime,mode=755,gid=1000 0 0
  /dev/block/mmcblk0p3 /part-3 vfat rw,relatime,fmask=0000,dmask=0000,allow_utime=0022,codepage=cp437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0
  /dev/block/vold/179:3 /mnt/sdcard vfat rw,nosuid,nodev,noexec,relatime,fmask=0000,dmask=0000,allow_utime=0022,codepage=cp437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0
  /dev/block/vold/179:3 /mnt/secure/asec vfat rw,nosuid,nodev,noexec,relatime,fmask=0000,dmask=0000,allow_utime=0022,codepage=cp437,iocharset=iso8859-1,shortname=mixed,errors=remount-ro 0 0
  tmpfs /mnt/sdcard/.android_secure tmpfs ro,relatime,size=0k,mode=000 0 0
  <b>/dev/block/vold/8:1 /mnt/usb2 vfat rw,dirsync,nosuid,nodev,noexec,relatime,uid=1000,gid=1015,fmask=0702,dmask=0702,allow_utime=0020,codepage=cp437,iocharset=iso8859-1,shortname=mixed,utf8,errors=remount-ro 0 0</b>
  /dev/block/vold/8:1 /mnt/secure/asec vfat rw,dirsync,nosuid,nodev,noexec,relatime,uid=1000,gid=1015,fmask=0702,dmask=0702,allow_utime=0020,codepage=cp437,iocharset=iso8859-1,shortname=mixed,utf8,errors=remount-ro 0 0
  tmpfs /mnt/usb2/.android_secure tmpfs ro,relatime,size=0k,mode=000 0 0
</pre>
<ul><li>Run OI File Manager application and see whether usb2 directory is populated with the contents of the USB mass storage device.</li></ul>
<p><a href="File_Am335x-filemanager-usb2.html" class="image" title="Browsing to usb2 directory using OI File Manager"><img alt="Browsing to usb2 directory using OI File Manager" src="https://processors.wiki.ti.com/images/d/d9/Am335x-filemanager-usb2.png" width="800" height="480" /></a>
</p>
<h1><span class="mw-headline" id="USB_3G_Modem">USB 3G Modem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=65" title="Edit section: USB 3G Modem">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The USB 3G Modem section describes how to connect USB Modem to the android.
</p>
<h2><span class="mw-headline" id="Introduction_11">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=66" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>PPP is the protocol used for establishing internet links over dial-up modems, DSL connections, and many other types of point-to-point links. The pppd daemon works together with the kernel PPP driver to establish and maintain a PPP link with another system (called the peer) and to negotiate Internet Protocol (IP) addresses for each end of the link.
</p>
<h2><span class="mw-headline" id="Kernel_Configuration_for_USB_Modem">Kernel Configuration for USB Modem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=67" title="Edit section: Kernel Configuration for USB Modem">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Device Drivers  ---&gt;
</p>
<pre> [*] Network device support  ---&gt;
   &lt;*&gt;   PPP (point-to-point protocol) support
     &lt;*&gt;     PPP BSD-Compress compression
     &lt;*&gt;     PPP Deflate compression
     &lt;*&gt;     PPP support for async serial ports
     &lt;*&gt;     PPP support for sync tty ports
 [*] USB support  ---&gt;
   &lt;*&gt;   USB Modem (CDC ACM) support
   &lt;*&gt;   USB Serial Converter support  ---&gt;
     [*]   USB Generic Serial Driver
     &lt;*&gt;   USB driver for GSM and CDMA modems
</pre>
<h2><span class="mw-headline" id="File_System_Changes">File System Changes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=68" title="Edit section: File System Changes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To get the Modem Working, we need usb_modeswitch, usb_modeswicth.conf(configuration file) for the specific modem or Hardware vendor and the airtel.chat(dialer script) for the specific network. 
</p>
<ul><li>Copy the usb_modeswitch (ARM Compiled binary) and usb_modeswitch.conf to the /system/xbin folder. The ARM compiled binary and the sources can be obtained from <a rel="nofollow" class="external text" href="http://www.draisberghof.de/usb_modeswitch/#download">HERE</a></li>
<li>Copy the airtel.chat(dialer script) to the /system/etc/ppp folder</li></ul>
<p>Below is the description of an example usb_modeswitch.conf file for the Huawei E1731 Modem (Airtel in India) 
</p>
<pre>  Huawei E1731

  EnableLogging=1

  DefaultVendor= 0x12d1
  DefaultProduct=0x1446

  TargetVendor=  0x12d1
  TargetProductList="1001,1406,140b,140c,1412,141b,1436,14ac,1506"

  CheckSuccess=20

  MessageEndpoint= 0x01
  MessageContent="55534243123456780000000000000011062000000100000000000000000000"
</pre>
<p><br /> The DefaultVendor and DefaultProduct is the ID displayed for CDROM or mass storage, the TargetVendor and TargetProduct is for Modem. Plug the device into linux system and do "dmesg" or "lsusb" to know the IDs. 
</p><p>Example: HUAWEI E1731 Modem Below is the log when plugged to PC 
</p>
<pre>   [6663132.917033] usb 1-4: new high speed USB device number 10 using ehci_hcd
   [6663133.033394] usb 1-4: New USB device found, <b>idVendor=12d1, idProduct=1446</b>
[6663133.033400] usb 1-4: New USB device strings: Mfr=3, Product=2, SerialNumber=0
[6663133.033404] usb 1-4: Product: HUAWEI Mobile
[6663133.033407] usb 1-4: Manufacturer: HUAWEI Technology
[6663133.036040] scsi16&#160;: usb-storage 1-4:1.0
[6663133.036652] scsi17&#160;: usb-storage 1-4:1.1
[6663133.685546] usb 1-4: USB disconnect, device number 10
[6663137.665047] usb 1-4: new high speed USB device number 11 using ehci_hcd
[6663137.781645] usb 1-4: New USB device found, <b>idVendor=12d1, idProduct=1436</b>
[6663137.781651] usb 1-4: New USB device strings: Mfr=4, Product=3, SerialNumber=0
[6663137.781654] usb 1-4: Product: HUAWEI Mobile
[6663137.781657] usb 1-4: Manufacturer: HUAWEI Technology
[6663137.784476] option 1-4:1.0: GSM modem (1-port) converter detected
[6663137.784663] usb 1-4: GSM modem (1-port) converter now attached to ttyUSB0
[6663137.786425] cdc_ether 1-4:1.1: wwan0: register 'cdc_ether' at usb-0000:00:1d.7-4, Mobile Broadband Network Device, 02:50:f3:00:00:00
[6663137.788066] option 1-4:1.3: GSM modem (1-port) converter detected
[6663137.788268] usb 1-4: GSM modem (1-port) converter now attached to ttyUSB1
[6663137.788509] option 1-4:1.4: GSM modem (1-port) converter detected
[6663137.788646] usb 1-4: GSM modem (1-port) converter now attached to ttyUSB2
[6663137.789203] scsi22&#160;: usb-storage 1-4:1.5
[6663137.789812] scsi23&#160;: usb-storage 1-4:1.6
[6663138.790809] scsi 22:0:0:0: CD-ROM            HUAWEI   Mass Storage     2.31 PQ: 0 ANSI: 2
[6663138.791303] scsi 23:0:0:0: Direct-Access     HUAWEI   SD Storage       2.31 PQ: 0 ANSI: 2
[6663138.807169] sr1: scsi-1 drive
[6663138.808426] sr 22:0:0:0: Attached scsi CD-ROM sr1
[6663138.808593] sr 22:0:0:0: Attached scsi generic sg5 type 5
[6663138.809394] sd 23:0:0:0: Attached scsi generic sg6 type 0
[6663138.812181] sd 23:0:0:0: [sde] Attached SCSI removable disk
</pre>
<p>Below is the description of an example airtel.chat(dialer script) file for AirTel (INDIA) 
</p>
<pre>TIMEOUT 10
' ' <i><b>AT</b></i>
OK ATE1
OK AT+CGDCONT=1,"IP","airtelgprs.com"
OK "ATD*99***1#"
CONNECT ' '
</pre>
<p><b>NOTE</b>: the single quotes in the above chat file must be together. ie no space allowed.
</p><p>This file is network service provider dependent, so modify the <b>airtelgprs.com</b> according to your service provider.
</p>
<h2><span class="mw-headline" id="Usage">Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=69" title="Edit section: Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Below are the steps to perform once android boots up with the above necessary modifications
</p>
<ul><li>Disable wireless and ethernet settings</li>
<li>Plug the USB Modem</li>
<li>Run the following commands</li></ul>
<pre>   mount -t usbfs usbfs /proc/bus/usb
   /system/xbin/usb_modeswitch -I -W -c /system/xbin/usb_modeswitch.conf
</pre>
<p>Mount the usbfs file system to /proc/bus/usb. This is necessary to 	avoid the “Couldn’t opendir()” error you get otherwise on running 	usb_modeswitch.<br /> Once Mode Switch Succeeds, modem will be enumerated as /dev/ttyUSB* (* can be 0,1,2).<br /> If you place the usb_modeswitch and usb_modeswitch.conf at other place, change the above command accordingly.
</p>
<ul><li>Once Modem succeeds in enumeration, run the follwoing command</li></ul>
<pre>   /system/bin/pppd /dev/ttyUSB0 115200 persist defaultroute usepeerdns updetach crtscts noauth debug connect "/system/xbin/chat -v -s -f /system/etc/ppp/airtel.chat"
</pre>
<ul><li>From the logcat check what primary and secondary dns server IPs you got, you can kill the logcat after getting the IPs. Set those primary and secondary DNS server IPs for your device with the following commands replacing IP1 and IP2  with whatever IPs you got.</li></ul>
<pre>   setprop net.dns1 &lt;IP1&gt;
   setprop net.dns2 &lt;IP2&gt;
</pre>
<p>You are ready to browse that net after this if everything went well in the previous steps.<br /> Enjoy the 3G fast speed surfing on your device.
</p>
<h1><span class="mw-headline" id="Disclaimer">Disclaimer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=70" title="Edit section: Disclaimer">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>All components explained in this porting guide are validated against TI Android DevKit release 2.1.1 available for download  <a rel="nofollow" class="external text" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_tii/TI_Android_DevKit/TI_Android_GingerBread_2_3_4_DevKit_2_1_1/index_FDS.html">HERE</a></li>
<li>However guide can be taken as reference to port mentioned components on similar architecture.</li></ul>
<h1><span class="mw-headline" id="Technical_Support_and_Product_Updates">Technical Support and Product Updates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;section=71" title="Edit section: Technical Support and Product Updates">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>For further information or to report any problems, contact <a rel="nofollow" class="external free" href="http://e2e.ti.com/android">http://e2e.ti.com/android</a> or <a rel="nofollow" class="external free" href="http://support.ti.com/">http://support.ti.com</a>. <br /> For community support join <a rel="nofollow" class="external free" href="http://groups.google.com/group/rowboat">http://groups.google.com/group/rowboat</a> <br /> For IRC #rowboat on irc.freenode.net <br />
</p>
<!-- 
NewPP limit report
Cached time: 20201201020401
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.137 seconds
Real time usage: 0.144 seconds
Preprocessor visited node count: 554/1000000
Preprocessor generated node count: 926/1000000
Post‐expand include size: 56/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 8585/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    1.670      1 Template:Note
100.00%    1.670      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:13702-0!canonical and timestamp 20201201020401 and revision id 106191
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI-Android-GingerBread-2.3.4-DevKit-2.1.1 PortingGuides</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;oldid=106191">https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;oldid=106191</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_AM335x.html" title="Category:AM335x">AM335x</a></li><li><a href="Category_Android.html" title="Category:Android">Android</a></li><li><a href="Category_Sitara_Android.html" title="Category:Sitara Android">Sitara Android</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI-Android-GingerBread-2.3.4-DevKit-2.1.1+PortingGuides" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI-Android-GingerBread-2.3.4-DevKit-2.1-2.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI-Android-GingerBread-2.3.4-DevKit-2.1-2.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI-Android-GingerBread-2.3.4-DevKit-2.1-2.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI-Android-GingerBread-2.3.4-DevKit-2.1-2.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;oldid=106191" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 3 May 2012, at 02:39.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.137","walltime":"0.144","ppvisitednodes":{"value":554,"limit":1000000},"ppgeneratednodes":{"value":926,"limit":1000000},"postexpandincludesize":{"value":56,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":3,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":8585,"limit":5000000},"timingprofile":["100.00%    1.670      1 Template:Note","100.00%    1.670      1 -total"]},"cachereport":{"timestamp":"20201201020401","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":231});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI-Android-GingerBread-2.3.4-DevKit-2.1.1_PortingGuides by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:15:43 GMT -->
</html>
