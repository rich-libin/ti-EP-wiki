<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 05:43:43 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway","wgTitle":"Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway","wgCurRevisionId":231255,"wgRevisionId":231255,"wgArticleId":45690,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":[],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway","wgRelevantArticleId":45690,"wgRequestId":"de66c3eda86178886561958a","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway rootpage-Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Adding_New_Sensor_Support_To_Sub1GHz_Sensor_to_Cloud_Linux_Gateway"><span class="tocnumber">1</span> <span class="toctext">Adding New Sensor Support To Sub1GHz Sensor to Cloud Linux Gateway</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Requirements"><span class="tocnumber">1.1</span> <span class="toctext">Requirements</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Sensor_To_Cloud_-_Running_Final_Version_with_Generic_Sensor"><span class="tocnumber">2</span> <span class="toctext">Sensor To Cloud - Running Final Version with Generic Sensor</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Requirements_2"><span class="tocnumber">2.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Flashing_CC1310_LaunchPads"><span class="tocnumber">2.2</span> <span class="toctext">Flashing CC1310 LaunchPads</span></a>
<ul>
<li class="toclevel-3 tocsection-6"><a href="#Flash_Coprocessor"><span class="tocnumber">2.2.1</span> <span class="toctext">Flash Coprocessor</span></a></li>
<li class="toclevel-3 tocsection-7"><a href="#Flash_Sensor"><span class="tocnumber">2.2.2</span> <span class="toctext">Flash Sensor</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-8"><a href="#Start_Linux_Collector"><span class="tocnumber">2.3</span> <span class="toctext">Start Linux Collector</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Start_Local_Gateway_Application"><span class="tocnumber">2.4</span> <span class="toctext">Start Local Gateway Application</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#Connecting_Sensor_to_Local_Gateway_Application"><span class="tocnumber">2.5</span> <span class="toctext">Connecting Sensor to Local Gateway Application</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Using_the_Generic_Sensor_Function"><span class="tocnumber">2.6</span> <span class="toctext">Using the Generic Sensor Function</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-12"><a href="#Tutorial_-_Adding_a_Generic_Sensor_to_the_Sensor_To_Cloud_Gateway"><span class="tocnumber">3</span> <span class="toctext">Tutorial - Adding a Generic Sensor to the Sensor To Cloud Gateway</span></a>
<ul>
<li class="toclevel-2 tocsection-13"><a href="#Requirements_3"><span class="tocnumber">3.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Flash_Coprocessor_on_to_CC13x0_LaunchPad"><span class="tocnumber">3.2</span> <span class="toctext">Flash Coprocessor on to CC13x0 LaunchPad</span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#Add_Generic_Sensor_to_sensor_cc1310lp_CCS_Project"><span class="tocnumber">3.3</span> <span class="toctext">Add Generic Sensor to sensor_cc1310lp CCS Project</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Modifying_Code_in_the_sensor_generic_cc1310lp_Project."><span class="tocnumber">3.3.1</span> <span class="toctext">Modifying Code in the sensor_generic_cc1310lp Project.</span></a>
<ul>
<li class="toclevel-4 tocsection-17"><a href="#smsgs.h"><span class="tocnumber">3.3.1.1</span> <span class="toctext">smsgs.h</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#sensor.c"><span class="tocnumber">3.3.1.2</span> <span class="toctext">sensor.c</span></a></li>
<li class="toclevel-4 tocsection-19"><a href="#ssf.c"><span class="tocnumber">3.3.1.3</span> <span class="toctext">ssf.c</span></a></li>
<li class="toclevel-4 tocsection-20"><a href="#ssf.h"><span class="tocnumber">3.3.1.4</span> <span class="toctext">ssf.h</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Modify_the_.22Sensor_To_Cloud.22_application_to_add_the_Generic_Sensor"><span class="tocnumber">3.4</span> <span class="toctext">Modify the &quot;Sensor To Cloud&quot; application to add the Generic Sensor</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Modify_the_Linux_Based_Collector_to_add_Generic_Sensor"><span class="tocnumber">3.4.1</span> <span class="toctext">Modify the Linux Based Collector to add Generic Sensor</span></a>
<ul>
<li class="toclevel-4 tocsection-23"><a href="#smsgs.h_2"><span class="tocnumber">3.4.1.1</span> <span class="toctext">smsgs.h</span></a></li>
<li class="toclevel-4 tocsection-24"><a href="#collector.c"><span class="tocnumber">3.4.1.2</span> <span class="toctext">collector.c</span></a></li>
<li class="toclevel-4 tocsection-25"><a href="#collector.h"><span class="tocnumber">3.4.1.3</span> <span class="toctext">collector.h</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#appsrv.c"><span class="tocnumber">3.4.1.4</span> <span class="toctext">appsrv.c</span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#csf_linux.c"><span class="tocnumber">3.4.1.5</span> <span class="toctext">csf_linux.c</span></a></li>
<li class="toclevel-4 tocsection-28"><a href="#csf_linux.h"><span class="tocnumber">3.4.1.6</span> <span class="toctext">csf_linux.h</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-29"><a href="#Modify_the_IOT-Gateway_Application_to_add_the_Generic_Sensor"><span class="tocnumber">3.4.2</span> <span class="toctext">Modify the IOT-Gateway Application to add the Generic Sensor</span></a>
<ul>
<li class="toclevel-4 tocsection-30"><a href="#appClient.2Fappclient.js"><span class="tocnumber">3.4.2.1</span> <span class="toctext">appClient/appclient.js</span></a></li>
<li class="toclevel-4 tocsection-31"><a href="#appClient.2Fdevices.2Fdevice.js"><span class="tocnumber">3.4.2.2</span> <span class="toctext">appClient/devices/device.js</span></a></li>
<li class="toclevel-4 tocsection-32"><a href="#webserver.2FcollectorApp.html"><span class="tocnumber">3.4.2.3</span> <span class="toctext">webserver/collectorApp.html</span></a></li>
<li class="toclevel-4 tocsection-33"><a href="#webserver.2Fwebserver.js"><span class="tocnumber">3.4.2.4</span> <span class="toctext">webserver/webserver.js</span></a></li>
<li class="toclevel-4 tocsection-34"><a href="#iot-gateway.js"><span class="tocnumber">3.4.2.5</span> <span class="toctext">iot-gateway.js</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-35"><a href="#Run_the_Sensor_To_Cloud_gateway_with_Generic_Sensor"><span class="tocnumber">3.5</span> <span class="toctext">Run the Sensor To Cloud gateway with Generic Sensor</span></a>
<ul>
<li class="toclevel-3 tocsection-36"><a href="#Start_Linux_Collector_2"><span class="tocnumber">3.5.1</span> <span class="toctext">Start Linux Collector</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Start_Local_Gateway_Application_2"><span class="tocnumber">3.5.2</span> <span class="toctext">Start Local Gateway Application</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#Connecting_Sensor_to_Local_Gateway_Application_2"><span class="tocnumber">3.5.3</span> <span class="toctext">Connecting Sensor to Local Gateway Application</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#Using_the_Generic_Sensor_Function_2"><span class="tocnumber">3.5.4</span> <span class="toctext">Using the Generic Sensor Function</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Adding_New_Sensor_Support_To_Sub1GHz_Sensor_to_Cloud_Linux_Gateway">Adding New Sensor Support To Sub1GHz Sensor to Cloud Linux Gateway</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=1" title="Edit section: Adding New Sensor Support To Sub1GHz Sensor to Cloud Linux Gateway">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In this tutorial, we will go through all the necessary steps to add a generic sensor to the Sensor To Cloud application.
</p><p>Please Download the project from (<a rel="nofollow" class="external free" href="https://git.ti.com/apps/tidep0084">https://git.ti.com/apps/tidep0084</a>). Navigate to <code>/tutorials/generic_sensor_tutorial/</code> to get started. 
</p><p>In the <code>/final</code> folder, all the necessary changes to add the generic sensor to the project are already implemented and can be used as a reference. It also includes all hex files for the LaunchPads. Let's start by getting the <code>/final</code> project working first to see how our generic sensor will function.
</p><p>In the <code>/tutorial</code> folder, the original Sensor To Cloud project and necessary LaunchPad hex files are included. The tutorial README will walk through all the steps necessary to add the generic sensor to the project. Since the actual CCS projects are not included, you will need to copy these from the latest SDK.
</p>
<h2><span class="mw-headline" id="Requirements">Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=2" title="Edit section: Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>2x CC1310 LaunchPads (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/LAUNCHXL-CC1310">http://www.ti.com/tool/LAUNCHXL-CC1310</a>)</li>
<li>UniFlash (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>)</li>
<li>SIMPLELINK-CC13X0-SDK (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK">http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK</a>)</li>
<li>Code Composer Studio (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/CCSTUDIO">http://www.ti.com/tool/CCSTUDIO</a>)
<ul><li>Version must be supported in the current SIMPLELINK-CC13x0-SDK</li></ul></li>
<li>Linux machine (Ubuntu 14.04) or Beagle Bone Black (<a rel="nofollow" class="external text" href="http://www.ti.com/tool/PROCESSOR-SDK-AM335X">PROCESSOR-SDK-LINUX-AM335X</a>)
<ul><li>Node.js (already incldued in PROCESSOR-SDK-LINUX-AM335X)</li></ul></li></ul>
<p>To continue, there are two options: 
</p>
<ol><li>navigate to the <code>/final</code> folder and follow the README instructions to run the final project with the generic sensor already implemented. This will allow you to see your end goal when following the <code>/tutorial</code>. This also provides a reference to compare against after you have completed the <code>/tutorial</code>.</li>
<li>navigate to the <code>/tutorial</code> folder and follow the README instructions to follow the step by step instructions which illustrate via an example of generic sensor how to add new sensor support to the Sensor To Cloud gateway.</li></ol>
<p><br />
</p>
<h1><span class="mw-headline" id="Sensor_To_Cloud_-_Running_Final_Version_with_Generic_Sensor">Sensor To Cloud - Running Final Version with Generic Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=3" title="Edit section: Sensor To Cloud - Running Final Version with Generic Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This folder includes the final application with the generic sensor support added. This final applications purpose is to provide developers with the final code that you should have after completing the tutorial. Furthermore, developers can use the code and instructions to first run the completed application to visualize how the final application with generic sensor support added would function after following the tutorial. Let's get started!
</p>
<h2><span class="mw-headline" id="Requirements_2">Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=4" title="Edit section: Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>2x CC1310 LaunchPads (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/LAUNCHXL-CC1310">http://www.ti.com/tool/LAUNCHXL-CC1310</a>)</li>
<li>UniFlash (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>)</li>
<li>Linux machine (Ubuntu 14.04) or Beagle Bone Black (<a rel="nofollow" class="external text" href="http://www.ti.com/tool/PROCESSOR-SDK-AM335X">PROCESSOR-SDK-LINUX-AM335X</a>)
<ul><li>Node.js (already incldued in PROCESSOR-SDK-LINUX-AM335X)</li></ul></li></ul>
<h2><span class="mw-headline" id="Flashing_CC1310_LaunchPads">Flashing CC1310 LaunchPads</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=5" title="Edit section: Flashing CC1310 LaunchPads">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The necessary hex files have already been generated for you and are located in the <code>/final/hex/</code> folder. For the Sensor To Cloud project, we need a minimum of two CC1310 LaunchPads. One will act as the Coprocessor (to communicate between sensor nodes and the Linux collector application), and the other will act as a sensor node. We will use TI UniFlash to flash these LaunchPads with the appropriate firmware. Let's get started.
</p>
<h3><span class="mw-headline" id="Flash_Coprocessor">Flash Coprocessor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=6" title="Edit section: Flash Coprocessor">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>If you have not already, download UniFlash from <a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>.</li>
<li>Open UniFlash, connect one of the CC1310 LaunchPads to your compiter and choose the connected device in UniFlash.</li>
<li>Click &quot;Browse&quot; and select the <code>/final/hex/coprocessor_cc1310lp.hex</code> file.</li>
<li>Click the &quot;Load Image&quot; button to flash the image.</li></ol>
<h3><span class="mw-headline" id="Flash_Sensor">Flash Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=7" title="Edit section: Flash Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>If you have not already, download UniFlash from <a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>.</li>
<li>Open UniFlash, connect the second CC1310 LaunchPad to your compiter and choose the connected device in UniFlash.</li>
<li>Click &quot;Browse&quot; and select the <code>/final/hex/sensor_generic_cc1310lp.hex</code> file.</li>
<li>Click the &quot;Load Image&quot; button to flash the image.</li></ol>
<h2><span class="mw-headline" id="Start_Linux_Collector">Start Linux Collector</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=8" title="Edit section: Start Linux Collector">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>Copy the <code>/final/</code> folder to the Linux machine.</li>
<li>Open a terminal and navigate to the collector folder <code>../final/SensorToCloud/</code></li>
<li>Build all the necessary files for the project.
<ul><li><code>sudo ./build_all.sh</code></li></ul></li>
<li>Navigate to the collector folder <code>../final/SensorToCloud/example/collector/</code></li>
<li>Build the collector C project by running the following command.
<ul><li><code>sudo make clean</code></li>
<li><code>sudo make host</code></li></ul></li>
<li>Connect the CC1310 LaunchPad running the <code>coprocessor_cc1310lp</code> project to the Linux machine via USB.
<ul><li>If you are using a Virtual Machine, you must connect the LaunchPad device to the Virtual Machine.</li></ul></li>
<li>Check what serial port the CC1310 LaunchPad is connected to by running the following command.
<ul><li><code>ls -l /dev/ttyACM*</code></li></ul></li>
<li>The collector application is configured to look at <code>/dev/ttyACM0</code> by default. If the previous command did not return a device is connected to <code>/dev/ttyACM0</code> and <code>/dev/ttyACM1</code>, the port needs to be changed in the <code>collector.cfg</code> file.
<ul><li>To change the COM port, edit the <code>devname</code> parameter in the <code>/final/SensorToCloud/example/collector/collector.cfg</code> file. Save all changes.</li></ul></li>
<li>Run the <code>run_collector.sh</code> file that was generated during the build by running the following command in the <code>/final/SensorToCloud/example/collector</code> folder.
<ul><li><code>sudo ./run_collector.sh collector.cfg</code></li></ul></li>
<li>If successful, the Linux Collector will detect the &quot;coprocessor&quot; and then run in the background.
<ul><li>If it failed, try running the command again. Make sure CC1310 LaunchPad is on the proper port defined in the <code>collector.cfg</code> file.</li></ul></li></ol>
<h2><span class="mw-headline" id="Start_Local_Gateway_Application">Start Local Gateway Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=9" title="Edit section: Start Local Gateway Application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>Open a new terminal and navigate to the <code>../final/SensorToCloud/example/iot-gateway/</code> folder.</li>
<li>Install the necessary Node packages by running the following command.
<ul><li><code>npm install</code></li></ul></li>
<li>After all the necessary node modules have been installed, run the local gateway by entering the following command.
<ul><li><code>node iot-gateway.js localhost</code></li></ul></li>
<li>In a web browser, navigate to your &quot;localhost&quot; address, port 1350.
<ul><li><code><a rel="nofollow" class="external free" href="http://localhost:1350/">http://localhost:1350/</a></code></li></ul></li>
<li>If successful, you will see the &quot;TI 15.4-Stack Linux Gateway Example Application&quot; display.</li></ol>
<h2><span class="mw-headline" id="Connecting_Sensor_to_Local_Gateway_Application">Connecting Sensor to Local Gateway Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=10" title="Edit section: Connecting Sensor to Local Gateway Application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>Click the <code>Open</code> button on the left hand side to allow devices to connect to the network.</li>
<li>The CC1310 LaunchPad running the <code>sensor_generic_cc1310lp</code> project should then connect to the network and appear in the application table.
<ul><li>If the sensor does not connect and appear, attempt to RESET or reflash the Sensor LaunchPad device and try again.</li></ul></li></ol>
<h2><span class="mw-headline" id="Using_the_Generic_Sensor_Function">Using the Generic Sensor Function</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=11" title="Edit section: Using the Generic Sensor Function">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>The generic sensor will send a value that corresponds to the number of times BTN-2 on the Sensor LaunchPad is pressed. (each time BTN-2 is pressed, the generic sensor value is incremented)</li>
<li>The generic sensor button on the gateway application will send a command to the corresponding sensor to print &quot;Hello from Sensor To Cloud Gateway&quot; to a terminal.</li>
<li>On Windows:
<ul><li>To start a COM terminal with the Sensor LaunchPad, first connect the sensor LaunchPad to the Windows machine via USB.</li>
<li>Open &quot;Device Manager&quot; and determine the COM port the LaunchPad is connected to.</li>
<li>Using a program such as PuTTY, start a &quot;Serial&quot; terminal session on the determined COM port.</li></ul></li></ol>
<p>Congratulations, you have gotten the generic sensor working! Now let's try to follow the tutorial to see what it takes to actually implement the same generic sensor on the Sensor To Cloud gateway. Navigate back to the <code>../tutorial</code> folder to begin.
</p>
<h1><span class="mw-headline" id="Tutorial_-_Adding_a_Generic_Sensor_to_the_Sensor_To_Cloud_Gateway">Tutorial - Adding a Generic Sensor to the Sensor To Cloud Gateway</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=12" title="Edit section: Tutorial - Adding a Generic Sensor to the Sensor To Cloud Gateway">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This project adds a generic sensor support to the Sensor To Cloud gateway project and the Sensor example application running on the CC13x0 LaunchPad. For this tutorial, the generic sensor capabilities will only be added to the local gateway, no cloud based support will be included. It should however be easy to follow the same guidelines to add support for any new sensor to cloud service of choice.
</p><p>In this example, the generic sensor does the following: 
</p>
<ol><li>The generic sensor will send a value that corresponds to the number of times BTN-2 is pressed. (each time BTN-2 is pressed, the generic sensor value is incremented).</li>
<li>The generic sensor button on the gateway application will send a command to the corresponding sensor to print &quot;Hello from Sensor To Cloud Gateway&quot; to a terminal.</li></ol>
<p>This tutorial can be used as a reference to add any desired sensor for your end application.
</p>
<h2><span class="mw-headline" id="Requirements_3">Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=13" title="Edit section: Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>2x CC1310 LaunchPads (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/LAUNCHXL-CC1310">http://www.ti.com/tool/LAUNCHXL-CC1310</a>)</li>
<li>UniFlash (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>)</li>
<li>SIMPLELINK-CC13X0-SDK (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK">http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK</a>)</li>
<li>Code Composer Studio (<a rel="nofollow" class="external free" href="http://www.ti.com/tool/CCSTUDIO">http://www.ti.com/tool/CCSTUDIO</a>)
<ul><li>Version must be supported in the current SIMPLELINK-CC13x0-SDK</li></ul></li>
<li>Linux machine (Ubuntu 14.04) or Beagle Bone Black (<a rel="nofollow" class="external text" href="http://www.ti.com/tool/PROCESSOR-SDK-AM335X">PROCESSOR-SDK-LINUX-AM335X</a>)
<ul><li>Node.js (already incldued in PROCESSOR-SDK-LINUX-AM335X)</li></ul></li></ul>
<h2><span class="mw-headline" id="Flash_Coprocessor_on_to_CC13x0_LaunchPad">Flash Coprocessor on to CC13x0 LaunchPad</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=14" title="Edit section: Flash Coprocessor on to CC13x0 LaunchPad">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The coprocessor hex files are included in the <code>/tutorial/hex/</code> folder. Therefore you just need to simply flash this file to one of the LaunchPads.
</p>
<ol><li>If you have not already, download UniFlash from <a rel="nofollow" class="external free" href="http://www.ti.com/tool/UNIFLASH">http://www.ti.com/tool/UNIFLASH</a>.</li>
<li>Open UniFlash, connect one of the CC1310 LaunchPads to your compiter and choose the connected device in UniFlash.</li>
<li>Click &quot;Browse&quot; and select the <code>/tutorial/hex/coprocessor_cc1310lp.hex</code> file.</li>
<li>Click the &quot;Load Image&quot; button to flash the image.</li></ol>
<h2><span class="mw-headline" id="Add_Generic_Sensor_to_sensor_cc1310lp_CCS_Project">Add Generic Sensor to sensor_cc1310lp CCS Project</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=15" title="Edit section: Add Generic Sensor to sensor cc1310lp CCS Project">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li>Since the original <code>sensor_cc1310lp</code> project (which acts as the sensor node in the network) is not included in this tutorial, you will need to download and install the latest <code>simplelink_cc13x0_sdk</code> from <a rel="nofollow" class="external free" href="http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK">http://www.ti.com/tool/SIMPLELINK-CC13X0-SDK</a>.</li>
<li>Create a new workspace in CCS.</li>
<li>In CCS, import the <code>sensor_cc1310lp</code> project by going to &quot;Project&quot; --&gt; &quot;Import CCS Projects&quot;.</li>
<li>&quot;Browse&quot; for the folder containing the <code>sensor_cc1310lp</code> project. It should look similar to the path below.
<ul><li><code>C:\ti\simplelink_cc13x0_sdk_1_50_00_08\examples\rtos\CC1310_LAUNCHXL\ti154stack\</code></li></ul></li>
<li>Select the <code>sensor_cc1310lp</code> project from the &quot;Discovered Projects&quot; and click &quot;Finish&quot;.</li>
<li>Once the project is imported, Copy and paste the <code>sensor_cc1310lp</code> CCS project in the CCS Project Explorer window. Rename the new project <code>sensor_generic_cc1310lp</code>. All of the following changes should be made to this new project.</li></ol>
<p>For more details on the sensor example application and TI 15.4-Stack please refer to the TI 15.4-Stack User guide part of the CC13x0 SDK.
</p>
<h3><span class="mw-headline" id="Modifying_Code_in_the_sensor_generic_cc1310lp_Project.">Modifying Code in the <code>sensor_generic_cc1310lp</code> Project.</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=16" title="Edit section: Modifying Code in the sensor generic cc1310lp Project.">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li><ul><li><ul><li>PLEASE NOTE: The following code snippets include some of the original code as a reference to show you where to add the new code. Do not just blindly copy and paste the code! Note the <code>...</code> indicate that there is additional code. The original code snippets are based on SIMPLELINK-CC13x0-SDK V1.50.00.08. In future SDK releases, there may be slight differences in this tutorial and the projects in the latest SDK</li></ul></li></ul></li></ul>
<p>First thing we need to do is add the constants and definitions regarding the generic sensor in the <code>smsgs.h</code> file. This file defines the message structures that are sent and received over the air.
</p>
<h4><span class="mw-headline" id="smsgs.h">smsgs.h</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=17" title="Edit section: smsgs.h">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Add the constants that define the lengths of the sensor data size and commands.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/******************************************************************************
Constants and definitions
</p>
<ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li><ul><li>/</li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul></li></ul>
<p>...
...
/*! Toggle Led Request message length (over-the-air length) */
</p>
<ol><li>define SMSGS_TOGGLE_LED_RESPONSE_MSG_LEN 2</li></ol>
<p>/*! Length of the genericSensor portion of the sensor data message */
</p>
<ol><li>define SMSGS_SENSOR_GENERIC_LEN 2</li></ol>
<p>/*! Generic Request message length (over-the-air length) */
</p>
<ol><li>define SMSGS_GENERIC_REQUEST_MSG_LEN 1</li></ol>
<p>/*! Generic Request message length (over-the-air length) */ 
</p>
<ol><li>define SMSGS_GENERIC_RESPONSE_MSG_LEN 2</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>Define the command ID values for <code>Smsgs_cmdIds_genericReq</code> and <code>Smsgs_cmdIds_genericRsp</code>. These values are 12 and 13 so they do not conflict with other commands defined in the Sensor To Cloud Application.
</p><p>&lt;syntaxhighlight lang="c"&gt;
typedef enum
</p>
<pre>{
   /*! Configuration message, sent from the collector to the sensor */
   Smsgs_cmdIds_configReq = 1,
   /*! Configuration Response message, sent from the sensor to the collector */
   Smsgs_cmdIds_configRsp = 2,
   /*! Tracking request message, sent from the the collector to the sensor */
   Smsgs_cmdIds_trackingReq = 3,
    /*! Tracking response message, sent from the sensor to the collector */
   Smsgs_cmdIds_trackingRsp = 4,
   /*! Sensor data message, sent from the sensor to the collector */
   Smsgs_cmdIds_sensorData = 5,
   /* Toggle LED message, sent from the collector to the sensor */
   Smsgs_cmdIds_toggleLedReq = 6,
   /* Toggle LED response msg, sent from the sensor to the collector */
   Smsgs_cmdIds_toggleLedRsp = 7,
   /* new data type for ramp data */
   Smsgs_cmdIds_rampdata = 8,
   /*! OAD mesages, sent/received from both collector and sensor */
   Smsgs_cmdIds_oad = 9,
   /* Broadcast control msg, sent from the collector to the sensor */
   Smgs_cmdIds_broadcastCtrlMsg = 10,
   /* Toggle LED message, sent from the collector to the sensor */
   Smsgs_cmdIds_genericReq = 12,
   /* Toggle LED response msg, sent from the sensor to the collector */
   Smsgs_cmdIds_genericRsp = 13
} Smsgs_cmdIds_t;
&lt;/syntaxhighlight&gt;
</pre>
<p>Define the frame control value for the generic sensor values. This value is `0x0800` in order to not conflict with other frame control values defined in the Sensor To Cloud Application.
</p><p>&lt;syntaxhighlight lang="c"&gt;
</p>
<pre>/*!
Frame Control field states what data fields are included in reported
sensor data, each value is a bit mask value so that they can be combined
(OR'd together) in a control field.
When sent over-the-air in a message this field is 2 bytes.
*/
</pre>
<p>typedef enum
{
</p>
<pre>   /*! Temperature Sensor */
   Smsgs_dataFields_tempSensor = 0x0001,
   /*! Light Sensor */
   Smsgs_dataFields_lightSensor = 0x0002,
   /*! Humidity Sensor */
   Smsgs_dataFields_humiditySensor = 0x0004,
   /*! Message Statistics */
   Smsgs_dataFields_msgStats = 0x0008,
   /*! Config Settings */
   Smsgs_dataFields_configSettings = 0x0010,
   /*! Temperature Sensor */
   Smsgs_dataFields_genericSensor = 0x0800,
</pre>
<p>} Smsgs_dataFields_t;
&lt;/syntaxhighlight&gt;
</p><p>Add the structs detailing the ability to request and respond to generic messages.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>Generic Request message: sent from controller to the sensor.
*/
</pre>
<p>typedef struct _Smsgs_genericreqmsg_t
{
</p>
<pre>   /*! Command ID - 1 byte */
   Smsgs_cmdIds_t cmdId;
</pre>
<p>} Smsgs_genericReqMsg_t;
</p><p>/*!
Generic Response message: sent from the sensor to the collector
</p>
<pre>in response to the Generic Request message.
*/
</pre>
<p>typedef struct _Smsgs_genericrspmsg_t
{
</p>
<pre>   /*! Command ID - 1 byte */
   Smsgs_cmdIds_t cmdId;
</pre>
<p>} Smsgs_genericRspMsg_t;
&lt;/syntaxhighlight&gt;
</p><p>Add a struct defining the data that will be broadcasted by the generic sensor.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>Generic Sensor Field
*/
</pre>
<p>typedef struct _Smsgs_genericsensorfield_t
{
</p>
<pre>   /*! Raw Sensor Data read out of the OPT2001 light sensor */
   uint16_t genericRawData;
</pre>
<p>} Smsgs_genericSensorField_t;
&lt;/syntaxhighlight&gt;
</p><p>Add the genericSensor to the sensor Msg struct.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>Sensor Data message: sent from the sensor to the collector
*/
</pre>
<p>typedef struct _Smsgs_sensormsg_t
{
</p>
<pre>   /*! Command ID */
   Smsgs_cmdIds_t cmdId;
   /*! Extended Address */
   uint8_t extAddress[SMGS_SENSOR_EXTADDR_LEN];
   /*! Frame Control field - bit mask of Smsgs_dataFields */
   uint16_t frameControl;
   /*!
    Temp Sensor field - valid only if Smsgs_dataFields_tempSensor
    is set in frameControl.
    */
   Smsgs_tempSensorField_t tempSensor;
   /*!
    Light Sensor field - valid only if Smsgs_dataFields_lightSensor
    is set in frameControl.
    */
   Smsgs_lightSensorField_t lightSensor;
   /*!
    Humidity Sensor field - valid only if Smsgs_dataFields_humiditySensor
    is set in frameControl.
    */
   Smsgs_humiditySensorField_t humiditySensor;
   /*!
    Message Statistics field - valid only if Smsgs_dataFields_msgStats
    is set in frameControl.
    */
   Smsgs_msgStatsField_t msgStats;
   /*!
    Configuration Settings field - valid only if
    Smsgs_dataFields_configSettings is set in frameControl.
    */
   Smsgs_configSettingsField_t configSettings;
   /*!
    Generic Sensor field - valid only if Smsgs_dataFields_genericSensor
    is set in frameControl.
    */
   Smsgs_genericSensorField_t genericSensor;
</pre>
<p>} Smsgs_sensorMsg_t;
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="sensor.c">sensor.c</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=18" title="Edit section: sensor.c">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>We will now modify the <code>sensor.c</code> file to primarily handle packaging and sending the generic sensor data to the collector/cloud application.
</p><p>To print text and values to the terminal include the following header:
</p><p>&lt;syntaxhighlight lang="c"&gt;
</p>
<ol><li>include "board_lcd.h"</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>Define the external global variable that will be used as our &quot;generic sensor&quot; value. This will be the value that we will send to the collector/cloud application.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/******************************************************************************
</p>
<pre>Global variables
*****************************************************************************/
</pre>
<p>extern uint16_t generic_sensor_val;
&lt;/syntaxhighlight&gt;
</p><p>Define the Generic Sensor data struct.
</p><p>&lt;syntaxhighlight lang="c"&gt;
...
...
/*!
</p>
<pre>Generic Sensor field - valid only if Smsgs_dataFields_genericSensor
is set in frameControl.
*/
</pre>
<p>STATIC Smsgs_genericSensorField_t genericSensor =
</p>
<pre>   { 0 };
</pre>
<p>...
...
&lt;/syntaxhighlight&gt;
</p><p>Now let's initialize the frame control settings by adding the Generic Sensor to the frame control config settings.
</p><p>&lt;syntaxhighlight lang="c"&gt;
void Sensor_init(void)
{
</p>
<pre>   ...
   ...
   configSettings.frameControl |= Smsgs_dataFields_configSettings;
   configSettings.frameControl |= Smsgs_dataFields_genericSensor;
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>When we go to send the sensor data, we need to copy the sensor values to the message data struct. We will only do this if the generic sensor is currently included in the frame control.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>@brief   Build and send sensor data message
*/
</pre>
<p>static void processSensorMsgEvt(void)
{
</p>
<pre>   ...
   ...
   if(sensor.frameControl &amp; Smsgs_dataFields_configSettings)
   {
       sensor.configSettings.pollingInterval = configSettings.pollingInterval;
       sensor.configSettings.reportingInterval = configSettings
                       .reportingInterval;
   }
   if(sensor.frameControl &amp; Smsgs_dataFields_genericSensor)
   {
      memcpy(&amp;sensor.genericSensor, &amp;genericSensor,
             sizeof(Smsgs_genericSensorField_t));
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>As we send the message, we need to add the length of the generic sensor to the overall length of the message to be sent. We then need to append the generic sensor raw data to the message buffer. Again, before we add the length and the value to the buffer, we need to check to ensure the sensor is included in the frame control. Note that when we add the generic sensor raw data to the pBuf, we do this after we add the humidity sensor values. This order matters when adding it to the message buffer.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static bool sendSensorMessage(ApiMac_sAddr_t *pDstAddr, Smsgs_sensorMsg_t *pMsg)
{
</p>
<pre>   ...
   ...
   if(pMsg-&gt;frameControl &amp; Smsgs_dataFields_configSettings)
   {
       len += SMSGS_SENSOR_CONFIG_SETTINGS_LEN;
   }
   if(pMsg-&gt;frameControl &amp; Smsgs_dataFields_genericSensor)
   {
      len += SMSGS_SENSOR_GENERIC_LEN;
   }
   ...
   ...
       if(pMsg-&gt;frameControl &amp; Smsgs_dataFields_humiditySensor)
       {
           pBuf = Util_bufferUint16(pBuf, pMsg-&gt;humiditySensor.temp);
           pBuf = Util_bufferUint16(pBuf, pMsg-&gt;humiditySensor.humidity);
       }
       if(pMsg-&gt;frameControl &amp; Smsgs_dataFields_genericSensor)
       {
           pBuf = Util_bufferUint16(pBuf, pMsg-&gt;genericSensor.genericRawData);
       }
       ...
       ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>When we validate the frame control, we need to also ensure the generic sensor is properly included in the frame.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static uint16_t validateFrameControl(uint16_t frameControl)
{
</p>
<pre>   ...
   ...
   if(frameControl &amp; Smsgs_dataFields_configSettings)
   {
       newFrameControl |= Smsgs_dataFields_configSettings;
   }
   if(frameControl &amp; Smsgs_dataFields_genericSensor)
   {
      newFrameControl |= Smsgs_dataFields_genericSensor;
   }
</pre>
<pre>   return (newFrameControl);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p><p>Let's now setup how the sensor will respond to a generic command sent from the collector. When the generic command is received, we want to have the sensor print out a local response to the terminal. After this has occurred, we want to send back a response to the collector. Add the following case to the switch(cmdID) statement. The <code>Ssf_genericCMD()</code> function will execute the terminal printing and return true.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static void dataIndCB(ApiMac_mcpsDataInd_t *pDataInd)
{
...
...
</p>
<pre>switch(cmdId)
   {
   ...
   ...
   case Smsgs_cmdIds_genericReq:
   /* Make sure the message is the correct size */
   if(pDataInd-&gt;msdu.len == SMSGS_GENERIC_REQUEST_MSG_LEN)
   {
</pre>
<pre>       /* send the response message directly */
       cmdBytes[0] = (uint8_t) Smsgs_cmdIds_genericRsp;
       cmdBytes[1] = Ssf_genericCMD();
       Sensor_sendMsg(Smsgs_cmdIds_genericRsp,
               &amp;pDataInd-&gt;srcAddr, true,
               SMSGS_GENERIC_RESPONSE_MSG_LEN,
               cmdBytes);
   }
   break;
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Every time the sensor sends data to the collector, we need to poll for new local sensor data. In the <code>readSensors()</code> function we want to update the <code>genericSensor.genericRawData</code> value with the current external <code>generic_sensor_val</code> variable. Let's also print this current value out to the terminal so we can see what it is.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>* @brief   Manually read the sensors
*/
</pre>
<p>static void readSensors(void)
{
</p>
<pre>   ...
   ...
   genericSensor.genericRawData = generic_sensor_val;
   LCD_WRITE_STRING_VALUE("Reading GenericSensorVal: ", generic_sensor_val, 10, 4);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="ssf.c">ssf.c</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=19" title="Edit section: ssf.c">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the <code>ssf.c</code> file, the sensor will handle updating the <code>generic_sensor_value</code> every time the BTN-2 is pushed on the sensor LaunchPad.
</p><p>First, let's declare the <code>generic_sensor_val</code> as a <code>uint16_t</code>.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/******************************************************************************
</p>
<pre>Public variables
*****************************************************************************/
</pre>
<p>...
...
/*! Generic Sensor Value */
uint16_t generic_sensor_val = 0;
...
...
&lt;/syntaxhighlight&gt;
</p><p>Then, add the condition that if the right key (BTN-2) is pressed, the <code>generic_sensor_value</code> will increment. Let's also print the new value to the terminal so we can see it incrementing as it is pressed.
</p><p>&lt;syntaxhighlight lang="c"&gt;
void Ssf_processEvents(void)
{
</p>
<pre>   ...
   ...
   else if(keys &amp; KEY_RIGHT)
   {
       generic_sensor_val += 1;
       LCD_WRITE_STRING_VALUE("GenericSensorVal: ", generic_sensor_val, 10, 4);
   ...
   ...
   }
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Lastly, we want to handle the response of receiving a generic command from the collector. Define the <code>Ssf_genericCMD()</code> function and have it print out a simple message to the terminal.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>The application calls this function to enact a generic command (UART printing)
</pre>
<pre>Public function defined in ssf.h
*/
</pre>
<p>bool Ssf_genericCMD(void)
{
</p>
<pre>   LCD_WRITE_STRING("Hello from Sensor To Cloud Gateway", 4);
</pre>
<pre>   return(true);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="ssf.h">ssf.h</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=20" title="Edit section: ssf.h">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the <code>ssf.h</code> header, define the new <code>Ssf_genericCMD()</code> function.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>* @brief       The application calls this function to do a generic function (UART printing)
*
* @return     true
*/
</pre>
<p>extern bool Ssf_genericCMD(void);
&lt;/syntaxhighlight&gt;
</p><p>Once you have made all of the changes above, build the new project in CCS.
</p><p>If you have no build errors, Debug the project to the second LaunchPad. &quot;Stop&quot; the debugger to start running the firmware on the LaunchPad.
</p>
<h2><span id="Modify_the_&quot;Sensor_To_Cloud&quot;_application_to_add_the_Generic_Sensor"></span><span class="mw-headline" id="Modify_the_.22Sensor_To_Cloud.22_application_to_add_the_Generic_Sensor">Modify the &quot;Sensor To Cloud&quot; application to add the Generic Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=21" title="Edit section: Modify the &quot;Sensor To Cloud&quot; application to add the Generic Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Now let's make the necessary changes to the Local Gateway Sensor To Cloud application to view the generic sensor data and to send generic commands to the sensor. To do this, we need to make changes to the C based <code>collector</code> and JavaScript based <code>iot-gateway</code> applications. The C based <code>collector</code> application is responsible for receiving all incoming data as well as sending commands to appropriate sensors. The JavaScript based <code>iot-gateway</code> application is responsible for displaying this data in a web app form and process commands from the web app. Let's first make the necessary changes to the <code>collector</code> application.
</p>
<h3><span class="mw-headline" id="Modify_the_Linux_Based_Collector_to_add_Generic_Sensor">Modify the Linux Based Collector to add Generic Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=22" title="Edit section: Modify the Linux Based Collector to add Generic Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>First we need to modify the C based collector application to receive the generic sensor data. Navigate to the <code>/tutorial/SensorToCloud/example/collector/</code> folder and make changes/additions to the following files.
</p><p>As in the <code>sensor_generic_cc1310lp</code> project, we need to modify the <code>smsgs.h</code> file to include the generic sensor definitions. Let's start by adding the generic sensor msg lengths.
</p>
<h4><span class="mw-headline" id="smsgs.h_2">smsgs.h</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=23" title="Edit section: smsgs.h">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>&lt;syntaxhighlight lang="c"&gt;
...
...
/*! Toggle Led Request message length (over-the-air length) */
</p>
<ol><li>define SMSGS_TOGGLE_LED_RESPONSE_MSG_LEN 2</li></ol>
<p>/*! Length of the genericSensor portion of the sensor data message */
</p>
<ol><li>define SMSGS_SENSOR_GENERIC_LEN 2</li></ol>
<p>/*! Generic Request message length (over-the-air length) */
</p>
<ol><li>define SMSGS_GENERIC_REQUEST_MSG_LEN 1</li></ol>
<p>/*! Generic Request message length (over-the-air length) */
</p>
<ol><li>define SMSGS_GENERIC_RESPONSE_MSG_LEN 2</li></ol>
<p>...
...
&lt;/syntaxhighlight&gt;
</p><p>Then add the command IDs for the generic command and response. As you can now see, we make the <code>Smsgs_cmdIds_genericReq</code> equal to 12 due to the additional commands that are defined in the Sensor To Cloud application.
</p><p>&lt;syntaxhighlight lang="c"&gt;
typedef enum  {
...     
...     
/*! Door lock command */     
Smsgs_cmdIds_doorlockChg = 11,     
/* Toggle LED message, sent from the collector to the sensor */     
Smsgs_cmdIds_genericReq = 12,     
/* Toggle LED response msg, sent from the sensor to the collector */     
Smsgs_cmdIds_genericRsp = 13  
}Smsgs_cmdIds_t;
&lt;/syntaxhighlight&gt;
</p><p>Add the generic sensor frame control value.
</p><p>&lt;syntaxhighlight lang="c"&gt;
typedef enum
{
</p>
<pre>   ...
   ...
   /*! Door Lock Sensor */
   Smsgs_dataFields_doorLockSensor = 0x0400,
   /*! Temperature Sensor */
    Smsgs_dataFields_genericSensor = 0x0800,
</pre>
<p>} Smsgs_dataFields_t;
&lt;/syntaxhighlight&gt;
</p><p>Add the generic command and response struct definitions.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>Generic Request message: sent from controller to the sensor.
*/
typedef struct _Smsgs_genericreqmsg_t
{
    /*! Command ID - 1 byte */
    Smsgs_cmdIds_t cmdId;
} Smsgs_genericReqMsg_t;

/*!
Generic Response message: sent from the sensor to the collector
 in response to the Generic Request message.
 */
typedef struct _Smsgs_genericrspmsg_t
{
    /*! Command ID - 1 byte */
    Smsgs_cmdIds_t cmdId;
} Smsgs_genericRspMsg_t;
&lt;/syntaxhighlight&gt;
</pre>
<p>Add the generic sensor data struct definition. 
</p><p>&lt;syntaxhighlight lang="c"&gt;
</p>
<pre>/*!
Generic Sensor Field
*/
</pre>
<p>typedef struct _Smsgs_genericsensorfield_t
{
</p>
<pre>   /*! Raw Sensor Data read out of the generic sensor */
   uint16_t genericRawData;
</pre>
<p>} Smsgs_genericSensorField_t;
&lt;/syntaxhighlight&gt;
</p><p>Add the generic sensor to the sensor message struct.
</p><p>&lt;syntaxhighlight lang="c"&gt;
typedef struct _Smsgs_sensormsg_t
{
</p>
<pre>   ...
   ...
   /*!
       Door Lock Sensor Field - valid only if
       Smsgs_dataFields_doorLockSensor is set in frameControl.
   */
   Smsgs_doorLockSensorField_t doorLockSensor;
   /*!
    Generic Sensor field - valid only if Smsgs_dataFields_genericSensor
    is set in frameControl.
    */
    Smsgs_genericSensorField_t genericSensor;
</pre>
<p>} Smsgs_sensorMsg_t;
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="collector.c">collector.c</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=24" title="Edit section: collector.c">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Now let's modify the <code>collector.c</code> file to include the ability to read the generic sensor data from the incoming data buffer.
</p><p>First let's add the generic sensor to the frame control config parameters.
</p><p>&lt;syntaxhighlight lang="c"&gt;
...
...
/* Default configuration frame control */
</p>
<ol><li>define CONFIG_FRAME_CONTROL (Smsgs_dataFields_tempSensor | \</li></ol>
<pre>                             Smsgs_dataFields_lightSensor | \
                             Smsgs_dataFields_humiditySensor | \
                             Smsgs_dataFields_msgStats | \
                             Smsgs_dataFields_configSettings | \
                             Smsgs_dataFields_pressureSensor | \
                             Smsgs_dataFields_motionSensor | \
                             Smsgs_dataFields_batterySensor | \
                             Smsgs_dataFields_hallEffectSensor | \
                             Smsgs_dataFields_fanSensor | \
                             Smsgs_dataFields_doorLockSensor | \
                             Smsgs_dataFields_genericSensor)
</pre>
<p>...
...
&lt;/syntaxhighlight&gt;
</p><p>Let's update the reporting interval to 10 seconds so we can see changes quicker in Sensor To Cloud application.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/* Default configuration reporting interval, in milliseconds */
</p>
<ol><li>define CONFIG_REPORTING_INTERVAL_DEFAULT 10000</li></ol>
<p>&lt;/syntaxhighlight&gt;
</p><p>Now let's add the most important part, getting the actual data from the generic sensor! Again, we will only get this data if the sensor is defined in the frame control. Make sure the reading of the generic sensor data occurs after the humidity sensor as seen below. Again, the order in which we read it matters.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static void processSensorData(ApiMac_mcpsDataInd_t *pDataInd)
{
</p>
<pre>  ...
  ...
   if(sensorData.frameControl &amp; Smsgs_dataFields_humiditySensor)
   {
       sensorData.humiditySensor.temp = Util_buildUint16(pBuf[0], pBuf[1]);
       pBuf += 2;
       sensorData.humiditySensor.humidity = Util_buildUint16(pBuf[0], pBuf[1]);
       pBuf += 2;
   }
</pre>
<pre>   if(sensorData.frameControl &amp; Smsgs_dataFields_genericSensor)
   {
       sensorData.genericSensor.genericRawData = Util_buildUint16(pBuf[0], pBuf[1]);
       pBuf += 2;
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>We need to make a function that will send the generic request to a sensor with a given address. Add this entire function to the <code>collector.c</code> file.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*! Build and send the generic message to a device
Public function defined in collector.h */ 
</p><p>Collector_status_t Collector_sendGenericRequest(ApiMac_sAddr_t <i>pDstAddr) </i>
{ 
Collector_status_t status = Collector_status_invalid_state;
/* Are we in the right state? */
</p>
<pre>if(cllcState &gt;= Cllc_states_started)
{
    Llc_deviceListItem_t item;
</pre>
<pre>    /* Is the device a known device? */
    if(Csf_getDevice(pDstAddr, &amp;item))
    {
        uint8_t buffer[SMSGS_GENERIC_REQUEST_MSG_LEN];
</pre>
<pre>        /* Build the message */
        buffer[0] = (uint8_t)Smsgs_cmdIds_genericReq;
</pre>
<pre>        sendMsg(Smsgs_cmdIds_genericReq, item.devInfo.shortAddress,
                item.capInfo.rxOnWhenIdle,
                SMSGS_GENERIC_REQUEST_MSG_LEN,
                buffer);
</pre>
<pre>        status = Collector_status_success;
    }
    else
    {
        status = Collector_status_deviceNotFound;
    }
}
</pre>
<pre>return(status);
</pre>
<p>} 
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="collector.h">collector.h</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=25" title="Edit section: collector.h">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the <code>collector.h</code> file, add the new <code>Collector_sendGenericRequest()</code> function definition.
</p><p>&lt;syntaxhighlight lang="c"&gt; 
/*!
</p>
<pre>* @brief Build and send the generic message to a device.
*
* @param pDstAddr - destination address of the device to send the message
*
* @return Collector_status_success, Collector_status_invalid_state
*         or Collector_status_deviceNotFound
*/
</pre>
<p>extern Collector_status_t Collector_sendGenericRequest(
</p>
<pre>   ApiMac_sAddr_t *pDstAddr);
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="appsrv.c">appsrv.c</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=26" title="Edit section: appsrv.c">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Let's add the parsed generic sensor data to a buffer. This buffer will be used to read the data in JavaScript on the <code>iot-gateway</code> application side.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static void appsrv_deviceSensorData_common(ApiMac_sAddr_t *pSrcAddr,
</p>
<pre>                                          int8_t rssi,
                                          Smsgs_sensorMsg_t *pDataMsg,
                                          Smsgs_configRspMsg_t *pRspMsg)
</pre>
<p>{
</p>
<pre>   ...
   ...
   if(pDataMsg-&gt;frameControl &amp; Smsgs_dataFields_humiditySensor)
           {
               len += 4;
               *pBuff++ = (uint8_t)(pDataMsg-&gt;humiditySensor.temp &amp; 0xFF);
               *pBuff++ = (uint8_t)((pDataMsg-&gt;humiditySensor.temp &gt;&gt; 8) &amp; 0xFF);
               *pBuff++ = (uint8_t)(pDataMsg-&gt;humiditySensor.humidity &amp; 0xFF);
               *pBuff++ = (uint8_t)((pDataMsg-&gt;humiditySensor.humidity &gt;&gt; 8) &amp; 0xFF);
           }
   if(pDataMsg-&gt;frameControl &amp; Smsgs_dataFields_genericSensor)
           {
               len += 2;
               *pBuff++ = (uint8_t)(pDataMsg-&gt;genericSensor.genericRawData &amp; 0xFF);
               *pBuff++ = (uint8_t)((pDataMsg-&gt;genericSensor.genericRawData &gt;&gt; 8) &amp; 0xFF);
           }
</pre>
<p>...
...
&lt;/syntaxhighlight&gt;
</p><p>The <code>appsrv.c</code> file will also handle in incoming requests from the <code>iot-gateway</code> application and initiate the appropriate function.
</p><p>First define the generic request and response command IDs.
</p><p>&lt;syntaxhighlight lang="c"&gt;
typedef enum smgsCmdIds{
</p>
<pre>   SMGS_CONFIG_REQ = 1,
   SMGS_CONFIG_RSP = 2,
   SMGS_TRACKING_REQ = 3,
   SMGS_TRACKING_RSP = 4,
   SMGS_SENSOR_DATA = 5,
   SMGS_TOGGLE_REQ = 6,
   SMGS_TOGGLE_RSP = 7,
   SMGS_GENERIC_REQ = 12,
   SMGS_GENERIC_RSP = 13
</pre>
<p>}Smgs_Cmd_Ids_t;
&lt;/syntaxhighlight&gt;
</p><p>If the generic command request value is received from the <code>iot-gateway</code>, call the function to send the generic command to the corresponding sensor.
</p><p>&lt;syntaxhighlight lang="c"&gt;
static void appsrv_processTxDataReq(struct appsrv_connection *pCONN, struct mt_msg *pIncomingMsg)
{
</p>
<pre>   ...
   ...
   else if(msgId == SMGS_TOGGLE_REQ)
   {
       LOG_printf(LOG_APPSRV_MSG_CONTENT, " Toggle-req received\n");
       Csf_sendToggleLedRequest(&amp;pDstAddr);
   }
</pre>
<pre>   else if(msgId == SMGS_GENERIC_REQ)
   {
       LOG_printf(LOG_APPSRV_MSG_CONTENT, " Generic-req received\n");
       Csf_sendGenericRequest(&amp;pDstAddr);
   }
</pre>
<pre>   status = ApiMac_status_success;
   send_AppsrvTxDataCnf(status);
</pre>
<p>}
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="csf_linux.c">csf_linux.c</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=27" title="Edit section: csf linux.c">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <code>csf_linux.c</code> file is responsible for calling the sending of the generic command request.
</p><p>&lt;syntaxhighlight lang="c"&gt;
...
...
/*!
</p>
<pre>The appsrv module calls this function to send a led toggle request
to a device over the air
</pre>
<pre>Public function defined in csf_linux.h
*/
</pre>
<p>extern uint8_t Csf_sendToggleLedRequest(
</p>
<pre>               ApiMac_sAddr_t *pDstAddr)
</pre>
<p>{
</p>
<pre>   return Collector_sendToggleLedRequest(pDstAddr);
</pre>
<p>}
</p><p>/*!
</p>
<pre>The appsrv module calls this function to send a generic request
to a device over the air
</pre>
<pre>Public function defined in csf_linux.h
*/
extern uint8_t Csf_sendGenericRequest(
   ApiMac_sAddr_t *pDstAddr)
</pre>
<p>{
return Collector_sendGenericRequest(pDstAddr);
}
...
...
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="csf_linux.h">csf_linux.h</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=28" title="Edit section: csf linux.h">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The header file needs to have the <code>Csf_sendGenericRequest()</code> function added.
</p><p>&lt;syntaxhighlight lang="c"&gt;
/*!
</p>
<pre>* @brief Build and send the generic message to a device.
*
* @param pDstAddr - destination address of the device to send the message
*
* @return Collector_status_success, Collector_status_invalid_state
*         or Collector_status_deviceNotFound
*/
</pre>
<p>extern uint8_t Csf_sendGenericRequest(
</p>
<pre>   ApiMac_sAddr_t *pDstAddr);
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<hr />
<h3><span class="mw-headline" id="Modify_the_IOT-Gateway_Application_to_add_the_Generic_Sensor">Modify the IOT-Gateway Application to add the Generic Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=29" title="Edit section: Modify the IOT-Gateway Application to add the Generic Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Second, we need to modify the JavaScript based IOT-Gateway application to display data and handle requests to the web application. Navigate to the <code>/tutorial/SensorToCloud/example/iot-gateway/</code> folder and make changes/additions to the following files.
</p>
<h4><span id="appClient/appclient.js"></span><span class="mw-headline" id="appClient.2Fappclient.js">appClient/appclient.js</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=30" title="Edit section: appClient/appclient.js">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the <code>appclient.js</code> file, we will extract the generic sensor value from the incoming data buffer.
</p><p>First, define the genericSensor frame control value.
</p><p>&lt;syntaxhighlight lang="javascript"&gt;
var Smsgs_dataFields = Object.freeze({
</p>
<pre>   tempSensor: 0x0001,
   lightSensor: 0x0002,
   humiditySensor: 0x0004,
   msgStats: 0x0008,
   configSettings: 0x0010,
   pressureSensor: 0x0020,
   motionSensor: 0x0040,
   batteryVoltageSensor: 0x0080,
   hallEffectSensor: 0x0100,
   fanSensor: 0x0200,
   doorLockSensor: 0x0400,
   genericSensor: 0x0800
</pre>
<p>});
&lt;/syntaxhighlight&gt;
</p><p>Then, cycle through the data buffer based on the frame control and save the data to the generic sensor data field.
</p><p>&lt;syntaxhighlight lang="javascript"&gt;
function appC_processDeviceDataRxIndMsg(data){
</p>
<pre>   ...
   ...
   /* Humididty sensor data received */
   if(deviceData.sDataMsg.frameControl &amp; Smsgs_dataFields.humiditySensor){
       deviceData.sDataMsg.humiditySensor = {};
       deviceData.sDataMsg.humiditySensor.temp = data.readUint16(ind);
       ind += 2;
       deviceData.sDataMsg.humiditySensor.humidity = data.readUint16(ind);
       ind += 2;
   }
   /* Generic sensor data received */
   if(deviceData.sDataMsg.frameControl &amp; Smsgs_dataFields.genericSensor){
       deviceData.sDataMsg.genericSensor = {};
       deviceData.sDataMsg.genericSensor.genericRawData = data.readUint16(ind);
       ind += 2;
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>The <code>appclient.js</code> file is also responsible for sending commands to the <code>collector</code>.
</p><p>First define the generic command values.
</p><p>&lt;syntaxhighlight lang="javascript"&gt;
var smgsCmdIds = Object.freeze({
</p>
<pre>   CONFIG_REQ: 1,
   CONFIG_RSP: 2,
   TRACKING_REQ: 3,
   TRACKING_RSP: 4,
   SENSOR_DATA: 5,
   TOGGLE_REQ: 6,
   TOGGLE_RSP: 7,
   GENERIC_REQ: 12,
   GENERIC_RSP: 13
</pre>
<p>});
&lt;/syntaxhighlight&gt;
</p><p>Define the function that will be used to send the generic commands to the app server.
</p><p>&lt;syntaxhighlight lang="javascript"&gt;
function appC_setJoinPermitAtAppServer(data) {
</p>
<pre>   ...
   ...
   /*!
   * @brief        Allows send generic command to a network device
   *
   * @param        none
   *
   * @return       none
   */
   Appclient.prototype.appC_sendGeneric = function (data) {
       appC_sendGenericMsgToAppServer(data);
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>In the actual sending of the command, need to construct the message and send that message to the <code>collector</code>.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
function Appclient() {
</p>
<pre>   ...
   ...
/*!
</pre>
<ul><li>@brief        Send Generic req message to application server</li>
<li class="mw-empty-elt"></li>
<li>@param        data - Contains device address to send req to</li>
<li class="mw-empty-elt"></li>
<li>@return       none</li>
<li>/</li></ul>
<p>function appC_sendGenericMsgToAppServer(data) {
</p>
<pre>   //Find index of ext address
   var dstAddr = data.dstAddr.substring(2);
</pre>
<pre>   var deviceIdx = findDeviceIndexShortAddr(dstAddr);
   if (deviceIdx == -1){
       deviceIdx = findDeviceIndexExtAddr(dstAddr);
   }
   if(deviceIdx&#160;!= -1){
       var len = 5;
       var msg_buf = new ByteBuffer(PKT_HEADER_SIZE + len, ByteBuffer.LITTLE_ENDIAN);
       msg_buf.writeShort(len, PKT_HEADER_LEN_FIELD);
       msg_buf.writeUint8(APPSRV_SYS_ID_RPC, PKT_HEADER_SUBSYS_FIELD);
       msg_buf.writeUint8(cmdIds.TX_DATA_REQ, PKT_HEADER_CMDID_FIELD);
       var ind = PKT_HEADER_SIZE;
       msg_buf.writeUint8(smgsCmdIds.GENERIC_REQ, ind);
       ind+=1;
       msg_buf.writeUint16(self.connectedDeviceList[deviceIdx].shortAddress, ind);
</pre>
<pre>       appClient.write(msg_buf.buffer);
       if(PRINT_DEBUG) console.log(&quot;Sent Generic request&quot;);
   }
</pre>
<p>}
...
...
}
&lt;/syntaxhighlight&gt;
</p>
<h4><span id="appClient/devices/device.js"></span><span class="mw-headline" id="appClient.2Fdevices.2Fdevice.js">appClient/devices/device.js</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=31" title="Edit section: appClient/devices/device.js">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>In the <code>device.js</code> file, we will be updating the smart object values to correspond to the new data received.
</p><p>As before, define the frame control value of the generic sensor.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
var Smsgs_dataFields = Object.freeze({
</p>
<pre>   tempSensor: 0x0001,
   lightSensor: 0x0002,
   humiditySensor: 0x0004,
   msgStats: 0x0008,
   configSettings: 0x0010,
   pressureSensor: 0x0020,
   motionSensor: 0x0040,
   batteryVoltageSensor: 0x0080,
   hallEffectSensor: 0x0100,
   fanSensor: 0x0200,
   doorLockSensor: 0x0400,
   genericSensor: 0x0800
</pre>
<p>});
&lt;/syntaxhighlight&gt;
</p><p>If the generic sensor is in the current frame control, update the generic raw data sensor smart object to have the new generic data received from the sensor.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
/* Prototype Functions */
Device.prototype.rxSensorData = function (sensorData) {
</p>
<pre>   ...
   ...
   if (sensorData.sDataMsg.frameControl &amp; Smsgs_dataFields.humiditySensor) {
       /* update the sensor values */
       this.humiditysensor = {
           temp: sensorData.sDataMsg.humiditySensor.temp,
           humidity: sensorData.sDataMsg.humiditySensor.humidity
       };
       updateSensor(this.so, 'humidity', 0, sensorData.sDataMsg.humiditySensor.humidity, '%RH');
   }
   if (sensorData.sDataMsg.frameControl &amp; Smsgs_dataFields.genericSensor) {
       /* update the sensor values */
       this.genericsensor = {
           genericRawData: sensorData.sDataMsg.genericSensor.genericRawData
       };
       updateSensor(this.so, 'genericrawdata', 0, sensorData.sDataMsg.genericSensor.genericRawData, 'raw');
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Initialize the device to have a generic sensor.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
Device.prototype.rxConfigRspInd = function (devConfigData) {
</p>
<pre>   ...
   ...
   if (devConfigData.sConfigMsg.frameControl &amp; Smsgs_dataFields.humiditySensor) {
       /* initialize sensor information element */
       device.humiditysensor = {
           temp: 0,
           humidity: 0
       };
   }
   if (devConfigData.sConfigMsg.frameControl &amp; Smsgs_dataFields.genericSensor) {
       /* initialize sensor information element */
       device.genericsensor = {
           genericRawData: 0
       };
   }
   ...
   ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p>
<h4><span id="webserver/collectorApp.html"></span><span class="mw-headline" id="webserver.2FcollectorApp.html">webserver/collectorApp.html</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=32" title="Edit section: webserver/collectorApp.html">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <code>collectorApp.html</code> generates the look and control of the Sensor To Cloud app. Here we will add the display of the generic sensor to the app table. We will also add a generic button that will be used to send a generic command to a sensor.
</p><p>First, lets add the generic sensor raw data value to the sensor node table. If the <code>genericrawdata</code> smart object is available, we will add a row to the sensors. We will then print the latest value of the generic sensor.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
function collectorApp_updateNwkInfo(data) {
</p>
<pre>       ...
       ...
       if (devInfo.smart_objects.hasOwnProperty('illuminance')) {
           sensorDataFound  = 1
           sensorS += '&lt;tr&gt;&lt;td&gt;&lt;img src=&quot;dist/images/Light.png &quot; alt=&quot;some_text&quot; height=&quot;30&quot; width=&quot;30&quot;&gt;&lt;/td&gt;&lt;td&gt;' + devInfo.smart_objects.illuminance[0].sensorValue + ' lux &lt;/td&gt;&lt;/tr&gt;';
       }
</pre>
<pre>       if (devInfo.smart_objects.hasOwnProperty('genericrawdata')) {
           sensorDataFound  = 1;
           sensorS += '&lt;tr&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;' + devInfo.smart_objects.genericrawdata[0].sensorValue + ' rawData &lt;/td&gt;&lt;/tr&gt;';
       }
       ...
       ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>Modify each row of the table to include a generic button with a class called <code>genericbutton</code>.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
function collectorApp_updateNwkInfo(data) {
</p>
<pre>       ...
       ...
       sensorS += '&lt;/table&gt;';
</pre>
<pre>       /* add/update device information */
       $deviceTable.prepend('&lt;tr&gt;&lt;td&gt;&lt;table class=&quot;table table-responsive&quot;&gt;&lt;tr&gt;&lt;td&gt;SAddr: 0x' + sAddr.toString(16) + '&lt;/td&gt;&lt;/tr&gt;&lt;tr  class=&quot;ieee&quot;&gt;&lt;td&gt;ExAddr: 0x' + extAddr.toString(16).toUpperCase() + '&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;RSSI: ' + rssi + ' dBm&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/td&gt;&lt;td&gt;' + sensorS + '&lt;/td&gt;&gt;&lt;td&gt;' + &quot;&lt;p button type=button class='test btn btn-default'&gt;Red LED&quot; + &quot;&lt;/p&gt;&quot; + &quot;&lt;p button type=button class='genericbutton btn btn-default'&gt;Generic&quot; + &quot;&lt;/p&gt;&quot; +'&lt;/td&gt;&lt;/tr&gt;');
       ...
       ...
</pre>
<p>&lt;/syntaxhighlight&gt;
</p><p>When the Generic Button is pressed, first we need to determine which sensor we want to send a generic command to. Based on which row of the table was clicked, we can look up the short address of the device we want to send the command to. Then emit the <code>sendGeneric</code> command along with the short address.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
...
...
$deviceTable.on(&quot;click&quot;, &quot;p.test&quot;, function(){
</p>
<pre>   let data = $(this).closest('tr').find('td:first').text();
   let n = data.indexOf(&quot;ExAddr&quot;);
   let m = data.indexOf(&quot;0x&quot;);
   var shortAddr = data.substring((m),(n));
   console.log(shortAddr);
   socket.emit('sendToggle', {dstAddr: shortAddr});
</pre>
<p>});
</p><p>$deviceTable.on(&quot;click&quot;, &quot;p.genericbutton&quot;, function(){
</p>
<pre>   let data = $(this).closest('tr').find('td:first').text();
   let n = data.indexOf(&quot;ExAddr&quot;);
   let m = data.indexOf(&quot;0x&quot;);
   var shortAddr = data.substring((m),(n));
   console.log(shortAddr);
   socket.emit('sendGeneric', {dstAddr: shortAddr});
</pre>
<p>});
...
...
&lt;/syntaxhighlight&gt;
</p>
<h4><span id="webserver/webserver.js"></span><span class="mw-headline" id="webserver.2Fwebserver.js">webserver/webserver.js</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=33" title="Edit section: webserver/webserver.js">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <code>webserver.js</code> application will receive commands from the web application and forward it to the gateway.
</p><p>When we get the <code>sendGeneric</code> command from the webserver, forward this message to the iot-gateway.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
function Webserver() {
</p>
<pre>   ...
   ...
   socket.on('sendToggle', function (data) {
       webserverInstance.emit('sendToggle', data);
   });
</pre>
<pre>   socket.on('sendGeneric', function (data) {
       webserverInstance.emit('sendGeneric', data);
   });
</pre>
<p>});
&lt;/syntaxhighlight&gt;
</p>
<h4><span class="mw-headline" id="iot-gateway.js">iot-gateway.js</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=34" title="Edit section: iot-gateway.js">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The <code>iot-gateway.js</code> file is responsible for initializing functions that are sent from the webserver application and are to be forwarded to the C based <code>collector</code> application.
</p><p>Here, when we get the request to send a generic command from the web app, we will call the <code>collector</code> application to send the actual generic command to the appropriate sensor.
</p><p>&lt;syntaxhighlight lan="javascript"&gt;
function Gateway() {
...
...
</p>
<pre>   /* rcvd send toggle req */
   cloudAdapter.on('sendToggle', function (data) {
       /* send toggle request */
       appClient.appC_sendToggle(data);
   });
</pre>
<pre>   /* rcvd send generic req */
   cloudAdapter.on('sendGeneric', function (data) {
       /* send generic request */
       appClient.appC_sendGeneric(data);
   });
</pre>
<p>...
...
&lt;/syntaxhighlight&gt;
</p><p>If you were able to follow all of the steps correctly, you should now be able to build and start the Linux Collector and the Local Gateway.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Run_the_Sensor_To_Cloud_gateway_with_Generic_Sensor">Run the Sensor To Cloud gateway with Generic Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=35" title="Edit section: Run the Sensor To Cloud gateway with Generic Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Copy this <code>/tutorial</code> folder that you have been modifying to your Linux machine if you have not done so already.
</p>
<h3><span class="mw-headline" id="Start_Linux_Collector_2">Start Linux Collector</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=36" title="Edit section: Start Linux Collector">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Copy the <code>/tutorial/</code> folder to the Linux machine.</li>
<li>Open a terminal and navigate to the collector folder <code>../tutorial/SensorToCloud/</code></li>
<li>Build all the necessary files for the project.
<ul><li><code>sudo ./build_all.sh</code></li></ul></li>
<li>Navigate to the collector folder <code>../tutorial/SensorToCloud/example/collector/</code></li>
<li>Build the collector C project by running the following command.
<ul><li><code>sudo make clean</code></li>
<li><code>sudo make host</code></li></ul></li>
<li>Connect the CC1310 LaunchPad running the <code>coprocessor_cc1310lp</code> project to the Linux machine via USB.
<ul><li>If you are using a Virtual Machine, you must connect the LaunchPad device to the Virtual Machine.</li></ul></li>
<li>Check what serial port the CC1310 LaunchPad is connected to by running the following command.
<ul><li><code>ls -l /dev/ttyACM*</code></li></ul></li>
<li>The collector application is configured to look at <code>/dev/ttyACM0</code> by default. If the previous command did not return a device is connected to <code>/dev/ttyACM0</code> and <code>/dev/ttyACM1</code>, the port needs to be changed in the <code>collector.cfg</code> file.
<ul><li>To change the COM port, edit the <code>devname</code> parameter in the <code>/tutorial/SensorToCloud/example/collector/collector.cfg</code> file. Save all changes.</li></ul></li>
<li>Run the <code>run_collector.sh</code> file that was generated during the build by running the following command in the <code>/tutorial/SensorToCloud/example/collector</code> folder.
<ul><li><code>sudo ./run_collector.sh collector.cfg</code></li></ul></li>
<li>If successful, the Linux Collector will detect the &quot;coprocessor&quot; and then run in the background.
<ul><li>If it failed, try running the command again. Make sure CC1310 LaunchPad is on the proper port defined in the <code>collector.cfg</code> file.</li></ul></li></ol>
<h3><span class="mw-headline" id="Start_Local_Gateway_Application_2">Start Local Gateway Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=37" title="Edit section: Start Local Gateway Application">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Open a new terminal and navigate to the <code>../tutorial/SensorToCloud/example/iot-gateway</code> folder.</li>
<li>Install the necessary Node packages by running the following command.
<ul><li><code>npm install</code></li></ul></li>
<li>After all the necessary node modules have been installed, run the gateway by entering the following command.
<ul><li><code>node iot-gateway.js localhost</code></li></ul></li>
<li>In a web browser, navigate to your &quot;localhost&quot; address, port 1350.
<ul><li><code><a rel="nofollow" class="external free" href="http://localhost:1350/">http://localhost:1350/</a></code></li></ul></li>
<li>If successful, you will see the &quot;TI 15.4-Stack Linux Gateway Example Application&quot; appear.</li></ol>
<h3><span class="mw-headline" id="Connecting_Sensor_to_Local_Gateway_Application_2">Connecting Sensor to Local Gateway Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=38" title="Edit section: Connecting Sensor to Local Gateway Application">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Click the <code>Open</code> button on the left hand side to allow devices to connect to the network.</li>
<li>The CC1310 LaunchPad running the <code>sensor_generic_cc1310lp</code> project should then connect to the network and appear in the application table.
<ul><li>If the sensor does not connect and appear, attempt to RESET or reflash the Sensor LaunchPad device and try again.</li></ul></li></ol>
<h3><span class="mw-headline" id="Using_the_Generic_Sensor_Function_2">Using the Generic Sensor Function</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;section=39" title="Edit section: Using the Generic Sensor Function">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>The generic sensor will send a value that corresponds to the number of times BTN-2 on the Sensor LaunchPad is pressed. (each time BTN-2 is pressed, the generic sensor value is incremented)</li>
<li>The generic sensor button on the gateway application will send a command to the corresponding sensor to print &quot;Hello from Sensor To Cloud Gateway&quot; to a terminal.</li>
<li>On Windows:
<ul><li>To start a COM terminal with the Sensor LaunchPad, first connect the sensor LaunchPad to the Windows machine via USB.</li>
<li>Open &quot;Device Manager&quot; and determine the COM port the LaunchPad is connected to.</li>
<li>Using a program such as PuTTY, start a &quot;Serial&quot; terminal session on the determined COM port.</li></ul></li></ol>

<!-- 
NewPP limit report
Cached time: 20201130221936
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.087 seconds
Real time usage: 0.087 seconds
Preprocessor visited node count: 154/1000000
Preprocessor generated node count: 160/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:45690-0!canonical and timestamp 20201130221936 and revision id 231255
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Adding New Sensor Support To Sub1GHz Sensor To Cloud Linux Gateway</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;oldid=231255">https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;oldid=231255</a>"					</div>
				<div id="catlinks" class="catlinks catlinks-allhidden" data-mw="interface"></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Adding+New+Sensor+Support+To+Sub1GHz+Sensor+To+Cloud+Linux+Gateway" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;oldid=231255" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 20 October 2017, at 12:00.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.087","walltime":"0.087","ppvisitednodes":{"value":154,"limit":1000000},"ppgeneratednodes":{"value":160,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130221936","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":232});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Adding_New_Sensor_Support_To_Sub1GHz_Sensor_To_Cloud_Linux_Gateway by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 05:43:44 GMT -->
</html>
