<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:16:42 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide","wgTitle":"TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide","wgCurRevisionId":156780,"wgRevisionId":156780,"wgArticleId":30999,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["AM335x","Android","Sitara Android"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide","wgRelevantArticleId":30999,"wgRequestId":"7bfb6ba34d1710538a14ad11","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI-Android-JB-4_2_2-DevKit-4_1_1_PortingGuide rootpage-TI-Android-JB-4_2_2-DevKit-4_1_1_PortingGuide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><table border="1">

<tbody><tr>
<td><a href="File_Construction_Icon_small.html" class="image"><img alt="Construction Icon small.png" src="https://processors.wiki.ti.com/images/8/89/Construction_Icon_small.png" width="50" height="44" /></a></td>
<td><b>This page is currently under construction.  The content of this page is due to change quite frequently and thus the quality and accuracy are not guaranteed until this message has been removed.  Please feel free to contribute to this page while construction is in progress.</b>
</td></tr>

</tbody></table>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#About_this_manual"><span class="tocnumber">1</span> <span class="toctext">About this manual</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Base_Port"><span class="tocnumber">2</span> <span class="toctext">Base Port</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Display"><span class="tocnumber">3</span> <span class="toctext">Display</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Introduction"><span class="tocnumber">3.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Features_Overview"><span class="tocnumber">3.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Android_Display_Subsystem_Overview"><span class="tocnumber">3.3</span> <span class="toctext">Android Display Subsystem Overview</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Driver_Configuration"><span class="tocnumber">3.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Android_Configuration"><span class="tocnumber">3.5</span> <span class="toctext">Android Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-9"><a href="#Display_density"><span class="tocnumber">3.5.1</span> <span class="toctext">Display density</span></a></li>
<li class="toclevel-3 tocsection-10"><a href="#Navigation_Keys"><span class="tocnumber">3.5.2</span> <span class="toctext">Navigation Keys</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Display_backlight"><span class="tocnumber">4</span> <span class="toctext">Display backlight</span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Introduction_2"><span class="tocnumber">4.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Driver_Configuration_2"><span class="tocnumber">4.2</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Android_Configuration_2"><span class="tocnumber">4.3</span> <span class="toctext">Android Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Touchscreen"><span class="tocnumber">5</span> <span class="toctext">Touchscreen</span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Introduction_3"><span class="tocnumber">5.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Features_Overview_2"><span class="tocnumber">5.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Driver_Configuration_3"><span class="tocnumber">5.3</span> <span class="toctext">Driver Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Add_touchscreen_driver_support"><span class="tocnumber">5.3.1</span> <span class="toctext">Add touchscreen driver support</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Test_touch_driver_using_getevent"><span class="tocnumber">5.3.2</span> <span class="toctext">Test touch driver using getevent</span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Touch_Calibration"><span class="tocnumber">5.3.3</span> <span class="toctext">Touch Calibration</span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Test_Touch_Calibration_in_Android"><span class="tocnumber">5.3.4</span> <span class="toctext">Test Touch Calibration in Android</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#Android_Touchscreen_configuration"><span class="tocnumber">5.4</span> <span class="toctext">Android Touchscreen configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Keypad"><span class="tocnumber">6</span> <span class="toctext">Keypad</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Introduction_4"><span class="tocnumber">6.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Features_Overview_3"><span class="tocnumber">6.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Driver_Configuration_4"><span class="tocnumber">6.3</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Android_Keypad_Configuration"><span class="tocnumber">6.4</span> <span class="toctext">Android Keypad Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#MMC"><span class="tocnumber">7</span> <span class="toctext">MMC</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Introduction_5"><span class="tocnumber">7.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Features_Overview_4"><span class="tocnumber">7.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Driver_Configuration_5"><span class="tocnumber">7.3</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Android_MMC_HAL_or_Vold_Configuration"><span class="tocnumber">7.4</span> <span class="toctext">Android MMC HAL or Vold Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34"><a href="#Audio"><span class="tocnumber">8</span> <span class="toctext">Audio</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#Testing_audio_from_command_line"><span class="tocnumber">8.1</span> <span class="toctext">Testing audio from command line</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-36"><a href="#WLAN"><span class="tocnumber">9</span> <span class="toctext">WLAN</span></a>
<ul>
<li class="toclevel-2 tocsection-37"><a href="#Introduction_6"><span class="tocnumber">9.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Features_Overview_5"><span class="tocnumber">9.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-39"><a href="#Android_WLAN_Sub-System_Overview"><span class="tocnumber">9.3</span> <span class="toctext">Android WLAN Sub-System Overview</span></a>
<ul>
<li class="toclevel-3 tocsection-40"><a href="#Application"><span class="tocnumber">9.3.1</span> <span class="toctext">Application</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Application_Framework"><span class="tocnumber">9.3.2</span> <span class="toctext">Application Framework</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#Libraries"><span class="tocnumber">9.3.3</span> <span class="toctext">Libraries</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-43"><a href="#Driver_Configuration_6"><span class="tocnumber">9.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-44"><a href="#Android_WiFi_HAL_Configuration"><span class="tocnumber">9.5</span> <span class="toctext">Android WiFi HAL Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-45"><a href="#Overlay_changes"><span class="tocnumber">9.5.1</span> <span class="toctext">Overlay changes</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-46"><a href="#Verify_WLAN_from_console"><span class="tocnumber">9.6</span> <span class="toctext">Verify WLAN from console</span></a></li>
<li class="toclevel-2 tocsection-47"><a href="#WLAN_calibration"><span class="tocnumber">9.7</span> <span class="toctext">WLAN calibration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-48"><a href="#Bluetooth"><span class="tocnumber">10</span> <span class="toctext">Bluetooth</span></a>
<ul>
<li class="toclevel-2 tocsection-49"><a href="#Introduction_7"><span class="tocnumber">10.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-50"><a href="#Features_Overview_6"><span class="tocnumber">10.2</span> <span class="toctext">Features Overview</span></a></li>
<li class="toclevel-2 tocsection-51"><a href="#Android_BT_Sub-System_Overview"><span class="tocnumber">10.3</span> <span class="toctext">Android BT Sub-System Overview</span></a></li>
<li class="toclevel-2 tocsection-52"><a href="#Driver_Configuration_7"><span class="tocnumber">10.4</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-53"><a href="#Android_BT_HAL_Configuration"><span class="tocnumber">10.5</span> <span class="toctext">Android BT HAL Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-54"><a href="#Overlay_changes_2"><span class="tocnumber">10.5.1</span> <span class="toctext">Overlay changes</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-55"><a href="#USB_Host_and_Gadget"><span class="tocnumber">11</span> <span class="toctext">USB Host and Gadget</span></a>
<ul>
<li class="toclevel-2 tocsection-56"><a href="#Introduction_8"><span class="tocnumber">11.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-57"><a href="#Driver_Configuration_8"><span class="tocnumber">11.2</span> <span class="toctext">Driver Configuration</span></a></li>
<li class="toclevel-2 tocsection-58"><a href="#Android_USB_Configuration"><span class="tocnumber">11.3</span> <span class="toctext">Android USB Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-59"><a href="#Android_USB_Gadget_Configuration"><span class="tocnumber">11.3.1</span> <span class="toctext">Android USB Gadget Configuration</span></a>
<ul>
<li class="toclevel-4 tocsection-60"><a href="#USB_Gadget_configuration_for_AM335x"><span class="tocnumber">11.3.1.1</span> <span class="toctext">USB Gadget configuration for AM335x</span></a></li>
<li class="toclevel-4 tocsection-61"><a href="#USB_Accessory_Gadget_configuration_for_AM335x"><span class="tocnumber">11.3.1.2</span> <span class="toctext">USB Accessory Gadget configuration for AM335x</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-62"><a href="#Android_USB_Host_Configuration"><span class="tocnumber">11.3.2</span> <span class="toctext">Android USB Host Configuration</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-63"><a href="#NAND"><span class="tocnumber">12</span> <span class="toctext">NAND</span></a>
<ul>
<li class="toclevel-2 tocsection-64"><a href="#Introduction_9"><span class="tocnumber">12.1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-3 tocsection-65"><a href="#NAND_Layout"><span class="tocnumber">12.1.1</span> <span class="toctext">NAND Layout</span></a>
<ul>
<li class="toclevel-4 tocsection-66"><a href="#U-boot_NAND_Layout"><span class="tocnumber">12.1.1.1</span> <span class="toctext">U-boot NAND Layout</span></a></li>
<li class="toclevel-4 tocsection-67"><a href="#Kernel_NAND_Layout"><span class="tocnumber">12.1.1.2</span> <span class="toctext">Kernel NAND Layout</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-68"><a href="#Fastboot"><span class="tocnumber">13</span> <span class="toctext">Fastboot</span></a>
<ul>
<li class="toclevel-2 tocsection-69"><a href="#NAND_Flashing"><span class="tocnumber">13.1</span> <span class="toctext">NAND Flashing</span></a>
<ul>
<li class="toclevel-3 tocsection-70"><a href="#NAND_Partition_Layout"><span class="tocnumber">13.1.1</span> <span class="toctext">NAND Partition Layout</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-71"><a href="#eMMC_Flashing"><span class="tocnumber">13.2</span> <span class="toctext">eMMC Flashing</span></a>
<ul>
<li class="toclevel-3 tocsection-72"><a href="#eMMC_Partition_Layout"><span class="tocnumber">13.2.1</span> <span class="toctext">eMMC Partition Layout</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-73"><a href="#Fastboot_Transfer_Size"><span class="tocnumber">13.3</span> <span class="toctext">Fastboot Transfer Size</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-74"><a href="#Sensors"><span class="tocnumber">14</span> <span class="toctext">Sensors</span></a>
<ul>
<li class="toclevel-2 tocsection-75"><a href="#Accelerometer"><span class="tocnumber">14.1</span> <span class="toctext">Accelerometer</span></a></li>
<li class="toclevel-2 tocsection-76"><a href="#Light_sensor"><span class="tocnumber">14.2</span> <span class="toctext">Light sensor</span></a></li>
<li class="toclevel-2 tocsection-77"><a href="#Temperature_Sensor"><span class="tocnumber">14.3</span> <span class="toctext">Temperature Sensor</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-78"><a href="#USB_camera"><span class="tocnumber">15</span> <span class="toctext">USB camera</span></a>
<ul>
<li class="toclevel-2 tocsection-79"><a href="#Kernel_configuration"><span class="tocnumber">15.1</span> <span class="toctext">Kernel configuration</span></a></li>
<li class="toclevel-2 tocsection-80"><a href="#Android_Configuration_3"><span class="tocnumber">15.2</span> <span class="toctext">Android Configuration</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-81"><a href="#USB_3G_Modem"><span class="tocnumber">16</span> <span class="toctext">USB 3G Modem</span></a>
<ul>
<li class="toclevel-2 tocsection-82"><a href="#Introduction_10"><span class="tocnumber">16.1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-2 tocsection-83"><a href="#Android_Telephony_Architecture"><span class="tocnumber">16.2</span> <span class="toctext">Android Telephony Architecture</span></a></li>
<li class="toclevel-2 tocsection-84"><a href="#USB_Modem_Mode_Switching"><span class="tocnumber">16.3</span> <span class="toctext">USB Modem Mode Switching</span></a>
<ul>
<li class="toclevel-3 tocsection-85"><a href="#USB_Mode_Switch_Configuration"><span class="tocnumber">16.3.1</span> <span class="toctext">USB Mode Switch Configuration</span></a></li>
<li class="toclevel-3 tocsection-86"><a href="#Add_USB_Mode_switch_as_a_Service"><span class="tocnumber">16.3.2</span> <span class="toctext">Add USB Mode switch as a Service</span></a></li>
<li class="toclevel-3 tocsection-87"><a href="#Start_usb_modeswitch_Service"><span class="tocnumber">16.3.3</span> <span class="toctext">Start usb_modeswitch Service</span></a></li>
<li class="toclevel-3 tocsection-88"><a href="#3G_Modem_Node_Permissions"><span class="tocnumber">16.3.4</span> <span class="toctext">3G Modem Node Permissions</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-89"><a href="#Kernel_Configuration_for_USB_Modem"><span class="tocnumber">16.4</span> <span class="toctext">Kernel Configuration for USB Modem</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-90"><a href="#Disclaimer"><span class="tocnumber">17</span> <span class="toctext">Disclaimer</span></a></li>
<li class="toclevel-1 tocsection-91"><a href="#Technical_Support_and_Product_Updates"><span class="tocnumber">18</span> <span class="toctext">Technical Support and Product Updates</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="About_this_manual">About this manual</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=1" title="Edit section: About this manual">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The goal of Porting Guide is to provide valuable information and instructions to people who want to run Android OS on their (new) HW. Information covered here will mainly be useful to port TI Android JB DevKit on Sitara-based devices.
</p><p><br />
Note: Detailed porting information in the different technical areas is dependent on the respective h/w architecture. The information provided here generally refers to the AM335x devices.
</p>
<h1><span class="mw-headline" id="Base_Port">Base Port</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=2" title="Edit section: Base Port">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The Android Board-specific configuration files are present in device/ti/&lt;boardname&gt;. e.g for am335xevm, the files are at &lt;android sources root&gt;/device/ti/am335xevm.
</p><p>The Jelly Bean release uses board-specific init file instead of the unified init.rc used in previous releases. The board name is determined by the android property ro.hardware which is the machine name set in the board file in the kernel. So the init file for am335xevm becomes init.am335xevm.rc.
</p>
<h1><span class="mw-headline" id="Display">Display</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=3" title="Edit section: Display">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=4" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of the porting guide describes the display system with respect to TI Android JB DevKit. AM335x EVM, AM335x Starter Kit and BeagleBone with LCD cape use LCD interface for display while BeagleBone Black (without LCD cape) uses HDMI output.
</p><p>Depending on the display size, android uses either the phone layout (e.g. AM335xevm) or tablet layout (BeagleBone Black).
</p>
<h2><span class="mw-headline" id="Features_Overview">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=5" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Supports LCD display interface on AM335x EVM, AM335x Starter Kit and BeagleBone with LCD cape</li>
<li>Supports DVI output on BeagleBone with DVI-D cape</li>
<li>Supports HDMI output on BeagleBone Black without any cape</li></ul>
<h2><span class="mw-headline" id="Android_Display_Subsystem_Overview">Android Display Subsystem Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=6" title="Edit section: Android Display Subsystem Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>See AOSP Graphics Guide at <a rel="nofollow" class="external free" href="http://s.android.com/devices/graphics.html">http://s.android.com/devices/graphics.html</a>
</p>
<h2><span class="mw-headline" id="Driver_Configuration">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=7" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Refer <a href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Foundational_Components/Kernel/Kernel_Drivers/Display/LCDC.html" title="AM335x LCD Controller Driver&#39;s Guide">AM335x LCD Controller Driver's Guide</a> for AM335x</li></ul>
<h2><span class="mw-headline" id="Android_Configuration">Android Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=8" title="Edit section: Android Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Display_density">Display density</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=9" title="Edit section: Display density">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The TI Android DevKit configures Android for mdpi display (dpi=160) for AM335x EVM, BeagleBone and BeagleBone Black. AM335x Starter Kit is configured as ldpi display (dpi=120)
</p><p>The dpi setting is done in device.mk as follows: (eg <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm_sk/blobs/rowboat-jb/device.mk">AM335x Starter Kit</a>)
</p>
<pre>PRODUCT_PROPERTY_OVERRIDES += \
    ro.sf.lcd_density=120
</pre>
<h3><span class="mw-headline" id="Navigation_Keys">Navigation Keys</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=10" title="Edit section: Navigation Keys">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To activate the Software Navigation Bar, add the following line in <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/blobs/rowboat-jb/overlay/frameworks/base/core/res/res/values/config.xml">overlay/frameworks/base/core/res/res/values/config.xml</a>. This is done by default for AM335x EVM
</p>
<pre>&lt;bool name="config_showNavigationBar"&gt;true&lt;/bool&gt;
</pre>
<p>In case you have a Landscape Display and the resolution is not high enough to enter Tablet-mode, you will see a Vertical Navigation Bar. To view the Navigation keys correctly in this case add the following lines in init.{ro.hardware}.rc
</p>
<pre># This board has landscape LCD, enable rotation of keys on Navigation bar
setprop lcd.landscape true
</pre>
<h1><span class="mw-headline" id="Display_backlight">Display backlight</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=11" title="Edit section: Display backlight">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=12" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section explains how the LCD backlight control is implemented in the DevKit. For variable backlight intensity, PWM-controlled backlight is generally used.
</p>
<h2><span class="mw-headline" id="Driver_Configuration_2">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=13" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>TBD
</p>
<h2><span class="mw-headline" id="Android_Configuration_2">Android Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=14" title="Edit section: Android Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For integration with the Android Backlight settings configuration, the liblights HAL needs to be implemented for the board. The output HAL library should have the name <b>lights.&lt;TARGET_PRODUCT&gt;.so</b>. E.g. for AM335x EVM, the liblights HAL is called <i>lights.am335xevm.so</i>.
</p><p>The liblights backlight HAL for AM335x EVM is implemented at <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/liblights">device/ti/am335xevm/liblights</a>.
</p><p>Android 4.2.2 framework requires the brightness scale to be 0-255. In TI Android DevKit liblights HAL, we map the 0-255 scale in Android framework to the 0-100 scale as supported by the LCD backlight driver. You can however specify the minimum brightness below which Brightness cannot be reduced from the Android settings in the overlay (e.g AM335x EVM <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/blobs/rowboat-jb/overlay/frameworks/base/core/res/res/values/config.xml">overlay/frameworks/base/core/res/res/values/config.xml</a>)
</p>
<pre>&lt;!-- Minimum screen brightness setting allowed by the power manager.
     The user is forbidden from setting the brightness below this level. --&gt;
&lt;integer name="config_screenBrightnessSettingMinimum"&gt;50&lt;/integer&gt;
&lt;integer name="config_screenBrightnessDim"&gt;50&lt;/integer&gt;
</pre>
<p>A setting of 50 in the Android framework corresponds to ~20% duty cycle on AM335x EVM.
</p>
<h1><span class="mw-headline" id="Touchscreen">Touchscreen</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=15" title="Edit section: Touchscreen">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_3">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=16" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The touchscreen is the primary input device for TI Android DevKit on AM335xevm, AM335x Starter Kit and BeagleBone LCD7/LCD3 cape
</p>
<h2><span class="mw-headline" id="Features_Overview_2">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=17" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The features supported by Touchscreen in Android are:
</p>
<ul><li>Single touch input</li>
<li>Single click</li>
<li>Single long click</li>
<li>Uni-direction motion touch</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration_3">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=18" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Add_touchscreen_driver_support">Add touchscreen driver support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=19" title="Edit section: Add touchscreen driver support">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>AM335x evm: Refer <a href="AM335x_Touchscreen_Driver%27s_Guide.html" title="AM335x Touchscreen Driver&#39;s Guide">AM335x Touchscreen Driver's Guide</a> for details</li></ul>
<h3><span class="mw-headline" id="Test_touch_driver_using_getevent">Test touch driver using getevent</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=20" title="Edit section: Test touch driver using getevent">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Once ADC Touchscreen driver is up through board file (e.g. board-am335xevm.c) configuration.</li>
<li>Test with AndroidFS as events are coming while touching the LCD display. Run on command prompt:</li></ul>
<pre>    # getevent
    add device 1: /dev/input/event1
      name:     "ti-tsc-adcc"

    /dev/input/event1: 0003 0000 00000659
    /dev/input/event1: 0003 0001 00000a31
    /dev/input/event1: 0001 014a 00000001
    /dev/input/event1: 0000 0000 00000000
    /dev/input/event1: 0003 0000 00000654
    /dev/input/event1: 0000 0000 00000000
    </pre>
<ul><li>It confirms that touch inputs and irq based event generation is working fine.</li></ul>
<h3><span class="mw-headline" id="Touch_Calibration">Touch Calibration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=21" title="Edit section: Touch Calibration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The platform data for TSC driver for AM335x contains the following fields to provide calibration data:
</p>
<pre>static struct tsc_data am335xevm_touchscreen_data = {
...
        .x = {
                .min = 0xCB,
                .max = 0xF9B,
                .inverted = 1,
        },
        .y = {
                .min = 0xC8,
                .max = 0xE93,
                .inverted = 1,
        },
...
</pre>
<p>X-axis is from left to right and Y-axis from top to bottom.
</p><p>min and max values are the actual touch data obtained at the extreme corners of the LCD screen. You can obtain the raw value returned by the touchscreen at the corners using the getevent utility in Android. Use the values for ABS_X and ABS_Y
</p>
<pre>root@android:/ # getevent -tl /dev/input/event3                                
[    2331.426687] EV_ABS       ABS_X                00000ea7            
[    2331.426687] EV_ABS       ABS_Y                00000819            
[    2331.426718] EV_ABS       ABS_PRESSURE         000000b8            
[    2331.426718] EV_KEY       BTN_TOUCH            DOWN                
[    2331.426718] EV_SYN       SYN_REPORT           00000000
</pre>
<h3><span class="mw-headline" id="Test_Touch_Calibration_in_Android">Test Touch Calibration in Android</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=22" title="Edit section: Test Touch Calibration in Android">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Run android on the board.</li>
<li>select "Menu" -&gt; "Dev Tools" -&gt; "Pointer Location" utility</li>
<li>Touch and draw on the screen and observe that the expected points are getting marked on the LCD screen.</li>
<li>if drawing on LCD is not proper then driver needs to be fine tune the above mentioned macros.</li></ul>
<h2><span class="mw-headline" id="Android_Touchscreen_configuration">Android Touchscreen configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=23" title="Edit section: Android Touchscreen configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>An .idc file is required to register the touch driver correctly with Android. AM335x uses <b>ti-tsc</b> touchscreen driver, so the .idc file becomes <i>ti-tsc.idc</i>. See <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/blobs/rowboat-jb/ti-tsc.idc">device/ti/am335xevm/ti-tsc.idc</a>
</p><p>Refer the AOSP guide on touch devices at <a rel="nofollow" class="external free" href="http://source.android.com/tech/input/touch-devices.html">http://source.android.com/tech/input/touch-devices.html</a> for more information.
</p><p>In the TI Android DevKit, touchscreen is set as the default input device. <a rel="nofollow" class="external text" href="https://gitorious.org/rowboat/frameworks-base/commit/281f53ae025a109a2385addd04c62fe6178ce4d7">commit</a>
</p>
<h1><span class="mw-headline" id="Keypad">Keypad</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=24" title="Edit section: Keypad">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_4">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=25" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The matrix gpio keypad and Volume gpio keys are in AM335x EVM. Here porting explanation for matrix gpio keypad controller.
</p>
<h2><span class="mw-headline" id="Features_Overview_3">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=26" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>3x2 matrix key layout supported</li>
<li>single click input</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration_4">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=27" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b> Add keypad driver support </b>
</p>
<ul><li>start the <i>Linux Kernel Configuration</i> tool:</li></ul>
<pre>    $ make ARCH=arm menuconfig
</pre> 
<ul><li>Select <span style="color: BLUE;"><i>Device Drivers</i></span> from the main menu.</li></ul>
<pre>    ...
    Power management options ---&gt;
    [*] Networking support ---&gt;
    '''Device Drivers ---&gt;'''
    File systems ---&gt;
    Kernel hacking ---&gt;
    ...</pre>
<ul><li>Select <span style="color: BLUE;"><i>Input device support</i></span> form the next menu:</li></ul>
<pre>    ...
    [ ] ISDN support  ---&gt;
    &lt; &gt; Telephony support  ---&gt;
    '''Input device support  ---&gt;'''
    Character devices  ---&gt;
    -*- I2C support  ---&gt;
    ...</pre>
<ul><li>Select <span style="color: BLUE;"> <i>Keyboards</i> </span> from the next menu:</li></ul>
<pre>    ...
    &lt; &gt;   Reset key
          *** Input Device Drivers ***
    '''[*]   Keyboards  ---&gt;'''
    [ ]   Mice  ---&gt;
    [ ]   Joysticks/Gamepads  ---&gt;
....</pre>
<ul><li>Select <span style="color: BLUE;"> <i>GPIO driven matrix keypad support</i> and <i>GPIO Buttons</i></span> from the next menu:</li></ul>
<pre>    ....
 &lt; &gt;   DECstation/VAXstation LK201/LK401 keyboard
 &lt;*&gt;   GPIO Buttons
 &lt; &gt;   Polled GPIO buttons
 &lt; &gt;   TCA6416/TCA6408A Keypad Support
 &lt;*&gt;   GPIO driven matrix keypad support
 &lt; &gt;   Maxim MAX7359 Key Switch Controller
....</pre>
<p><b>Board-specific Configuration</b>
The board-specific configuration includes, specifying the GPIOs, no. of rows and columns, debounce, scan settings etc. The following code snippet shows the configuration for AM335x EVM (arch/arm/mach-omap2/board-am335xevm.c).
</p>
<pre>static const uint32_t am335x_evm_matrix_keys[] = {
        KEY(0, 0, KEY_MENU),
        KEY(1, 0, KEY_BACK),
        KEY(2, 0, KEY_LEFT),

        KEY(0, 1, KEY_RIGHT),
        KEY(1, 1, KEY_ENTER),
        KEY(2, 1, KEY_DOWN),
};

const struct matrix_keymap_data am335x_evm_keymap_data = {
        .keymap      = am335x_evm_matrix_keys,
        .keymap_size = ARRAY_SIZE(am335x_evm_matrix_keys),
};

static const unsigned int am335x_evm_keypad_row_gpios[] = {
        GPIO_TO_PIN(1, 25), GPIO_TO_PIN(1, 26), GPIO_TO_PIN(1, 27)
};

static const unsigned int am335x_evm_keypad_col_gpios[] = {
        GPIO_TO_PIN(1, 21), GPIO_TO_PIN(1, 22)
};

static struct matrix_keypad_platform_data am335x_evm_keypad_platform_data = {
        .keymap_data       = &amp;am335x_evm_keymap_data,
        .row_gpios         = am335x_evm_keypad_row_gpios,
        .num_row_gpios     = ARRAY_SIZE(am335x_evm_keypad_row_gpios),
        .col_gpios         = am335x_evm_keypad_col_gpios,
        .num_col_gpios     = ARRAY_SIZE(am335x_evm_keypad_col_gpios),
        .active_low        = false,
        .debounce_ms       = 5,
        .col_scan_delay_us = 2,
};

...

static struct gpio_keys_button am335x_evm_volume_gpio_buttons[] = {
        {
                .code                   = KEY_VOLUMEUP,
                .gpio                   = GPIO_TO_PIN(0, 2),
                .active_low             = true,
                .desc                   = "volume-up",
                .type                   = EV_KEY,
                .wakeup                 = 1,
        },
        {
                .code                   = KEY_VOLUMEDOWN,
                .gpio                   = GPIO_TO_PIN(0, 3),
                .active_low             = true,
                .desc                   = "volume-down",
                .type                   = EV_KEY,
                .wakeup                 = 1,
        },
};

static struct gpio_keys_platform_data am335x_evm_volume_gpio_key_info = {
        .buttons        = am335x_evm_volume_gpio_buttons,
        .nbuttons       = ARRAY_SIZE(am335x_evm_volume_gpio_buttons),
};
</pre>
<p><b> Test keypad driver using getevent </b>
</p>
<ul><li>Once matrix gpio keypad and volume gpio keys driver is up through board file (e.g. board-am335xevm.c) configuration.</li>
<li>Test with AndroidFS as events are coming while pressing the keys. Run on command prompt:</li></ul>
<pre>    # getevent
    add device 1: /dev/input/event2
            name: "gpio-keys"
    add device 2: /dev/input/event0
            name: "matrix-keypad"

    /dev/input/event0: 0004 0004 00000002
    /dev/input/event0: 0001 009e 00000001
    /dev/input/event0: 0000 0000 00000000
    /dev/input/event0: 0004 0004 00000002
    /dev/input/event0: 0001 009e 00000000
    /dev/input/event0: 0000 0000 00000000
    </pre>
<ul><li>It confirms that keypad inputs and irq based event generation is working fine.</li></ul>
<h2><span class="mw-headline" id="Android_Keypad_Configuration">Android Keypad Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=28" title="Edit section: Android Keypad Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Android requires Key layout files (.kl files) for mapping Linux key codes and axis codes to Android key codes and axis codes and specifying associated policy flags.</li>
<li>The &lt;matrix keypad driver name&gt;.kl (e.g. QWERTY_Keypad.kl) or &lt;gpio keypad driver name&gt;.kl (e.g. gpio-keys.kl) should be present in root directory of AndroidFS.</li>
<li>Syntax of a Key layout File (Refer to the link: <a rel="nofollow" class="external free" href="http://source.android.com/tech/input/key-layout-files.html">http://source.android.com/tech/input/key-layout-files.html</a>):</li></ul>
<dl><dd><ul><li>Key declarations each consist of the keyword "key" followed by a Linux key code number(In Decimal), an Android key code name, and optional set of whitespace delimited policy flags.</li>
<li>For example:</li></ul></dd></dl>
<pre>  The gpio-keys.kl for Beaglebone looks like:
  # Beaglebone LCD Cape  GPIO KEYPAD keylayout
  key 105   BACK               WAKE
  key 106   HOME               WAKE
  key 103   MENU               WAKE
  key 108   SEARCH             WAKE
  key 28    POWER              WAKE
</pre>
<dl><dd><ul><li>For finding a suitable Android key code name for your requirement, follow the link: <a rel="nofollow" class="external free" href="http://source.android.com/tech/input/keyboard-devices.html">http://source.android.com/tech/input/keyboard-devices.html</a></li>
<li>The Policy Flags specify extra information such as: whether this key should wake the device, also while waking the device should this key press be considered etc. Complete information is available under the "Key Declarations" in the link: <a rel="nofollow" class="external free" href="http://source.android.com/tech/input/key-layout-files.html">http://source.android.com/tech/input/key-layout-files.html</a></li></ul></dd></dl>
<p><br />
</p>
<h1><span class="mw-headline" id="MMC">MMC</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=29" title="Edit section: MMC">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_5">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=30" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The MMC/SD card is used as the primary boot device and storage device on TI Android DevKit. This section gives details on configuring the MMC interface and supporting MMC/SD storage card.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Features_Overview_4">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=31" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The MMC/SD/SDIO driver supports following features
<br /> 
</p>
<ul><li>The driver is built in-kernel (part of vmlinux).</li>
<li>MMC cards including High Speed cards.</li>
<li>SD cards including SD High Speed and SDHC cards</li>
<li>Uses block bounce buffer to aggregate scattered blocks</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Driver_Configuration_5">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=32" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Refer <a href="AM335x_MMC/SD_Driver%27s_Guide.html" title="AM335x MMC/SD Driver&#39;s Guide">AM335x MMC/SD Driver's Guide</a> for AM335x</li></ul>
<h2><span class="mw-headline" id="Android_MMC_HAL_or_Vold_Configuration">Android MMC HAL or Vold Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=33" title="Edit section: Android MMC HAL or Vold Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Android system uses vold as the mount daemon, which detects, mounts and monitors the status of sdcard. The mount daemon needs a configuration file to tell it what the sdcard device is. Since Android 2.2 (froyo), it ships with a new implementation of vold (aka vold2). The configuration is changed to /etc/vold.fstab and its format is also changed. See <b><a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/system-core/blobs/rowboat-ics/rootdir/etc/vold.fstab">system/core/rootdir/etc/vold.fstab</a></b> in the Android source tree for the detailed explanations of the format.
</p><p>However, a fixed vold.fstab can only support block device with fixed name. 
</p>
<pre># cat /etc/vold.fstab
<b>dev_mount sdcard /mnt/sdcard 3 /devices/platform/omap/omap_hsmmc.0/mmc_host/mmc0</b>
dev_mount usb /mnt/usb2 auto /devices/platform/omap/ti81xx-usbss/musb-hdrc.1/usb1
</pre>
<p>Depending on the interface used these values can change. Best way is to probe sysfs directories to find the fixed name. For MMC the entry will be of the form:
</p>
<pre> /sys/devices/platform/omap/omap_hsmmc.X/mmc_host/mmcY
</pre>
<p><br />
Update the android storage list overlay at overlay/frameworks/base/core/res/res/xml/storage_list.xml
</p>
<pre>&lt;StorageList xmlns:android="http://schemas.android.com/apk/res/android"&gt;
    &lt;storage android:mountPoint="/storage/sdcard0"
             android:storageDescription="@string/storage_internal"
             android:primary="true"
             android:emulated="true"
             android:mtpReserve="100" /&gt;
&lt;/StorageList&gt;
</pre>
<h1><span class="mw-headline" id="Audio">Audio</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=34" title="Edit section: Audio">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This release supports audio playback and capture at 44.1kHz. For application-specific usage, the audio HAL supports the software resampler. The audio HAL is implemented at <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/hardware-ti-omap3/trees/rowboat-jb/audio">hardware/ti/omap3/audio</a>. The audio HAL uses the file mixer_paths.xml to configure the audio driver. This file contains the ALSA mixer settings for the various audio paths supported by the driver. The mixer_paths.xml is present at <i>device/ti/&lt;boardname&gt;</i> and is copied to the filesystem by the entry in device.mk. The following is the contents of <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/blobs/rowboat-jb/mixer_paths.xml">mixer_paths.xml for AM335x EVM</a>
</p>
<pre>&lt;mixer&gt;
  &lt;!-- These are the initial mixer settings --&gt;
  &lt;ctl name="DAC IF1 SWITCH" value="Normal" /&gt;

  &lt;path name="speaker"&gt;
    &lt;ctl name="PCM Playback Volume" value="120" /&gt;
  &lt;/path&gt;

  &lt;path name="headphone"&gt;
    &lt;ctl name="PCM Playback Volume" value="120" /&gt;
  &lt;/path&gt;

  &lt;path name="headset-mic"&gt;
    &lt;ctl name="Mic Jack Switch" value="1" /&gt;
    &lt;ctl name="Analog Left AUXL Capture Switch" value="1" /&gt;
    &lt;ctl name="Analog Right AUXR Capture Switch" value="1" /&gt;
    &lt;ctl name="Analog Capture Volume" value="3"/&gt;
   &lt;/path&gt;
&lt;/mixer&gt;
</pre>
<p>The mixers setting commands at the beginning of the file are executed when the audio HAL is initialized. The mixer settings within the various &lt;paths&gt; are executed when that mode of operation is selected.
</p>
<h3><span class="mw-headline" id="Testing_audio_from_command_line">Testing audio from command line</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=35" title="Edit section: Testing audio from command line">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>You can use tinyalsa utilities to test audio input/output from shell.
</p>
<ul><li>To play simple audio</li></ul>
<pre>   # tinyplay testfile.wav -n 16
</pre>
<ul><li>To record simple audio</li></ul>
<pre>   # tinycap testfile.wav -n 16
</pre>
<p><b>NOTE</b>: Android handles volume control in software. We recommend to keep the default volume levels close to maximum in the audio HAL.
</p>
<h1><span class="mw-headline" id="WLAN">WLAN</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=36" title="Edit section: WLAN">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_6">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=37" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of guide provides a step by step explanation of what's involved in adding a new WiFi driver and making WiFi work in a custom Android build like Rowboat.
<br />
</p>
<h2><span class="mw-headline" id="Features_Overview_5">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=38" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>WLAN (802.11 b/g/n)</li>
<li>Core IP pre-tested against WiFi specifications.</li>
<li>Station mode is fully supported.</li>
<li>Initial support for SoftAP/WiFi hotspot and WiFi Direct is available</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Android_WLAN_Sub-System_Overview">Android WLAN Sub-System Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=39" title="Edit section: Android WLAN Sub-System Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><a href="File_WLAN_Stack.html" class="image"><img alt="WLAN Stack.jpg" src="https://processors.wiki.ti.com/images/4/4a/WLAN_Stack.jpg" width="960" height="720" /></a>
<br />
<br />
Diagram explains WLAN event flow from application to h/w with respect to rowboat android source tree.
</p>
<h4><span class="mw-headline" id="Application">Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=40" title="Edit section: Application">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>Settings/Connection Manager:<b>&lt;android-src&gt;/packages/apps/Settings/src/com/android/settings/WirelessSettings.java</b></li></ul>
<h4><span class="mw-headline" id="Application_Framework">Application Framework</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=41" title="Edit section: Application Framework">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>WiFi manager:<b>&lt;android-src&gt;/frameworks/base/wifi/java/android/net/wifi</b></li>
<li>JNI Implementation:<b>&lt;android-src&gt;/frameworks/base/core/jni/android_net_wifi_Wifi.cpp</b></li></ul>
<h4><span class="mw-headline" id="Libraries">Libraries</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=42" title="Edit section: Libraries">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<ul><li>libhardware_legacy:<b>&lt;android-src&gt;/hardware/libhardware_legacy/wifi/wifi.c</b></li>
<li>wpa_supplicant (Daemon):<b>&lt;android-src&gt;/external/hostap/wpa_supplicant</b></li>
<li>Higher level network management is done in <b>&lt;android-src&gt;/frameworks/base/core/java/android/net</b>.</li></ul>
<h2><span class="mw-headline" id="Driver_Configuration_6">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=43" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In this Devkit release we are using WL12XX Compat wireless SDK. The drivers and firmwares of WL12XX Compat release are at <b>hardware/ti/wlan</b>
</p><p>To enable WLAN support in kernel the following settings need to be enabled:
</p>
<ul><li>First enable Wireless LAN device driver as shown below:</li></ul>
<pre>   Device Drivers  ---&gt;
       [*] Network device support  ---&gt;
           [*]   Wireless LAN ---&gt;
</pre>
<ul><li>Enable WLAN Networking support as shown below:</li></ul>
<pre>   [*] Networking support  ---&gt;
       -*-   Wireless  ---&gt;
           [*]   Wireless extensions sysfs files
</pre>
<p>This enables the following CONFIG options in kernel and allows WL12xx compat wlan drivers to be built:
</p>
<pre>   CONFIG_WLAN=y
   CONFIG_WIRELESS_EXT=y
   CONFIG_WEXT_CORE=y
   CONFIG_WEXT_PROC=y
   CONFIG_WEXT_PRIV=y
</pre>
<ul><li>The following additional options need to be enabled in kernel for WLAN to operate</li></ul>
<pre>  CONFIG_KEYS=y
  CONFIG_SECURITY=y
  CONFIG_CRYPTO=y
  CONFIG_CRYPTO_ARC4=y
  CONFIG_CRYPTO_ECB=y
  CONFIG_CRYPTO_AES=y
  CONFIG_CRYPTO_MICHAEL_MIC=y
  CONFIG_CRC7=y
</pre>
<ul><li>The relevant initialization and pin-muxing for MMC bus is done in the relevant board file e.g for AM335xevm <b><a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/kernel/blobs/rowboat-am335x-kernel-3.2/arch/arm/mach-omap2/board-am335xevm.c">arch/arm/mach-omap2/board-am335xevm.c</a></b>. Do take care of this initialization and pin-muxing if using any other MMC bus e.g. MMC3.</li></ul>
<p>The following code snippet shows the board-specific WLAN configuration done on AM335xevm. The code below is provided for information only and is not complete. Please refer to the source for more details.
</p>
<table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fff2f2; border: solid 1px #ffbfbf;">
<tbody><tr>
<td style="background-color: #ffafaf; border-bottom: 1px solid #888;"><font size="-1"><b>File:</b> arch/arm/mach-omap2/board-am335xevm.c arch/arm/mach-omap2/board-am335xevm.c</font>
</td></tr>
<tr>
<td>
<div class="scroll"><pre>struct wl12xx_platform_data am335xevm_wlan_data = {
        .irq = OMAP_GPIO_IRQ(AM335XEVM_WLAN_IRQ_GPIO),
        .board_ref_clock = WL12XX_REFCLOCK_38_XTAL, /* 38.4Mhz */
        .bt_enable_gpio = GPIO_TO_PIN(3, 21),
        .wlan_enable_gpio = GPIO_TO_PIN(1, 16),
};

/* Module pin mux for wlan and bluetooth */
static struct pinmux_config mmc2_wl12xx_pin_mux[] = {
        {"gpmc_a1.mmc2_dat0", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {"gpmc_a2.mmc2_dat1", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {"gpmc_a3.mmc2_dat2", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {"gpmc_ben1.mmc2_dat3", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {"gpmc_csn3.mmc2_cmd", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {"gpmc_clk.mmc2_clk", OMAP_MUX_MODE3 | AM33XX_PIN_INPUT_PULLUP},
        {NULL, 0},
};
...
static int wl12xx_set_power(struct device *dev, int slot, int on, int vdd)
{
        if (on) {
                gpio_direction_output(am335xevm_wlan_data.wlan_enable_gpio, 1);
                mdelay(70);
        } else {
                gpio_direction_output(am335xevm_wlan_data.wlan_enable_gpio, 0);
        }

        return 0;
}

static void wl12xx_init(int evm_id, int profile)
{
...
        if (wl12xx_set_platform_data(&amp;am335xevm_wlan_data))
                pr_err("error setting wl12xx data\n");

        dev = am335x_mmc[1].dev;
        if (!dev) {
                pr_err("wl12xx mmc device initialization failed\n");
                goto out;
        }
...
        ret = gpio_request_one(am335xevm_wlan_data.wlan_enable_gpio,
                GPIOF_OUT_INIT_LOW, "wlan_en");
...
        setup_pin_mux(wl12xx_pin_mux);

        pdata-&gt;slots[0].set_power = wl12xx_set_power;
out:
        return;
}
</pre>
</div>
</td></tr></tbody></table>
<p><br />
</p><p><i>See also: <a href="https://processors.wiki.ti.com/index.php?title=Wl127x&amp;action=edit&amp;redlink=1" class="new" title="Wl127x (page does not exist)"> WL127x WiLink6 Portal</a></i>
</p>
<h2><span class="mw-headline" id="Android_WiFi_HAL_Configuration">Android WiFi HAL Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=44" title="Edit section: Android WiFi HAL Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Enable building of TI version of wpa_supplicant 0.8.x in your BoardConfig.mk (e.g. <b>device/ti/am335xevm/BoardConfig.mk</b> for AM335xevm)</li></ul>
<p>This is by simply adding following options in BoardConfig.mk:
</p>
<pre>   BOARD_WPA_SUPPLICANT_DRIVER     &#160;:= NL80211
   WPA_SUPPLICANT_VERSION          &#160;:= VER_0_8_X_TI
   BOARD_WLAN_DEVICE               &#160;:= wl12xx_mac80211
   BOARD_SOFTAP_DEVICE             &#160;:= wl12xx_mac80211
   WIFI_DRIVER_MODULE_PATH         &#160;:= "/system/lib/modules/wl12xx_sdio.ko"
   WIFI_DRIVER_MODULE_NAME         &#160;:= "wl12xx_sdio"
</pre>
<p>This will set  WPA_BUILD_SUPPLICANT to true in <b>external/wpa_supplicant_8_ti/Android.mk</b> enabling building of wpa_supplicant 0.8.x with NL80211. At run time <b>wl12xx_sdio</b> will get loaded from <i>WIFI_DRIVER_MODULE_PATH</i>.
</p><p><b>BOARD_SOFTAP_DEVICE&#160;:= wl12xx_mac80211</b> needs to be set only if SoftAP/hotspot feature is required.
</p>
<ul><li>Next we need to provide a proper wpa_supplicant.conf for our device. That we will keep in <b>/data/misc/wifi</b>.</li></ul>
<ul><li>Set the correct permissions and paths created and load the core wi-fi drivers from <i>init.am335xevm.rc</i></li></ul>
<pre># wi-fi
   mkdir /data/misc/wifi/sockets 0770 wifi wifi
   mkdir /data/misc/dhcp 0770 dhcp dhcp
   insmod /system/lib/modules/compat.ko
   insmod /system/lib/modules/cfg80211.ko
   insmod /system/lib/modules/mac80211.ko
   insmod /system/lib/modules/wlcore.ko
   insmod /system/lib/modules/wl12xx.ko
   insmod /system/lib/modules/wl18xx.ko

</pre>
<ul><li>Set the wifi interface name in <i>device.mk</i></li></ul>
<pre>  PRODUCT_PROPERTY_OVERRIDES&#160;:= \
       wifi.interface=wlan0
</pre>
<ul><li>Start <b>wpa_supplicant</b> and <b>dhcpcd</b> from <i>init.am335xevm.rc</i>.</li></ul>
<pre>service wpa_supplicant /system/bin/wpa_supplicant \
       -iwlan0 -Dnl80211 -c/data/misc/wifi/wpa_supplicant.conf \
       -e/data/misc/wifi/entropy.bin
       class main
       socket wpa_wlan0 dgram 660 wifi wifi
       disabled
       oneshot
</pre>
<pre>service dhcpcd_wlan0 /system/bin/dhcpcd -ABKL
       class main
       disabled
       oneshot
</pre>
<pre>service iprenew_wlan0 /system/bin/dhcpcd -n
       class main
       disabled
       oneshot
</pre>
<p>The following entries are required to configure SoftAP/hotspot and WiFi Direct functions:
</p>
<ul><li>Register <b>hostap</b> service for SoftAP/hotspot:</li></ul>
<pre>service hostapd_bin /system/bin/hostapd -d /data/misc/wifi/hostapd.conf
   socket wpa_wlan0 dgram 660 wifi wifi
   disabled
   oneshot
</pre>
<ul><li>Register the supplicant and dhcp hooks for WiFi Direct:</li></ul>
<pre>service p2p_supplicant /system/bin/wpa_supplicant \
       -iwlan0 -Dnl80211 -c/data/misc/wifi/wpa_supplicant.conf -N \
       -ip2p0 -Dnl80211 -c/data/misc/wifi/p2p_supplicant.conf \
       -puse_p2p_group_interface=1
       class main
       socket wpa_wlan0 dgram 660 wifi wifi
       disabled
       oneshot
</pre>
<pre>service dhcpcd_p2p /system/bin/dhcpcd -aABKL
   disabled
   oneshot
</pre>
<pre>service iprenew_p2p /system/bin/dhcpcd -n
   disabled
   oneshot
</pre>
<h3><span class="mw-headline" id="Overlay_changes">Overlay changes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=45" title="Edit section: Overlay changes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following entries enable Wi-Fi for use by android network manager.
</p><p>Add the following entries in device/ti/&lt;boardname&gt;/overlay/frameworks/base/core/res/res/values/config.xml
</p>
<pre>&lt;string-array translatable="false" name="networkAttributes"&gt;
...
        &lt;item&gt;"wifi,1,1,1,-1,true"&lt;/item&gt;
        &lt;item&gt;"wifi_p2p,13,1,0,-1,true"&lt;/item&gt;
...
    &lt;/string-array&gt;

&lt;string-array translatable="false" name="radioAttributes"&gt;
        &lt;item&gt;"1,1"&lt;/item&gt;
...
    &lt;/string-array&gt;
</pre>
<p>Add the required permissions file into the android filesystem by updating device.mk. This also enables the Wi-Fi and Wi-Fi Direct options in the Settings App.
</p>
<pre>PRODUCT_COPY_FILES&#160;:= \
...
    frameworks/native/data/etc/android.hardware.wifi.xml:system/etc/permissions/android.hardware.wifi.xml \
    frameworks/native/data/etc/android.hardware.wifi.direct.xml:system/etc/permissions/android.hardware.wifi.direct.xml
</pre>
<h2><span class="mw-headline" id="Verify_WLAN_from_console">Verify WLAN from console</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=46" title="Edit section: Verify WLAN from console">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The following steps perform basic checks to see if WiFi driver is operational:
</p>
<pre># lsmod
wl12xx 142062 0 - Live 0xbf08d000 (O)
mac80211 248275 1 wl12xx, Live 0xbf03c000 (O)
cfg80211 161123 2 wl12xx,mac80211, Live 0xbf004000 (O)
compat 1706 0 - Live 0xbf000000 (O)


# insmod /system/lib/modules/wl12xx_sdio.ko
[  154.549804] wl1271: loaded
</pre>
<p>If you do not see the message <b>wl1271: loaded</b> after inserting <i>wl12xx_sdio.ko</i> kernel module, the wifi driver initialization may not be correct. Please ensure that all the relevant pinmuxing and gpio configuration is correct and not over-written.
</p><p>Next, check that the driver is not unloaded after initialization:
</p>
<pre># netcfg
lo       UP                                   127.0.0.1/8   0x00000049 00:00:00:00:00:00
sit0     DOWN                                   0.0.0.0/0   0x00000080 00:00:00:00:00:00
eth0     UP                               172.24.190.76/22  0x00001043 40:5f:c2:76:4c:99
wlan0    DOWN                                   0.0.0.0/0   0x00001002 00:12:34:56:78:90
</pre>
<p>If wlan0 is not available in netcfg output, the driver might have been unloaded due to some error.
</p><p>Now, we try to up the wlan0 interface:
</p>
<pre># netcfg wlan0 up
[ 8255.485626] wl1271: firmware booted (Rev 6.3.6.0.79_2)
[ 8255.491027] wl1271: Driver version: R4_SP2_03_00
[ 8255.515350] ADDRCONF(NETDEV_UP): wlan0: link is not ready
</pre>
<p>The above messages show that the interface is up and the firmware is downloaded to wlan module and booted.
</p><p>Ensure that wlan drivers are unloaded before trying the Android UI for wireless settings
</p>
<pre># netcfg wlan0 down
# rmmod wl12xx_sdio
</pre>
<p>If wlan0 is not available in netcfg output, the driver might have been unloaded due to some error.
</p><p>TBD
</p>
<h2><span class="mw-headline" id="WLAN_calibration">WLAN calibration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=47" title="Edit section: WLAN calibration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Copy the ini files used for calibration to the sdcard</li></ul>
<pre>  sudo cp -rv rowboat/hardware/ti/wlan/mac80211/ti-utils/ini_files /media/rootfs/system/etc/wifi
</pre>
<ul><li>Boot the board. Make sure WLAN is disabled. wl12xx_sdio.ko should NOT be loaded</li></ul>
<pre>root@android:/ # lsmod
omaplfb 10662 0 - Live 0xbf0ed000 (O)
pvrsrvkm 159205 49 omaplfb, Live 0xbf0bc000 (O)
wl12xx 142062 0 - Live 0xbf08e000 (O)
mac80211 251034 1 wl12xx, Live 0xbf03c000 (O)
cfg80211 161115 2 wl12xx,mac80211, Live 0xbf004000 (O)
compat 1706 0 - Live 0xbf000000 (O)
</pre>
<ul><li>Remove existing calibration file</li></ul>
<pre>  rm /system/etc/firmware/ti-connectivity/wl1271-nvs.bin
</pre>
<ul><li>Run the calibrator tool</li></ul>
<pre>  calibrator plt autocalibrate wlan0 /system/lib/modules/wl12xx_sdio.ko /system/etc/wifi/ini_files/127x/TQS_S_2.6.ini /system/etc/firmware/ti-connectivity/wl1271-nvs.bin
</pre>
<p>NOTE: Running the calibration results in a random MAC address being set. To set the desired MAC address, run the following step:
</p>
<pre>  calibrator set nvs_mac /system/etc/firmware/ti-connectivity/wl1271-nvs.bin &lt;MAC Address&gt;
</pre>
<p>You can verify the MAC address using the following command:
</p>
<pre>  calibrator get nvs_mac /system/etc/firmware/ti-connectivity/wl1271-nvs.bin
</pre>
<h1><span class="mw-headline" id="Bluetooth">Bluetooth</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=48" title="Edit section: Bluetooth">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_7">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=49" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section describes how to enable Bluetooth support on Android for wl1271 chipset.
<br />
</p>
<h2><span class="mw-headline" id="Features_Overview_6">Features Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=50" title="Edit section: Features Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Bluetooth 2.1</li>
<li>OPP, A2DP, AVRCP, HID profiles are supported.</li>
<li>HSP, HFP profiles are <b>NOT</b> supported</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Android_BT_Sub-System_Overview">Android BT Sub-System Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=51" title="Edit section: Android BT Sub-System Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Detailed information is available at the AOSP Bluetooth Guide <a rel="nofollow" class="external free" href="http://s.android.com/devices/bluetooth.html">http://s.android.com/devices/bluetooth.html</a>
</p><p><br />
</p><p>Enable Bluetooth with the following setting in BoardConfig.mk (e.g. <b>device/ti/am335xevm/BoardConfig.mk</b>) 
</p>
<pre>   # Bluetooth
   BOARD_HAVE_BLUETOOTH&#160;:= true
   BOARD_BLUETOOTH_BDROID_BUILDCFG_INCLUDE_DIR&#160;:= device/ti/am335xevm/bluetooth
</pre>
<p>The file bdroid_buildcfg.h in <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/blobs/rowboat-jb/bluetooth/bdroid_buildcfg.h">device/ti/am335xevm/bluetooth</a> specifies the Bluetooth Device Name
</p>
<h2><span class="mw-headline" id="Driver_Configuration_7">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=52" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>TI Android DevKit uses the TI Wilink7 Bluetooth driver along with the TI Shared-Transport driver (TI-ST) for managing the BT-UART.
</p>
<ul><li>WL12xx BT is interfaced to UART1 on AM335xevm. UART1 initialization and BT module registration with TI-ST is implemented at <b>arch/arm/mach-omap2/board-am335xevm.c</b></li></ul>
<ul><li>Bluetooth support is enabled in the kernel as shown below:</li></ul>
<pre>   [*] Networking support  ---&gt; 
       &lt;*&gt;   Bluetooth subsystem support  ---&gt;
           [*]   L2CAP protocol support
           &lt;*&gt;   RFCOMM protocol support
           &lt;*&gt;   RFCOMM protocol support
           &lt;*&gt;   BNEP protocol support
           [*]     Multicast filter support
           [*]     Protocol filter support 
           &lt;*&gt;   HIDP protocol support 
                 Bluetooth device drivers  ---&gt;
                   &lt;*&gt; HCI UART driver
                   [*]   UART (H4) protocol support 
                   [*]   HCILL protocol support
       &lt;*&gt;   RF switch subsystem support
</pre>
<p>This enables the following CONFIG options:
</p>
<pre>CONFIG_BT=y
CONFIG_BT_L2CAP=y
CONFIG_BT_RFCOMM=y
CONFIG_BT_RFCOMM_TTY=y
CONFIG_BT_BNEP=y
CONFIG_BT_BNEP_MC_FILTER=y
CONFIG_BT_BNEP_PROTO_FILTER=y
CONFIG_BT_HIDP=y
CONFIG_BT_HCIUART=y
CONFIG_BT_HCIUART_H4=y
CONFIG_BT_HCIUART_LL=y
CONFIG_RFKILL=y
</pre>
<ul><li>The following CONFIG options enable TI-ST and WiLink Bluetooth driver support:</li></ul>
<pre>CONFIG_BT_WILINK=y
CONFIG_TI_ST=y
</pre>
<ul><li>The following kernel configs are required for Bluetooth AVRCP support:</li></ul>
<pre>CONFIG_INPUT_MISC=y
CONFIG_INPUT_UINPUT=y
</pre>
<p>You can check this as follows:
</p>
<pre>   Device Drivers  ---&gt;
       Input device support  ---&gt;
           [*]   Miscellaneous devices  ---&gt;
                   &lt;*&gt;   User level driver support
</pre>
<p><br />
The following code-snippet shows board-level configuration for TI-ST on AM335xevm:
</p>
<table width="100%" cellpadding="0" cellspacing="0" style="background-color: #fff2f2; border: solid 1px #ffbfbf;">
<tbody><tr>
<td style="background-color: #ffafaf; border-bottom: 1px solid #888;"><font size="-1"><b>File:</b> arch/arm/mach-omap2/board-am335xevm.c</font>
</td></tr>
<tr>
<td>
<div class="scroll"><pre>struct ti_st_plat_data wilink_pdata = {
	.nshutdown_gpio = GPIO_TO_PIN(3, 21),
	.dev_name = "/dev/ttyO1",
	.flow_cntrl = 1,
	.baud_rate = 3000000,
	.suspend = plat_kim_suspend,
	.resume = plat_kim_resume,
	.chip_enable = plat_kim_chip_enable,
	.chip_disable = plat_kim_chip_disable,
};

static struct platform_device wl12xx_device = {
	.name		= "kim",
	.id		= -1,
	.dev.platform_data = &amp;wilink_pdata,
};

static struct platform_device btwilink_device = {
	.name = "btwilink",
	.id = -1,
};

static inline void __init am335xevm_init_btwilink(void)
{
	pr_info("am335xevm: bt init\n");

	platform_device_register(&amp;wl12xx_device);
	platform_device_register(&amp;btwilink_device);
}
</pre>
</div>
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Android_BT_HAL_Configuration">Android BT HAL Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=53" title="Edit section: Android BT HAL Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Set the correct permissions and paths created from <i>init.rc</i></li></ul>
<pre>   #Owners, Modes for Bluetooth
   chmod 0660 /dev/ttyO1
   chown bluetooth bluetooth /dev/ttyO1
   chmod 0660 /sys/class/rfkill/rfkill0/state
   chown bluetooth bluetooth /sys/class/rfkill/rfkill0/state
</pre>
<ul><li>The following services are registered in <i>init.rc</i> for Bluetooth operation:</li></ul>
<ul><li>dbus-daemon: (deal connections between hcid and system server)</li></ul>
<pre>   service dbus /system/bin/dbus-daemon --system --nofork
   class main
   socket dbus stream 660 bluetooth bluetooth
   user bluetooth
   group bluetooth net_bt_admin
</pre>
<ul><li>bluetoothd: create hcid (Bluetooth Host Controller Interface Daemon) service, but disabled at first</li></ul>
<pre>   service bluetoothd /system/bin/bluetoothd -n
   class main
   socket bluetooth stream 660 bluetooth bluetooth
   socket dbus_bluetooth stream 660 bluetooth bluetooth
   # init.rc does not yet support applying capabilities, so run as root and
   # let bluetoothd drop uid to bluetooth with the right linux capabilities
   group bluetooth net_bt_admin misc
   disabled
</pre>
<ul><li>uim-sysfs: userspace module for TI-ST kernel driver. This service attaches the BT UART HCI interface to the bluetooth stack at 3000000 baud rate. It is also responsible for loading the BT firmware on WL1271. The sources for uim-sysfs is found in <b>hadware/ti/wpan</b></li></ul>
<pre>   #shared transport user space mgr service for Bluetooth, FM and GPS
   service uim /system/bin/uim-sysfs
   class core
   user bluetooth
   group bluetooth net_bt_admin
</pre>
<h3><span class="mw-headline" id="Overlay_changes_2">Overlay changes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=54" title="Edit section: Overlay changes">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add bluetooth entry in the overlay to indicate bluetooth availability to network manager
</p>
<pre>&lt;string-array translatable="false" name="networkAttributes"&gt;
...
    &lt;item&gt;"bluetooth,7,7,0,-1,true"&lt;/item&gt;
...
&lt;/string-array&gt;

&lt;string-array translatable="false" name="radioAttributes"&gt;
...
    &lt;item&gt;"7,1"&lt;/item&gt;
...
</pre>
<p>Copy the Bluetooth permissions file and the relevant bluez conf file. The permissions file also enables Bluetooth menu in Settings
</p>
<pre>PRODUCT_COPY_FILES += \
    frameworks/native/data/etc/android.hardware.bluetooth.xml:system/etc/permissions/android.hardware.bluetooth.xml \
    system/bluetooth/data/main.nonsmartphone.conf:system/etc/bluetooth/main.conf
</pre>
<h1><span class="mw-headline" id="USB_Host_and_Gadget">USB Host and Gadget</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=55" title="Edit section: USB Host and Gadget">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_8">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=56" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Android JB supports both USB host and USB device ports. USB host can be used to connect Keyboard/Mouse, Mass storage device, modem dongles etc, while the USB device port is mainly used for adb and USB accessory gadgets.
</p>
<h2><span class="mw-headline" id="Driver_Configuration_8">Driver Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=57" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>See <a href="AM335x_USB_Driver%27s_Guide.html" title="AM335x USB Driver&#39;s Guide">AM335x USB Driver's Guide</a><i> for AM335xevm</i>
<ul><li>The USB Android Gadget driver on AM335x is enabled as shown below:</li></ul></li></ul>
<pre>-&gt; Device Drivers
   -&gt; USB support
      -&gt; USB Gadget Support
         -&gt; USB Gadget Drivers
            (X) Android Gadget
</pre>
<h2><span class="mw-headline" id="Android_USB_Configuration">Android USB Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=58" title="Edit section: Android USB Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Android_USB_Gadget_Configuration">Android USB Gadget Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=59" title="Edit section: Android USB Gadget Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="USB_Gadget_configuration_for_AM335x">USB Gadget configuration for AM335x</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=60" title="Edit section: USB Gadget configuration for AM335x">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The Android gadget driver is configured via the sysfs entries. These are done from init.<i>&lt;ro.hardware&gt;</i>.usb.rc. For am335xevm, this is <b>init.am335xevm.usb.rc</b>
</p>
<pre>on boot
    write /sys/class/android_usb/android0/iManufacturer ${ro.product.manufacturer}
    write /sys/class/android_usb/android0/iProduct ${ro.product.model}
    write /sys/class/android_usb/android0/iSerial ${ro.serialno}

on property:sys.usb.config=none
    stop adbd
    write /sys/class/android_usb/android0/enable 0
    write /sys/class/android_usb/android0/bDeviceClass 0
    setprop sys.usb.state ${sys.usb.config}

on property:sys.usb.config=adb
    write /sys/class/android_usb/android0/enable 0
    write /sys/class/android_usb/android0/idVendor 18d1
    write /sys/class/android_usb/android0/idProduct D002
    write /sys/class/android_usb/android0/functions ${sys.usb.config}
    write /sys/class/android_usb/android0/enable 1
    setprop sys.usb.state ${sys.usb.config}

on property:sys.usb.config=mtp
    write /sys/class/android_usb/android0/enable 0
    write /sys/class/android_usb/android0/idVendor 18d1
    write /sys/class/android_usb/android0/idProduct D108
    write /sys/class/android_usb/android0/functions ${sys.usb.config}
    write /sys/class/android_usb/android0/enable 1
    setprop sys.usb.state ${sys.usb.config}

on property:sys.usb.config=mtp,adb
    write /sys/class/android_usb/android0/enable 0
    write /sys/class/android_usb/android0/idVendor 18d1
    write /sys/class/android_usb/android0/idProduct D109
    write /sys/class/android_usb/android0/functions ${sys.usb.config}
    write /sys/class/android_usb/android0/enable 1
    start adbd
    setprop sys.usb.state ${sys.usb.config}
</pre>
<p>The sysfs settings need to be done depending on the features required to be enabled. By default only the adb and mtp mode is configured.
</p>
<h4><span class="mw-headline" id="USB_Accessory_Gadget_configuration_for_AM335x">USB Accessory Gadget configuration for AM335x</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=61" title="Edit section: USB Accessory Gadget configuration for AM335x">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>To indicate that the platform supports USB Host port add the following to device.mk:
</p>
<pre>PRODUCT_COPY_FILES += \
    frameworks/native/data/etc/android.hardware.usb.accessory.xml:system/etc/permissions/android.hardware.usb.accessory.xml

PRODUCT_PACKAGES += \
    com.android.future.usb.accessory
</pre>
<p>NOTE: The USB accessory does not work over USB Hub.
</p>
<h3><span class="mw-headline" id="Android_USB_Host_Configuration">Android USB Host Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=62" title="Edit section: Android USB Host Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To indicate that the platform supports USB Host port add the following to device.mk:
</p>
<pre>PRODUCT_COPY_FILES += \
    frameworks/native/data/etc/android.hardware.usb.host.xml:system/etc/permissions/android.hardware.usb.host.xml
</pre>
<h1><span class="mw-headline" id="NAND">NAND</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=63" title="Edit section: NAND">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_9">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=64" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section of porting guide will describe the NAND layout present on AM335x EVM.Micron MT29F2G08ABA Nand part (AM335x EVM) is supported.
</p>
<h3><span class="mw-headline" id="NAND_Layout">NAND Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=65" title="Edit section: NAND Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The NAND on the EVM has been configured in the following manner.
</p>
<pre> +------------+--&gt;0x00000000-&gt; SPL start
 |            |
 |            |--&gt;0x0001FFFF-&gt; SPL end  
 |            |--&gt;0x00020000-&gt; SPL.backup1 start
 |            |
 |            |--&gt;0x0003FFFF-&gt; SPL.backup1 end  
 |            |--&gt;0x00040000-&gt; SPL.backup2 start
 |            |
 |            |--&gt;0x0005FFFF-&gt; SPL.backup2 end  
 |            |--&gt;0x00060000-&gt; SPL.backup3 start
 |            |
 |            |--&gt;0x0007FFFF-&gt; SPL.backup3 end  
 |            |--&gt;0x00080000-&gt; U-Boot start
 |            |
 |            |--&gt;0x0025FFFF-&gt; U-Boot end  
 |            |--&gt;0x00260000-&gt; U-Boot ENV start
 |            |
 |            |
 |            |--&gt;0x0027FFFF-&gt; ENV end
 |            |--&gt;0x00280000-&gt; Linux Kernel start
 |            |
 |            |
 |            |
 |            |
 |            |--&gt;0x0077FFFF-&gt; Linux Kernel end
 |            |--&gt;0x00780000-&gt; Filesystem start
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 |            |
 +------------+--&gt;0x10000000-&gt; Filesystem end
</pre>
<p><br />
To change NAND layout, modify u-boot and kernel code as mentioned in below code snippet.
</p><p>Note: u-boot and kernel NAND layout should match as it is.
</p><p><br />
</p>
<h4><span class="mw-headline" id="U-boot_NAND_Layout">U-boot NAND Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=66" title="Edit section: U-boot NAND Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>File: <b>drivers/usb/gadget/u_fastboot_nand.c</b> <br />
Here is default NAND layout. Modify start and length fields as needed.
</p>
<pre> fastboot_ptentry nand_ptn[MAX_PTN] = {
       {
               .name   = "spl",
               .start  = 0x0000000,
               .length = 0x0020000, /* 128 K */
               /* Written into the first 4 0x20000 blocks
                  Use HW ECC */
               .flags  = FASTBOOT_PTENTRY_FLAGS_WRITE_I |
                         FASTBOOT_PTENTRY_FLAGS_WRITE_HW_BCH8_ECC |
                         FASTBOOT_PTENTRY_FLAGS_REPEAT_4,
       },
       {
               .name   = "uboot",
               .start  = 0x0080000,
               .length = 0x01E0000, /* 1.875 M */
               /* Skip bad blocks on write
                  Use HW ECC */
               .flags  = FASTBOOT_PTENTRY_FLAGS_WRITE_I |
                         FASTBOOT_PTENTRY_FLAGS_WRITE_HW_BCH8_ECC,
       },
       {
               .name   = "environment",
               .start  = NAND_ENV_OFFSET,  /* set in config file */
               .length = 0x0020000,
               .flags  = FASTBOOT_PTENTRY_FLAGS_WRITE_ENV |
                         FASTBOOT_PTENTRY_FLAGS_WRITE_HW_ECC,
       },
       {
               .name   = "kernel",
               .start  = 0x0280000,
               .length = 0x0500000, /* 5 M */
               .flags  = FASTBOOT_PTENTRY_FLAGS_WRITE_I |
                         FASTBOOT_PTENTRY_FLAGS_WRITE_HW_BCH8_ECC,
       },
       {
               .name   = "filesystem",
               .start  = 0x0780000,
               .length = 0xF880000, /* 248.5 M */
               .flags  = FASTBOOT_PTENTRY_FLAGS_WRITE_I |
                         FASTBOOT_PTENTRY_FLAGS_WRITE_HW_BCH8_ECC,
       },
 };
</pre>
<p><br />
</p>
<h4><span class="mw-headline" id="Kernel_NAND_Layout">Kernel NAND Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=67" title="Edit section: Kernel NAND Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>File: <b> arch/arm/mach-omap2/board-am335xevm.c </b>
</p><p>Here is default NAND layout. Modify offset and size fields as needed.
</p>
<pre> /* NAND partition information */
 static struct mtd_partition am335x_nand_partitions[] = {
 /* All the partition sizes are listed in terms of NAND block size */
       {
               .name           = "SPL",
               .offset         = 0,                    /* Offset = 0x0 */
               .size           = SZ_128K,
       },
       {
               .name           = "SPL.backup1",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x20000 */
               .size           = SZ_128K,
       },
       {
               .name           = "SPL.backup2",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x40000 */
               .size           = SZ_128K,
       },
       {
               .name           = "SPL.backup3",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x60000 */
               .size           = SZ_128K,
       },
       {
               .name           = "U-Boot",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x80000 */
               .size           = 15 * SZ_128K,
       },
       {
               .name           = "U-Boot Env",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x260000 */
               .size           = 1 * SZ_128K,
       },
       {
               .name           = "Kernel",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x280000 */
               .size           = 40 * SZ_128K,
       },
       {
               .name           = "File System",
               .offset         = MTDPART_OFS_APPEND,   /* Offset = 0x780000 */
               .size           = MTDPART_SIZ_FULL,
       },
 };
</pre>
<p><br />
</p><p><br />
</p>
<h1><span class="mw-headline" id="Fastboot">Fastboot</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=68" title="Edit section: Fastboot">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The fastboot protocol is a mechanism for communicating with bootloaders over USB.  It is designed to flash Android build images(x-loader, bootloader, kernel, system, userdata etc) on to the target device.
</p><p>Fastboot is implemented in u-boot. TI-Android-JB-4.2.2-DevKit-4.1.1 release fastboot implementation supports NAND and eMMC/SD flashing.
</p>
<h2><span class="mw-headline" id="NAND_Flashing">NAND Flashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=69" title="Edit section: NAND Flashing">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To configure fastboot for NAND flashing, make sure that CONFIG_FASTBOOT_NAND is defined in  <b>&lt;u-boot/&gt;include/configs/am335x_evm.h</b> file.
</p>
<pre>  File: &lt;u-boot/&gt;include/configs/am335x_evm.h
  #define CONFIG_FASTBOOT_NAND
</pre>
<h3><span class="mw-headline" id="NAND_Partition_Layout">NAND Partition Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=70" title="Edit section: NAND Partition Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Please refer to <a href="#U-boot_NAND_Layout"> U-boot NAND Layout</a> section for more details.
</p>
<h2><span class="mw-headline" id="eMMC_Flashing">eMMC Flashing</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=71" title="Edit section: eMMC Flashing">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To configure fastboot for eMMC/SD flashing, make sure that CONFIG_FASTBOOT_NAND is not defined in <b>u-boot/include/configs/am335x_evm.h</b> file.
</p>
<h3><span class="mw-headline" id="eMMC_Partition_Layout">eMMC Partition Layout</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=72" title="Edit section: eMMC Partition Layout">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Default eMMC partitioning layout is defined in <b>u-boot/drivers/usb/gadget/u_fastboot_mmc.c</b> file. The entry for each partition can be modified as per the requirement.
</p>
<pre>  File: drivers/usb/gadget/u_fastboot_mmc.c
  
  /* eMMC partition layout (All sizes are in kB)
   * Modify the below partition table to change the GPT configuration.
   * The entry for each partition can be modified as per the requirement.
   */
  static struct partition partitions[] = {
       { "-", 128 },                   /* Master Boot Record and GUID Partition Table */
       { "spl", 128 },                 /* First stage bootloader */
       { "bootloader", 512 },          /* Second stage bootloader */
       { "misc", 128 },                /* Rserved for internal purpose */
       { "-", 128 },                   /* Reserved */
       { "recovery", 8*1024 },         /* Recovery partition  */
       { "boot", 8*1024 },             /* Partition contains kernel + ramdisk images */
       { "system", 256*1024 },         /* Android file system */
       { "cache", 256*1024 },          /* Store Application Cache */
       { "userdata", 256*1024 },       /* User data */
       { "media", 0 },                 /* Media files */
       { 0, 0 },
  };
</pre>
<h2><span class="mw-headline" id="Fastboot_Transfer_Size">Fastboot Transfer Size</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=73" title="Edit section: Fastboot Transfer Size">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>BeagleBone white, AM335x-SK and old AM335xEVMs have only 256MB RAM. To be compatible with all devices, default fastboot assume 256MB max RAM.
</p><p>The current fastboot implementation assumes maximum 16MB of RAM will be used by u-boot itself. So the maximum fastboot transfer buffer  in current implentation is (256-16)= <b>240MB</b>, which means transfer image size is limited to 240MB. Fastboot will reject flashing for images more than 240MB size.
</p><p>You can change fastboot maximum tranfer size by modifying following macro.
</p>
<pre>  File: include/configs/am335x_evm.h
  
  #define CONFIG_FASTBOOT_MAX_TRANSFER_SIZE       (SZ_256M - SZ_16M)
</pre>
<h1><span class="mw-headline" id="Sensors">Sensors</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=74" title="Edit section: Sensors">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Accelerometer">Accelerometer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=75" title="Edit section: Accelerometer">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The STMicro LIS33 Accelerometer is supported on AM335x evm.
</p><p>Kernel driver for accelerometer on AM335x&#160;: <a rel="nofollow" class="external free" href="http://gitorious.org/rowboat/kernel/trees/rowboat-am335x-kernel-3.2/drivers/misc/lis3lv02d">http://gitorious.org/rowboat/kernel/trees/rowboat-am335x-kernel-3.2/drivers/misc/lis3lv02d</a>
</p><p>Android HAL on AM335xevm: <a rel="nofollow" class="external free" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors">http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors</a>
</p><p>To indicate accelerometer support to android add the following line in device.mk
</p>
<pre>PRODUCT_COPY_FILES += \
    frameworks/native/data/etc/android.hardware.sensor.accelerometer.xml:system/etc/permissions/android.hardware.sensor.accelerometer.xml
</pre>
<h2><span class="mw-headline" id="Light_sensor">Light sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=76" title="Edit section: Light sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>AM335x evm supports light sensor TSL2550.
</p><p>Light sensor kernel driver&#160;: <a rel="nofollow" class="external free" href="http://gitorious.org/rowboat/kernel/blobs/rowboat-am335x-kernel-3.2/drivers/misc/tsl2550.c">http://gitorious.org/rowboat/kernel/blobs/rowboat-am335x-kernel-3.2/drivers/misc/tsl2550.c</a>
</p><p>Please note that the standard linux driver is modified to report light sensor values to the input sub-system. See <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/kernel/commit/bd34846b8f650d1238935ceaf8ce6f496f06e60b">commit</a>.
</p><p>Android HAL on AM335xevm: <a rel="nofollow" class="external free" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors">http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors</a>
</p><p>To indicate light sensor support to android add the following line in device.mk
</p>
<pre>PRODUCT_COPY_FILES += \
    frameworks/native/data/etc/android.hardware.sensor.light.xml:system/etc/permissions/android.hardware.sensor.light.xml
</pre>
<p>You can use the light sensor input to modify the LCD backlight intensity. You need to add the following entry in the overlay:
</p>
<pre>  &lt;bool name="config_automatic_brightness_available"&gt;true&lt;/bool&gt;
</pre>
<p>Also you need to implement a lookup table to map the light intensity to the LCD backlight values. Please refer to the <a rel="nofollow" class="external text" href="https://gitorious.org/rowboat/vendor-ti-am335xevm/commit/bda3b0e24b3086671765838c6a5feff57e8c394c">overlay patch</a> file for more details.
</p>
<h2><span class="mw-headline" id="Temperature_Sensor">Temperature Sensor</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=77" title="Edit section: Temperature Sensor">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>AM335xevm supports temperature sensor LM75.
</p><p>Kernel driver path&#160;: <a rel="nofollow" class="external free" href="https://gitorious.org/rowboat/kernel/blobs/rowboat-am335x-kernel-3.2/drivers/hwmon/lm75.c">https://gitorious.org/rowboat/kernel/blobs/rowboat-am335x-kernel-3.2/drivers/hwmon/lm75.c</a>
The driver is modified to be compatible with the android sensor input subsystem. See commits <a rel="nofollow" class="external text" href="https://gitorious.org/rowboat/kernel/commit/3a5a57af16e1c4c5548963d15273f61a4aa3eb50">here</a> and <a rel="nofollow" class="external text" href="https://gitorious.org/rowboat/kernel/commit/1deb937aa949a0edc54cca6b42aa9ca7cbeb68c7">here</a>
</p><p>Android HAL for AM335xevm is at&#160;:<a rel="nofollow" class="external free" href="http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors">http://gitorious.org/rowboat/vendor-ti-am335xevm/trees/rowboat-jb/libsensors</a>
</p>
<h1><span class="mw-headline" id="USB_camera">USB camera</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=78" title="Edit section: USB camera">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section discusses interfacing USB camera with android
</p>
<h2><span class="mw-headline" id="Kernel_configuration">Kernel configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=79" title="Edit section: Kernel configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Enable the following CONFIGs to add support for USB camera in kernel:
</p>
<pre>  CONFIG_USB_VIDEO_CLASS=y
  CONFIG_USB_VIDEO_CLASS_INPUT_EVDEV=y
</pre>
<h2><span class="mw-headline" id="Android_Configuration_3">Android Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=80" title="Edit section: Android Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Enable USB Camera support in BoardConfig.mk. Also disable stub camera
</p>
<pre>   BOARD_USB_CAMERA&#160;:= true
   #USE_CAMERA_STUB&#160;:= true
</pre>
<p>Add the following entries in device.mk
</p>
<pre>#Camera
PRODUCT_PACKAGES += \
        camera.omap3 \
</pre>
<p><b>NOTE</b>: The Camera icon will automatically appear in apps due to presence of camera.omap3.so in the filesystem.
</p><p>Add permission for camera in init.am335xevm.rc. This is used for temporary storage before capture.
</p>
<pre>   mkdir /data/misc/camera 0770 media media
</pre>
<p>Add camera permissions in ueventd.am335xevm.rc
</p>
<pre>  /dev/video0         0666  root       root
</pre>
<p>The Camera HAL is at <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/hardware-ti-omap3/trees/rowboat-jb/camera">hardware/ti/omap3/camera</a>.
</p><p><b>NOTE</b>: By default it is assumed that the USB camera is registered as /dev/video0 ( <a rel="nofollow" class="external text" href="http://gitorious.org/rowboat/hardware-ti-omap3/blobs/rowboat-ics/camera/CameraHardware.cpp#line81">source</a> ). You may need to change this for your device.
<br />
</p>
<h1><span class="mw-headline" id="USB_3G_Modem">USB 3G Modem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=81" title="Edit section: USB 3G Modem">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_10">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=82" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section describes how to integrate USB 3G modem with Android.
</p>
<h2><span class="mw-headline" id="Android_Telephony_Architecture">Android Telephony Architecture</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=83" title="Edit section: Android Telephony Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The diagram illustrates the Android's Telephony system architecture. 
</p><p><a href="File_AndroidTelephony.html" class="image"><img alt="AndroidTelephony.gif" src="https://processors.wiki.ti.com/images/3/3d/AndroidTelephony.gif" width="666" height="618" /></a> 
</p><p><b>Application:</b> All the telephony related applications like Dialer, Call tracker, SMS, MMS, GPRS, Antenna signal indicator and etc, will be tied up with the Android telephony framework services. The telephony framework provides APIs to access the Phone. 
</p><p><b>Framework services:</b> Telephony framework will be initialized and started during the system start up. All the queries from the application through API will directed to the Radio interface Layer of Android by these services. The service will keep tracking of all the unsolicited commands from the modem. Unsolicited commands are the commands initiated from the modem. 
</p><p><b>Radio Interface Layer (RIL):</b> It is the bridge between Android phone framework services and the hardware.The RIL consist of two primary components. 
</p>
<ul><li>RIL Daemon</li>
<li>Vendor RIL</li></ul>
<p><b>RIL Daemon:</b> RILD will be initialized during the Android system start up. It will read the system property or use command line arguments to find which library has to be used for Vendor RIL.It provide the appropriate input for vendor RIL and finally calls RIL_Init function of Vendor RIL to map all the Vendor RIL functions to the upper layer. 
</p><p><b>Vendor RIL:</b> It is a library specific to each modem that processes all communication with radio hardware and dispatches calls to the RIL Daemon.
</p><p><br />
</p>
<h2><span class="mw-headline" id="USB_Modem_Mode_Switching">USB Modem Mode Switching</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=84" title="Edit section: USB Modem Mode Switching">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>USB 3G modem devices will have two modes 
</p>
<ul><li>USB flash memory storage</li>
<li>USB Modem.</li></ul>
<p>The first mode, sometimes known as ZeroCD, is often used to provide driver for desktop operating system and is generally of no interest for Android.
</p><p>By default modem will be in flash memory storage mode. usb_modeswitch utility can be used for switching USB 3G modem into modem mode.
</p>
<h3><span class="mw-headline" id="USB_Mode_Switch_Configuration">USB Mode Switch Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=85" title="Edit section: USB Mode Switch Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The ARM compiled usb_modeswitch binary and its sources can be obtained from <a rel="nofollow" class="external text" href="http://www.draisberghof.de/usb_modeswitch/#download">HERE</a> 
Copy the usb_modeswitch (ARM Compiled binary) and usb_modeswitch.conf to the /system/bin folder.
</p><p>Below is example usb_modeswitch.conf file for the Huawei E1731 Modem (Airtel in India).
</p>
<pre>  Huawei E1731

  EnableLogging=1

  DefaultVendor= 0x12d1
  DefaultProduct=0x1446

  TargetVendor=  0x12d1
  TargetProductList="1001,1406,140b,140c,1412,141b,1436,14ac,1506"

  CheckSuccess=20

  MessageEndpoint= 0x01
  MessageContent="55534243123456780000000000000011062000000100000000000000000000"
</pre>
<p>The vendor IDs and product IDs mentioned in this configurations are specific to modem. If you are using some other modem then, you can find vendor IDs and product IDs using lsusb command and modify  usb_modeswitch.conf file accordingly.
</p>
<h3><span class="mw-headline" id="Add_USB_Mode_switch_as_a_Service">Add USB Mode switch as a Service</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=86" title="Edit section: Add USB Mode switch as a Service">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Add USB mode switch as a service in init.&lt;platform&gt;.rc file. 
</p>
<pre>&#160;:Ex device/ti/am335xevm/init.am335xevm.rc file
 
 #Download usb_modeswitch ARM complied binrary from
 #    <a rel="nofollow" class="external free" href="http://www.draisberghof.de/usb_modeswitch/#download">http://www.draisberghof.de/usb_modeswitch/#download</a>
 #    and place it in "/system/bin" folder of your filesystem with "usb_modeswitch" name.
 service usb_modeswitch /system/bin/usb_modeswitch -I -W -c /etc/usbmodeswitch.conf
     class main
     disabled
     oneshot
</pre>
<h3><span class="mw-headline" id="Start_usb_modeswitch_Service">Start usb_modeswitch Service</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=87" title="Edit section: Start usb modeswitch Service">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Android vold is modified to start usb_modeswitch service if "usb" is connected. If 3G modem is connected, it will switch it in modem mode.
</p>
<h3><span class="mw-headline" id="3G_Modem_Node_Permissions">3G Modem Node Permissions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=88" title="Edit section: 3G Modem Node Permissions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Once 3G modem is switched into modem mode. It will provide 3 serial nodes.
/dev/ttyUSB0: used for your ppp data connections. 
/dev/ttyUSB2: used for GSM related tasks such as SMS and network checks. 
/dev/ttyUSB1: not used at all.
</p><p>Note: The actual device assignments (e.g. /dev/ttyUSB0) may be different if you have other USB serial devices installed.. 
</p><p>Provide appropriate permissions to these nodes.
</p>
<pre> diff --git a/ueventd.am335xevm.rc b/ueventd.am335xevm.rc
 index d7cc538..2ba0518 100644
 --- a/ueventd.am335xevm.rc
 +++ b/ueventd.am335xevm.rc
 @@ -1 +1,4 @@
 -/dev/video0         0666  root       root
 +/dev/video0    0666    root    root
 +/dev/ttyUSB0   0660    radio   radio
 +/dev/ttyUSB1   0660    radio   radio
 +/dev/ttyUSB2   0660    radio   radio
</pre>
<h2><span class="mw-headline" id="Kernel_Configuration_for_USB_Modem">Kernel Configuration for USB Modem</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=89" title="Edit section: Kernel Configuration for USB Modem">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Make sure following configuration options are enabled in kernel.
</p>
<pre>Device Drivers  ---&gt;
 [*] Network device support  ---&gt;
   &lt;*&gt;   PPP (point-to-point protocol) support
     &lt;*&gt;     PPP BSD-Compress compression
     &lt;*&gt;     PPP Deflate compression
     &lt;*&gt;     PPP support for async serial ports
     &lt;*&gt;     PPP support for sync tty ports
 [*] USB support  ---&gt;
   &lt;*&gt;   USB Modem (CDC ACM) support
   &lt;*&gt;   USB Serial Converter support  ---&gt;
     [*]   USB Generic Serial Driver
     &lt;*&gt;   USB driver for GSM and CDMA modems
</pre>
<h1><span class="mw-headline" id="Disclaimer">Disclaimer</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=90" title="Edit section: Disclaimer">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>All components explained in this porting guide are validated against TI Android DevKit release 4.2.2.</li>
<li>This guide can be taken as reference to port mentioned components on similar architecture.</li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="Technical_Support_and_Product_Updates">Technical Support and Product Updates</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;section=91" title="Edit section: Technical Support and Product Updates">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>For further information or to report any problems, contact <a rel="nofollow" class="external free" href="http://e2e.ti.com/android">http://e2e.ti.com/android</a> or <a rel="nofollow" class="external free" href="http://support.ti.com/">http://support.ti.com</a>. <br /> For community support join <a rel="nofollow" class="external free" href="http://groups.google.com/group/rowboat">http://groups.google.com/group/rowboat</a> <br /> For IRC <a rel="nofollow" class="external text" href="http://webchat.freenode.net/?channels=rowboat">#rowboat</a> on irc.freenode.net <br />
</p>
<!-- 
NewPP limit report
Cached time: 20201201020421
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.133 seconds
Real time usage: 0.137 seconds
Preprocessor visited node count: 710/1000000
Preprocessor generated node count: 1190/1000000
Postexpand include size: 1026/2097152 bytes
Template argument size: 176/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postexpand size: 13619/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    6.109      1 -total
 26.94%    1.646      2 Template:Box_File
 23.01%    1.406      1 Template:Under_Construction
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:30999-0!canonical and timestamp 20201201020421 and revision id 156780
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI-Android-JB-4.2.2-DevKit-4.1.1 PortingGuide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;oldid=156780">https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;oldid=156780</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_AM335x.html" title="Category:AM335x">AM335x</a></li><li><a href="Category_Android.html" title="Category:Android">Android</a></li><li><a href="Category_Sitara_Android.html" title="Category:Sitara Android">Sitara Android</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI-Android-JB-4.2.2-DevKit-4.1.1+PortingGuide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI-Android-JB-4.2.2-DevKit-4.1-3.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI-Android-JB-4.2.2-DevKit-4.1-3.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI-Android-JB-4.2.2-DevKit-4.1-2.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI-Android-JB-4.2.2-DevKit-4.1-2.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;oldid=156780" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 12 July 2013, at 01:33.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.133","walltime":"0.137","ppvisitednodes":{"value":710,"limit":1000000},"ppgeneratednodes":{"value":1190,"limit":1000000},"postexpandincludesize":{"value":1026,"limit":2097152},"templateargumentsize":{"value":176,"limit":2097152},"expansiondepth":{"value":3,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":13619,"limit":5000000},"timingprofile":["100.00%    6.109      1 -total"," 26.94%    1.646      2 Template:Box_File"," 23.01%    1.406      1 Template:Under_Construction"]},"cachereport":{"timestamp":"20201201020421","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":232});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI-Android-JB-4.2.2-DevKit-4.1.1_PortingGuide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:16:45 GMT -->
</html>
