<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:26:15 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI811X PSP PCI Express Endpoint Boot Driver User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide","wgTitle":"TI811X PSP PCI Express Endpoint Boot Driver User Guide","wgCurRevisionId":119533,"wgRevisionId":119533,"wgArticleId":17529,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["TI811X"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide","wgRelevantArticleId":17529,"wgRequestId":"59ec202ba3c340a2fd301b4c","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide rootpage-TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI811X PSP PCI Express Endpoint Boot Driver User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">TI811X PCI Express Endpoint Boot Driver User Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Linux PSP</div> 
<p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Scope"><span class="tocnumber">2</span> <span class="toctext"><b>Scope</b></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Conventions"><span class="tocnumber">3</span> <span class="toctext"><b>Conventions</b></span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Known_Issues.2FRestrictions_.28Read_this_before_you_proceed.29"><span class="tocnumber">4</span> <span class="toctext"><b>Known Issues/Restrictions </b><span><b>(Read this before you proceed)</b></span></span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Setup"><span class="tocnumber">5</span> <span class="toctext"><b>Setup</b></span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Conflict_with_NAND.2FNOR_and_TI811X_PCIe_Boot_Mode_setting"><span class="tocnumber">5.1</span> <span class="toctext"><b>Conflict with NAND/NOR and TI811X PCIe Boot Mode setting</b></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Setting_up_the_TI811X_RC"><span class="tocnumber">5.2</span> <span class="toctext"><b>Setting up the TI811X RC</b></span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Setting_up_TI811X_EP"><span class="tocnumber">5.3</span> <span class="toctext"><b>Setting up TI811X EP</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Keeping_the_Required_Modules_Ready"><span class="tocnumber">6</span> <span class="toctext"><b>Keeping the Required Modules Ready</b></span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#PCIe_EP_Boot_Driver"><span class="tocnumber">6.1</span> <span class="toctext"><b>PCIe EP Boot Driver</b></span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Features_Supported"><span class="tocnumber">6.1.1</span> <span class="toctext"><b>Features Supported</b></span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Features_NOT_Supported"><span class="tocnumber">6.1.2</span> <span class="toctext"><b>Features NOT Supported</b></span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Supported_IOCTLs"><span class="tocnumber">6.1.3</span> <span class="toctext"><b>Supported IOCTLs</b></span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Source_Files"><span class="tocnumber">6.1.4</span> <span class="toctext"><b>Source Files</b></span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Steps_for_Building_for_TI811X_Kernel"><span class="tocnumber">6.1.5</span> <span class="toctext"><b>Steps for Building for TI811X Kernel</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-16"><a href="#U-Boot"><span class="tocnumber">6.2</span> <span class="toctext"><b>U-Boot</b></span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#TI811X"><span class="tocnumber">6.2.1</span> <span class="toctext">TI811X</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-18"><a href="#PCIe_EP_Boot_Application"><span class="tocnumber">6.3</span> <span class="toctext"><b>PCIe EP Boot Application</b></span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Features_Supported_2"><span class="tocnumber">6.3.1</span> <span class="toctext"><b>Features Supported</b></span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Features_NOT_Supported_2"><span class="tocnumber">6.3.2</span> <span class="toctext"><b>Features NOT Supported</b></span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Steps_for_Building_for_TI811X_RC"><span class="tocnumber">6.3.3</span> <span class="toctext"><b>Steps for Building for TI811X RC</b></span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Tuning_Boot_Application"><span class="tocnumber">6.3.4</span> <span class="toctext"><b>Tuning Boot Application</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#PCIe_EP_U-Boot_Boot_Script"><span class="tocnumber">6.4</span> <span class="toctext"><b>PCIe EP U-Boot Boot Script</b></span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Creating_U-Boot_Script"><span class="tocnumber">6.4.1</span> <span class="toctext"><b>Creating U-Boot Script</b></span></a></li>
<li class="toclevel-3 tocsection-25"><a href="#Auto_Booting_with_the_Bootscript"><span class="tocnumber">6.4.2</span> <span class="toctext"><b>Auto Booting with the Bootscript</b></span></a>
<ul>
<li class="toclevel-4 tocsection-26"><a href="#Updating_U-Boot"><span class="tocnumber">6.4.2.1</span> <span class="toctext"><b>Updating U-Boot</b></span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#TI811X_2"><span class="tocnumber">6.4.2.2</span> <span class="toctext">TI811X</span></a></li>
<li class="toclevel-4 tocsection-28"><a href="#Saving_Boot_Command_on_EP_Storage"><span class="tocnumber">6.4.2.3</span> <span class="toctext"><b>Saving Boot Command on EP Storage</b></span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-29"><a href="#Building_Kernel_for_EP"><span class="tocnumber">6.5</span> <span class="toctext"><b>Building Kernel for EP</b></span></a></li>
<li class="toclevel-2 tocsection-30"><a href="#Updating_the_Filesystem"><span class="tocnumber">6.6</span> <span class="toctext"><b>Updating the Filesystem</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-31"><a href="#Ensuring_the_PCIe_System_Initialization"><span class="tocnumber">7</span> <span class="toctext"><b>Ensuring the PCIe System Initialization</b></span></a></li>
<li class="toclevel-1 tocsection-32"><a href="#Load_Addresses"><span class="tocnumber">8</span> <span class="toctext"><b> Load Addresses</b></span></a></li>
<li class="toclevel-1 tocsection-33"><a href="#Booting_EP"><span class="tocnumber">9</span> <span class="toctext"><b>Booting EP</b></span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>This document is applicable to TI811X.</b>
</p>
</div>
<p>TI811X device has a PCI Express hardware module which can either be configured to act as a Root Complex or a PCIe Endpoint. When configured as PCIe Endpoint (EP), the device can be set to boot over PCIe. This document caters to the Endpoint boot operation and describes the Driver needed to configure and operate on TI811X PCI Express Endpoint to perform booting. A sample application (part of release package) is used to carry out boot operation.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 0, 0);">
<p><b>NOTE1: Support for TI811X Root Complex is added from 04.01.00.06 release, hence the references/setups described in this document related to TI811X as Root Complex are not applicable for prior TI811X releases.</b>  
</p><p><br />
</p>
</div>
<h1><span class="mw-headline" id="Scope"><b>Scope</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=2" title="Edit section: Scope">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This document covers the setup involving two TI811X EVMs connected together over PCIe using a PCIe cable having male connectors on both the ends. Here one device is set to boot in any other peripheral or memory boot mode (e.g., NAND) which will be designated as Root Complex (RC) and other TI811X device configured in PCIe Boot mode (EP).
</p>
<h1><span class="mw-headline" id="Conventions"><b>Conventions</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=3" title="Edit section: Conventions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>This document refers TI811X device set up in PCIe boot mode as EP (Endpoint) and the TI811X device acting as PCIe Root Complex as RC.</li>
<li>The shell commands executed on TI811X RC are preceded with <tt>ti811x-evm#</tt>.</li></ul>
<h1><span id="Known_Issues/Restrictions_(Read_this_before_you_proceed)"></span><span class="mw-headline" id="Known_Issues.2FRestrictions_.28Read_this_before_you_proceed.29"><b>Known Issues/Restrictions </b><span style="color: rgb(255, 0, 0);"><b>(Read this before you proceed)</b></span></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=4" title="Edit section: Known Issues/Restrictions (Read this before you proceed)">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section lists various constraints applicable on TI811X PCIe EP boot operation. Most the the points listed below are covered in respective sections of this document. 
</p>
<ul><li>Only 32-bit PCIe boot mode is supported, 64-bit mode not supported currently.</li>
<li>At the minimum, 3 BARs - BAR0, BAR1 and BAR2 are needed for boot operation and hence only the switch setting mentioned in next section is supported on EP.</li>
<li>Other possible switch settings which may set up additional BARs may lead to issues in case RC is not able to allocate those BARs.</li>
<li>In case ramdisk image is used as filesystem on EP, it cannot exceed 16MB. This restriction is imposed by the sample boot application to avoid exceeding the minimum BAR2 size (16MB) on TI811X.</li>
<li><i>Note that the boot driver and application are written and tested to work with Linux kernel version 2.6.32 onwards.</i> So make sure that the RC is running Linux kernel as supported.</li>
<li>Current configuration of boot application skips checking boot flag clear indication from EP U-Boot (indicating DDR setup done) and proceeds to load other images to DDR. This may fail in case EP U-Boot is yet to set up the DDR. Try increasing boot flag check delay in this case. Refer Boot Application section below.</li>
<li>Similarly, EP U-Boot doesn't check for any boot flag indication from the boot application (to notify about completion of subsequent download) and may proceed to load kernel (or ramdisk or 2nd stage U-Boot where applicable) even before it is completely loaded by boot application. In such cases, you can precede 'sleep 3' (or more) in the boot script or bootcmd. Alternately, you can also tune CONFIG_BOOTDELAY in U-Boot header file for corresponding board to a higher value to delay auto booting.</li>
<li>Though the boot driver supports static build (building into kernel), some filesystem changes are required if you are using Arago/OE based filesystem with udev device cache. Please refer Updating the Filesystem section for details.</li></ul>
<h1><span class="mw-headline" id="Setup"><b>Setup</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=5" title="Edit section: Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This document considers following distinct setups:
</p>
<ol><li><b>TI811X EVM RC - TI811X EVM BOOT-EP: </b> This setup requires two TI811X boards (EVMs). Ensure that serial port (USB-UART [J6]) on each board is connected to host terminals.</li>
<li><b>TI811X EVM RC - TI8148 EVM BOOT-EP: </b> This setup requires two TI811X boards (EVMs). Ensure that serial port on each board (USB-UART [J6] on TI811X) and  UART0 on TI8148 EVM) is connected to host terminals.</li>
<li><b>TI8148 EVM RC - TI811X EVM BOOT-EP: </b> This setup requires two TI811X boards (EVMs). Ensure that serial port on each board (UART0 on TI8148 EVM and USB-UART [J6] on TI811X) is connected to host terminals.</li></ol>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> In any of the cases covered here, it is advised to power on the EP device first and then RC. 
</p>
</div>
<h2><span id="Conflict_with_NAND/NOR_and_TI811X_PCIe_Boot_Mode_setting"></span><span class="mw-headline" id="Conflict_with_NAND.2FNOR_and_TI811X_PCIe_Boot_Mode_setting"><b>Conflict with NAND/NOR and TI811X PCIe Boot Mode setting</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=6" title="Edit section: Conflict with NAND/NOR and TI811X PCIe Boot Mode setting">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p>The GPMC related boot pin CS0BW used for PCIe boot mode configuration is checked by u-boot and kernel to determine the 8-bit/16-bit NAND/NOR type connected on the board.
</p><p>This will lead to conflict in few cases such as:
</p>
<ol><li>PCIe 32-bit boot mode with CS0BW=1 for BAR2 will require the DIP switch associated with CS0BW pin to be set to ON but U-Boot will take it as 8-bit NAND even if actual NAND on board was 16-bit. This will lead to NAND detection failures</li>
<li>Similar issue would occur when using 8-bit NOR where CS0BW=1 will be taken by NOR driver on Linux or U-Boot as NOR being 16-bit</li></ol>
</div>
<h2><span class="mw-headline" id="Setting_up_the_TI811X_RC"><b>Setting up the TI811X RC</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=7" title="Edit section: Setting up the TI811X RC">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Flash the TI811X RC on board NAND with U-Boot. Refer <a href="TI811X_PSP_Flashing_Tools_Guide.html" title="TI811X PSP Flashing Tools Guide">PSP Flashing Tools Guide</a> document for details.</li>
<li>Set the TI811X EVM switch settings to enable NAND boot mode. Refer <a href="TI811X_PSP_U-Boot.html" class="mw-redirect" title="TI811X PSP U-Boot">U-Boot User Guide</a> for details about building U-Boot for NAND boot mode and switch settings.</li>
<li>Use Male-Male (x1) PCIe cable to connect RC and with the PCIe slot on EP.</li>
<li>Alternatively, you can set up RC to boot in any other (non-PCIe) boot mode.</li></ul>
<h2><span class="mw-headline" id="Setting_up_TI811X_EP"><b>Setting up TI811X EP</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=8" title="Edit section: Setting up TI811X EP">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Set the TI811X EVM designated as PCIe EP in PCIe 32-bit Boot mode as follows:</li></ul>
<pre>Boot mode select switch SW4[5:1] = 01000. Rest all switches should be '0' (zero) or 'OFF'
</pre>
<ul><li>This results into following boot pin configuration for TI811X device</li></ul>
<pre>BTMODE[[4:0] = 01000 ==&gt; 32-bit PCIe Boot mode
</pre>
<ul><li><b>Note: Setting up any other combination of switch settings with PCIe Boot mode is not supported/validated.</b></li></ul>
<h1><span class="mw-headline" id="Keeping_the_Required_Modules_Ready"><b>Keeping the Required Modules Ready</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=9" title="Edit section: Keeping the Required Modules Ready">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Following section describes various modules involved in EP boot operation and steps for preparing binaries and U-Boot script required to be present on PCIe RC to boot TI811X EP. In addition, it is assumed that a ramdisk filesystem or NFS based filesystem for EP are available. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> Though the kernel (uImage) built with default config for TI811X RC will boot on TI811X EP, it will lead to conflicting configuration of the system since the kernel booting on EP will switch the PCIe mode from EP to RC. Due to this, the communication between PCIe RC and EP will no longer happen. For this, the kernel needs to be re-built with PCI support removed for booting on EP. 
</p>
</div> 
<p>Also note that the sections below assume you have extracted the TI811X release package to a directory referred as $PKGDIR and build environment is setup as described in <a href="TI811X_PSP_User_Guide.html" title="TI811X PSP User Guide"> TI811X PSP User Guide</a>. 
</p>
<h2><span class="mw-headline" id="PCIe_EP_Boot_Driver"><b>PCIe EP Boot Driver</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=10" title="Edit section: PCIe EP Boot Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> The default kernel build configuration does not select the driver and needs to be enabled for the kernel as explained in respective sections below. 
</p>
</div>
<p>This driver runs on TI811X RC. It configures the first TI811X EP device detected in the system and configures it to be able to carry boot operation. 
</p>
<h3><span class="mw-headline" id="Features_Supported"><b>Features Supported</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=11" title="Edit section: Features Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Support for detecting and configuring TI811X/TI814X devices</li>
<li>Provides character device interface on Linux Kernel to PCIe boot user-space application</li>
<li>Provide mmap support to enable the boot application to copy image files (U-Boot, kernel etc) to EP memory</li>
<li>Can be built as loadable module or into kernel</li></ul>
<h3><span class="mw-headline" id="Features_NOT_Supported"><b>Features NOT Supported</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=12" title="Edit section: Features NOT Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Operate more than one TI811X EP.</li>
<li>No interrupt support</li>
<li>Not validated on any other RC than TI811X/TI814X. This driver will require porting in case you are using Linux kernel prior to 2.6.32 or any other h/w platform than TI811X/TI814X.</li>
<li>No support for power management (e.g., suspend/resume)</li></ul>
<h3><span class="mw-headline" id="Supported_IOCTLs"><b>Supported IOCTLs</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=13" title="Edit section: Supported IOCTLs">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>TI81XX_PCI_GET_BAR_INFO: Returns the size in bytes of the specified BAR.</li></ul>
<pre>int dev_desc;
dev_desc = open("/dev/ti81xx_pcie_ep", O_RDWR);
...
struct ti81xx_bar_info bar;
bar.num = bar_number;
ioctl(dev_desc, TI81XX_PCI_GET_BAR_INFO, &amp;bar);
...
</pre>
<p>In the above code fragment, the driver returns BAR size in 'size' field of the 'bar' structure object on success.
</p>
<ul><li>TI81XX_PCI_SET_BAR_WINDOW: Application can specify the internal address on EP for specified BAR. For example, the boot application sets BAR1 to OCMC1 start on EP (0x40300000) for TI811X EP using this ioctl.</li></ul>
<pre>...
struct ti81xx_bar_info bar;
bar.num = 1;
bar.addr = 0x40300000;
ioctl(dev_desc, TI81XX_PCI_SET_BAR_WINDOW, &amp;bar);
...
</pre>
<ul><li>TI81XX_PCI_SET_DWNLD_DONE: Set the bootflag on EP. The driver writes '1' to the location 0x4033B0FC on TI811X EP and waits for the flag to be cleared till maximum of the time (in seconds) as specified by the application. Timeout of '0' means no wait for the flag clearing.</li></ul>
<pre>...
ioctl(dev_desc, TI81XX_PCI_SET_DWNLD_DONE, 3);
...
</pre>
<p>The IOCTL and data structure declarations are in drivers/char/ti81xx_pcie_bootdrv.h file in TI811X kernel source.
</p>
<h3><span class="mw-headline" id="Source_Files"><b>Source Files</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=14" title="Edit section: Source Files">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The driver files are present at following path relative to extracted kernel source directory for TI811X.
</p>
<ul><li>drivers/char/ti81xx_pcie_bootdrv.h</li>
<li>drivers/char/ti81xx_pcie_bootdrv.c</li></ul>
<h3><span class="mw-headline" id="Steps_for_Building_for_TI811X_Kernel"><b>Steps for Building for TI811X Kernel</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=15" title="Edit section: Steps for Building for TI811X Kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>The steps listed below cover building details for TI811X with kernel release (04.01.00.06 onwards) and the EVM default configuration name is <tt>ti811x_evm_defconfig</tt>.</li>
<li>Navigate to TI811X kernel source directory and extract the kernel source and create default TI811X EVM configuration.</li>
<li>Apply the <a href="https://processors.wiki.ti.com/images/0/01/0001-TI811x-PCIE-Add-TI811X-related-address-offsets-and-c.patch.gz" class="internal" title="0001-TI811x-PCIE-Add-TI811X-related-address-offsets-and-c.patch.gz"><b>patch</b></a> by copying it to kernel source directory.</li></ul>
<p>The download link has the patch in gzipped format so it needs to be extracted to get the patch file. You can then use 'patch' utility to apply the patch as:
</p>
<pre># gunzip 0001-TI811x-PCIE-Add-TI811X-related-address-offsets-and-c.patch.gz
# patch -p1 &lt; 0001-TI811x-PCIE-Add-TI811X-related-address-offsets-and-c.patch
</pre>
<ul><li>Note that the release version  suffix used in example below can be any later PSP version.</li></ul>
<pre>LINUXHOST$ cd $PKGDIR/src/kernel
LINUXHOST$ tar -xzf linux-04.07.00.01.tar.gz
LINUXHOST$ cd linux-04.07.00.01
LINUXHOST$ make CROSS_COMPILE=arm-none-linux-gnueabi- ARCH=arm ti811x_evm_defconfig
</pre>
<ul><li>Enter the kernel configuration menu</li></ul>
<pre>LINUXHOST$ make CROSS_COMPILE=arm-none-linux-gnueabi- ARCH=arm menuconfig
</pre>
<ul><li>This will open the kernel configuration menu</li>
<li>Use DOWN Arrow key to till "Device Drivers" is highlighted</li></ul>
<pre>    General setup  ---&gt;
[*] Enable loadable module support  ---&gt;
...
Device Drivers  ---&gt;
</pre>
<ul><li>Press ENTER to go inside this section. Use DOWN Arrow key to select "Character devices"</li></ul>
<pre>    Generic Driver Options  ---&gt;
...
    Character devices  ---&gt;
</pre>
<ul><li>Again press ENTER and scroll down to select "TI81XX PCIe Endpoint Boot Driver". Press 'm' to enable to build as a loadable module.</li></ul>
<pre>-*- Virtual terminal
...
&lt;M&gt; TI81XX PCIe Endpoint Boot Driver
</pre>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note</b> that the above option will be shown only if PCI Bus support is enabled in kernel configuration. This is default in ti811x_evm_defconfig.
</p>
</div> 
<ul><li>Use RIGHT Arrow key to bring focus on 'Exit' and press ENTER. Repeat this to return to previous menu(s) and eventually back to the shell. Make sure to save the changes you have made when prompted at exit.</li>
<li>Build the driver</li></ul>
<pre>LINUXHOST$ make modules.
</pre>
<ul><li>The module will be built as drivers/char/ti81xx_pcie_bootdrv.ko</li>
<li>The above steps build the driver as loadable kernel module but it can also be built into kernel by pressing 'y' instead of 'm' in kernel menu configuration mentioned above.</li></ul>
<h2><span class="mw-headline" id="U-Boot"><b>U-Boot</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=16" title="Edit section: U-Boot">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>For PCIe boot, the ROM on the EP directly jumps to the start of OCMC RAM when indicated by the boot driver (on RC) that the boot image is copied. <b>This means that the raw U-Boot binary (without any preceding header) must be used for booting.</b>
</p>
<h3><span class="mw-headline" id="TI811X">TI811X</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=17" title="Edit section: TI811X">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>For booting TI811X EP, you will need U-Boot binaries for 2 stages:
</p>
<ul><li>For 1st stage, you will need to build the U-Boot binary with following steps:</li></ul>
<dl><dd>1. Extract the U-Boot sources and navigate to the base directory of U-Boot source</dd>
<dd>2. Make sure that the complete build environment as required for U-Boot build is setup on Linux host. For details, refer U-Boot User Guide from the release package or online <a href="TI811X_PSP_U-Boot.html" class="mw-redirect" title="TI811X PSP U-Boot">here</a></dd>
<dd>3. Prepare the configuration for build</dd></dl>
<pre>make ti811x_evm_min_sd
</pre>
<dl><dd>4. Build U-Boot</dd></dl>
<pre>make u-boot.ti
</pre>
<dl><dd>5. This will create u-boot.bin file, rename this to MLO</dd></dl>
<ul><li>For 2nd stage, you can use the pre-built U-Boot binary u-boot.bin from $PKGDIR/images/u-boot/ti811x directory</li></ul>
<p><br />
<b>TIP:</b> Use following command at Linux shell to strip off 8 bytes -
</p>
<pre># dd skip=8 if=MLO of=MLO.no_header bs=1
# mv MLO.no_header MLO  
</pre>
</div>
<h2><span class="mw-headline" id="PCIe_EP_Boot_Application"><b>PCIe EP Boot Application</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=18" title="Edit section: PCIe EP Boot Application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This application runs on TI811X RC running Linux and accesses the interfaces provided by the EP Boot Driver to download U-Boot, Kernel, etc images to EP and trigger EP boot. 
</p><p>You need not follow the build steps mentioned below if you want to use pre-built saBootApp ELF present in $PKGDIR/images/examples/pcie directory. Note that, this ELF is built to be executed on TI811X RC. 
</p>
<h3><span class="mw-headline" id="Features_Supported_2"><b>Features Supported</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=19" title="Edit section: Features Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Download U-Boot, U-Boot bootscript, Kernel and (optionally) filesystem images to EP memory</li>
<li>Uses 2 stage boot loading in case of TI811X EP -</li>
<li>Requires only 3 BARs (BAR0, BAR1 and BAR2) to perform complete boot operation. Uses EP boot driver to move internal EP windows to access OCMC and DDR.</li></ul>
<h3><span class="mw-headline" id="Features_NOT_Supported_2"><b>Features NOT Supported</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=20" title="Edit section: Features NOT Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Cannot operate without EP Boot Driver</li>
<li>Does not support ramdisk filesystem size greater than 8MB</li>
<li>Kernel image size limit is 8MB and bootscript size is 2MB maximum</li></ul>
<h3><span class="mw-headline" id="Steps_for_Building_for_TI811X_RC"><b>Steps for Building for TI811X RC</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=21" title="Edit section: Steps for Building for TI811X RC">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Navigate to TI811X examples source directory</li></ul>
<pre>LINUXHOST$ cd $PKGDIR/examples/pcie
</pre>
<ul><li>Apply the <a href="https://processors.wiki.ti.com/images/2/2c/0001-TI811x-PCIE-Add-TI811X-support-for-Boot-Application.patch.gz" class="internal" title="0001-TI811x-PCIE-Add-TI811X-support-for-Boot-Application.patch.gz"><b>patch</b></a> by copying it to pcie directory.</li></ul>
<p>The download link has the patch in gzipped format so it needs to be extracted to get the patch file. You can then use 'patch' utility to apply the patch as:
</p>
<pre># gunzip 0001-TI811x-PCIE-Add-TI811X-support-for-Boot-Application.patch.gz
# patch -p1 &lt; 0001-TI811x-PCIE-Add-TI811X-support-for-Boot-Application.patch
</pre>
<ul><li>Open file Makefile and set the path to kernel source directory as applicable. For more details, refer README file present in the directory.</li>
<li>Build the application by typing 'make' at the shell. This will create an ELF file named 'saBootApp'.</li></ul>
<h3><span class="mw-headline" id="Tuning_Boot_Application"><b>Tuning Boot Application</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=22" title="Edit section: Tuning Boot Application">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In some cases, the defaults chosen by the boot application may require to be changed. Various such options are covered below with their default settings. Note that in such case, you cannot use the pre-built Boot Application ELF file and will need to build the application as mentioned above. 
</p><p>Following options are defined in saBootApp.c file: -
</p>
<ul><li>CONFIG_IGNORE_BOOTFLAG_FAIL: This flag is enabled by default (set to '1') which directs the boot application to proceed even if the boot flag is not cleared. This is enabled currently since present U-Boot doesn't clear the boot flag and having this flag enables the boot application to proceed to load kernel and boot EP. You can set this flag to '0' if you update the U-Boot to clear the boot flag after setting DDR (refer Boot ROM spec for location of boot flag).</li>
<li>CONFIG_BOOTFLAG_FAIL_DELAY: Time in seconds to wait for boot flag to be cleared. Default is 0 sec. You can lower/increase this value if you face booting issues</li></ul>
<p>Additional configuration options such as load addresses for various images, etc., are present in Boot Driver header file ti81xx_pcie_bootdrv.h located in $PKGDIR/src/kernel/linux-04.00.00.09/driver/char directory and are used by the boot application.
</p>
<h2><span class="mw-headline" id="PCIe_EP_U-Boot_Boot_Script"><b>PCIe EP U-Boot Boot Script</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=23" title="Edit section: PCIe EP U-Boot Boot Script">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>In PCIe boot scenario, the U-Boot environment storage may not be available on EP. In such cases loading a U-Boot script file (referred as 'bootscript') on EP with various environment variables set helps simulating environment storage. This also adds flexibility in a way that the various boot parameters such as kernel boot arguments, filesystem type, paths for EP can be changed though this script without any need to rebuild the U-Boot or need to explicitly set the U-Boot environment variables on EP. Also, setting U-Boot parameters on EP will require to have UART console connected to EP every time. 
</p>
<h3><span class="mw-headline" id="Creating_U-Boot_Script"><b>Creating U-Boot Script</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=24" title="Edit section: Creating U-Boot Script">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Refer sample script file named bootscript.txt is provided in $PKGDIR/src/examples/pcie directory.</li>
<li>Edit/add parameters as per your requirement. The default script sets up kernel to use RAMDISK image.</li>
<li>You will need U-Boot's 'mkimage' utility to build the script image from this file. Refer <a href="TI811X_PSP_U-Boot.html" class="mw-redirect" title="TI811X PSP U-Boot">U-Boot User Guide</a> for details about 'mkimage'</li>
<li>Ensure that the PATH is set to point to 'mkimage'</li>
<li>Build the boot script as</li></ul>
<pre>LINUXHOST$ cd $PKGDIR/src/examples/pcie
LINUXHOST$ mkimage -A arm -O linux -T script -C none -n 'PCIe Boot Script' -d bootscript.txt boot.scr
</pre>
<ul><li>Alternatively, for booting TI811X EP, you can use pre-built boot.scr present inside $PKGDIR/images/examples/pcie directory. This is built from sample bootscript.txt</li></ul>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> The sample boot script packaged in release is for TI811X EP only.   
</p>
</div>
<h3><span class="mw-headline" id="Auto_Booting_with_the_Bootscript"><b>Auto Booting with the Bootscript</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=25" title="Edit section: Auto Booting with the Bootscript">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This approach requires modifying and re-building U-Boot. The release version numbers used in examples below will vary depending upon the TI811X PSP release being used.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> The current U-Boot default boot command is set to load the bootscript from MMC. Thus, pre-built u-boot.bin U-Boot binary from the release package, loaded on EP using boot application will not auto boot the kernel image downloaded over PCIe. The same issue applies if the U-Boot is built from source for SD boot. The 1st stage U-Boot modes select autoload of 2nd stage from respective boot medium/methods, thus will bypass loading U-Boot downloaded over PCIe.  
</p>
</div> 
<p>This can be resolved by directing the U-Boot running on EP to load the bootscript from DDR location 0x80400000 (as loaded by the boot application) in case of TI811X 2nd stage U-Boot. In addition, the 1st stage U-Boot needs to be directed to autoload 2nd stage U-Boot from DDR. 
</p><p>This can be done as described in following sections: 
</p>
<h4><span class="mw-headline" id="Updating_U-Boot"><b>Updating U-Boot</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=26" title="Edit section: Updating U-Boot">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h4><span class="mw-headline" id="TI811X_2">TI811X</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=27" title="Edit section: TI811X">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Extract the U-Boot source as per the approach described above and open following file to update: 
</p>
<ul><li>TI811X: include/configs/ti811x_evm.h</li></ul>
<p>For 1st stage U-Boot, change <tt>bootcmd</tt> as part of <tt>CONFIG_EXTRA_ENV_SETTINGS</tt> for respective boot mode configuration being used:
</p><p>E.g., for TI811X when using SD boot 1st stage U-Boot,
</p>
<ul><li>Go inside the CONFIG_TI811X_MIN_CONFIG section in the above file and look for following</li></ul>
<pre># elif defined(CONFIG_SD_BOOT)          /* Autoload the 2nd stage from SD */
</pre>
<ul><li>In CONFIG_EXTRA_ENV_SETTINGS, set the bootcmd (removing original line for bootcmd) as</li></ul>
<pre>"bootcmd=go 0x80800000\0" \
</pre>
<ul><li>Save the file and build U-Boot</li></ul>
<pre>LINUXHOST$ make clean 
LINUXHOST$ make ti811x_evm_min_sd
LINUXHOST$ make
</pre>
<ul><li>Use the u-boot.bin built in the above step as 1st stage U-Boot (MLO)</li></ul>
<p>For 2nd stage U-Boot, change <tt>bootcmd</tt> as part of <tt>CONFIG_BOOTCOMMAND</tt>:
</p><p>E.g., for TI811X,
</p>
<ul><li>Go inside the #else part of CONFIG_TI811X_MIN_CONFIG section in the EVM header file mentioned above and look for following</li></ul>
<pre># define CONFIG_BOOTCOMMAND \
</pre>
<ul><li>Replace the #define as follows to run bootscript</li></ul>
<pre>#define CONFIG_BOOTCOMMAND "source 0x80400000"
</pre>
<ul><li>Save and build the 2nd stage for desired medium (e.g., SD)</li></ul>
<pre>LINUXHOST$ make clean 
LINUXHOST$ make ti811x_evm_config_sd
LINUXHOST$ make
</pre>
<ul><li>The u-boot.bin built in above step can be used as 2nd stage U-Boot.</li></ul>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> bootcmd set explicitly in storage medium used will take precedence over the bootcmd set above in the source. 
</p>
</div>
<h4><span class="mw-headline" id="Saving_Boot_Command_on_EP_Storage"><b>Saving Boot Command on EP Storage</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=28" title="Edit section: Saving Boot Command on EP Storage">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This approach requires access to U-Boot console and availability of persistent storage such as NAND on EP.
</p><p>In case of TI811X, this is only possible for 2nd stage U-Boot. 
</p>
<ul><li>Boot U-Boot on EP using PCIe Boot procedure described in next sections</li>
<li>Halt U-Boot countdown by pressing ENTER at EP console</li>
<li>Set 'bootcmd' at U-Boot prompt on EP as:</li></ul>
<pre>set bootcmd 'source 0x80400000'
saveenv
</pre>
<ul><li>Note that this is a one time operation and U-Boot will jump to correct script location on subsequent resets.</li></ul>
<h2><span class="mw-headline" id="Building_Kernel_for_EP"><b>Building Kernel for EP</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=29" title="Edit section: Building Kernel for EP">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> The change mentioned below is not needed for TI811X when using release 04.01.00.05 or older and the kernel uImage built with ti811x_evm_defconfig can be used. For 04.01.00.06 and onwards release of TI811X kernel, the steps mentioned below should be followed since they have Root Complex support included. 
</p>
</div>
<p>As mentioned earlier in this section, the kernel built with PCIe RC support will result into conflicting configuration when booted on EP. To avoid this, it is recommended to rebuild the kernel with PCIe RC support disabled. 
</p>
<ul><li>As explained before, extract kernel source tarball and enter kernel configuration menu.</li></ul>
<pre>    General setup  ---&gt;
[*] Enable loadable module support  ---&gt;
-*- Enable the block layer  ---&gt;
   System Type  ---&gt;
   Bus support  ---&gt;
...
</pre>
<ul><li>Scroll down with the DOWN Arrow key till "Bus Support" gets selected. Press ENTER. This will show following menu:</li></ul>
<pre>[*] PCI support
[*] Message Signaled Interrupts (MSI and MSI-X)
...
</pre>
<ul><li>Disable "PCI support" by pressing 'n' key or SPACE key. This will automatically hide other dependent configurations and the above configuration menu will look like as shown below:</li></ul>
<pre>[ ] PCI support 
&lt; &gt; PCCard (PCMCIA/CardBus) support  ---&gt;
</pre>
<ul><li>Use RIGHT Arrow key to bring focus on 'Exit' and press ENTER. Repeat this to return to previous menu(s) and eventually back to the shell. Make sure to save the changes you have made when prompted at exit.</li>
<li>Build the kernel.</li></ul>
<h2><span class="mw-headline" id="Updating_the_Filesystem"><b>Updating the Filesystem</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=30" title="Edit section: Updating the Filesystem">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The kernel may not boot or provide shell prompt when the boot driver is built into kernel. This issue is due to the device node numbers (major numbers) used for console device(s) not getting updated as udev in the filesystem still uses stale nodes from the device cache in the filesystem even on detection or removal of EP device across RC reboots.
</p><p>This issue can be avoided by forcing the rebuild of device cache on detecting change in boot time device detection. This can be achieved by updating the filesystem as follows:
</p>
<ul><li>Add following check in /etc/rcS.d/S03udev inside DEVCACHE block</li></ul>
<pre>[ -r /proc/devices ] &amp;&amp; cat /proc/devices &gt; /tmp/devices || touch /tmp/devices
</pre>
<ul><li>Similarly, add comparison for saved device list to detect changes in devices</li></ul>
<pre>cmp -s /tmp/devices /etc/udev/saved.devices &amp;&amp; \
</pre>
<ul><li>Now the devcache block will look as follows</li></ul>
<pre>if [ "$DEVCACHE"&#160;!= "" ]; then
        # Invalidate udev cache if the kernel or its bootargs/cmdline have changed
        [ -x /bin/uname ] &amp;&amp; /bin/uname -mrspv &gt; /tmp/uname || touch /tmp/uname
        [ -r /proc/cmdline ] &amp;&amp; cat /proc/cmdline &gt; /tmp/cmdline || touch /tmp/cmdline
        [ -r /proc/devices ] &amp;&amp; cat /proc/devices &gt; /tmp/devices || touch /tmp/devices
        [ -r /proc/atags ] &amp;&amp; cat /proc/atags &gt; /tmp/atags || touch /tmp/atags
        if [ -e $DEVCACHE ] &amp;&amp; \
           cmp -s /tmp/uname /etc/udev/saved.uname &amp;&amp; \
           cmp -s /tmp/cmdline /etc/udev/saved.cmdline &amp;&amp; \
           cmp -s /tmp/devices /etc/udev/saved.devices &amp;&amp; \
           cmp -s /tmp/atags /etc/udev/saved.atags; then
                (cd /; tar xf $DEVCACHE &gt; /dev/null 2&gt;&amp;1)
                not_first_boot=1
        fi
fi
</pre>
<ul><li>Update udev devcache script /etc/rcS.d/S12udev-cache to save device list by adding following line</li></ul>
<pre>mv /tmp/devices /etc/udev/saved.devices
</pre>
<ul><li>Update the same file with a line to delete temporary device list</li></ul>
<pre>rm -f /tmp/devices
</pre>
<ul><li>Now the dev cache code in this file will look like</li></ul>
<pre>if [ "$DEVCACHE"&#160;!= "" ]; then
        echo -n "Populating dev cache"
        (cd /; tar cf $DEVCACHE dev)
        mv /tmp/uname /etc/udev/saved.uname
        mv /tmp/cmdline /etc/udev/saved.cmdline
        mv /tmp/atags /etc/udev/saved.atags
        mv /tmp/devices /etc/udev/saved.devices
        echo
else
        rm -f /tmp/uname
        rm -f /tmp/cmdline
        rm -f /tmp/atags
        rm -f /tmp/devices
fi
</pre>
<ul><li>The above changes will ensure that udev will rebuild the device cache depending upon detection of PCIe EP presence or removal across RC reboots.</li></ul>
<p>Other simpler (but not recommended) option is to turn of the device cache altogether. This can be done by commenting the DEVCACHE line in /etc/default/udev of the filesystem.
</p>
<h1><span class="mw-headline" id="Ensuring_the_PCIe_System_Initialization"><b>Ensuring the PCIe System Initialization</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=31" title="Edit section: Ensuring the PCIe System Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Before proceeding to using the TI811X PCIe EP in the system, we must ensure that the RC is up and has detected and configured the PCIe EP. Steps mentioned below should be carried out before actually accessing the EP and proceeding for boot.
</p>
<ul><li>Make sure that the board setup instructions mentioned in earlier section are followed.</li>
<li>Power on EP</li>
<li>Power on RC</li>
<li>Once shell is available at RC, type 'lspci' command, it should show following two devices (EP in this example is TI811X):</li></ul>
<pre>ti811x-evm# lspci -v
00:00.0 Class 0604: Device 104c:b801 (rev 01)
       Flags: bus master, fast devsel, latency 0
       Memory at &lt;ignored&gt; (32-bit, non-prefetchable)
       Memory at &lt;ignored&gt; (32-bit, prefetchable)
       Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
       Memory behind bridge: 21c00000-21cfffff
       Prefetchable memory behind bridge: 20000000-21bfffff
       Capabilities: [40] Power Management version 3
       Capabilities: [50] MSI: Enable- Count=1/1 Maskable- 64bit+
       Capabilities: [70] Express Root Port (Slot-), MSI 00
       Capabilities: [100] Advanced Error Reporting
01:00.0 Class 0004: Device 104c:b801 (rev 01)
       Flags: fast devsel, IRQ 48
       Memory at 21c00000 (32-bit, non-prefetchable) [size=4K]
       Memory at 21000000 (32-bit, prefetchable) [size=8M]
       Memory at 20000000 (32-bit, prefetchable) [size=16M]
       Memory at 21800000 (32-bit, prefetchable) [size=4K]
       Memory at 21801000 (32-bit, prefetchable) [size=4K]
       Capabilities: [40] Power Management version 3
       Capabilities: [50] MSI: Enable- Count=1/1 Maskable- 64bit+
       Capabilities: [70] Express Endpoint, MSI 00
       Capabilities: [100] Advanced Error Reporting
</pre>
<ul><li>If 'lspci' is not available in your filesystem, look into <tt>/sys/bus/pci/devices</tt> directory to see if EP is detected. You should see two sub directories in this directory, e.g., see following command and its output:</li></ul>
<pre>cat /sys/bus/pci/devices/0000\:0*/device
0xb801
0xb801
</pre>
<ul><li>The first device is RC itself and the second device is EP</li>
<li>Notice that the EP is allocated three BARs - BAR0, BAR1 and BAR2 of size 4KB, 8MB and 16MB respectively.</li></ul>
<h1><span class="mw-headline" id="Load_Addresses"><b> Load Addresses</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=32" title="Edit section: Load Addresses">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The boot application loads various images at following addresses on EP:
</p>
<table border="1" cellspacing="0" cellpadding="4" rules="all" style="margin:1em 1em 1em 0; border:solid 1px #aaa; border-collapse:collapse;empty-cells:show;">
  
<tbody><tr>
<th>Image
</th>
<th>EP Device
</th>
<th>Load Address
</th></tr>
<tr>
<td>U-Boot 1st Stage
</td>
<td>TI811X
</td>
<td>0x40300000
</td></tr>
<tr>
<td rowspan="2">U-Boot 2nd Stage
</td></tr>
<tr>
<td>TI811X
</td>
<td>0x80800000
</td></tr>
<tr>
<td rowspan="2">Kernel
</td></tr>
<tr>
<td>TI811X
</td>
<td>0x80900000
</td></tr>
<tr>
<td rowspan="2">Ramdisk
</td></tr>
<tr>
<td>TI811X
</td>
<td>0x81000000
</td></tr>
<tr>
<td rowspan="2">Bootscript
</td></tr>
<tr>
<td>TI811X
</td>
<td>0x80400000
</td></tr>
</tbody></table>
<h1><span class="mw-headline" id="Booting_EP"><b>Booting EP</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;section=33" title="Edit section: Booting EP">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Download PCIe EP Boot driver, U-Boot, U-Boot script, kernel image and ramdisk file (optional) on RC.</li>
<li>These files can be downloaded over network using TFTP or can be copied to NFS mounted filesystem</li>
<li>In our example, we will use following commands on RC:</li></ul>
<pre>ti8168-evm# tftp -m binary 192.168.0.1 -c get ti81xx_pcie_bootdrv.ko
ti8168-evm# tftp -m binary 192.168.0.1 -c get saBootApp
ti8168-evm# tftp -m binary 192.168.0.1 -c get u-boot.bin
ti8168-evm# tftp -m binary 192.168.0.1 -c get boot.scr
ti8168-evm# tftp -m binary 192.168.0.1 -c get uImage
ti8168-evm# tftp -m binary 192.168.0.1 -c get ramdisk.gz
</pre>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> Transfer the 1st stage U-Boot MLO used for MMC/SD boot of TI811X EP. 
</p>
</div>
<ul><li>Make boot application as executable:</li></ul>
<pre>ti811x-evm# chmod a+x saBootApp
</pre>
<ul><li>Insert boot driver:</li></ul>
<pre>ti811x-evm# insmod ti81xx_pcie_bootdrv.ko
ti81xx_pcie_ep: Found TI81xx PCIe EP @0xcc827000, DEVICE ID = b801
pci 0000:01:00.0: This driver supports booting the first TI816x or TI814x target found on the bus
pci 0000:01:00.0: Major number 252 assigned
pci 0000:01:00.0: Added device to the sys file system
pci 0000:01:00.0: BAR Configuration -
          Start        |       Length  |       Flags
pci 0000:01:00.0: 0 index 0 bars
pci 0000:01:00.0:       0x21c00000      |       0x00001000      |       0x00040200
pci 0000:01:00.0: 1 index 1 bars
pci 0000:01:00.0:       0x21000000      |       0x00800000      |       0x00042208
pci 0000:01:00.0: 2 index 2 bars
pci 0000:01:00.0:       0x20000000      |       0x01000000      |       0x00042208
pci 0000:01:00.0: TI81XX registers mapped to 0xd0906000
pci 0000:01:00.0: TI81XX OCMC mapped to 0xd5000000
pci 0000:01:00.0: TI81XX DDR mapped to 0xd6000000
</pre>
<ul><li>The above log shows that three BARs on the EP are set up with 4KB, 8MB and 16MB size respectively.</li>
<li>You may need to create node "/dev/ti81xx_pcie_ep" with the major number displayed when PCIe Boot Driver module is inserted. This depends on the filesystem and configuration, e.g., 'udev' should do this automatically.</li>
<li>In case the device node is not created automatically, use following command sequence:</li></ul>
<pre>ti8168-evm# cat /proc/devices
 Character devices:
    1 mem
   &#160;:
   &#160;: 
    253 ti81xx_pcie_ep            &lt;--- Our device major number is 253
   &#160;:
ti811x-evm# mknod /dev/ti81xx_pcie_ep c 253 0
</pre>
<ul><li>Run the boot application providing U-Boot, bootscript, kernel and ramdisk names as:</li></ul>
<pre>ti811x-evm# ./saBootApp u-boot.bin boot.scr uImage ramdisk.gz
</pre>
<ul><li>For TI811X EP, ensure that MLO binary is present in same directory as boot application</li>
<li>Alternatively, you can use NFS root system on EP by updating the bootscript.txt accordingly and using the corresponding bootscript image. In this case, you need not download the ramdisk image.</li></ul>
<pre>ti811x-evm# ./saBootApp u-boot.bin boot.scr uImage
</pre>
<ul><li>The boot application will use boot driver to configure the EP and download the images to complete boot operation.</li></ul>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> You will see some messages about "Bootflag clear timed out" during the boot process. This is normal since the current U-Boot doesn't support clearing the boot flag in OCMC1 RAM at EP (location 0x4033B0FC for TI811X) as set by the PCIe Boot code running on RC. The application will still proceed to complete boot operation.
</p>
</div>

<!-- 
NewPP limit report
Cached time: 20201130100436
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.087 seconds
Real time usage: 0.091 seconds
Preprocessor visited node count: 167/1000000
Preprocessor generated node count: 249/1000000
Postexpand include size: 661/2097152 bytes
Template argument size: 59/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postexpand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    4.301      1 -total
 33.23%    1.429      1 Template:SpArticleStart
 28.55%    1.228      1 Template:Prettytable
 26.04%    1.120      1 Template:SpLicenseCC-SA
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:17529-0!canonical and timestamp 20201130100436 and revision id 119533
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI811X PSP PCI Express Endpoint Boot Driver User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;oldid=119533">https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;oldid=119533</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="https://processors.wiki.ti.com/index.php?title=Category:TI811X&amp;action=edit&amp;redlink=1" class="new" title="Category:TI811X (page does not exist)">TI811X</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI811X+PSP+PCI+Express+Endpoint+Boot+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;oldid=119533" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 10 September 2012, at 01:04.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.087","walltime":"0.091","ppvisitednodes":{"value":167,"limit":1000000},"ppgeneratednodes":{"value":249,"limit":1000000},"postexpandincludesize":{"value":661,"limit":2097152},"templateargumentsize":{"value":59,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    4.301      1 -total"," 33.23%    1.429      1 Template:SpArticleStart"," 28.55%    1.228      1 Template:Prettytable"," 26.04%    1.120      1 Template:SpLicenseCC-SA"]},"cachereport":{"timestamp":"20201130100436","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":232});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI811X_PSP_PCI_Express_Endpoint_Boot_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:26:17 GMT -->
</html>
