<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 06:30:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI81XX PSP PCI Express Endpoint Driver User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide","wgTitle":"TI81XX PSP PCI Express Endpoint Driver User Guide","wgCurRevisionId":157248,"wgRevisionId":157248,"wgArticleId":15252,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["TI816X","TI814X","PSP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide","wgRelevantArticleId":15252,"wgRequestId":"90295ee630d14635626b3ee5","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide rootpage-TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI81XX PSP PCI Express Endpoint Driver User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">																							<div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">TI81XX PCI Express Endpoint Driver User Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Hemant Pedanekar</div> 
<p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Scope_of_the_Document"><span class="tocnumber">2</span> <span class="toctext">Scope of the Document</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Assumptions_and_Conventions"><span class="tocnumber">3</span> <span class="toctext">Assumptions and Conventions</span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Terminology"><span class="tocnumber">4</span> <span class="toctext">Terminology</span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Package_Contents_and_Download"><span class="tocnumber">5</span> <span class="toctext">Package Contents and Download</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Supported_Setups"><span class="tocnumber">6</span> <span class="toctext">Supported Setups</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Not_Supported_.2F_Known_Issues"><span class="tocnumber">7</span> <span class="toctext">Not Supported / Known Issues</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#EP_Driver_Summary"><span class="tocnumber">8</span> <span class="toctext">EP Driver Summary</span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Driver_Calls"><span class="tocnumber">8.1</span> <span class="toctext">Driver Calls</span></a></li>
<li class="toclevel-2 tocsection-10"><a href="#IOCTLs_Supported"><span class="tocnumber">8.2</span> <span class="toctext">IOCTLs Supported</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#EP_Driver_Build_Configuration"><span class="tocnumber">8.3</span> <span class="toctext">EP Driver Build Configuration</span></a>
<ul>
<li class="toclevel-3 tocsection-12"><a href="#Using_the_correct_kernel"><span class="tocnumber">8.3.1</span> <span class="toctext">Using the correct kernel</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Ensuring_default_kernel_configuration"><span class="tocnumber">8.3.2</span> <span class="toctext">Ensuring default kernel configuration</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Building_EP_Driver"><span class="tocnumber">8.3.3</span> <span class="toctext">Building EP Driver</span></a></li>
<li class="toclevel-3 tocsection-15"><a href="#Resource_Reservation"><span class="tocnumber">8.3.4</span> <span class="toctext">Resource Reservation</span></a>
<ul>
<li class="toclevel-4 tocsection-16"><a href="#Prerequisites_on_initialization"><span class="tocnumber">8.3.4.1</span> <span class="toctext">Prerequisites on initialization</span></a></li>
<li class="toclevel-4 tocsection-17"><a href="#Inbound_Mapping"><span class="tocnumber">8.3.4.2</span> <span class="toctext">Inbound Mapping</span></a></li>
<li class="toclevel-4 tocsection-18"><a href="#Outbound_Mapping"><span class="tocnumber">8.3.4.3</span> <span class="toctext">Outbound Mapping</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-19"><a href="#EP_Driver_Files"><span class="tocnumber">8.3.5</span> <span class="toctext">EP Driver Files</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Kernel_Files.2FFunctions_Added.2FUpdated"><span class="tocnumber">8.3.6</span> <span class="toctext">Kernel Files/Functions Added/Updated</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#Sample_Components"><span class="tocnumber">8.4</span> <span class="toctext">Sample Components</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#EDMA_Kernel_Module"><span class="tocnumber">8.4.1</span> <span class="toctext">EDMA Kernel Module</span></a>
<ul>
<li class="toclevel-4 tocsection-23"><a href="#Driver_Files"><span class="tocnumber">8.4.1.1</span> <span class="toctext">Driver Files</span></a></li>
<li class="toclevel-4 tocsection-24"><a href="#Driver_Calls_2"><span class="tocnumber">8.4.1.2</span> <span class="toctext">Driver Calls</span></a></li>
<li class="toclevel-4 tocsection-25"><a href="#IOCTLs_supported_2"><span class="tocnumber">8.4.1.3</span> <span class="toctext">IOCTLs supported</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#Building_The_Module"><span class="tocnumber">8.4.1.4</span> <span class="toctext">Building The Module</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-27"><a href="#RC_Kernel_Module"><span class="tocnumber">8.4.2</span> <span class="toctext">RC Kernel Module</span></a>
<ul>
<li class="toclevel-4 tocsection-28"><a href="#Driver_Files_2"><span class="tocnumber">8.4.2.1</span> <span class="toctext">Driver Files</span></a></li>
<li class="toclevel-4 tocsection-29"><a href="#Driver_Calls_3"><span class="tocnumber">8.4.2.2</span> <span class="toctext">Driver Calls</span></a></li>
<li class="toclevel-4 tocsection-30"><a href="#IOCTLs_supported_3"><span class="tocnumber">8.4.2.3</span> <span class="toctext">IOCTLs supported</span></a></li>
<li class="toclevel-4 tocsection-31"><a href="#Building_The_Module_2"><span class="tocnumber">8.4.2.4</span> <span class="toctext">Building The Module</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-2 tocsection-32"><a href="#Sample_Applications"><span class="tocnumber">8.5</span> <span class="toctext">Sample Applications</span></a>
<ul>
<li class="toclevel-3 tocsection-33"><a href="#Files"><span class="tocnumber">8.5.1</span> <span class="toctext">Files</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#Building_Applications"><span class="tocnumber">8.5.2</span> <span class="toctext">Building Applications</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-35"><a href="#Execution"><span class="tocnumber">8.6</span> <span class="toctext">Execution</span></a>
<ul>
<li class="toclevel-3 tocsection-36"><a href="#Getting_Throughput_from_EDMA_transfers"><span class="tocnumber">8.6.1</span> <span class="toctext">Getting Throughput from EDMA transfers</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>This document is applicable to DM816x/AM389x, DM814x/AM387x and DM813x family of devices referred hereafter as TI816X, TI814X and TI813X respectively. <br /> Descriptions common across these device families use the term TI81XX/ti81xx.</b>
</p>
</div>
<p>TI81XX devices have PCI Express hardware module which can either be configured to act as a Root Complex or a PCIe Endpoint. This document caters to the Endpoint mode of operation and describes the Driver needed to configure and operate on TI81XX PCI Express device as Endpoint. 
</p><p>This driver is referred as EP Driver and has to be loaded on TI81XX EP running Linux kernel from PSP package. It is expected that a userspace application would use this driver to configure the PCIe module and do transfers with peers.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 0, 0);">
<p><b>NOTE: This document is applicable to PSP GIT kernel available from Arago git post PSP 04.00.01.13 release for TI816X and 04.01.00.06 release for TI814X or kernel from release 04.00.02.14/04.01.00.07/04.04.00.01 or later for respective platforms. Jump to <a href="#Package_Contents_and_Download">Package Contents and Download</a> section for details about getting all associated components.</b>
</p>
</div>
<h1><span class="mw-headline" id="Scope_of_the_Document">Scope of the Document</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=2" title="Edit section: Scope of the Document">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>At present, this document covers following areas:
</p>
<ul><li>Details about the EP Driver</li>
<li>Summary of applications and kernel modules provided as sample</li>
<li>Build configuration and instructions</li>
<li>Execution</li></ul>
<p>Following items will be incorporated in future versions of this document:
</p>
<ul><li>Internals of driver and sample code details - for now, please refer the respective source code.</li>
<li>More details about setups</li>
<li>Design and expected/recommended use cases of the EP driver</li>
<li>EDMA usage details</li>
<li>Throughput data</li></ul>
<h1><span class="mw-headline" id="Assumptions_and_Conventions">Assumptions and Conventions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=3" title="Edit section: Assumptions and Conventions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Following points/prerequisites are assumed throughout this document:
</p>
<ol><li>If using PSP release 04.00.01.13, the PSP kernel tarball package from Arago git is extracted and build environment is set up as described in PSP User Guide associated with 04.00.01.13 release package.</li>
<li>Else, if using PSP release 04.00.02.14 (TI816X) or 04.01.00.07 (TI814X) or 04.04.00.01, the kernel tarball from release package is extracted and build environment is set up as described in User Guides packaged with respective releases.</li>
<li>For TI813X support, the latest kernel source from ti81xx-master branch on Arago is used.</li>
<li>All kernel modules/driver source and header file paths are relative to the kernel source directory where the package is extracted, except otherwise stated.</li>
<li>References to kernel modules provided as sample assume that the patches for the same are applied to kernel extracted in case #3 above. For other kernel versions, some manual merging of patches may be</li>
<li>References to sample applications assume the application patch is applied in an empty directory created by the user on the build host.</li>
<li>All application files are referred with path relative to the above directory.</li>
<li>The term "TI81XX EP" refers to local TI816X/TI814X/TI813X EP where the EP driver instance runs.</li></ol>
<h1><span class="mw-headline" id="Terminology">Terminology</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=4" title="Edit section: Terminology">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>PCIe - PCI Express</li>
<li>EP - PCIe Endpoint</li>
<li>RC - PCIe Root Complex</li></ul>
<h1><span class="mw-headline" id="Package_Contents_and_Download">Package Contents and Download</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=5" title="Edit section: Package Contents and Download">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The EP Driver package consists of main driver along with sample test applications and supplementary drivers (custom samples).
</p>
<ul><li>Out of these, the EP driver is available in kernel source for TI816X release 04.00.02,14 or TI814X release 04.01.00.07 and onwards. Users of earlier release may download the kernel tarball including first version of EP driver directly from TI81XX Arago tree on ti81xx-master branch from  <a rel="nofollow" class="external text" href="http://arago-project.org/git/projects/?p=linux-omap3.git;a=snapshot;h=3dbd693bc86cd3ca0b79080d06b8056f490fe947;sf=tgz"><b>here</b></a>, though recommended approach is to get kernel source from tip of <a rel="nofollow" class="external text" href="http://arago-project.org/git/projects/?p=linux-omap3.git;a=shortlog;h=refs/heads/ti81xx-master"><b>ti81xx-master</b></a> branch on Arago to get <i>TI813X boot and EP driver support</i> and also avoid merge conflicts when applying the sample driver patches.</li>
<li>The sample applications for RC side as well as EP side are in attached tarball. <a href="https://processors.wiki.ti.com/images/5/56/Epdrv_sample_apps.tar.gz" class="internal" title="Epdrv sample apps.tar.gz"><b>Click here</b></a> to download. Further discussions assume that this file is downloaded on build host as epdrv_sample_apps.tar.gz.</li>
<li>EDMA sample driver for TI81XX EP side is provided as patch file <a href="https://processors.wiki.ti.com/images/4/4c/0001-char-ti81xx-Add-EDMA-driver-to-provide-minimal-acces.patch.gz" class="internal" title="0001-char-ti81xx-Add-EDMA-driver-to-provide-minimal-acces.patch.gz"><b>here</b></a> to be applied to kernel snapshot from ti81xx-master branch</li>
<li>Sample driver for TI81XX RC side is provide as a <a href="https://processors.wiki.ti.com/images/a/ac/0002-char-ti81xx-Add-driver-for-controlling-TI81XX-EP-fro.patch.gz" class="internal" title="0002-char-ti81xx-Add-driver-for-controlling-TI81XX-EP-fro.patch.gz"><b>patch</b></a> on the same kernel snapshot (after applying EDMA patch).</li></ul>
<h1><span class="mw-headline" id="Supported_Setups">Supported Setups</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=6" title="Edit section: Supported Setups">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Currently following setups are tested:
</p>
<ul><li>TI814X RC &lt;-&gt; TI816X EP</li>
<li>TI816X RC &lt;-&gt; TI816X EP</li>
<li>TI816X RC &lt;-&gt; TI814X EP</li>
<li>TI816X RC &lt;-&gt; TI813X EP</li></ul>
<p>For details about doing these setups, please refer following documents: <br />
<a rel="nofollow" class="external text" href="TI81XX_PCI_Express_Root_Complex_Driver_User_Guide.html">TI81XX PCIe RC Driver User Guide</a> <br /> 
<a rel="nofollow" class="external text" href="TI81XX_PCI_Express_Endpoint_Boot_Driver_User_Guide.html">TI81XX PCIe Boot Driver User Guide</a>
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> There may be some porting effort and code changes required when non TI81XX RC is involved. 
</p>
</div>
<h1><span id="Not_Supported_/_Known_Issues"></span><span class="mw-headline" id="Not_Supported_.2F_Known_Issues">Not Supported / Known Issues</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=7" title="Edit section: Not Supported / Known Issues">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Following warning is observed while building kernel and RC module for TI81XX after applying RC driver patch</li></ul>
<pre>warning: 'virt_to_bus' is deprecated (declared at /db/psp_git/users/a0393588/temp/linux-omap-2.6/arch/arm/include/asm/memory.h:222
</pre>
<dl><dd><ul><li>This doesn't have any impact on execution and can be ignored</li></ul></dd></dl>
<ul><li>Must follow the sequence of loading various components as described in steps in Execution section below, other sequences are not yet validated and may not work</li>
<li>Interrupt reception and handling on EP side from RC is not supported (this any way is non-standard PCIe feature).</li>
<li>MSI generation at EP side and handling at RC side is validated only for throughput (THPT) mode tests (refer sample application) since 04.04.00.01 release.</li>
<li>Running RC application on EP and vice verse may lead to issues and should be avoided.</li>
<li>ioctl values for various drivers currently overlap with existing drivers in kernel. Particularly, debugging tools such as strace will treat the ioctls for the drivers as one of the existing ioctl already supported in kernel: eg., TI81XX_EDMA_SET_BUF_INFO is reported as SNDCTL_DSP_CHANNELS</li></ul>
<h1><span class="mw-headline" id="EP_Driver_Summary">EP Driver Summary</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=8" title="Edit section: EP Driver Summary">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The EP driver controls the TI816X/TI814X/TI813X Endpoint device it is running on.
</p><p>It creates a device node named "ti81xx_pcie_ep" under "/dev" to enable application to open and configure the device through character device interface.
</p>
<h2><span class="mw-headline" id="Driver_Calls">Driver Calls</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=9" title="Edit section: Driver Calls">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>open()</b>
Application have to first open the device to get the file descriptor for calling subsequent functions.
</p><p><b>ioctl()</b>
Various IOCTLs can be used by the application to access the PCIe hardware on local TI81XX EP.  
</p><p><b>mmap()</b>
MMAP interface can be used by the application using EP driver to map the reserved memory for PCIe as well as the h/w window of 256MB starting from 0x20000000.
</p><p><b>close()</b>
Close the driver and cleanup outbound mappings.
</p>
<h2><span class="mw-headline" id="IOCTLs_Supported">IOCTLs Supported</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=10" title="Edit section: IOCTLs Supported">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p><b>TI81XX_SET_INBOUND</b> Set inbound translation for a given BAR on TI81XX EP. 
</p><p><b>TI81XX_SET_OUTBOUND_SIZE</b> Set the size for outbound window. The same size is applicable to all windows configured. 
</p><p><b>TI81XX_SET_OUTBOUND</b> Create outbound window for specified address. This address has to be specified by the application such that a valid PCIe address is generated over the PCIe link. 
</p><p><b>TI81XX_ACCESS_REGS</b> Read of write the specified PCIe module register - this could be from PCIe module's application space or local configuration space. 
</p><p><b>TI81XX_SEND_MSI</b> Send MSI targeted to specified address. Note that the MSI target address is needed only when sending MSI from EP local to remote EP, no target address used when sending MSI to RC from EP since the MSI address is already configured by RC.<b>Presently only validated when sending MSI to RC from EP. &#160;</b> 
</p><p><b>TI81XX_GET_PCIE_MEM_INFO</b> Application can use this to query the size and physical address of the reserved memory on TI81XX EP for PCIe transfers. This memory space can then be divided by the application across different BARs (for inbound mapping) and to perform CPU/EDMA read/write transfers from EP. To access this memory in userspace, the application can use mmap facility provided by the EP driver (for CPU transfers) or by EDMA sample driver for EDMA trnasfers. 
</p><p><b>TI81XX_GET_OUTBOUND_STATUS</b> Return a 32-bit mask inidicating available outbound windows. A value '1' for specific bit position indicates corresponding window in free and not enabled for outbound. 
</p><p><b>TI81XX_CLR_OUTBOUND_MAP</b> Clear outbound mapping for specified address. Corresponding window will be marked as free. 
</p><p><b>TI81XX_GET_INTR_CNTR</b> Get the current count of received MSI interrupts. This count is cumulative from the initialization of opening of driver. 
</p><p><b>TI81XX_GET_BAR_INFO</b> Returns the information associated with particular BAR such as address assigned to it (by RC) and size of the BAR.
</p>
<h2><span class="mw-headline" id="EP_Driver_Build_Configuration">EP Driver Build Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=11" title="Edit section: EP Driver Build Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The default TI81XX kernel build doesn't enable EP driver. Follow steps below to enable and build EP driver:
</p><p>NOTE: Currently, EP driver can be enabled only if PCI Bus Support is disabled in kernel configuration. This is done to avoid any conflict when mistakenly running EP driver on a Root Complex.
</p>
<h3><span class="mw-headline" id="Using_the_correct_kernel">Using the correct kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=12" title="Edit section: Using the correct kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Ensure that the kernel from downloaded from ti81xx-master branch is used and extracted on build host.</li></ul>
<h3><span class="mw-headline" id="Ensuring_default_kernel_configuration">Ensuring default kernel configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=13" title="Edit section: Ensuring default kernel configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Configure the kernel with default options. E.g., for TI816X EVM,</li></ul>
<pre>make ARCH=arm ti8168_evm_defconfig
</pre>
<ul><li>When building for TI814X EVM as EP,</li></ul>
<pre>make ARCH=arm ti8148_evm_defconfig
</pre>
<ul><li>For TI813X EP,</li></ul>
<pre>make ARCH=arm dm385_evm_defconfig
</pre>
<p><b> Enter kernel configuration menu </b>
</p>
<pre>make ARCH=arm menuconfig
</pre>
<p>You will be presented with menu such as below:
</p>
<pre>   General setup  ---&gt;
   [*] Enable loadable module support  ---&gt;
   -*- Enable the block layer  ---&gt; 
      System Type  ---&gt;
       <i>Bus support  ---&gt;</i>
   ...
   ...
   Device Drivers  ---&gt;
</pre>
<p><b> Disable PCI Bus Support </b>
</p>
<ul><li>Remove PCI bus support, which will in turn remove PCIe Root Complex Driver.</li>
<li>Scroll till "Bus Support" listed above using DOWN arrow and press SPACE to enter the option menu:</li></ul>
<pre>   [*] PCI support
   [*] Message Signaled Interrupts (MSI and MSI-X)
   [ ] PCI Debugging
   &lt; &gt; PCI Stub driver
   [ ] PCI IOV support
   &lt; &gt; PCCard (PCMCIA/CardBus) support  ---&gt;
</pre>
<p>Disable PCI support by pressing 'n' key on "PCI support" option. This will automatically disable other dependent configurations.
</p>
<pre>   <i>[ ] PCI support</i>
   &lt; &gt; PCCard (PCMCIA/CardBus) support  ---&gt;
</pre>
<p>Now press RIGH arrow to highlight "Exit" and press ENTER to return to initial menu.
</p><p><b> Enable EP Driver </b><br />
Scroll with DOWN arrow key till "Device Drivers" option and press SPACE. This will present following menu:
</p>
<pre>   Generic Driver Options  ---&gt;
   &lt; &gt; Connector - unified userspace &lt;-&gt; kernelspace linker  ---&gt;
   ...
   ...
       <i>Character devices  ---&gt;</i>
</pre>
<p>Scroll till "Character devices" and press SPACE, which will show a menu similar to following:
</p>
<pre>   -*- Virtual terminal
   ...
   ...
   <i>&lt; &gt; TI81XX PCIe Endpoint Driver (NEW)</i>
</pre>
<p>Using DOWN arrow key, go till PCIe Endpoint Driver option as shown above.
</p><p>Press 'y' to build the driver into kernel
</p>
<pre>   ...
   <i>&lt;*&gt; TI81XX PCIe Endpoint Driver</i>
</pre>
<p>or 'm' to build as loadable module.
</p>
<pre>   ...
   <i>&lt;M&gt; TI81XX PCIe Endpoint Driver</i>
</pre>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>NOTE: At present, only modular build is supported/validated so it is recommended to build the driver as module.</b>
</p>
</div>
<p>Use RIGHT arrow key to highlight "Exit" and press ENTER successively till you are prompted to save the kernel configuration. Select "Yes" and press enter to exit the configuration menu.
</p>
<h3><span class="mw-headline" id="Building_EP_Driver">Building EP Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=14" title="Edit section: Building EP Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Once the EP driver is enabled in kernel build configuration as described in earlier section, you can build it as follows:
</p><p><b> Building statically with kernel </b><br />
In this case, rebuild of kernel is required and driver will be built into kernel
</p>
<pre>make ARCH=arm uImage
</pre>
<p><b> Building as loadable module </b>
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>NOTE:</b> Even when loading the EP driver as module, you need to build the kernel at least once and make sure that it is used for EP before loading the module otherwise the EP driver may not get loaded successfully. In addition, to enable reserving memory at boot time and for successful EP driver build, PCIe EP driver must be selected in build configuration before building the kernel.
</p>
</div>
<p>Build the kernel wil PCI support disabled and EP driver selected to be built as module (refer earlier section for configuration):
</p>
<pre>make ARCH=arm uImage
</pre>
<p>Build kernel modules
</p>
<pre>make ARCH=arm modules
</pre>
<p>This will build EP driver module located inside <tt>drivers/char</tt> as:
</p>
<pre>drivers/char/ti81xx_pcie_epdrv.ko
</pre>
<h3><span class="mw-headline" id="Resource_Reservation">Resource Reservation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=15" title="Edit section: Resource Reservation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The EP drive expects a contiguous block of memory reserved at boot time to facilitate applications to do mmap when doing data transfer using PCIe. The desired size should vary depending upon the application requirement.
</p><p>By default there is no memory reserved for EP driver unless a kernel commandline argument "pcie_mem" with non-zero value specifying size of the memory to be reserved is passed.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p>NOTE1: PCIe EP driver must be included in kernel configuration to be able to reserve memory for PCIe. 
</p><p>NOTE2: The EP driver doesn't require any memory to be reserved for its own functionality, but this memory is required to provide mmap regions mapping to PCIe BARs (inbound transfers) and/or EDMA regions (outbound transfers) to allow application to perform PCIe communication and transfers. 
</p>
</div>
<p>An example for reserving 8 MB of RAM for PCIe EP, append following to kernel bootargs:
</p>
<pre>pcie_mem=8M
</pre>
<p>Note that, though the user can specify the size of memory to be reserved for PCIe, the start address of this chunk is not guaranteed to be same across different booting of the kernel and may vary due to parameters such as different boot arguments, kernel configuration and changes in kernel. The EP drivers provides an IOCTL to enable application (using EP driver) to query the physical base address and size of the reserved PCIe memory block. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 0, 0);">
<p>WARNING: If PCIe memory is not reserved during boot time, the EP driver would still load successfully but the application on EP might fail if it expects reserved RAM available to transfer data using mmap or DMA. To ensure that the driver had reserved memory available, the application must use TI81XX_GET_PCIE_MEM_INFO ioctl to check if reserved memory size fits application's requirement.
</p>
</div>
<h4><span class="mw-headline" id="Prerequisites_on_initialization">Prerequisites on initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=16" title="Edit section: Prerequisites on initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>EP driver expects that the PCIe h/w on (local) EP is already initialized before the driver is initialized. This includes:
</p>
<ul><li>PCIe subsystem is set as PCIe Endpoint (h/w default)</li>
<li>PCIe link is up. This means SerDes, PLL is setup to provide 2.5 GHz clock from 100MHz reference and PRCM is setup to enable PCIe module and LTSSM on.</li>
<li>Root Complex has detected this EP and allocated resources such as memory BARs, interrupt required for its operation.</li></ul>
<p>Following the "Execution" steps described in this document automatically ensures all of the above since PCIe boot operation of EP takes care of them. 
</p><p>In case you want to use a non-PCIe boot mode, all of the above needs to be taken care of before starting the EP driver. Refer TRM for PCIe h/w initialization details. Note that to ensure that the RC detected and configures this device, the PCIe initialization should be done at early stages during boot up.
</p>
<h4><span class="mw-headline" id="Inbound_Mapping">Inbound Mapping</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=17" title="Edit section: Inbound Mapping">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>EP driver, on its own, doesn't create inbound mapping for any BAR. It is the application's responsibility to allot a contiguous region from PCIe reserved memory to create inbound mapping using IOCTL TI81XX_SET_INBOUND.
</p><p>Note: It is recommended but not forced on the application to use the region from PCIe reserved memory to create inbound mapping. It may as well use a different mechanism to reserve memory (outside of EP driver) and pass the physical address etc to EP driver for setting up inbound translation.
</p>
<h4><span class="mw-headline" id="Outbound_Mapping">Outbound Mapping</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=18" title="Edit section: Outbound Mapping">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Unlike inbound, outbound mapping doesn't directly depend on the PCIe memory reserved, since it is internal masters (Cortex A8 CPU or EDMA) who need to be aware of (or provided with) memory to be used as source/destination for outbound and is independent of the PCIe and EP driver.
</p><p>In this case also, a contiguous space for transfer is needed and it may be convenient to use a part of memory already reserved for PCIe. For example, in case the memory reserved is 8 MB, designate buffers in the lower 4 MB to carry out EDMA reads/writes to/drom.
</p><p>NOTE: EP driver, on its own, doesn't provide any EDMA transfer functionality and it is the application's responsibility to set up outbound transfer parameters such as outbound mapping (using IOCTL TI81XX_SET_OUTBOUND), determining source/destination address for transfer, etc. before proceeding to use EDMA driver.
</p>
<h3><span class="mw-headline" id="EP_Driver_Files">EP Driver Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=19" title="Edit section: EP Driver Files">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<pre>drivers/char/ti81xx_pcie_epdrv.h
drivers/char/ti81xx_pcie_epdrv.c
</pre>
<h3><span id="Kernel_Files/Functions_Added/Updated"></span><span class="mw-headline" id="Kernel_Files.2FFunctions_Added.2FUpdated">Kernel Files/Functions Added/Updated</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=20" title="Edit section: Kernel Files/Functions Added/Updated">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>arch/arm/plat-omap/devices.c
<ul><li>Adds mechanism to reserve RAM for PCIe EP operations at boot time with size</li></ul></li></ul>
<p>specified by "pcie_mem" boot argument.
</p>
<ul><li>arch/arm/plat-omap/include/plat/common.h</li>
<li>arch/arm/plat-omap/common.c
<ul><li>Reserve memory during boot</li></ul></li></ul>
<h2><span class="mw-headline" id="Sample_Components">Sample Components</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=21" title="Edit section: Sample Components">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The various sample components to utilize the EP driver on TI81XX EP are attached to this page.
</p><p>These include:
</p>
<ul><li>EP side: Sample kernel module for EDMA</li>
<li>RC side: Sample kernel module for TI81XX RC which provides RC side application with access over PCI</li>
<li>RC &amp; EP side: Sample Applications</li></ul>
<p>The details are covered in individual sections below.
</p>
<h3><span class="mw-headline" id="EDMA_Kernel_Module">EDMA Kernel Module</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=22" title="Edit section: EDMA Kernel Module">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This module is provided as a sample driver to access EDMA functionality from user space. The main purpose of this driver is to enable the EP side application to initiate EDMA transfers to the peer over PCIe. 
Note that since this is a sample driver, it is not integrated into kernel and needs to be applied as patch to the kernel source from release.
</p>
<h4><span class="mw-headline" id="Driver_Files">Driver Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=23" title="Edit section: Driver Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>drivers/char/ti81xx_edma.h
drivers/char/ti81xx_edma.c
</p>
<h4><span class="mw-headline" id="Driver_Calls_2">Driver Calls</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=24" title="Edit section: Driver Calls">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please refer driver files and EP application code for reference.
</p>
<h4><span class="mw-headline" id="IOCTLs_supported_2">IOCTLs supported</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=25" title="Edit section: IOCTLs supported">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please refer driver files and EP application code for reference.
</p>
<h4><span class="mw-headline" id="Building_The_Module">Building The Module</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=26" title="Edit section: Building The Module">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Apply the attached patch <i>0001-char-ti81xx-Add-EDMA-driver-to-provide-minimal-acces.patch</i> by copying it to kernel source directory. Ensure that the kernel is already configured for TI81XX EP as mentioned earlier.
</p><p>The download link mentioned earlier has the patch in gzipped format so it needs to be extracted to get the patch file. You can then use 'patch' utility to apply the patch as:
</p>
<pre># gunzip 0001-char-ti81xx-Add-EDMA-driver-to-provide-minimal-acces.patch.gz
# patch -p 1 -i 0001-char-ti81xx-Add-EDMA-driver-to-provide-minimal-acces.patch
</pre>
<p>NOTE: The above step directly modifies the drivers/char/Makefile to build this sample driver always as loadable kernel module.
</p><p>Build module with following command
</p>
<pre>make ARCH=arm modules
</pre>
<p>The module will be built as
</p>
<pre>drivers/char/ti81xx_edma.ko
</pre>
<h3><span class="mw-headline" id="RC_Kernel_Module">RC Kernel Module</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=27" title="Edit section: RC Kernel Module">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This sample driver needs to be applied to the RC kernel. This means it must have PCI bus support with MSI enabled.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> At present, only TI816X/TI814X/TI813X RC is supported. Also, to apply this patch cleanly, the kernel extracted earlier (for building EP driver) needs to be used.
</p>
</div>
<h4><span class="mw-headline" id="Driver_Files_2">Driver Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=28" title="Edit section: Driver Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>drivers/char/ti81xx_pcie_rcdrv.h
drivers/char/ti81xx_pcie_rcdrv.c
</p>
<h4><span class="mw-headline" id="Driver_Calls_3">Driver Calls</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=29" title="Edit section: Driver Calls">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please refer driver files and RC application code for reference.
</p>
<h4><span class="mw-headline" id="IOCTLs_supported_3">IOCTLs supported</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=30" title="Edit section: IOCTLs supported">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please refer driver files and RC application code for reference.
</p>
<h4><span class="mw-headline" id="Building_The_Module_2">Building The Module</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=31" title="Edit section: Building The Module">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Apply the attached patch <i>0002-char-ti81xx-Add-driver-for-controlling-TI81XX-EP-fro.patch</i> by copying it to kernel source directory. Ensure that the patch for EDMA sample module is already applied (as mentioned above), this will avoid conflicts.
</p><p>The download link mentioned earlier has the patch in gzipped format so it needs to be extracted to get the patch file. You can then use 'patch' utility to apply the patch as:
</p>
<pre># gunzip 0002-char-ti81xx-Add-driver-for-controlling-TI81XX-EP-fro.patch.gz
# patch -p 1 -i 0002-char-ti81xx-Add-driver-for-controlling-TI81XX-EP-fro.patch
</pre>
<p>NOTE: The above step directly modifies the drivers/char/Makefile to build this sample driver always as loadable kernel module when PCI MSI (CONFIG_PCI_MSI) support is enabled.
</p><p><b> Ensuring default kernel configuration </b>
</p>
<ul><li>Configure the kernel with default options. E.g., for TI816X EVM,</li></ul>
<pre>make ARCH=arm ti8168_evm_defconfig
</pre>
<ul><li>In case using TI814X EVM as RC, use,</li></ul>
<pre>make ARCH=arm ti8148_evm_defconfig
</pre>
<ul><li>For TI813X RC,</li></ul>
<pre>make ARCH=arm dm385_evm_defconfig
</pre>
<p><b> Build the kernel for RC </b> 
</p>
<pre>make ARCH=arm uImage
</pre>
<p><b> Build RC module </b>
</p>
<pre>make ARCH=arm modules
</pre>
<p><b> The module will be built as </b>
</p>
<pre>drivers/char/ti81xx_pcie_rcdrv.ko
</pre>
<h2><span class="mw-headline" id="Sample_Applications">Sample Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=32" title="Edit section: Sample Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The attached tarball <a rel="nofollow" class="external text" href="http://processors.wiki.ti.com/images/5/56/Epdrv_sample_apps.tar.gz">epdrv_sample_apps.tar.gz</a> contains RC and EP side sample applications which use various kernel modules described above to communicate and perform data trnasfers between them across PCIe.
</p><p>Currently the EP application requires minimum 8MB of memory reserved for PCIe transfers, thus, the kernel command line must be passed pcie_mem=8M at least. If the memory reserved is less, then the application will exit.
</p>
<h4><span class="mw-headline" id="Files">Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=33" title="Edit section: Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<pre>./Makefile
./lib
./lib/Makefile
./lib/ti81xx_ep_lib.c
./lib/ti81xx_mgmt_lib.c
./lib/ti81xx_pci_info.c
./lib/ti81xx_trans.c
./include
./include/debug_msg.h
./include/ti81xx_ep_lib.h
./include/ti81xx_mgmt_lib.h
./include/ti81xx_pci_info.h
./include/ti81xx_trans.h
./application
./application/makefile
./application/ti81xx_ep_app.c
./application/ti81xx_rc_app.c
</pre>
<h4><span class="mw-headline" id="Building_Applications">Building Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=34" title="Edit section: Building Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Create an empty directory and extract the attached tarball epdrv_sample_apps.tar.gz into that directory.
</p><p>E.g., assuming the directory created is named 'apps' and eprv_sample_apps.tar.gz is copied to it,
</p>
<pre># cd apps
# tar -xzvf eprv_sample_apps.tar.gz
</pre>
<p>Build the applications for TI81XX RC and TI81XX EP using following command
</p>
<pre># make KERNSRC=&lt;absolute-path-to-TI81XX-kernel-source&gt;
</pre>
<p>Remember to pass correct path to kernel source where the kernel tarball mentioned earlier is extracted.
</p><p>The above command will build EP and RC applications at following paths respectively:
</p>
<pre>application/ep_app
application/rc_app
</pre>
<p>In case the RC kernel source is different than EP kernel (e.g., when using PC -&gt; TI81XX setup), the RC and EP side application components need to be built separately in two steps as below example:
</p>
<pre># make KERNSRC=&lt;absolute-path-to-RC-kernel-source&gt; rc
# make KERNSRC=&lt;absolute-path-to-TI81XX-EP-kernel-source&gt; ep
</pre>
<p>You may use <tt>make clean</tt> in between to force rebuild of the library files which are common for RC &amp; EP. Note that this will also delete the application built in earlier step, so ensure it is copied elsewhere.
</p><p>To clean the built files, you can use
</p>
<pre># make clean
</pre>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> Currently only default mode of applications is supported (DEMO mode). The other 2 modes - throughput and sanity mode are not supported. 
</p>
</div>
<h2><span class="mw-headline" id="Execution">Execution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=35" title="Edit section: Execution">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Following sequence needs to be executed to run the demo with above components (commands with 'EP#' to be executed on EP size while those with 'RC#' to be executed on RC side):
</p>
<ul><li>Ensure the desire PCIe setup is done - in this case, we assume TI816X &lt;-&gt; TI816X setup.</li>
<li>Power on TI816X EP</li>
<li>Power on TI816X RC</li>
<li>Boot EP from RC (refer Boot Driver User Guide)</li></ul>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> It should be possible to skip this step and instead have EP booted from any non PCIe boot mode (e..g, NAND boot) but it must be ensured that PCIe h/w is initialized, enumerated (from RC) and EP kernel passed memory size to be reserved as mentioned in next step before loading EP driver. 
</p>
</div>
<ul><li>Make sure that at least 8 MB of PCIe memory is reserved by appending <tt>pcie_mem=8M</tt> (or more) to the 'bootargs' to the EP kernel. You may also need to ensure that the 'mem' argument passed to kernel ensures sufficient memory is available.</li>
<li>Ensure that EP Driver, EDMA driver and EP sample application are present in a directory on EP filesystem.</li>
<li>Once shell is available on EP side, navigate to the directory containing the above files. Load EP Driver and EDMA sample driver:</li></ul>
<pre>EP# insmod ti81xx_pcie_epdrv.ko
EP# insmod ti81xx_edma.ko
</pre>
<ul><li>After successful load of these modules, run EP application:</li></ul>
<pre>EP# ./ep_app
</pre>
<ul><li>You may need to add executable permission to the application before above step:</li></ul>
<pre>EP# chmod a+x ep_app
</pre>
<ul><li>The EP application will not wait for communication with peer.</li>
<li>On TI816X RC side, make sure that the RC driver and application are present in working directory.</li>
<li>Navigate to that directory and load the RC driver</li></ul>
<pre>RC# insmod ti81xx_pcie_rcdrv.ko
</pre>
<ul><li>Run RC application (again, you may need to run <tt>chmod a+x rc_app</tt> before this step)</li></ul>
<pre>RC# ./rc_app
</pre>
<p>Since these applications are built with DEMO mode, they will start communicating each other and do data transfer in either directions using CPU (read/write from RC) and EDMA (read/write from EP).
</p><p>During execution of the applications, on RC and EP consoles, you would see chunks with 'C', 'D', 'L' characters. The meaning is explained below:
</p>
<pre>on RC, data represented by 'C' is sent by memcpy from EP
on RC, data represented by 'D' is sent by EDMA from EP
on EP, data represented by 'C' is sent by memcpy from RC
on EP, data represented by 'L' is data that has been read by EDMA from a buffer on RC populated by application on RC.
</pre>
<ul><li>To exit the DEMO, terminate RC and EP apps - this can be done by pressing Ctrl + C combination at shell on both RC and EP. Note that there are no log files generated for DEMO mode.</li></ul>
<h3><span class="mw-headline" id="Getting_Throughput_from_EDMA_transfers">Getting Throughput from EDMA transfers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;section=36" title="Edit section: Getting Throughput from EDMA transfers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p>For throughput measurements, MSI interrupt from EP to RC are used for control communication.   
</p>
</div>
<ul><li>You can also build the applications in throughput mode to get the throughput data for EDMA transfers from EP (read/write).</li>
<li>To set this mode, build the applications by passing <tt>MODE=THPT</tt> as argument to 'make' command.</li>
<li>Assuming we are building the applications for TI816X (RC) &lt;-&gt; TI813X (EP), using following commands on build host in EP sample applications directory</li></ul>
<pre># make clean
# make KERNSRC=&lt;path-to-TI81XX-kernel-source&gt;  MODE=THPT
</pre>
<dl><dd><ul><li>This will build the applications <tt>ep_app</tt> and <tt>rc_app</tt> inside application directory. Transfer them to RC and EP as mentioned earlier and set as executable.</li></ul></dd></dl>
<ul><li>It is assumed that the required modules are loaded on RC and EP after fresh boot as described earlier to proceed application execution</li>
<li>On TI813X EP, start ep_app followed by starting rc_app on RC.</li>
<li>In the example setup, following messages were seen</li></ul>
<dl><dd><ul><li>On TI813X EP</li></ul></dd></dl>
<pre>THPT calculated in TX direction is&#160;: 318.012421 MBPS
Executing test case THPT RX (RC read from EP)
THPT calculated in RX direction is&#160;: 302.421722 MBPS
Executing test case THPT TX/RX (simultaneous read &amp; write from EP)
THPT calculated in TX direction is&#160;: 154.729523 MBPS
THPT calculated in RX direction is&#160;: 154.729523 MBPS
Total thpt calculated tx+rx is:  309.459045 MBPS</pre>
<dl><dd><ul><li>On TI816X RC</li></ul></dd></dl>
<pre>root@am389x-evm:/home/hemant/hemant/ti816x_pcie# ./rc_app
***Forcing polling (interrupt communication disabled, RC will not generate interrupt)</pre>
</div>
<!-- 
NewPP limit report
Cached time: 20201130194226
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.081 seconds
Real time usage: 0.085 seconds
Preprocessor visited node count: 178/1000000
Preprocessor generated node count: 274/1000000
Post‐expand include size: 512/2097152 bytes
Template argument size: 61/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 538/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.879      1 -total
 52.59%    1.514      1 Template:SpArticleStart
 42.90%    1.235      1 Template:SpLicenseCC-SA
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:15252-0!canonical and timestamp 20201130194226 and revision id 157248
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI81XX PSP PCI Express Endpoint Driver User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;oldid=157248">https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;oldid=157248</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_TI816X-2.html" title="Category:TI816X">TI816X</a></li><li><a href="Category_TI814X.html" title="Category:TI814X">TI814X</a></li><li><a href="Category_PSP.html" title="Category:PSP">PSP</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI81XX+PSP+PCI+Express+Endpoint+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;oldid=157248" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 25 July 2013, at 00:43.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.081","walltime":"0.085","ppvisitednodes":{"value":178,"limit":1000000},"ppgeneratednodes":{"value":274,"limit":1000000},"postexpandincludesize":{"value":512,"limit":2097152},"templateargumentsize":{"value":61,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":538,"limit":5000000},"timingprofile":["100.00%    2.879      1 -total"," 52.59%    1.514      1 Template:SpArticleStart"," 42.90%    1.235      1 Template:SpLicenseCC-SA"]},"cachereport":{"timestamp":"20201130194226","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":227});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI81XX_PSP_PCI_Express_Endpoint_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 06:30:44 GMT -->
</html>
