<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/AM335x_Audio_Driver%27s_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 03:49:19 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>AM335x Audio Driver's Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AM335x_Audio_Driver's_Guide","wgTitle":"AM335x Audio Driver's Guide","wgCurRevisionId":100207,"wgRevisionId":100207,"wgArticleId":13500,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["AM335x","Linux","PSP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AM335x_Audio_Driver's_Guide","wgRelevantArticleId":13500,"wgRequestId":"6ab7770e0a2e46ff29714bce","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AM335x_Audio_Driver_s_Guide rootpage-AM335x_Audio_Driver_s_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">AM335x Audio Driver's Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">AM335x Audio Driver's Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Linux PSP</div>  
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext"><b>Introduction</b></span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#References"><span class="tocnumber">1.1</span> <span class="toctext"><b>References</b></span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Acronyms_.26_Definitions"><span class="tocnumber">1.2</span> <span class="toctext"><b>Acronyms &amp; Definitions</b></span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Features"><span class="tocnumber">1.3</span> <span class="toctext"><b>Features</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#ALSA_SoC_Architecture"><span class="tocnumber">2</span> <span class="toctext"><b>ALSA SoC Architecture</b></span></a>
<ul>
<li class="toclevel-2 tocsection-6"><a href="#Introduction_2"><span class="tocnumber">2.1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Design"><span class="tocnumber">2.2</span> <span class="toctext"><b>Design</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Driver_Configuration"><span class="tocnumber">3</span> <span class="toctext"><b>Driver Configuration</b></span></a>
<ul>
<li class="toclevel-2 tocsection-9"><a href="#Module_Build"><span class="tocnumber">3.1</span> <span class="toctext"><b>Module Build</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-10"><a href="#Application_Interface"><span class="tocnumber">4</span> <span class="toctext"><b>Application Interface</b></span></a>
<ul>
<li class="toclevel-2 tocsection-11"><a href="#Amixer_commands"><span class="tocnumber">4.1</span> <span class="toctext"><b>Amixer commands</b></span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Device_Interface"><span class="tocnumber">4.2</span> <span class="toctext"><b>Device Interface</b></span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Proc_Interface"><span class="tocnumber">4.3</span> <span class="toctext"><b>Proc Interface</b></span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Commonly_Used_APIs"><span class="tocnumber">4.4</span> <span class="toctext"><b>Commonly Used APIs</b></span></a></li>
<li class="toclevel-2 tocsection-15"><a href="#User_Space_Interactions"><span class="tocnumber">4.5</span> <span class="toctext"><b>User Space Interactions</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-16"><a href="#Sample_Applications"><span class="tocnumber">5</span> <span class="toctext"><b>Sample Applications</b></span></a>
<ul>
<li class="toclevel-2 tocsection-17"><a href="#Introduction_3"><span class="tocnumber">5.1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#A_minimal_playback_application"><span class="tocnumber">5.2</span> <span class="toctext"><b>A minimal playback application</b></span></a>
<ul>
<li class="toclevel-3 tocsection-19"><a href="#Opening_the_audio_device"><span class="tocnumber">5.2.1</span> <span class="toctext"><b>Opening the audio device</b></span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#Setting_the_parameters_of_the_device"><span class="tocnumber">5.2.2</span> <span class="toctext"><b>Setting the parameters of the device</b></span></a></li>
<li class="toclevel-3 tocsection-21"><a href="#Writing_data_to_the_device"><span class="tocnumber">5.2.3</span> <span class="toctext"><b>Writing data to the device</b></span></a></li>
<li class="toclevel-3 tocsection-22"><a href="#Closing_the_device"><span class="tocnumber">5.2.4</span> <span class="toctext"><b>Closing the device</b></span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#A_minimal_record_application"><span class="tocnumber">5.3</span> <span class="toctext"><b>A minimal record application</b></span></a></li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The AIC31 audio module contains audio analog inputs and outputs.&#160;It is connected to the main AM335x processor through the TDM/I2S&#160;interface (audio interface) and used to transmit and receive audio data.&#160;The AIC31 audio codec is connected via Multi-Channel Audio Serial Port&#160;(McASP) interface, a communication peripheral, to the main processor. 
</p><p><br />McASP provides a full-duplex direct serial interface between the host device&#160;(AM335x processor) and other audio devices in the system such as the&#160;AIC31 codec. It provides a direct interface to industry standard&#160;codecs, analog interface chips (AICs) and other serially connected A/D&#160;and D/A devices: 
</p>
<ul><li>Inter-IC Sound (I2S) compliant devices</li>
<li>Pulse Code Modulation (PCM) devices</li>
<li>Time Division Multiplexed (TDM) bus devices.</li></ul>
<p><br /> 
</p><p>The AIC31 audio module is controlled by internal registers that can&#160;be accessed by the high speed I2C control interface.<br /> 
</p><p>This user manual defines and describes the usage of user level and&#160;platform level interfaces of the ALSA SoC Audio driver. 
</p><p><br />
</p>
<h2><span class="mw-headline" id="References"><b>References</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=2" title="Edit section: References">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ol><li><a rel="nofollow" class="external text" href="http://www.alsa-project.org/main/index.php/ASoC">ALSA SoC Project Homepage</a></li>
<li><a rel="nofollow" class="external text" href="http://www.alsa-project.org/main/index.php/Main_Page">ALSA Project Homepage</a></li>
<li><a rel="nofollow" class="external text" href="http://www.alsa-project.org/alsa-doc/alsa-lib/">ALSA User Space Library</a></li>
<li><a rel="nofollow" class="external text" href="http://www.equalarea.com/paul/alsa-audio.html">Using ALSA Audio API</a>&#160;Author: Paul Davis</li>
<li><a rel="nofollow" class="external text" href="http://focus.ti.com/lit/ds/symlink/tlv320aic31.pdf">TLV320AIC31 - Low-Power Stereo CODEC with HP Amplifier</a></li></ol>
<p><br />
</p>
<h2><span id="Acronyms_&amp;_Definitions"></span><span class="mw-headline" id="Acronyms_.26_Definitions"><b>Acronyms &amp; Definitions</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=3" title="Edit section: Acronyms &amp; Definitions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<table cellspacing="0" cellpadding="5" width="40%" border="1">
<caption><b>Audio Driver: Acronyms</b>
</caption>
<tbody><tr>
<th style="background-color: green">Acronym
</th>
<th style="background-color: green">Definition
</th></tr>
<tr>
<td>ALSA
</td>
<td>Advanced Linux Sound Architecture
</td></tr>
<tr>
<td>ALSA SoC
</td>
<td>ALSA System on Chip
</td></tr>
<tr>
<td>DMA
</td>
<td>Direct Memory Access
</td></tr>
<tr>
<td>I2C
</td>
<td>Inter-Integrated Circuit
</td></tr>
<tr>
<td>McASP
</td>
<td>Multi-channel Audio Serial Port
</td></tr>
<tr>
<td>PCM
</td>
<td>Pulse Code Modulation
</td></tr>
<tr>
<td>TDM
</td>
<td>Time Division Multiplexing
</td></tr>
<tr>
<td>OSS
</td>
<td>Open Sound System
</td></tr>
<tr>
<td>I2S
</td>
<td>Inter-IC Sound
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Features"><b>Features</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=4" title="Edit section: Features">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section describes the features supported by ALSA SoC Audio driver. 
</p>
<ul><li>Supports AIC31 audio codec on AM335x in ALSA SoC framework.</li>
<li>Multiple sample rates support (8KHz, 16KHz, 22.05KHz, 32KHz, 44.1KHz, 48KHz, 64KHz, 88.2KHz and 96KHz) for both capture and playback.</li>
<li>Supports audio in stereo mode.</li>
<li>Supports simultaneous playback and record (full-duplex mode).</li>
<li>Start, stop, pause and resume feature.</li>
<li>Supports mixer interface for audio codecs.</li>
<li>Supports MMAP mode for both playback and capture. (verify)</li>
<li>McASP is configured as slave and AIC31 Codec is configured as&#160;master.</li>
<li>There are 2 instances of McASP on AM335x SOC</li>
<li>Audio Codecs are available in 2 EVM Configs.</li>
<li>McASP1 is used for Profile 0, 3 &amp;&#160;7 on AM335x General Purpose EVM.</li>
<li>McASP1 instance is used on AM335x IP-Phone EVM.</li>
<li>For more details about EVM Configurations &amp;&#160;Profile Descriptions, Please refer to <a rel="nofollow" class="external text" href="http://www.ti.com/tool/tmdxevm3358">EVM reference manual</a>.</li></ul>
<p><br />
</p>
<h1><span class="mw-headline" id="ALSA_SoC_Architecture"><b>ALSA SoC Architecture</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=5" title="Edit section: ALSA SoC Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Introduction_2"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=6" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The overall project goal of the ALSA System on Chip (ASoC) layer is to&#160;provide better ALSA support for embedded system on chip processors&#160;and portable audio codecs. Currently there is some support in the kernel&#160;for SoC audio, however it has some limitations: 
</p>
<ul><li>Currently, codec drivers are often tightly coupled to the underlying&#160;SoC cpu. This is not really ideal and leads to code duplication.</li>
<li>There is no standard method to signal user initiated audio events&#160;e.g. Headphone/Mic insertion, Headphone/Mic detection after an&#160;insertion event.</li>
<li>Current drivers tend to power up the entire codec when playing (or&#160;recording) audio. This is fine for a PC, but tends to waste a lot of&#160;power on portable devices. There is also no support for saving power&#160;via changing codec oversampling rates, bias currents, etc.</li></ul>
<p><br />
</p>
<h2><span class="mw-headline" id="Design"><b>Design</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=7" title="Edit section: Design">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The ASoC layer is designed to address these issues and provide the&#160;following features: 
</p>
<ul><li><b>Codec independence</b>: Allows reuse of codec drivers on other&#160;platforms and machines.</li>
<li><b>Easy I2S/PCM audio interface setup</b> between codec and SoC. Each&#160;SoC interface and codec registers it's audio interface capabilities with&#160;the core and are subsequently matched and configured when the&#160;application hw params are known.</li>
<li><b>Dynamic Audio Power Management (DAPM)</b>: DAPM automatically&#160;sets the codec to it's minimum power state at all times. This includes&#160;powering up/down internal power blocks depending on the internal&#160;codec audio routing and any active streams.</li>
<li><b>Pop and click reduction</b>: Pops and clicks can be reduced by powering the codec up/down in the correct sequence (including using digital&#160;mute). ASoC signals the codec when to change power states.</li></ul>
<p><br /> 
</p><p>To achieve all this, ASoC splits an embedded audio system into&#160;three components: 
</p>
<ul><li><b>Codec driver</b>: The codec driver is platform independent and contains&#160;audio controls, audio interface capabilities, codec dapm definition&#160;and codec IO functions.</li>
<li><b>Platform driver</b>: The platform driver contains the audio dma engine&#160;and audio interface drivers (e.g. I2S, AC97, PCM) for that platform.</li>
<li><b>Machine driver</b>: The machine driver handles any machine specific&#160;controls and audio events i.e. turning on an amp at start of playback.</li></ul>
<p><br /> 
</p><p>Following architecture diagram shows all the components and the&#160;interactions among them: 
</p><p><b>AM335x&#160;:</b> 
</p>
<div class="center"><div class="floatnone"><a href="File_DM81xx_Asoc_architecture.html" class="image" title="ALSA SoC Architecture (AM335x)"><img alt="ALSA SoC Architecture (AM335x)" src="https://processors.wiki.ti.com/images/8/84/DM81xx_Asoc_architecture.PNG" width="469" height="599" /></a></div></div>
<p><br />
</p>
<h1><span class="mw-headline" id="Driver_Configuration"><b>Driver Configuration</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=8" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>To enable/disable audio support, start the <i>Linux Kernel Configuration</i>&#160;tool: 
</p>
<pre>$ make CROSS_COMPILE=arm-arago-linux-gnueabi- ARCH=arm menuconfig 
</pre>
<p>Select <i>Device Drivers </i>from the main menu.
</p>
<pre>    ...
    ...
    Power management options ---&gt;
    [ ] Networking support ---&gt;
    Device Drivers ---&gt;
    File systems ---&gt;
    Kernel hacking ---&gt;
    ...
    ...

</pre>
<p>Select <i>Sound card support</i> as shown here:
</p>
<pre>    ...
    ...
    Multimedia devices ---&gt;
    Graphics support ---&gt;
&lt;*&gt; Sound card support ---&gt;
[*] HID Devices ---&gt;
[*] USB support ---&gt;
    ...
    ...

</pre>
<p>Select <i>Advanced Linux Sound Architecture</i> as shown here:
</p>
<pre>--- Sound card support
&lt;*&gt; Advanced Linux Sound Architecture ---&gt;
&lt; &gt; Open Sound System (DEPRECATED) ---&gt;

</pre>
<p>Select <i>ALSA for SoC audio support </i>as shown here:
</p>
<pre>    ...
    ...
[*] ARM sound devices ---&gt;
[*] SPI sound devices ---&gt;
&lt;*&gt; ALSA for SoC audio support ---&gt;

</pre>
<p>For AM335x , select <i>SoC Audio for AM33XX chip</i> as shown here:
</p>
<pre>--- ALSA for SoC audio support
&lt;*&gt; SoC Audio for the AM33XX chip
&lt;*&gt; SoC Audio support for AM335X EVM
&lt; &gt; Build all ASoC CODEC drivers (NEW)

</pre>
<p>Note: <i>Soc Audio support for AM335X EVM</i> option appears iff <i>SoC Audio for the AM33XX chip</i> is selected 
</p><p><br />
</p>
<h2><span class="mw-headline" id="Module_Build"><b>Module Build</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=9" title="Edit section: Module Build">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Module build for the audio driver is supported. To do this, at all the places mentioned in the section above select module build (short-cut key <b>M</b>). 
</p><p><br />
</p>
<h1><span class="mw-headline" id="Application_Interface"><b>Application Interface</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=10" title="Edit section: Application Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Module build for the audio driver is supported. To do this, at all the places mentioned in the section above select module build (short-cut key <b>M</b>).
</p><p>After the modules are built, the following sound related kernel modules (*.ko) will be generated
</p>
<pre>  sound/soundcore.ko 
  sound/core/snd.ko
  sound/core/snd-hwdep.ko 
  sound/core/snd-timer.ko 
  sound/core/snd-page-alloc.ko 
  sound/core/snd-pcm.ko 
  sound/core/snd-rawmidi.ko 
  sound/core/snd-usb-audio.ko 
  sound/core/snd-usb-lib.ko 
  sound/soc/snd-soc-core.ko 
  sound/soc/codecs/snd-soc-tlv320aic3x.ko
  sound/soc/davinci/snd-soc-davinci.ko
  sound/soc/davinci/snd-soc-davinci-mcasp.ko
  sound/soc/davinci/snd-soc-evm.ko 
</pre>
<p>The kernel modules need to be inserted in the order listed above.
</p><p>Application developer uses ALSA-lib, a user space library, rather than the kernel API. The library offers 100% of the functionality of the kernel API, but adds major improvements in usability, making the application code simpler and better looking. 
</p><p>The online-documentation for the same is available at: <a rel="nofollow" class="external text" href="http://www.alsa-project.org/alsa-doc/alsa-lib/">ALSA Project</a> 
</p><p><br />
</p>
<h2><span class="mw-headline" id="Amixer_commands"><b>Amixer commands</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=11" title="Edit section: Amixer commands">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To unmute/mute the microphone input 
</p>
<pre>$ amixer sset ‘Right PGA Mixer Mic3L’ on/off
$ amixer sset ‘Right PGA Mixer Mic3R’ on/off
$ amixer sset ‘Left PGA Mixer Mic3L’ on/off
$ amixer sset ‘Left PGA Mixer Mic3R’ on/off
</pre>
<p>To unmute/mute the line input and use differential configuration 
</p>
<pre>$ amixer sset 'Right PGA Mixer Line1R' on/off
$ amixer sset 'Right PGA Mixer Line1L' on/off
$ amixer sset 'Left PGA Mixer Line1R' on/off
$ amixer sset 'Left PGA Mixer Line1L' on/off
$ amixer sset 'Left Line1R Mux' differential
$ amixer sset 'Right Line1L Mux' differential
</pre>
<p>To increase the volume for capture and playback 
</p>
<pre>$ amixer cset name='PCM Playback Volume' x%,x% (x between 0-100)
$ amixer cset name='PGA Capture Volume'  x%,x%
</pre>
<div style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><b>NOTE</b><br /><br />* When using one input port for audio capture (microphone or line) please ensure that the other port is muted. If both the input ports are left enabled or configured incorrectly the captured audio stream may be noisy.
<ul><li>In case of noisy recording, reduce the capture volume using amixer command and check.</li></ul></div>
<pre>  amixer cset name='PGA Capture Volume' 30%,30% </pre>
<p><br />
<br />
</p>
<h2><span class="mw-headline" id="Device_Interface"><b>Device Interface</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=12" title="Edit section: Device Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The operational interface in <code>/dev/</code> contains three main types of devices:&#160; 
</p>
<ul><li>PCM devices for recording or playing digitized sound samples,</li>
<li>CTL devices that allow manipulating the internal mixer and routing of the&#160;card, and,</li>
<li>MIDI devices to control the MIDI port of the card, if any.</li></ul>
<table cellspacing="0" cellpadding="5" width="40%" border="1">
<caption><b>Device Interface</b>
</caption>
<tbody><tr>
<th style="background-color: green">Name
</th>
<th style="background-color: green">Description
</th></tr>
<tr>
<td>/dev/snd/controlC0
</td>
<td>Control devices (i.e. mixer, etc)
</td></tr>
<tr>
<td>/dev/snd/pcmC0D0c
</td>
<td>PCM Card 0 Device 0 Capture device
</td></tr>
<tr>
<td>/dev/snd/pcmC0D0p
</td>
<td>PCM Card 0 Device 0 Playback device
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Proc_Interface"><b>Proc Interface</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=13" title="Edit section: Proc Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The <code>/proc/asound</code> kernel interface is a status and configuration&#160;interface. A lot of useful information about the sound system can be&#160;found in the <code>/proc/asound</code> subdirectory. 
</p><p>See the table below for different proc entries in <code>/proc/asound</code>: 
</p>
<table cellspacing="0" cellpadding="5" width="40%" border="1">
<caption><b>Proc Interface</b>
</caption>
<tbody><tr>
<th style="background-color: green">Name
</th>
<th style="background-color: green">Description
</th></tr>
<tr>
<td>cards
</td>
<td>List of registered cards
</td></tr>
<tr>
<td>version
</td>
<td>Version and date the driver was built on
</td></tr>
<tr>
<td>devices
</td>
<td>List of registered ALSA devices
</td></tr>
<tr>
<td>pcm
</td>
<td>The list of allocated PCM streams
</td></tr>
<tr>
<td>cardX/ (X = 0-7)
</td>
<td>The card specific directory
</td></tr>
<tr>
<td>cardX/pcm0p
</td>
<td>The directory of the given PCM playback stream
</td></tr>
<tr>
<td>cardX/pcm0c
</td>
<td>The directory of the given PCM capture stream
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="Commonly_Used_APIs"><b>Commonly Used APIs</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=14" title="Edit section: Commonly Used APIs">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Some of the commonly used APIs to write an ALSA based application are: 
</p>
<table cellspacing="0" cellpadding="5" width="60%" border="1">
<caption><b>Commonly Used APIs</b>
</caption>
<tbody><tr>
<th style="background-color: green">Name
</th>
<th style="background-color: green">Description
</th></tr>
<tr>
<td>snd_pcm_open
</td>
<td>Opens a PCM stream
</td></tr>
<tr>
<td>snd_pcm_close
</td>
<td>Closes a previously opened PCM stream
</td></tr>
<tr>
<td>snd_pcm_hw_params_any
</td>
<td>Fill params with a full configuration space for a PCM
</td></tr>
<tr>
<td>snd_pcm_hw_params_test_ &lt;&lt;parameter&gt;&gt;
</td>
<td>Test the availability of important parameters like number of channels, sample rate etc. For e.g. snd_pcm_hw_params_test_format, snd_pcm_hw_params_test_rate etc.
</td></tr>
<tr>
<td>snd_pcm_hw_params_set_ &lt;&lt;parameter&gt;&gt;
</td>
<td>Set the different configuration parameters. For e.g. snd_pcm_hw_params_set_format, snd_pcm_hw_params_set_rate etc.
</td></tr>
<tr>
<td>snd_pcm_hw_params
</td>
<td>Install one PCM hardware configuration chosen from a configuration space
</td></tr>
<tr>
<td>snd_pcm_writei
</td>
<td>Write interleaved frames to a PCM
</td></tr>
<tr>
<td>snd_pcm_readi
</td>
<td>Read interleaved frames from a PCM
</td></tr>
<tr>
<td>snd_pcm_prepare
</td>
<td>Prepare PCM for use
</td></tr>
<tr>
<td>snd_pcm_drop
</td>
<td>Stop a PCM dropping pending frames
</td></tr>
<tr>
<td>snd_pcm_drain
</td>
<td>Stop a PCM preserving pending frames
</td></tr></tbody></table>
<p><br />
</p>
<h2><span class="mw-headline" id="User_Space_Interactions"><b>User Space Interactions</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=15" title="Edit section: User Space Interactions">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section depicts the sequence of operations for a simple playback&#160;and capture application. 
</p>
<div class="center"><div class="floatnone"><a href="File_Alsa-usecase1.html" class="image" title="ASoC Driver: Half Duplex Playback"><img alt="ASoC Driver: Half Duplex Playback" src="https://processors.wiki.ti.com/images/a/aa/Alsa-usecase1.png" width="450" height="332" /></a></div></div><div class="center"><div class="floatnone"><a href="File_Alsa-usecase2.html" class="image" title="ASoC Driver: Half Duplex Record"><img alt="ASoC Driver: Half Duplex Record" src="https://processors.wiki.ti.com/images/b/b6/Alsa-usecase2.png" width="450" height="329" /></a></div></div>
<p><br />
</p>
<h1><span class="mw-headline" id="Sample_Applications"><b>Sample Applications</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=16" title="Edit section: Sample Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This chapter describes the audio sample applications provided along with the package. The source for these sample applications are available in the Examples directory of the Release Package folder.
</p><p><br />
</p>
<h2><span class="mw-headline" id="Introduction_3"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=17" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Writing an audio application involves the following steps: 
</p>
<ul><li>Opening the audio device</li>
<li>Set the parameters of the device</li>
<li>Receive audio data from the device or deliver audio data to the&#160;device</li>
<li>Close the device</li></ul>
<p>These steps are explained in detail in this section. 
</p>
<div style="padding-right: 5px; padding-left: 5px; background: #eeeeee; padding-bottom: 5px; color: #151b54; padding-top: 5px">
<p><b>Note</b><br />User space ALSA libraries can be downloaded from this link <a rel="nofollow" class="external text" href="http://www.alsa-project.org/main/index.php/Download">ALSA Project Download</a>.&#160;User needs to build and install them before he starts using the ALSA&#160;based applications.
</p>
</div>
<h2><span class="mw-headline" id="A_minimal_playback_application"><b>A minimal playback application</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=18" title="Edit section: A minimal playback application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This program opens an audio interface for playback, configures it for&#160;stereo, 16 bit, 44.1kHz, interleaved conventional read/write access.&#160;Then its delivers a chunk of random data to it, and exits. It represents&#160;about the simplest possible use of the ALSA Audio API, and isn't meant&#160;to be a real program.
</p>
<h3><span class="mw-headline" id="Opening_the_audio_device"><b>Opening the audio device</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=19" title="Edit section: Opening the audio device">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To write a simple PCM application for ALSA, we first need a handle for the&#160;PCM device. Then we have to specify the direction of the PCM stream,&#160;which can be either playback or capture. We also have to provide some&#160;information about the configuration we would like to use, like buffer size,&#160;sample rate, pcm data format. So, first we declare:
</p>
<pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;alsa/asoundlib.h&gt;

#define BUFF_SIZE 4096

int main (int argc, char *argv[])
{
  int err;
  short buf[BUFF_SIZE];
  int rate = 44100; /* Sample rate */
  unsigned int exact_rate; /* Sample rate returned by */
  /* Handle for the PCM device */
  snd_pcm_t *playback_handle;
  /* Playback stream */
  snd_pcm_stream_t stream = SND_PCM_STREAM_PLAYBACK;
  /* This structure contains information about the hardware and can be used to specify the configuration to be used for */
  /* the PCM stream. */
  snd_pcm_hw_params_t *hw_params;

</pre>
<p>The most important ALSA interfaces to the PCM devices are the "plughw"&#160;and the "hw" interface. If you use the "plughw" interface, you need&#160;not care much about the sound hardware. If your sound card does not&#160;support the sample rate or sample format you specify, your data will&#160;be automatically converted. This also applies to the access type and&#160;the number of channels. With the "hw" interface, you have to check&#160;whether your hardware supports the configuration you would like to use.&#160;Otherwise, user can use the default interface for playback by: 
</p>
<pre>  /* Name of the PCM device, like plughw:0,0 */
  /* The first number is the number of the soundcard, the second number is the number of the device. */

  static char *device = "default"; /* playback device */

</pre>
<p>Now we can open the PCM device: 
</p>
<pre>  /* Open PCM. The last parameter of this function is the mode. */
  if ((err = snd_pcm_open (&amp;playback_handle, device, stream, 0)) &lt; 0) {
    fprintf (stderr, "cannot open audio device (%s)\n", snd_strerror (err));
    exit (1);
  }

</pre>
<h3><span class="mw-headline" id="Setting_the_parameters_of_the_device"><b>Setting the parameters of the device</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=20" title="Edit section: Setting the parameters of the device">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Now we initialize the variables and allocate the <code>hwparams</code> structure:<br />
</p>
<pre>  /* Allocate the snd_pcm_hw_params_t structure on the stack. */
  if ((err = snd_pcm_hw_params_malloc (&amp;hw_params)) &lt; 0) {
    fprintf (stderr, "cannot allocate hardware parameters (%s)\n", snd_strerror (err));
    exit (1);
  }

</pre>
<p><br />
Before we can write PCM data to the soundcard, we have to specify&#160;access type, sample format, sample rate, number of channels, number&#160;of periods and period size. First, we initialize the hwparams structure&#160;with the full configuration space of the soundcard: 
</p>
<pre>  /* Init hwparams with full configuration space */
  if ((err = snd_pcm_hw_params_any (playback_handle, hw_params)) &lt; 0) {
    fprintf (stderr, "cannot initialize hardware parameter structure (%s)\n", snd_strerror (err));
    exit (1);
  }

</pre>
<p>Now configure the desired parameters. For this example, we assume&#160;that the soundcard can be configured for stereo playback of 16 Bit&#160;Little Endian data, sampled at 44100 Hz. Therefore, we restrict the&#160;configuration space to match this configuration only.&#160;The access type specifies the way in which multi-channel data is stored&#160;in the buffer. For INTERLEAVED access, each frame in the buffer contains&#160;the consecutive sample data for the channels. For 16 Bit stereo data,&#160;this means that the buffer contains alternating words of sample data for&#160;the left and right channel. 
</p>
<pre>  /* Set access type. */
  if ((err = snd_pcm_hw_params_set_access (playback_handle, hw_params, SND_PCM_ACCESS_RW_INTERLEAVED)) &lt; 0) {
    fprintf (stderr, "cannot set access type (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Set sample format */
  if ((err = snd_pcm_hw_params_set_format (playback_handle, hw_params, SND_PCM_FORMAT_S16_LE)) &lt; 0) {
    fprintf (stderr, "cannot set sample format (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Set sample rate. If the exact rate is not supported by the hardware, use nearest possible rate. */
  exact_rate = rate;
  if ((err = snd_pcm_hw_params_set_rate_near (playback_handle, hw_params, &amp;exact_rate, 0)) &lt; 0) {
    fprintf (stderr, "cannot set sample rate (%s)\n", snd_strerror (err));
    exit (1);
  }

  if (rate&#160;!= exact_rate) {
    fprintf(stderr, "The rate&#160;%d Hz is not supported by your hardware.\n ==&gt; Using&#160;%d Hz instead.\n", rate, exact_rate);
  }

  /* Set number of channels */
  if ((err = snd_pcm_hw_params_set_channels (playback_handle, hw_params, 2)) &lt; 0) {
    fprintf (stderr, "cannot set channel count (%s)\n", snd_strerror (err));
    exit (1);
  }

</pre>
<p>Now we apply the configuration to the PCM device pointed to by&#160;<code>pcm_handle</code> and prepare the PCM device. 
</p>
<pre>  /* Apply HW parameter settings to PCM device and prepare device. */
  if ((err = snd_pcm_hw_params (playback_handle, hw_params)) &lt; 0) {
    fprintf (stderr, "cannot set parameters (%s)\n", snd_strerror (err));
    exit (1);
  }

  snd_pcm_hw_params_free (hw_params);

  if ((err = snd_pcm_prepare (playback_handle)) &lt; 0) {
    fprintf (stderr, "cannot prepare audio interface for use (%s)\n", snd_strerror (err));
    exit (1);
  }

</pre>
<h3><span class="mw-headline" id="Writing_data_to_the_device"><b>Writing data to the device</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=21" title="Edit section: Writing data to the device">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>After the PCM device is configured, we can start writing PCM data to it.&#160;The first write access will start the PCM playback. For interleaved write&#160;access, we use the function: 
</p><p><br />
</p>
<pre>  /* Write some junk data to produce sound. */
  if ((err = snd_pcm_writei (playback_handle, buf, BUFF_SIZE/2))&#160;!= BUFF_SIZE/2) {
    fprintf (stderr, "write to audio interface failed (%s)\n", snd_strerror (err));
    exit (1); 
  } else {
    fprintf (stdout, "snd_pcm_writei successful\n");
  }

</pre>
<p>After the PCM playback is started, we have to make sure that our&#160;application sends enough data to the soundcard buffer. Otherwise, a&#160;buffer under-run will occur. After such an under-run has occurred,&#160;<code>snd_pcm_prepare</code> should be called. 
</p>
<h3><span class="mw-headline" id="Closing_the_device"><b>Closing the device</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=22" title="Edit section: Closing the device">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>After the data has been transferred, the device needs to be closed by&#160;calling: 
</p>
<pre>  snd_pcm_close (playback_handle);

  exit (0);
}

</pre>
<h2><span class="mw-headline" id="A_minimal_record_application"><b>A minimal record application</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;section=23" title="Edit section: A minimal record application">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This program opens an audio interface for capture, configures it for&#160;stereo, 16 bit, 44.1kHz, interleaved conventional read/write access.&#160;Then its reads a chunk of random data from it, and exits. It isn't meant&#160;to be a real program.&#160; 
</p><p>Note that it is not possible to use one pcm handle for both playback and&#160;capture. So you have to configure two handles if you want to access the&#160;PCM device in both directions.
</p>
<pre>#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;alsa/asoundlib.h&gt;

#define BUFF_SIZE 4096

int main (int argc, char *argv[])
{
  int err;
  short buf[BUFF_SIZE];
  int rate = 44100; /* Sample rate */
  int exact_rate; /* Sample rate returned by */
  snd_pcm_t *capture_handle;

  /* This structure contains information about the hardware and can be used to specify the configuration to be used for */
  /* the PCM stream. */
  snd_pcm_hw_params_t *hw_params;

  /* Name of the PCM device, like hw:0,0 */
  /* The first number is the number of the soundcard, the second number is the number of the device. */
  static char *device = "hw:0,0"; /* capture device */

  /* Open PCM. The last parameter of this function is the mode. */
  if ((err = snd_pcm_open (&amp;capture_handle, device, SND_PCM_STREAM_CAPTURE, 0)) &lt; 0) {
    fprintf (stderr, "cannot open audio device (%s)\n", snd_strerror (err));
    exit (1);
  }

  memset(buf,0,BUFF_SIZE);

  /* Allocate the snd_pcm_hw_params_t structure on the stack. */
  if ((err = snd_pcm_hw_params_malloc (&amp;hw_params)) &lt; 0) {
    fprintf (stderr, "cannot allocate hardware parameter structure (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Init hwparams with full configuration space */
  if ((err = snd_pcm_hw_params_any (capture_handle, hw_params)) &lt; 0) {
    fprintf (stderr, "cannot initialize hardware parameter structure (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Set access type. */
  if ((err = snd_pcm_hw_params_set_access (capture_handle, hw_params, SND_PCM_ACCESS_RW_INTERLEAVED)) &lt; 0) {
    fprintf (stderr, "cannot set access type (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Set sample format */
  if ((err = snd_pcm_hw_params_set_format (capture_handle, hw_params, SND_PCM_FORMAT_S16_LE)) &lt; 0) {
    fprintf (stderr, "cannot set sample format (%s)\n", snd_strerror (err)); 
    exit (1);
  }

  /* Set sample rate. If the exact rate is not supported by the hardware, use nearest possible rate. */
  exact_rate = rate;
  if ((err = snd_pcm_hw_params_set_rate_near (capture_handle, hw_params, &amp;exact_rate, 0)) &lt; 0) {
    fprintf (stderr, "cannot set sample rate (%s)\n", snd_strerror (err));
    exit (1);
  }

  if (rate&#160;!= exact_rate) {
    fprintf(stderr, "The rate&#160;%d Hz is not supported by your hardware.\n ==&gt; Using&#160;%d Hz instead.\n", rate, exact_rate);
  }

  /* Set number of channels */
  if ((err = snd_pcm_hw_params_set_channels(capture_handle, hw_params, 2)) &lt; 0) {
    fprintf (stderr, "cannot set channel count (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Apply HW parameter settings to PCM device and prepare device. */
  if ((err = snd_pcm_hw_params (capture_handle, hw_params)) &lt; 0) {
    fprintf (stderr, "cannot set parameters (%s)\n", snd_strerror (err));
    exit (1);
  }

  snd_pcm_hw_params_free (hw_params);

  if ((err = snd_pcm_prepare (capture_handle)) &lt; 0) {
    fprintf (stderr, "cannot prepare audio interface for use (%s)\n", snd_strerror (err));
    exit (1);
  }

  /* Read data into the buffer. */
  if ((err = snd_pcm_readi (capture_handle, buf, 128))&#160;!= 128) {
    fprintf (stderr, "read from audio interface failed (%s)\n", snd_strerror (err));
    exit (1);
  } else {
    fprintf (stdout, "snd_pcm_readi successful\n");
  }

  snd_pcm_close (capture_handle);

  exit (0);
}

</pre>
</div>
<!-- 
NewPP limit report
Cached time: 20201201021825
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.082 seconds
Real time usage: 0.088 seconds
Preprocessor visited node count: 263/1000000
Preprocessor generated node count: 528/1000000
Post‐expand include size: 920/2097152 bytes
Template argument size: 341/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 7956/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    5.482      1 -total
 26.50%    1.453      1 Template:SpArticleStart
 23.31%    1.278      1 Template:SpLicenseCC-SA
 22.80%    1.250      1 Template:SpNote
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:13500-0!canonical and timestamp 20201201021824 and revision id 100207
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>AM335x Audio Driver&#39;s Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>AM335x Audio Driver&#39;s Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>AM335x Audio Driver&#39;s Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;oldid=100207">https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;oldid=100207</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_AM335x.html" title="Category:AM335x">AM335x</a></li><li><a href="Category_Linux.html" title="Category:Linux">Linux</a></li><li><a href="Category_PSP.html" title="Category:PSP">PSP</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=AM335x+Audio+Driver%27s+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="AM335x_Audio_Driver%27s_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:AM335x_Audio_Driver%27s_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="AM335x_Audio_Driver%27s_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/AM335x_Audio_Driver%27s_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/AM335x_Audio_Driver%27s_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;oldid=100207" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_Audio_Driver%27s_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 12 March 2012, at 00:24.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.082","walltime":"0.088","ppvisitednodes":{"value":263,"limit":1000000},"ppgeneratednodes":{"value":528,"limit":1000000},"postexpandincludesize":{"value":920,"limit":2097152},"templateargumentsize":{"value":341,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":7956,"limit":5000000},"timingprofile":["100.00%    5.482      1 -total"," 26.50%    1.453      1 Template:SpArticleStart"," 23.31%    1.278      1 Template:SpLicenseCC-SA"," 22.80%    1.250      1 Template:SpNote"]},"cachereport":{"timestamp":"20201201021825","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":237});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/AM335x_Audio_Driver%27s_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 03:49:24 GMT -->
</html>
