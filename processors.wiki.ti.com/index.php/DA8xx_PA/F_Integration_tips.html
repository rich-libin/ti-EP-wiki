<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/DA8xx_PA/F_Integration_tips by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 07:55:01 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>DA8xx PA/F Integration tips - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"DA8xx_PA/F_Integration_tips","wgTitle":"DA8xx PA/F Integration tips","wgCurRevisionId":35931,"wgRevisionId":35931,"wgArticleId":5901,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["DA8xx","DA8xx SDK Getting Started"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"DA8xx_PA/F_Integration_tips","wgRelevantArticleId":5901,"wgRequestId":"ea501a5dfb5db0e960ebb9fc","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-DA8xx_PA_F_Integration_tips rootpage-DA8xx_PA skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">DA8xx PA/F Integration tips</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Audio_sample-size"><span class="tocnumber">1</span> <span class="toctext">Audio sample-size</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#How_to_set_the_audio_sample-size_register.3F"><span class="tocnumber">1.1</span> <span class="toctext">How to set the audio sample-size register?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-3"><a href="#Recommendation_for_Memory_usage"><span class="tocnumber">2</span> <span class="toctext">Recommendation for Memory usage</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Placement_of_buffers_in_IRAM.2FL3RAM.2FSDRAM"><span class="tocnumber">2.1</span> <span class="toctext">Placement of buffers in IRAM/L3RAM/SDRAM</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Scratch_Memory_Usage"><span class="tocnumber">2.2</span> <span class="toctext">Scratch Memory Usage</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Adding_more_channels_.28_.3E_8_.29"><span class="tocnumber">3</span> <span class="toctext">Adding more channels ( &gt; 8 )</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#How_to_add_more_channels_in_the_system.3F"><span class="tocnumber">3.1</span> <span class="toctext">How to add more channels in the system?</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#How_to_test_10ch_output_on_DA8xx_EVM.3F"><span class="tocnumber">3.2</span> <span class="toctext">How to test 10ch output on DA8xx EVM?</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Channel_Configuration_Settings"><span class="tocnumber">4</span> <span class="toctext">Channel Configuration Settings</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Channel_Mask"><span class="tocnumber">4.1</span> <span class="toctext">Channel Mask</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-11"><a href="#Sample_Process"><span class="tocnumber">5</span> <span class="toctext">Sample Process</span></a></li>
<li class="toclevel-1 tocsection-12"><a href="#How_to_measure_peak_mips.3F"><span class="tocnumber">6</span> <span class="toctext">How to measure peak mips?</span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Audio_sample-size">Audio sample-size</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=1" title="Edit section: Audio sample-size">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The audio sample-size is an indication of the magnitude of the audio sample data on each channel. The <code>samsiz</code> variable is used by the ASP Algorithm to indicate the magnitude of the audio data on each channel. For algorithms like Bass Management, the magnitude of the SUB (subwoofer) channel can exceed 0 dB. The ASP Algorithm must provides the audio sample-size information so that the audio data samples can be adjusted during the encode process (conversion from floating-point to fixed-point) to ensure that no clipping of audio data occurs. The unit of the audio sample-size register is in 0.5 dB step. The audio sample-size information should not be written directly, but appended to the already present sample-size for each channel. If the audio level generated by ASP Algorithm is expected to never exceed 0 dB and an external entity (e.g., a microcontroller) adjusts the DSP’s output levels to ensure that no clipping occurs, then setting the audio sample-size register in the ASP Algorithm is not necessary.
</p>
<h2><span id="How_to_set_the_audio_sample-size_register?"></span><span class="mw-headline" id="How_to_set_the_audio_sample-size_register.3F">How to set the audio sample-size register?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=2" title="Edit section: How to set the audio sample-size register?">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The  <code>*samsiz</code>  element  of  the <code>AudioFrameData</code> structure is a pointer to an array of size M, where M is the maximum number of channels. 
</p>
<pre class="clip">samsiz = pAudioFrame-&gt;data.samsiz; // Audio size 
</pre> 
<p>Each element of the array is an audio sample-size register that is used to represent the theoretical maximum value that an audio channel can reach after the ASP has operated on it. The audio sample-size registers represent values in decibels in units of 0.5 dB. That is, the audio size registers are in Q1 format. For example, the bit pattern 0x0004 represents the value 2 dB.
</p><p><b>Example1:</b> In EQU example, max gain applied to all the channels is tracked and samsiz is updated accordingly so that no attenuation happens in analog domain. For all available channels, the samsiz is set as:
For channel i; the audio size is set as:
</p>
<pre>samsiz[i] += 2 * 20 *log<small>10</small> (maxgain);
</pre>
<p>The multiplication by 2 is because the audio size represetation is in Q1 format; ie, in units of 0.5dB.
</p><p><b>Example2:</b> Generating Centre channel from Left and Right channels:
Denoting the <code>i</code>th sample on the left, center, and right channels as <code>left[i]</code>, <code>cntr[i]</code>,and <code>rght[i]</code> respectively, the center channel is calculated as: 
</p>
<pre> cntr[i] = ccScale * (left[i] + rght[i]);
</pre>
<p>where <code>ccScale</code> is a scale factor. Assuming that the <code>i</code>th sample on the left and right channels, <code>left[i]</code> and <code>rght[i]</code>, have the same maximum possible value (size), then the corresponding  sample  for  the  center  channel  <code>cntr[i]</code>,  can  be  twice  as  large  as <code>left[i]</code> (or <code>rght[i]</code>).
The value of "twice" is equivalent to 6 dB. The multiplication of 6 by the value 2, resulting in:
</p>
<pre class="clip">samsiz[PAF_CNTR] = 2*6 + samsiz[PAF_LEFT];
</pre>
<h1><span class="mw-headline" id="Recommendation_for_Memory_usage">Recommendation for Memory usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=3" title="Edit section: Recommendation for Memory usage">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span id="Placement_of_buffers_in_IRAM/L3RAM/SDRAM"></span><span class="mw-headline" id="Placement_of_buffers_in_IRAM.2FL3RAM.2FSDRAM">Placement of buffers in IRAM/L3RAM/SDRAM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=4" title="Edit section: Placement of buffers in IRAM/L3RAM/SDRAM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>DA8xx device DSP internal memory consists of L1P, L1D and L2 cache memory. The internal memory configuration is:
</p>
<ul><li>L1P memory includes 32KB of RAM. The DSP program memory controller allows to configure part or all of the L1P RAM as normal program RAM or as cache.</li>
<li>L1D memory includes 32 KB of RAM. The DSP data memory controller (DMC) allows to configure part of the L1D RAM as normal data RAM or as cache.</li>
<li>L2 memory includes 256 KB of RAM. The DSP unified memory controller (UMC) allows to configure part or all of the L2 RAM as normal RAM or as cache.</li>
<li>L2 memory also includes 1024 KB of ROM.</li></ul>
<p>This device also offers an on-chip 128-KB shared RAM, apart from the internal memories. This shared RAM is referred to as L3RAM in PA/F context. Access to L3RAM happens via cache.
This device has two external memory interfaces that provide multiple external memory options accessible by the CPU and master peripherals:
</p>
<dl><dd><ul><li>EMIFA: 16-bit SDRAM with 128-MB address space</li>
<li>EMIFB: 32-/16-bit SDRAM with up to 256-MB SDRAM address space</li></ul></dd></dl>
<p>See the RAM usage report in SDK for information on the memory usage in each feature set. This should give a feel of how much of IRAM/L3RAM is free for use by custom ASPs. Since the device has cache based architecture, it is recommended to make use of L3RAM and SDRAM wherever possible except for performance critical applications.
It is also recommended to set the <code>memTab</code> parameters as configurable via the <code>IAlg_Config</code> structure; so that placement of buffers can be changed init-time.
</p>
<h2><span class="mw-headline" id="Scratch_Memory_Usage">Scratch Memory Usage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=5" title="Edit section: Scratch Memory Usage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>ASPs may use some scratch memory whose contents need not be maintained across the decode processing calls. Hence this memory can be shared among other algorithms active in the system. The PA/F allocates a scratch memory equal to the maximum scratch requirement of all algorithms present in the chain (This is approx 8K in the PA SDK, see memory footprint of each featureset for exact information). If scratch requirement of the custom ASP falls within this maximum; no additional scratch allocation happens for the custom ASP, otherwise the maximum scratch allocated is as per the custom ASP. Setting <code>memTab</code> attribute to <code>IALG_SCRATCH</code> takes care of this.
</p>
<h1><span id="Adding_more_channels_(_&gt;_8_)"></span><span class="mw-headline" id="Adding_more_channels_.28_.3E_8_.29">Adding more channels ( &gt; 8 )</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=6" title="Edit section: Adding more channels ( &gt; 8 )">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span id="How_to_add_more_channels_in_the_system?"></span><span class="mw-headline" id="How_to_add_more_channels_in_the_system.3F">How to add more channels in the system?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=7" title="Edit section: How to add more channels in the system?">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>By default PA SDK has support for 12 channels. See PA Reference Guide for details on the supported channels and paf-hd.pdf for additional channel definitions. In order to add more channels in the system following changes are required:
</p>
<ul><li>Allocate frame buffers for additional channels by changing number of channels in <code>pa/f/s19/I14/params.c</code></li></ul>
<pre class="clip">const SmInt PAF_AST_params_numchan_PAi[1] = 
{ 
  12,
};
</pre>
<ul><li>Modify <code>ipce_i14.c</code> to set the number of output channels</li></ul>
<pre class="clip">#define IPCE_OUTPUT_NUMCHAN	12
</pre>
<ul><li>Modify <code>pa/asp/std/ccm.c</code> to select the channels used</li>
<li>Add <code>ccm.c</code> to final project.</li>
<li>Update Channel configuration for additional channels as explained in section <a href="#Channel_Configuration_Settings"> Channel Configuration Settings</a>.</li></ul>
<h2><span id="How_to_test_10ch_output_on_DA8xx_EVM?"></span><span class="mw-headline" id="How_to_test_10ch_output_on_DA8xx_EVM.3F">How to test 10ch output on DA8xx EVM?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=8" title="Edit section: How to test 10ch output on DA8xx EVM?">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Only 8 channels can be output from the EVM simultaneously. But more than 8 channels can be tested on the DA8xx EVM using channel mapping alpha commands. See PA Reference Guide for detailed information on channel mapping alpha commands. EncChannelMapFrom and EncChannelMapTo alpha commands can be used to test all channels on EVM. These alpha commands route the frame buffer output of any channel to the desired MCASP pins.
For Eg: In order to check height channel output; you can route it to the back channels on the MCASP pins using below alpha commands:
</p>
<pre class="clip">writeENCChannelMapFrom16(PAF_LEFT,PAF_RGHT,PAF_LSUR,PAF_RSUR,PAF_CNTR,PAF_SUBW,PAF_LBAK,PAF_RBAK,PAF_LHED,PAF_RHED,-3,-3,-3,-3,-3,-3)
writeENCChannelMapTo16(0,4,1,5,2,6,-1,-1,3,7,-1,-1,-1,-1,-1,-1)
</pre>
<h1><span class="mw-headline" id="Channel_Configuration_Settings">Channel Configuration Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=9" title="Edit section: Channel Configuration Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>A Channel Configuration is the manner in which the channels of the AudioFrame are organized:
</p>
<ul><li>The Request Channel Configuration is the form of output audio that an ASP Algorithm should attempt to produce for system output, typically a read-only but application-variable quantity.</li>
<li>The Stream Channel Configuration describes the actual form of the AudioFrame data. As such, this is a read/write, application-variable quantity that describes the form of the AudioFrame data presented to an ASP Algorithm, which is to be updated by that ASP Algorithm to describe the AudioFrame data that is output.</li></ul>
<p>Channel configuration registers are 32-bit wide and it consists of four, 8-bit fields or parts:
</p>
<ul><li>The satellite part indicates the channel configuration for satellite, that is, non-bass channels. This includes front channels Left, Right, and Center, as well as rear channels Left and Right Surround and Left and Right Back.</li>
<li>The subwoofer part indicates the channel configuration for bass channels. This consists of either the LFE channel (before bass management) or subwoofer channels (after bass management).</li>
<li>The auxiliary part indicates special information about the encoding of the data in the channels:
<ul><li>If the satellite part indicates that the channel configuration is two-channel, the auxiliary part gives auxiliary information about how that two-channel data should be interpreted. This includes stereo, stereo-unknown, surround-encoded, mono, and dual-mono. Note that only two-channel data uses the auxiliary part in this manner.</li>
<li>If the satellite part indicates that the channel configuration is multi-channel with two channel surround, the auxiliary part gives auxiliary information about how that two channel surround data should be interpreted. This includes stereo-surround, surround-unknown, back-encoded surround, and mono-surround. Note that only multi-channel data with two surround channels uses the auxiliary part in this manner.</li></ul></li>
<li>extMask part contain 8-bits each sepcifying one or two extended channels, as shown in Table 1. These indicate the presence of additional channels from the standard 7.2 channels.</li></ul>
<p><b>Table 1 Extension Mask of Channel Configuration</b>
</p>
<table class="wikitable" border="1" cellspacing="0">
<tbody><tr>
<th style="background:#efefef;">Bit Position
</th>
<th style="background:#efefef;">Indicated Channels
</th></tr>
<tr>
<td>PAF_CC_EXT_LwRw (0)
</td>
<td>Lw + Rw
</td></tr>
<tr>
<td>PAF_CC_EXT_LcRc (1)
</td>
<td>Lc + Rc
</td></tr>
<tr>
<td>PAF_CC_EXT_LhRh (2)
</td>
<td>Lh + Rh
</td></tr>
<tr>
<td>PAF_CC_EXT_Cvh (3)
</td>
<td>Cvh
</td></tr>
<tr>
<td>PAF_CC_EXT_Ts (4)
</td>
<td>Ts
</td></tr>
<tr>
<td>PAF_CC_EXT_LhsRhs (5)
</td>
<td>Lhs + Rhs
</td></tr>
<tr>
<td>PAF_CC_EXT_LhrRhr (6)
</td>
<td>Lhr + Rhr
</td></tr>
<tr>
<td>PAF_CC_EXT_Chr (7)
</td>
<td>Chr
</td></tr></tbody></table>
<p>Channel Assignment of these channels are indicated in paf-hd.pdf. Bit positions in “extMask” are enum-erated in “t:/pa/f/include/pafcc.h”.
The extMask for each of the above channel/channel pair is indicated below:
</p>
<pre>    #define PAF_CC_EXTMASK_LwRw    (1u &lt;&lt; PAF_CC_EXT_LwRw)
    #define PAF_CC_EXTMASK_LcRc    (1u &lt;&lt; PAF_CC_EXT_LcRc)
    #define PAF_CC_EXTMASK_LhRh    (1u &lt;&lt; PAF_CC_EXT_LhRh)
    #define PAF_CC_EXTMASK_Cvh     (1u &lt;&lt; PAF_CC_EXT_Cvh)
    #define PAF_CC_EXTMASK_Ts      (1u &lt;&lt; PAF_CC_EXT_Ts)
    #define PAF_CC_EXTMASK_LhsRhs  (1u &lt;&lt; PAF_CC_EXT_LhsRhs)
    #define PAF_CC_EXTMASK_LhrRhr  (1u &lt;&lt; PAF_CC_EXT_LhrRhr)
    #define PAF_CC_EXTMASK_Chr     (1u &lt;&lt; PAF_CC_EXT_Chr)
</pre>
<p>When an ASP generates any extended channels it is required to set the extMask correspoding to that channel(s)in PAF_ChannelConfiguration.
</p>
<h2><span class="mw-headline" id="Channel_Mask">Channel Mask</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=10" title="Edit section: Channel Mask">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The Channel Configuration Mask Table is a data structure to be used for conversion of channel configuration information into Channel Masks. It is a read-only, application-constant quantity. The Channel Configuration Mask Table is typically used via the channelMask member function of the Audio Frame Data Structure.
The original Channel Mask is 16-bits wide and does not represnt all extendec channels. A new 32-bit Channel Mask has been added for representing the newly added channels.
</p>
<pre>  typedef XDAS_Int32 PAF_ChannelMask_HD;
</pre>
<p>There is a one-to-one correspondence between bits in the Channel Mask and channels in Audio Frame.
The helper function “pAudioFrame-&gt;fxns-&gt;channelMask()” has been changed to return a 32-bit PAF_ChannelMask_HD, instead of a 16-bit PAF_ChannelMask. This function now takes care of extMask field of PAF_ChannelCOnfiguration. ASPs can check for the presence of additional channels by making use of function pAudioFrame-&gt;fxns-&gt;channelMask().
</p>
<h1><span class="mw-headline" id="Sample_Process">Sample Process</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=11" title="Edit section: Sample Process">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The Sample Process is a multi-byte bit mask of values of the form (1&lt;&lt;PAF_PROCESS_X) that indicates the processing algorithms that have operated on the Audio Frame Data. It is a read/write quantity, and it is the responsibility of an ASP Algorithm to realize this update if appropriate. 
For example, if the PL Algorithm and BM Algorithms have operated on the Audio Frame data, the Sample Process value will be <code>(1&lt;&lt;PAF_PROCESS_PL)|(1&lt;&lt;PAF_PROCESS_BM)</code> if the corresponding symbols exist. Sample Process symbols shall be defined on an as-needed basis, depending upon whether such information is required subsequently in the audio stream processing chain.
</p>
<h1><span id="How_to_measure_peak_mips?"></span><span class="mw-headline" id="How_to_measure_peak_mips.3F">How to measure peak mips?</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit&amp;section=12" title="Edit section: How to measure peak mips?">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Peak mips refers to the worst mips taken in block processing for a frame. PA/F works on block of samples (256) and there could be situations where there is high variation in mips across various calls. If there is high difference between mips for processing different blocks; there could be peak mips problems. You could see the worst case mips associted with your ASP by measuring mips across each apply call after cache-flush operation. The ASP wrapper code in the package shows how to measure mips under worst case conditions.If there is a very significance difference in mips across different blocks; this could lead to real-time issues when run with PA. So algorithm has to take care of averaging out mips across all the calls for a frame. If this is not possible; this may have to be solved at framwork level by managing output buffers. Please contact PA support if there exists such a situation.
</p>
<!-- 
NewPP limit report
Cached time: 20201130090010
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.034 seconds
Real time usage: 0.034 seconds
Preprocessor visited node count: 91/1000000
Preprocessor generated node count: 152/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 507/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:5901-0!canonical and timestamp 20201130090010 and revision id 35931
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="../File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>DA8xx PA/F Integration tips</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>DA8xx PA/F Integration tips</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>DA8xx PA/F Integration tips</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="../File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;oldid=35931">https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;oldid=35931</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="../Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="../Category_DA8xx.html" title="Category:DA8xx">DA8xx</a></li><li><a href="../Category_DA8xx_SDK_Getting_Started.html" title="Category:DA8xx SDK Getting Started">DA8xx SDK Getting Started</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=DA8xx+PA%2FF+Integration+tips" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="../Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="F_Integration_tips.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:DA8xx_PA/F_Integration_tips&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="F_Integration_tips.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="../Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="../Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="../Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="../Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="../Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="../Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="../Special_WhatLinksHere/DA8xx_PA/F_Integration_tips.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="../Special_RecentChangesLinked/DA8xx_PA/F_Integration_tips.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="../Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;oldid=35931" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=DA8xx_PA/F_Integration_tips&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 8 July 2010, at 15:20.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="../Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="../Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="../Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="../Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.034","walltime":"0.034","ppvisitednodes":{"value":91,"limit":1000000},"ppgeneratednodes":{"value":152,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":507,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130090010","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":231});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/DA8xx_PA/F_Integration_tips by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 07:55:03 GMT -->
</html>
