<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Sitara_Linux_Training:_Init_Scripts by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:12:52 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Sitara Linux Training: Init Scripts - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Sitara_Linux_Training:_Init_Scripts","wgTitle":"Sitara Linux Training: Init Scripts","wgCurRevisionId":157983,"wgRevisionId":157983,"wgArticleId":17275,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["AM437x","AM335x","AM35x","AM37x","AM1x","AM18x"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Sitara_Linux_Training:_Init_Scripts","wgRelevantArticleId":17275,"wgRequestId":"401425a9f123bfb762098859","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Sitara_Linux_Training_Init_Scripts rootpage-Sitara_Linux_Training_Init_Scripts skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Sitara Linux Training: Init Scripts</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><br />
</p>
<p><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a> </p><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Lab_Configuration"><span class="tocnumber">1</span> <span class="toctext">Lab Configuration</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Hardware"><span class="tocnumber">1.1</span> <span class="toctext">Hardware</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Software"><span class="tocnumber">1.2</span> <span class="toctext">Software</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-4"><a href="#Adding_a_Simple_Init_Script"><span class="tocnumber">2</span> <span class="toctext">Adding a Simple Init Script</span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Description"><span class="tocnumber">2.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Prerequisites"><span class="tocnumber">2.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Key_Points"><span class="tocnumber">2.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Lab_Steps"><span class="tocnumber">2.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#Adding_Start.2FStop_command"><span class="tocnumber">3</span> <span class="toctext">Adding Start/Stop command</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Description_2"><span class="tocnumber">3.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-11"><a href="#Prerequisites_2"><span class="tocnumber">3.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-12"><a href="#Key_Points_2"><span class="tocnumber">3.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Lab_Steps_2"><span class="tocnumber">3.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-14"><a href="#Changing_the_Order_of_Script_Execution"><span class="tocnumber">4</span> <span class="toctext">Changing the Order of Script Execution</span></a>
<ul>
<li class="toclevel-2 tocsection-15"><a href="#Description_3"><span class="tocnumber">4.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-16"><a href="#Prerequisites_3"><span class="tocnumber">4.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-17"><a href="#Key_Points_3"><span class="tocnumber">4.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-18"><a href="#Lab_Steps_3"><span class="tocnumber">4.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-19"><a href="#Change_run-level_using_Bootargs"><span class="tocnumber">5</span> <span class="toctext">Change run-level using Bootargs</span></a>
<ul>
<li class="toclevel-2 tocsection-20"><a href="#Description_4"><span class="tocnumber">5.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-21"><a href="#Prerequisites_4"><span class="tocnumber">5.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-22"><a href="#Key_Points_4"><span class="tocnumber">5.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-23"><a href="#Lab_Steps_4"><span class="tocnumber">5.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-24"><a href="#Changing_the_Default_Run_Level"><span class="tocnumber">6</span> <span class="toctext">Changing the Default Run Level</span></a>
<ul>
<li class="toclevel-2 tocsection-25"><a href="#Description_5"><span class="tocnumber">6.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-26"><a href="#Prerequisites_5"><span class="tocnumber">6.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-27"><a href="#Key_Points_5"><span class="tocnumber">6.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-28"><a href="#Lab_Steps_5"><span class="tocnumber">6.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-29"><a href="#Adding_Login_Actions"><span class="tocnumber">7</span> <span class="toctext">Adding Login Actions</span></a>
<ul>
<li class="toclevel-2 tocsection-30"><a href="#Description_6"><span class="tocnumber">7.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-31"><a href="#Prerequisites_6"><span class="tocnumber">7.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-32"><a href="#Key_Points_6"><span class="tocnumber">7.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-33"><a href="#Lab_Steps_6"><span class="tocnumber">7.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-34"><a href="#Adding_Login_Actions_to_.2Fetc.2Fprofile.d_Scripts"><span class="tocnumber">8</span> <span class="toctext">Adding Login Actions to /etc/profile.d Scripts</span></a>
<ul>
<li class="toclevel-2 tocsection-35"><a href="#Description_7"><span class="tocnumber">8.1</span> <span class="toctext">Description</span></a></li>
<li class="toclevel-2 tocsection-36"><a href="#Prerequisites_7"><span class="tocnumber">8.2</span> <span class="toctext">Prerequisites</span></a></li>
<li class="toclevel-2 tocsection-37"><a href="#Key_Points_7"><span class="tocnumber">8.3</span> <span class="toctext">Key Points</span></a></li>
<li class="toclevel-2 tocsection-38"><a href="#Lab_Steps_7"><span class="tocnumber">8.4</span> <span class="toctext">Lab Steps</span></a></li>
</ul>
</li>
</ul>
</div>
 
<p><big><big><big>Introduction</big></big></big> 
</p>
<hr />
<p><br />This lab is going to give you a hands on tutorial of how the Linux init scripts work with the sysvinit system as well as how the profile scripts can be used to affect the login process. Each of the following sections below will walk you through an excersize describing the actions that are about to be performed, the key points to take away, and the step-by-step instructions to complete the lab. If you have questions or feedback please e-mail the <a rel="nofollow" class="external text" href="mailto:sdk_feedback@list.ti.com">sdk_feedback@list.ti.com</a> mailing list. 
</p><p><br /><br /><br /><big><big><span style="color: red"><b>NOTE:</b> In this guide commands to be executed for each step will be marked in <b>BOLD</b></span></big></big> 
</p><p><br /> 
</p>
<h1><span class="mw-headline" id="Lab_Configuration">Lab Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=1" title="Edit section: Lab Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The following are the hardware and software configurations for this lab. The steps in this lab are written against this configuration. The concepts of the lab will apply to other configurations but will need to be adapted accordingly. 
</p>
<h3><span class="mw-headline" id="Hardware"><br />Hardware</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=2" title="Edit section: Hardware">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>AM335x EVM-SK (TMDSSK3358) - <a rel="nofollow" class="external text" href="https://estore.ti.com/TMDSSK3358-AM335x-Starter-Kit-P3110.aspx">Order Now</a></li></ul>
<blockquote><div style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><b>NOTE</b><br /><br />Other target boards can be used but the steps below related to serial and ethernet connections may differ.</div> </blockquote> 
<ul><li>Router connecting AM335x EVM-SK and Linux Host (For Remote Matrix lab)</li>
<li>USB cable connection between AM335x EVM-SK and Linux Host using the micro-USB connector (J3/USB0)</li></ul>
<blockquote><div style="margin: 5px; padding: 2px 10px; background-color: #ecffff; border-left: 5px solid #3399ff;"><b>NOTE</b><br /><br />The AM335x EVM uses a standard DB9 connector and serial cable.  New Win7 based Host PCs may require a USB-to-Serial cable since newer laptops do not have serial ports.</div> </blockquote> 
<ul><li>5V power supply (typically provided with the AM335x EVM-SK)</li></ul>
<p><br /> 
</p>
<h3><span class="mw-headline" id="Software">Software</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=3" title="Edit section: Software">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>A Linux host PC configured as per the <a rel="nofollow" class="external text" href="Sitara_Linux_Training__Linux_Host_Configuration.html">Linux Host Configuration</a> page</li>
<li>Sitara Linux SDK installed. This lab assumes the latest Sitara Linux SDK is installed in /home/sitara. If you use a different location please modify the below steps accordingly.</li>
<li>SD card with Sitara Linux SDK installed.</li></ul>
<blockquote>
<ul><li>For help creating a 2 partition SD card with the SDK conent see the <a href="http://software-dl.ti.com/processor-sdk-linux/esd/docs/latest/linux/Overview_Getting_Started_Guide.html#linux-sd-card-creation-guide" class="mw-redirect" title="Sitara Linux SDK create SD card script">create_sdcard.sh script</a> page</li></ul>
</blockquote> 
<ul><li>CCSv5 installed. This lab assumes CCS has been installed in /home/sitara. If you use a different location please modify the below steps accordingly.</li></ul>
<blockquote>
<ul><li>The CCS installer can be downloaded from the [<a rel="nofollow" class="external text" href="http://www.ti.com/tool/linuxezsdk-sitara">http://www.ti.com/tool/linuxezsdk-sitara</a>] page and if extracted into the same directory as the SDK installer can be installed at the same time as the Sitara Linux SDK using the SDK installer.<br /></li></ul>
</blockquote> 
<h1><span class="mw-headline" id="Adding_a_Simple_Init_Script">Adding a Simple Init Script</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=4" title="Edit section: Adding a Simple Init Script">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=5" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This lab will add a very simple helloworld style init script to the boot process. 
</p>
<h3><span class="mw-headline" id="Prerequisites">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=6" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>A development environment configured for NFS. For help on setting up the development environment and the SDK see <a href="Sitara_Linux_Training__Hands_on_with_the_SDK.html" class="mw-redirect" title="Sitara Linux Training: Hands on with the SDK">Sitara Linux Training: Hands on with the SDK</a></li>
<li>USB-to-Serial Adapter configured. The following steps will help you to verify that the adapter has been configured properly:
<ol><li>Connect the USB-to-Serial adapter to the VMWare image using <b>Virtual Machine -&gt; Removable Devices -&gt; Prolific usb-serial controller -&gt; Connect</b>. You may see a warning message from VMWare, answer <b>Yes</b> if prompted.
<ul><li><b>NOTE:</b> If you are running your VMWare image with Windows 7 some USB-to-Serial adapters do not properly work with Windows 7. Make sure that your adapter specifically says that it supports Windows 7. You may also need to install an additional driver for your adapter.</li>
<li>In the case of the Trendnet TU-S9 adapter the driver can be downloaded from <a rel="nofollow" class="external text" href="http://www.trendnet.com/downloads/list_subcategory.asp?SUBTYPE_ID=571">http://www.trendnet.com/downloads/list_subcategory.asp?SUBTYPE_ID=571</a>.</li></ul></li>
<li>Once the driver as been installed (if needed) and the adapter has been attached to the virtual machine <b>open a terminal window</b></li>
<li>In the terminal window do <b>ls /dev/tty*</b>
<ul><li>You should see a device listed like /dev/ttyUSB0</li></ul></li>
<li>To verify that minicom can connect to the adapter perform the following steps from the terminal
<ol><li><b>minicom -s</b></li>
<li>Select <b>Serial port setup</b> and press <b>ENTER</b></li>
<li>If the Serial Device is not already <i>/dev/ttyUSB0</i> then <b>press A and type the /dev/ttyUSB0, then press ENTER</b></li>
<li>press <b>ENTER</b> to exit the Serial port setup</li>
<li>Select <b>Exit and press ENTER</b></li></ol>
<dl><dd>If you see a message like <i>minicom: cannot open /dev/ttyUSB0: No such file or directory</i> then your minicom is not properly configured. Make sure you have:
<ul><li>Installed the driver for your adapter</li>
<li>Try another port on your laptop</li></ul></dd></dl></li>
<li>If you have configured your serial adapter correctly you should see output like</li></ol></li></ul>
<pre>Welcome to minicom 2.4 
    OPTIONS: I18n 
Compiled on Jan 25 2010, 06:49:09. 
Port /dev/ttyUSB0 
    Press CTRL-A Z for help on special keys
</pre> 
<h3><span class="mw-headline" id="Key_Points">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=7" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Where to place the script file</li>
<li>Creating a symlink to add the script to the boot process</li></ul>
<h3><span class="mw-headline" id="Lab_Steps">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=8" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Insert the SD card and boot your board using an NFS file system</li>
<li>Login to the root file system using:
<dl><dd><b>user name: root</b></dd>
<dd><b>password: &lt;no password&gt;</b></dd></dl></li>
<li>Change directory to the standard initscript directory <i>/etc/init.d</i>
<dl><dd><b>cd /etc/init.d</b></dd></dl></li>
<li>Open a file for editing called <i>helloworld.sh</i> in the <i>/etc/init.d</i> directory.
<dl><dd><b>vi helloworld.sh</b></dd>
<dd><b>NOTE:</b> In all of these labs if you are not familiar with vi or would like to use a graphical editor like emacs you can also edit these files on the NFS share you have mounted. For example if using the SDK defaults you can edit the files in the <i>&lt;SDK INSTALL DIR&gt;/targetNFS/</i> directory instead.</dd></dl></li>
<li>Add the following lines to the helloworld.sh file
<dl><dd><big><code>#!/bin/sh</code></big></dd><big><code>
<dd></dd>
<dd>echo ""</dd>
<dd>echo "Hello from Sitara!!!"</dd>
<dd>echo ""</dd>
</code></big><dd><big><code></code></big></dd></dl></li>
<li>Give the init script executable permissions so that it can be run
<dl><dd><b>chmod +x helloworld.sh</b></dd></dl></li>
<li>The init script has been created, but it has not been linked into the list of scripts to run on boot. To do so you will need to create a symlink to the script in the proper run level directory. The default run level is 5 so the symlink will be created there.
<dl><dd><b>cd /etc/rc5.d</b></dd>
<dd><b>ln -s ../init.d/helloworld.sh S99helloworld</b></dd></dl></li>
<li>You can now reboot your board using the following command
<dl><dd><b>init 6</b></dd></dl></li>
<li>On the next boot you should see the output from the init script like the following
<dl><dd><a href="File_Sitara-linux-training-init-script-helloworld.html" class="image"><img alt="Sitara-linux-training-init-script-helloworld.png" src="https://processors.wiki.ti.com/images/5/59/Sitara-linux-training-init-script-helloworld.png" width="724" height="309" /></a></dd></dl></li></ol>
<h1><span id="Adding_Start/Stop_command"></span><span class="mw-headline" id="Adding_Start.2FStop_command">Adding Start/Stop command</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=9" title="Edit section: Adding Start/Stop command">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_2">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=10" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This lab will cover adding start and stop routines to the init script and how the start or stop option is passed to the init script. You will learn how to make the init script perform different operations based on the run-level and script name. 
</p>
<h3><span class="mw-headline" id="Prerequisites_2">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=11" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>None</li></ul>
<h3><span class="mw-headline" id="Key_Points_2">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=12" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>The <i>start/stop</i> value is provided as the first parameter to the script</li>
<li>A case statement can be used to handle the different use cases</li>
<li>The value passed to a K (or Kill) script is <i>stop</i> and the value passed to an S (or Start) script is <i>start</i></li></ul>
<p><br /> 
</p>
<h3><span class="mw-headline" id="Lab_Steps_2">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=13" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>With the board booted you will now modify the helloworld.sh script in <i>/etc/init.d</i> to have start and stop routines.
<dl><dd><b>vi /etc/init.d/helloworld.sh</b></dd></dl></li>
<li>Add modify the script to match the following
<dl><dd><big><code>#!/bin/sh</code></big></dd><big><code>
<dd></dd>
<dd>case $1 in
<dl><dd>start )
<dl><dd>echo ""</dd>
<dd>echo "Hello from Sitara!!!"</dd>
<dd>echo ""</dd>
<dd>&#160;;;</dd></dl></dd>
<dd>stop )
<dl><dd>echo ""</dd>
<dd>echo "Goodbye from Sitara&#160;:("</dd>
<dd>echo ""</dd>
<dd>&#160;;;</dd></dl></dd>
<dd>* )
<dl><dd>echo "$0: unknown option passed"</dd>
<dd>&#160;;;</dd></dl></dd></dl></dd>
<dd>esac</dd>
</code></big><dd><big><code></code></big></dd></dl></li>
<li>We already have this script set to execute in run level 5, but now we will add it to the rc6 run level which contains the scripts that will be executed on reboot. In this case we will add the script as a K (or Kill) script.
<dl><dd><b>cd /etc/rc6.d</b></dd>
<dd><b>ln -s ../init.d/helloworld.sh K99helloworld</b></dd></dl></li>
<li>Now reboot your EVM using the <i>init 6</i> command which tells the system to switch to run level 6, which is the reboot run level.
<dl><dd><b>init 6</b></dd></dl></li>
<li>Watching the output as the system reboots you should see output like
<dl><dd><a href="File_Sitara-linux-training-init-script-kill-script.html" class="image"><img alt="Sitara-linux-training-init-script-kill-script.png" src="https://processors.wiki.ti.com/images/1/18/Sitara-linux-training-init-script-kill-script.png" width="724" height="387" /></a></dd></dl></li>
<li>As the system comes up after the reboot you should also see the following output that you saw in the previous lab.
<dl><dd><a href="File_Sitara-linux-training-init-script-helloworld.html" class="image"><img alt="Sitara-linux-training-init-script-helloworld.png" src="https://processors.wiki.ti.com/images/5/59/Sitara-linux-training-init-script-helloworld.png" width="724" height="309" /></a></dd></dl></li></ol>
<h1><span class="mw-headline" id="Changing_the_Order_of_Script_Execution">Changing the Order of Script Execution</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=14" title="Edit section: Changing the Order of Script Execution">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_3">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=15" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h3><span class="mw-headline" id="Prerequisites_3">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=16" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h3><span class="mw-headline" id="Key_Points_3">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=17" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>The number of the script will change its execution position in the boot order.</li>
<li>In the rc6 (and rc0) run levels the value passed to both K and S scripts is <i>start</i> making these a special case</li>
<li>Optimizations in the rc script prevent S scripts with the same name as the S script in another run level from running unless proceeded by a K script</li></ul>
<h3><span class="mw-headline" id="Lab_Steps_3">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=18" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h1><span class="mw-headline" id="Change_run-level_using_Bootargs">Change run-level using Bootargs</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=19" title="Edit section: Change run-level using Bootargs">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_4">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=20" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Now that we have a simple script that prints hello and goodbye messages it might be nice to make sure that the output from these scripts is not lost as the screen scrolls. For example, in the previous lab the "Goodbye from Sitara&#160;:(" was printed and was then followed by additional screen output. In this lab we are going to change the order so that this is one of the last lines printed. 
</p>
<h3><span class="mw-headline" id="Prerequisites_4">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=21" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>None</li></ul>
<h3><span class="mw-headline" id="Key_Points_4">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=22" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>S scripts in the rc6 (and rc0) run levels are still passed the <i>stop</i> option even though they are S (or Start) scripts</li>
<li>The order of scripts as listed by <i>ls</i> is the order of execution. Adding a script later in the order changes when the script is run.</li>
<li>Due to optimizations in the rc script if there is an S script in the previous run level with the same name, and the new run level does not have a K script with that same name, then the S script in the new run level will not be re-run. This is to save time running scripts that have already been run.
<ul><li>This optimization does not take into account special cases like run level 6 where an S script is called with a different parameter than in other run levels.</li></ul></li></ul>
<h3><span class="mw-headline" id="Lab_Steps_4">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=23" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Once the board is booted and you are logged in go to the rc6.d directory and view the order of the init scripts
<dl><dd><b>cd /etc/rc6.d</b></dd>
<dd><b>ls</b></dd>
<dd><a href="File_Sitara-linux-training-init-script-rc6-ls.html" class="image"><img alt="Sitara-linux-training-init-script-rc6-ls.png" src="https://processors.wiki.ti.com/images/f/fc/Sitara-linux-training-init-script-rc6-ls.png" width="725" height="190" /></a></dd></dl></li>
<li>Currently the helloworld K script is the last K script to be run before the S scripts start running. In this lab we want to change that order such that our goodbye message is the last one the user sees (aside from the rebooting message since of course we can't print a message after the reboot occurs). To do this change the <i>K99helloworld</i> script to <i>S89helloworld</i>, which will put it right before the <i>S90reboot</i> script.
<dl><dd><b>mv K99helloworld S89helloworld</b></dd>
<dd><a href="File_Sitara-linux-training-init-script-rc6-ls2.html" class="image"><img alt="Sitara-linux-training-init-script-rc6-ls2.png" src="https://processors.wiki.ti.com/images/0/08/Sitara-linux-training-init-script-rc6-ls2.png" width="720" height="184" /></a></dd></dl></li>
<li>Reboot the system using the <i>init 6</i> command
<dl><dd><b>init 6</b></dd></dl></li>
<li>What happened to the "Goodbye from Sitara&#160;:(" message? This is the result of an rc script optimization. When changing from run level 5, which contains a script S99helloworld, to run level 6, which contains a script called S98helloworld, the rc script does the following
<ol><li>Remove the S## leading characters to get the script name</li>
<li>Check if the previous run level, in this case run level 5, had a script with the same name.</li>
<li>If so then check if the current run level, in this case run level 6, has a K script with the same name.</li>
<li>If not then do not run the S script because it is perceived as a duplicate call to the script</li></ol></li>
<li>Once the board has booted login so that we can modify the script to be run as an S script</li>
<li>There are two options to fix this issue. One is to make a dummy K script, or to change the name of the S script. In this lab we will rename the S script from <i>S89helloworld</i> to <i>S89helloworld2</i>
<dl><dd><b>cd /etc/rc6.d</b></dd>
<dd><b>mv S89helloworld S89helloworld2</b></dd></dl></li>
<li>Reboot the board using the <i>init 6</i> command.
<dl><dd><b>init 6</b></dd></dl></li>
<li>This time you should see the script run right before the reboot command giving output like the following
<dl><dd><a href="File_Sitara-linux-training-init-script-rc6-S-script.html" class="image"><img alt="Sitara-linux-training-init-script-rc6-S-script.png" src="https://processors.wiki.ti.com/images/f/fb/Sitara-linux-training-init-script-rc6-S-script.png" width="724" height="422" /></a></dd></dl></li></ol>
<h1><span class="mw-headline" id="Changing_the_Default_Run_Level">Changing the Default Run Level</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=24" title="Edit section: Changing the Default Run Level">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_5">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=25" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Sometimes you may want to boot your system into a different run level than the default, but you do not want to change the default. For example consider the case where you may have a fast boot system with minimal services started. In order to debug the system you may want to start some additional services or go into a development mode. Having a different run level for this would be useful but something you want to boot all the time. In this lab you will learn how to modify the kernel bootargs to set a run level that will override the default value in <i>/etc/inittab</i> 
</p>
<h3><span class="mw-headline" id="Prerequisites_5">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=26" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Reboot the board and stop at the u-boot prompt</li></ul>
<h3><span class="mw-headline" id="Key_Points_5">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=27" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>To change the run level simply enter the desired run-level into the bootargs</li></ul>
<h3><span class="mw-headline" id="Lab_Steps_5">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=28" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>If you have not already done so reboot the board with the <i>init 6</i> command and when prompted to <i>Hit any key to stop autoboot</i> press the <b>SPACE</b> key. You screen should look like
<dl><dd><a href="File_Sitara-linux-training-init-script-u-boot-prompt.html" class="image"><img alt="Sitara-linux-training-init-script-u-boot-prompt.png" src="https://processors.wiki.ti.com/images/3/31/Sitara-linux-training-init-script-u-boot-prompt.png" width="721" height="361" /></a></dd></dl></li>
<li>In the default u-boot environment it is possible to add new bootargs by setting the <i>optargs</i> variable. In this case we can add the run level we want to switch to in the optargs. For this lab we will switch to run level 3. Since we did not create links in run level 3 for our init script we should expect to not see "Hello from Sitara!!!" printed during boot.
<dl><dd><b>setenv optargs 3</b></dd>
<dd><b>NOTE: The above line adds the number <i>3</i> to the bootargs. Do NOT do a <i>saveenv</i> command at this point.</b></dd></dl></li>
<li>Now boot the board using the <i>boot</i> command
<dl><dd><b>boot</b></dd></dl></li>
<li>In the boot output you will notice the following (You will need to scroll back to see the full output)
<dl><dd>At the beginning of the boot process you can see the bootargs passed to the kernel. Notice how the number <i>3</i> is now part of the bootargs.</dd>
<dd><a href="File_Sitara-linux-training-init-script-bootargs.html" class="image"><img alt="Sitara-linux-training-init-script-bootargs.png" src="https://processors.wiki.ti.com/images/a/a4/Sitara-linux-training-init-script-bootargs.png" width="724" height="432" /></a></dd>
<dd>Later in the boot process when the system transitions from the startup run level to the selected run level you will see that "INIT: Entering runlevel: 3" is printed to the screen</dd>
<dd><a href="File_Sitara-linux-training-init-script-init-level.html" class="image"><img alt="Sitara-linux-training-init-script-init-level.png" src="https://processors.wiki.ti.com/images/b/b4/Sitara-linux-training-init-script-init-level.png" width="724" height="433" /></a></dd>
<dd>Finally you should notice that the "Hello from Sitara!!!" message was no longer printed. This is because the message is only printed by the init script in run level 5.</dd></dl></li>
<li>Since we did not save the optargs that were set, on the next reboot the run level will revert back to 5. If we want to permanently change the run level we can edit the <i>/etc/inittab</i> file and change the line <b>id:5:initdefault:</b> to <b>id:3:initdefault:</b>
<dl><dd><b>vi /etc/inittab</b></dd>
<dd>Change <b>id:5:initdefault:</b> to <b>id:3:initdefault:</b></dd></dl></li>
<li>Reboot the system with <i>init 6</i> command
<dl><dd><b>init 6</b></dd></dl></li>
<li>This time looking at the bootargs you should not see the number 3 listed, but observing the run level that the init process enters should still show you entering run level 3 and you should still not see the "Hello from Sitara!!!" message printed.</li>
<li>Go ahead and put the run level back to 5 in the <b>/etc/inittab</b> file so that the file system is back to it's normal mode of operation.
<dl><dd><b>vi /etc/inittab</b></dd>
<dd>Change <b>id:3:initdefault:</b> to <b>id:5:initdefault:</b></dd></dl></li></ol>
<h1><span class="mw-headline" id="Adding_Login_Actions">Adding Login Actions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=29" title="Edit section: Adding Login Actions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_6">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=30" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>While init scripts can be useful, sometimes it may be more useful to perform some action when the user logs into the system. These may be actions that you do not want to run all the time, but only when interacting with a user. For this you can use the <i>/etc/profile</i> file or add a script to the <i>/etc/profile.d</i> directory. This lab will walk you through both methods. 
</p>
<h3><span class="mw-headline" id="Prerequisites_6">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=31" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>None</li></ul>
<h3><span class="mw-headline" id="Key_Points_6">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=32" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Commands added to the /etc/profile file are executed on login</li>
<li>More complex operations are easiest to put in a shell script and add to the /etc/profile.d directory</li>
<li>Init scripts that consume time and are only useful when a user has logged into the system can be moved to the profile scripts to reduce boot time.</li></ul>
<h3><span class="mw-headline" id="Lab_Steps_6">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=33" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Make sure the EVM is booted and logged in</li>
<li>Open the <i>/etc/profile</i> file for editing and add the following line to the end
<dl><dd><b>echo "You have logged in as "`whoami`</b></dd>
<dd>Note that the "whoami" string is surrounded with the backwards tick mark found to the left of the 1 button on a standard US keyboard along with the ~ character.</dd></dl></li>
<li>The expected result of this command is that when you login you should see the string "You have logged in as root" printed to your screen. To test this <i>exit</i> from your current login and login again as root.
<dl><dd><b>exit</b></dd>
<dd>Login as <b>root</b></dd></dl></li></ol>
<p><br /> 
</p>
<h1><span id="Adding_Login_Actions_to_/etc/profile.d_Scripts"></span><span class="mw-headline" id="Adding_Login_Actions_to_.2Fetc.2Fprofile.d_Scripts">Adding Login Actions to /etc/profile.d Scripts</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=34" title="Edit section: Adding Login Actions to /etc/profile.d Scripts">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h3><span class="mw-headline" id="Description_7">Description</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=35" title="Edit section: Description">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The above example was a simple one for how to add a command to run on login. In this next example we will do something more complex which is to take an existing init script and change it from running at boot time to instead running during login. You have probably noticed the following message during the system boot 
</p>
<pre>***************************************************************                 
***************************************************************                 
NOTICE: This file system contains the followin GPLv3 packages:                  
      binutils-symlinks                                                       
      binutils                                                                
      gdbserver                                                               
                                                                              
If you do not wish to distribute GPLv3 components please remove                 
the above packages prior to distribution.  This can be done using               
the opkg remove command.  i.e.:                                                 
  opkg remove &lt;package&gt;                                                       
Where &lt;package&gt; is the name printed in the list above                           
                                                                               
NOTE: If the package is a dependency of another package you                     
    will be notified of the dependent packages.  You should                   
    use the --force-removal-of-dependent-packages option to                   
    also remove the dependent packages as well                                
***************************************************************                 
***************************************************************  
</pre>
<p>The above message is from the <i>S99gplv3-notice</i> script in the <i>/etc/rc5.d</i> directory. This script takes time to scan the list of installed packages for GPLv3 licenses and write the list to the screen. In this lab we will modify the init scripts so that this action is performed when we login to the system, rather than spending several seconds on boot waiting for the scan to complete. 
</p>
<h3><span class="mw-headline" id="Prerequisites_7">Prerequisites</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=36" title="Edit section: Prerequisites">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>You should be using and Sitara Linux SDK file system since the script referenced in this lab is only part of that file system.</li></ul>
<h3><span class="mw-headline" id="Key_Points_7">Key Points</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=37" title="Edit section: Key Points">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Script file placed in <i>/etc/profile.d</i> are executed by the <i>/etc/profile</i> script</li>
<li>These scripts are executed for each login, including network logins</li></ul>
<h3><span class="mw-headline" id="Lab_Steps_7">Lab Steps</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;section=38" title="Edit section: Lab Steps">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ol><li>Make sure your EVM is booted and logged in</li>
<li>In order to disable the script at boot time we need to remove it from the list of scripts to run for run level 5. Do this with the following command.
<dl><dd><b>rm /etc/rc5.d/S99gplv3-notice</b>
<dl><dd><b>NOTE:</b> It would also be a good idea to remove all references to this script in the different run levels such as rc3.d. This excersize is left to the user.</dd></dl></dd></dl></li>
<li>Now you can move the script from the /etc/init.d directory to the <i>/etc/profile.d</i> directory.
<dl><dd><b>mv /etc/init.d/gplv3-notice /etc/profile.d/gplv3-notice.sh</b>
<dl><dd><b>NOTE:</b> In the above move operation we also renamed the file to end in .sh. This is because the profile script looks for all files in the <i>/etc/profile.d</i> directory ending in .sh to run.</dd>
<dd><b>NOTE:</b> The <i>gplv3-notice</i> script is written without start/stop routines because it performs the same actions no matter what. For an init script with start/stop routines you would need to either
<ul><li>Change the script to default to the start or stop operation you wanted</li>
<li>Write a wrapper script that goes in <i>/etc/profile.d</i> and calls the script in the <i>/etc/init.d</i> directory passing the appropriate start or stop option</li></ul></dd></dl></dd></dl></li>
<li>At this point we should now have the system configured to run the <i>gplv3-notice.sh</i> script on login. We can check that without doing a full reboot by logging out with <i>exit</i> and logging back in as <i>root</i>
<dl><dd><b>exit</b></dd>
<dd><b>root</b></dd></dl></li>
<li>You should see output like the following
<dl><dd><a href="File_Sitara-linux-training-init-script-login-script.html" class="image"><img alt="Sitara-linux-training-init-script-login-script.png" src="https://processors.wiki.ti.com/images/2/25/Sitara-linux-training-init-script-login-script.png" width="724" height="434" /></a></dd></dl></li>
<li>In the above output you see that we now get the GPLv3 content notice at login. You can also see that the other change we added into the <i>/etc/profile</i> script that prints "You have logged in as root" is still executed as well. Now reboot the board so we can verify that the GPLv3 notice script is not run on boot (<b>NOTE:</b> it is still run when the board is shutting down on reboot)
<dl><dd><b>init 6</b></dd></dl></li>
<li>When the board reboots you should notice that the message was not printed. Go ahead and login to the board as <b>root</b> and you should see the message printed.</li>
<li>Lastly, if you have a network connection you can verify that these login changes will happen even when logging in over the network. Obtain your EVMs IP address using the <i>ifconfig</i> command.
<dl><dd><b>ifconfig</b></dd>
<dd>You should see output like the following which will tell you the IP address of your board.</dd>
<dd><a href="File_Sitara-linux-training-init-script-ifconfig.html" class="image"><img alt="Sitara-linux-training-init-script-ifconfig.png" src="https://processors.wiki.ti.com/images/7/7d/Sitara-linux-training-init-script-ifconfig.png" width="724" height="326" /></a></dd></dl></li>
<li>From your Linux host you can login over the network using either SSH or Telnet since both protocols are supported in the SDK file system.
<dl><dd>SSH
<dl><dd><b>ssh root@&lt;ipaddr&gt;</b></dd>
<dd>If prompted select <b>yes</b> to continue connecting. Login with a blank password as usual.</dd></dl></dd>
<dd>Telnet
<dl><dd><b>telnet &lt;ipaddr&gt;</b> and login as root with a blank password as usual.</dd></dl></dd></dl></li>
<li>In both cases above you should have seen the same prints as when you login over the serial console.</li></ol>

<!-- 
NewPP limit report
Cached time: 20201130083224
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.103 seconds
Real time usage: 0.112 seconds
Preprocessor visited node count: 178/1000000
Preprocessor generated node count: 234/1000000
Postexpand include size: 645/2097152 bytes
Template argument size: 273/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postexpand size: 153/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    3.067      1 -total
 45.97%    1.410      1 Template:Sitara_Devices
 44.12%    1.353      2 Template:SpNote
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:17275-0!canonical and timestamp 20201130083224 and revision id 157983
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Sitara Linux Training: Init Scripts</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Sitara Linux Training: Init Scripts</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Sitara Linux Training: Init Scripts</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;oldid=157983">https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;oldid=157983</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_AM437x.html" title="Category:AM437x">AM437x</a></li><li><a href="Category_AM335x.html" title="Category:AM335x">AM335x</a></li><li><a href="Category_AM35x.html" title="Category:AM35x">AM35x</a></li><li><a href="Category_AM37x.html" title="Category:AM37x">AM37x</a></li><li><a href="Category_AM1x.html" title="Category:AM1x">AM1x</a></li><li><a href="Category_AM18x.html" title="Category:AM18x">AM18x</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Sitara+Linux+Training%3A+Init+Scripts" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Sitara_Linux_Training__Init_Scripts.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Sitara_Linux_Training:_Init_Scripts&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Sitara_Linux_Training__Init_Scripts.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Sitara_Linux_Training__Init_Scripts.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Sitara_Linux_Training__Init_Scripts.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;oldid=157983" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Sitara_Linux_Training:_Init_Scripts&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 31 July 2013, at 15:56.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.103","walltime":"0.112","ppvisitednodes":{"value":178,"limit":1000000},"ppgeneratednodes":{"value":234,"limit":1000000},"postexpandincludesize":{"value":645,"limit":2097152},"templateargumentsize":{"value":273,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":153,"limit":5000000},"timingprofile":["100.00%    3.067      1 -total"," 45.97%    1.410      1 Template:Sitara_Devices"," 44.12%    1.353      2 Template:SpNote"]},"cachereport":{"timestamp":"20201130083224","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":231});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Sitara_Linux_Training:_Init_Scripts by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:13:04 GMT -->
</html>
