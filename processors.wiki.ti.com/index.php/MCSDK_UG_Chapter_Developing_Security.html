<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/MCSDK_UG_Chapter_Developing_Security by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:05:18 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>MCSDK UG Chapter Developing Security - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"MCSDK_UG_Chapter_Developing_Security","wgTitle":"MCSDK UG Chapter Developing Security","wgCurRevisionId":195266,"wgRevisionId":195266,"wgArticleId":19660,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Software Development Kits (SDK)"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"MCSDK_UG_Chapter_Developing_Security","wgRelevantArticleId":19660,"wgRequestId":"432056f8b1c4b0ecc589c803","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-MCSDK_UG_Chapter_Developing_Security rootpage-MCSDK_UG_Chapter_Developing_Security skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">MCSDK UG Chapter Developing Security</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><br /><br />
</p>
<hr />
<p><a href="File_TI_Logo_oneline_twocolor.html" class="image"><img alt="TI Logo oneline twocolor.png" src="https://processors.wiki.ti.com/images/d/dc/TI_Logo_oneline_twocolor.png" width="300" height="37" /></a>
</p>
<hr />
<p><br />
</p><p><font size="5"><b><a href="MCSDK_UG_Chapter_Developing.html" title="MCSDK UG Chapter Developing">Developing with MCSDK</a>: Security</b></font>
</p><p><font size="2">Last updated: <b>03/08/2015</b></font>
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Overview"><span class="tocnumber">1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Secure_storage_for_storing_long-term_secrets"><span class="tocnumber">2</span> <span class="toctext">Secure storage for storing long-term secrets</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Overview_2"><span class="tocnumber">2.1</span> <span class="toctext">Overview</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Internal_memory_for_secure_store"><span class="tocnumber">2.2</span> <span class="toctext">Internal memory for secure store</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Secure_store_ubifs_volumes"><span class="tocnumber">2.3</span> <span class="toctext">Secure store ubifs volumes</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Creating_securestore_encryption_key_blob"><span class="tocnumber">2.4</span> <span class="toctext">Creating securestore encryption key blob</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Creating_securestore_filesystem_ubifs_volume_image"><span class="tocnumber">2.5</span> <span class="toctext">Creating securestore filesystem ubifs volume image</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Secure_store_token_initialization"><span class="tocnumber">2.6</span> <span class="toctext">Secure store token initialization</span></a></li>
<li class="toclevel-2 tocsection-9"><a href="#Using_Strongswan_with_secure_storage"><span class="tocnumber">2.7</span> <span class="toctext">Using Strongswan with secure storage</span></a>
<ul>
<li class="toclevel-3 tocsection-10"><a href="#Storing_credentials"><span class="tocnumber">2.7.1</span> <span class="toctext">Storing credentials</span></a></li>
<li class="toclevel-3 tocsection-11"><a href="#PKCS.2311_plugin_configurations"><span class="tocnumber">2.7.2</span> <span class="toctext">PKCS#11 plugin configurations</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#PIN_configurations"><span class="tocnumber">2.7.3</span> <span class="toctext">PIN configurations</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Private_Key_configuration"><span class="tocnumber">2.7.4</span> <span class="toctext">Private Key configuration</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Certificate_configuration"><span class="tocnumber">2.7.5</span> <span class="toctext">Certificate configuration</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#PKCS11_engine_commands_for_OpenSSL"><span class="tocnumber">2.8</span> <span class="toctext">PKCS11 engine commands for OpenSSL</span></a></li>
</ul>
</li>
</ul>
</div>
 
<h1><span class="mw-headline" id="Overview">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=1" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Learn about security features offered in the SDK.
</p>
<h1><span class="mw-headline" id="Secure_storage_for_storing_long-term_secrets">Secure storage for storing long-term secrets</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=2" title="Edit section: Secure storage for storing long-term secrets">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a href="File_Secure_store.html" class="image"><img alt="Secure store.png" src="https://processors.wiki.ti.com/images/d/de/Secure_store.png" width="960" height="720" /></a> 
</p>
<h2><span class="mw-headline" id="Overview_2">Overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=3" title="Edit section: Overview">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Secure store is a software representation of a hardware token, which provides facility to securely store and retrieve longterm device secrets in NAND.
</p><p>This have following features
</p>
<ul><li>The secure store filesystem is encrypted and stored in NAND with a AES128 bit key called <i>securestore encryption key</i></li>
<li>The <i>securestore encryption key</i> is stored in NAND with a separate UBI volume
<ul><li>The <i>securestore encryption key' is stored as a key blob in NAND with a header and checksum to check for integrity</i></li>
<li>In non-secure device the key blob is stored in plain text</li>
<li>In secure device the key is encrypted and signed by boot keys and stored in NAND</li></ul></li>
<li>The encrypted and signed secure store file is stored in NAND on two separate UBI volumes to increase reliability</li>
<li>Secure store services are provided by a daemon process called <i>softhsm-daemon</i></li>
<li>Application access to secure store is through PKCS#11 APIs provided by the secure store library(<i>libsecstore.so</i>)
<ul><li>This library serializes PKCS11 API requests and sends to <i>softhsm-daemon</i>.</li>
<li>The communication between application &amp; daemon is using Unix domain socket IPC.</li>
<li><i>softhsm-daemon</i> processes the PKCS11 requests and provides response to the application</li>
<li>Applications in this context will be <i>strongswan</i>, <i>libp11</i> etc.</li>
<li>OpenSSL applications like <i>TLS client/server</i> &amp; <i>CMPv2 client</i> will be accessing secure store services via the OpenSSL engine interface.</li></ul></li></ul>
<p>Following is the startup sequence wrt. secure store
</p>
<ol><li>U-Boot reads the <i>securestore encryption key</i> blob from NAND UBI volume
<ol><li>In secure device: Authenticated/Decrypted key blob is placed in internal memory</li>
<li>In non-secure device: The key blob is in plain text, and placed in internal memory</li></ol></li>
<li>During Linux kernel boot, the UBIFS secure store volumes are mounted in filesystem using fstab</li>
<li>The Linux init script starts softhsm-daemon</li>
<li>The softhsm-daemon reads/parses softhsm config file from Linux filesystem for the following
<ol><li>location and size of internal memory</li>
<li>location of <i>securestore encryption key</i></li>
<li>securestore file paths</li>
<li>Unix domain socket names to be used for IPC</li></ol></li>
<li>The softhsm-daemon waits on a Unix domain socket, the socket name is provided in the softhsm config file</li></ol>
<h2><span class="mw-headline" id="Internal_memory_for_secure_store">Internal memory for secure store</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=4" title="Edit section: Internal memory for secure store">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Secure store uses internal memory (MSMC SRAM) to keep the working copy of secure file system. 64KBytes of MSMC SRAM starting from address <i>0x0c000000</i> is used by secure store and this memory range must not be used by any other DSP or ARM application. If configured, Secure store can also use internal memory to maintain heap for dynamic memory allocations of crypto library(OpenSSL), in which case it will consume 38KB of memory from the reserved 64KB.
</p>
<h2><span class="mw-headline" id="Secure_store_ubifs_volumes">Secure store ubifs volumes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=5" title="Edit section: Secure store ubifs volumes">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Following UBIFS volumes used for secure store, the volumes names are as follows
<ul><li><i>securedbv0</i>, <i>securedbv1</i>: Two volumes to store encrypted and integrity protected filesystem blob</li>
<li>Securestore encryption key file blob is present in boot volume</li></ul></li>
<li>Sample UBIFS config file is provided in &lt;release_folder&gt;/sc_mcsdk_linux_&lt;version&gt;/images/ubinize.cfg</li></ul>
<h2><span class="mw-headline" id="Creating_securestore_encryption_key_blob">Creating securestore encryption key blob</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=6" title="Edit section: Creating securestore encryption key blob">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>A raw text or binary key file can be converted to the format required by secure store using <i>securestore-formatkey.py</i> script provided in &lt;release_folder&gt;/sc_mcsdk_linux_&lt;version&gt;/bin file. Note that the key has to be a 128bit AES key.
</p><p><code lang="bash">
&lt;release_folder&gt;/sc_mcsdk_linux_&lt;version&gt;/bin/securestore-formatkey.py --input ./aeskey.txt --output securedb.key.bin
</code>
</p>
<ul><li>Note: The u-boot will use "securedb.key.bin" file name to access load the key from volume "boot"</li>
<li>Please see the script help <i>&lt;release_folder&gt;/sc_mcsdk_linux_&lt;version&gt;/bin/securestore-formatkey.py --help</i> for other usage details</li>
<li>In case of secure board, this file has to be processed further, please see MCSDK-SECDEV user guide for further details</li></ul>
<h2><span class="mw-headline" id="Creating_securestore_filesystem_ubifs_volume_image">Creating securestore filesystem ubifs volume image</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=7" title="Edit section: Creating securestore filesystem ubifs volume image">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The default UBI volumes (securedbv[0-1].ubifs.img) are provided in the release package.
The following sequence of commands will create securestore filesystem image ubifs partition
<code lang="bash">
export PATH=&lt;release_folder&gt;/sc_mcsdk_linux_&lt;version&gt;/bin:$PATH
</code></p><p><code lang="bash">rm -rf ./securedbv0 ./securedbv1
mkdir  ./securedbv0
mv &lt;path to filesystem blob&gt; ./securedbv0/securedb
mkfs.ubifs -r ./securedbv0 -F -o securedbv0.ubifs.img -m 2048 -e 126976 -c 22
</code></p><p><code lang="bash">mv ./securedbv0 ./securedbv1
mkfs.ubifs -r ./securedbv1 -F -o securedbv1.ubifs.img -m 2048 -e 126976 -c 22
</code>
</p>
<h2><span class="mw-headline" id="Secure_store_token_initialization">Secure store token initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=8" title="Edit section: Secure store token initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>An empty, encrypted &amp; initialized token is present in the default filesystem.
In case it is needed to re-initialize the token, it can be done on the target using <i>softhsm-util</i> command.
The default PINs are <i>1234</i>. NOTE: Secure store has a restriction that the SO PIN &amp; User PIN be set the same.
<code lang="bash">
softhsm-util  --init-token --slot 0 --label token-0 --module /usr/lib/softhsm/libsecstore.so.1
</code></p><p><code lang="bash">softhsm-util --show-slots --module /usr/lib/softhsm/libsecstore.so.1
</code>
For more information see help for the tool <i>softhsm-util --help</i>
NOTE: A reboot of the system is needed after initializing the token.
</p>
<h2><span class="mw-headline" id="Using_Strongswan_with_secure_storage">Using Strongswan with secure storage</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=9" title="Edit section: Using Strongswan with secure storage">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Storing_credentials">Storing credentials</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=10" title="Edit section: Storing credentials">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>RSA Key pair
<ul><li>RSA key pair to be used by Strongswan during IKE negotiation has to be generated and stored on the secure store.</li>
<li>Key generation/storage can be done through OpenSSL command line or via engine API programmatically.</li></ul></li>
<li>X.509 Certificate
<ul><li>End entity certificate is issued by a certification authority, and needs to be brought into the secure store</li>
<li>In a production system this would be done by CMPv2 client.</li>
<li>For lab setup
<ul><li>Certificate issuance can be done using command line tools provided by Strongswan or OpenSSL.</li>
<li>This process will require access to the RSA public key of the end entity. Secure store solution provides an OpenSSL engine command to retrieve the Public key from store.</li>
<li>The issued certificate can then be written to secure store using OpenSSL engine commands.</li></ul></li></ul></li>
<li>CA certificate also needs to be in the secure store and can be written using OpenSSL Engine commands.</li></ul>
<h3><span id="PKCS#11_plugin_configurations"></span><span class="mw-headline" id="PKCS.2311_plugin_configurations">PKCS#11 plugin configurations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=11" title="Edit section: PKCS#11 plugin configurations">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>To use the strongswan pkcs#11 plugin, PKCS#11 module has to be configured in <i>/etc/strongswan.conf</i>.
</p><p>Configuration Keys specific to pkcs#11 plugin are explained in the <a rel="nofollow" class="external text" href="http://wiki.strongswan.org/projects/strongswan/wiki/PKCS11Plugin">PKCS11Plugin wiki</a>.
</p><p>Default configuration provided will be:
<code lang="bash">
libstrongswan {
plugins {
</code></p><code lang="bash"><pre>   pkcs11 {
     modules {
       secstore {
         path = /usr/lib/softhsm/libsecstore.so.1
       }
     }
   }
 }
</pre></code><code lang="bash"></code><p><code lang="bash">}
</code>
</p>
<h3><span class="mw-headline" id="PIN_configurations">PIN configurations</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=12" title="Edit section: PIN configurations">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Soft token will have a static PIN. Following wiki explains the format for configuring a static PIN in the file <i>/etc/ipsec.secrets</i> <a rel="nofollow" class="external text" href="http://wiki.strongswan.org/projects/strongswan/wiki/PinSecret">PIN Secret</a>.
</p>
<h3><span class="mw-headline" id="Private_Key_configuration">Private Key configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=13" title="Edit section: Private Key configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The RSA private key  to be used from the smartcard is specified as part of the PIN configuration with the format: <i>%smartcard[&lt;slotnr&gt;[@&lt;module&gt;]]:&lt;keyid&gt;</i>
e.g.
</p>
<pre>: PIN&#160;%smartcard0@secstore:04 1234
</pre>
<h3><span class="mw-headline" id="Certificate_configuration">Certificate configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=14" title="Edit section: Certificate configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Certificates stored on smart cards will get loaded automatically when the IKEv2 daemon is started. You don't have to specify <i>leftcert=%smartcard</i> in ipsec.conf (it actually will fail if you do so). Instead the first certificate matching the “leftid” parameter is used. 
</p><p>CA certificates are also automatically available as trust anchors without the need to copy them into the <i>/etc/ipsec.d/cacerts/</i> directory.
</p><p><code lang="text">
conn alice
</code></p><code lang="text"><pre>     left=158.218.103.42
     leftprotoport=udp/5000
     #leftcert=bobCert.der
     leftid="C=US, O=TestInc, CN=bob"
     right=158.218.103.108
     rightid="C=US, O=TestInc, CN=alice"
     rightprotoport=udp/5000
     keyexchange=ikev2
     type=tunnel
</pre></code><code lang="text"></code><p><code lang="text">	lifetime=24h
	auto=start
</code>
</p>
<h2><span class="mw-headline" id="PKCS11_engine_commands_for_OpenSSL">PKCS11 engine commands for OpenSSL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;section=15" title="Edit section: PKCS11 engine commands for OpenSSL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Following commands are provided by the OpenSSL engine (engine_pkcs11) to interface with secure storage
</p>
<ul><li>SO_PATH: Specifies the path to the 'pkcs11-engine' shared library</li>
<li>MODULE_PATH: Specifies the path to the pkcs11 module shared library</li>
<li>PIN: Specifies the pin code</li>
<li>VERBOSE: Print additional details</li>
<li>QUIET: Remove additional details</li>
<li>INIT_ARGS: Specifies initialization arguments to the pkcs11 module</li>
<li>LIST_OBJS: List the objects from token</li>
<li>STORE_CERT: Store X.509 certificate to token (DER format)</li>
<li>GEN_KEY: Generate &amp; store RSA key pair to token</li>
<li>DEL_OBJ: Delete objects from token</li>
<li>GET_PUBKEY: Get Public Key from token (PEM format)</li></ul>
<p>Following is the listing of these commands
</p>
<ul><li>Command to load the engine dynamically and set the PIN</li></ul>
<dl><dd><dl><dd><i>engine -vvvv dynamic -pre SO_PATH:/usr/lib/engines/engine_pkcs11.so -pre ID:pkcs11 -pre LIST_ADD:1 -pre LOAD -pre MODULE_PATH:/usr/lib/softhsm/libsecstore.so.1 -pre "VERBOSE" -pre "PIN:1234"</i></dd></dl></dd></dl>
<ul><li>Command to enable verbose</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "VERBOSE"</i></dd></dl></dd></dl>
<ul><li>Command to set the PIN</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "PIN:1234"</i></dd></dl></dd></dl>
<ul><li>Command to list the objects on slot 0</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "LIST_OBJS:0"</i></dd></dl></dd></dl>
<ul><li>Command to store certificate to token</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "STORE_CERT:slot_&lt;slot&gt;:id_&lt;id&gt;:label_&lt;label&gt;:cert_&lt;filename&gt;"</i></dd>
<dd>e.g.</dd>
<dd><i>engine pkcs11 -pre "STORE_CERT:slot_0:id_03:label_tcert:cert_caCert.der"</i></dd></dl></dd></dl>
<ul><li>Command to generate a RSA key pair</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "GEN_KEY:slot_&lt;slot&gt;:size_&lt;size&gt;:id_&lt;id&gt;:label_&lt;label&gt;"</i></dd>
<dd>where &lt;size&gt; is the RSA key size in bits</dd>
<dd>e.g.</dd>
<dd><i>engine pkcs11 -pre "GEN_KEY:slot_0:size_2048:id_04:label_tkey"</i></dd></dl></dd></dl>
<ul><li>Command to get the Public key from token</li></ul>
<dl><dd><dl><dd><i>engine pkcsc11 -pre "GET_PUBKEY:slot_&lt;slot&gt;:id_&lt;id&gt;:label_&lt;label&gt;:key_&lt;filename&gt;"</i></dd>
<dd>e.g.</dd>
<dd><i>engine pkcs11 -pre "GET_PUBKEY:slot_0:id_04:label_tkey:key_tkey.pem"</i></dd></dl></dd></dl>
<ul><li>Command to delete an object from the token</li></ul>
<dl><dd><dl><dd><i>engine pkcs11 -pre "DEL_OBJ:slot_&lt;slot&gt;:type_&lt;type&gt;:id_&lt;id&gt;:label_&lt;label&gt;"</i></dd>
<dd>where &lt;type&gt; is the object type (privkey/pubkey/cert)</dd>
<dd>e.g. to delete certificate</dd>
<dd><i>engine pkcs11 -pre "DEL_OBJ:slot_0:type_cert:id_03:label_tcert"</i></dd>
<dd>e.g. to delete a public key</dd>
<dd><i>engine pkcs11 -pre "DEL_OBJ:slot_0:type_pubkey:id_04:label_tkey"</i></dd>
<dd>e.g. to delete a private key</dd>
<dd><i>engine pkcs11 -pre "DEL_OBJ:slot_0:type_privkey:id_04:label_tkey"</i></dd></dl></dd></dl>
<p><br />
</p>
<!-- 
NewPP limit report
Cached time: 20201130215359
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.059 seconds
Real time usage: 0.061 seconds
Preprocessor visited node count: 76/1000000
Preprocessor generated node count: 104/1000000
Post‐expand include size: 8/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:19660-0!canonical and timestamp 20201130215359 and revision id 195266
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MCSDK UG Chapter Developing Security</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>MCSDK UG Chapter Developing Security</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>MCSDK UG Chapter Developing Security</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;oldid=195266">https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;oldid=195266</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Software_Development_Kits_(SDK).html" title="Category:Software Development Kits (SDK)">Software Development Kits (SDK)</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=MCSDK+UG+Chapter+Developing+Security" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="MCSDK_UG_Chapter_Developing_Security.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:MCSDK_UG_Chapter_Developing_Security&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="MCSDK_UG_Chapter_Developing_Security.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/MCSDK_UG_Chapter_Developing_Security.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/MCSDK_UG_Chapter_Developing_Security.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;oldid=195266" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=MCSDK_UG_Chapter_Developing_Security&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 8 March 2015, at 19:46.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.059","walltime":"0.061","ppvisitednodes":{"value":76,"limit":1000000},"ppgeneratednodes":{"value":104,"limit":1000000},"postexpandincludesize":{"value":8,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130215359","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":237});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/MCSDK_UG_Chapter_Developing_Security by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:05:22 GMT -->
</html>
