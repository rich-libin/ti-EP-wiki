<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/TI811X_PCI_Express_Root_Complex_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 13:05:03 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>TI811X PSP PCI Express Root Complex Driver User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide","wgTitle":"TI811X PSP PCI Express Root Complex Driver User Guide","wgCurRevisionId":119535,"wgRevisionId":119535,"wgArticleId":17528,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["TI811X"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide","wgRelevantArticleId":17528,"wgRequestId":"94d2b6d934566426b3802dc6","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgRedirectedFrom":"TI811X_PCI_Express_Root_Complex_Driver_User_Guide","wgInternalRedirectTargetUrl":"/index.php/TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide"});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["mediawiki.action.view.redirect","site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<link rel="canonical" href="TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide.html"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide rootpage-TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">TI811X PSP PCI Express Root Complex Driver User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"><span class="mw-redirectedfrom">(Redirected from <a href="https://processors.wiki.ti.com/index.php?title=TI811X_PCI_Express_Root_Complex_Driver_User_Guide&amp;redirect=no" class="mw-redirect" title="TI811X PCI Express Root Complex Driver User Guide">TI811X PCI Express Root Complex Driver User Guide</a>)</span></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output">																							<div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">TI811X PCI Express Root Complex Driver User Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Linux PSP</div> 
<p><br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Scope"><span class="tocnumber">2</span> <span class="toctext"><b>Scope</b></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Background"><span class="tocnumber">3</span> <span class="toctext"><b>Background</b></span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Terminology_and_Conventions"><span class="tocnumber">4</span> <span class="toctext"><b>Terminology and Conventions</b></span></a></li>
<li class="toclevel-1 tocsection-5"><a href="#Topology"><span class="tocnumber">5</span> <span class="toctext"><b>Topology</b></span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Features"><span class="tocnumber">6</span> <span class="toctext"><b>Features</b></span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Linux_PCI_Subsystem"><span class="tocnumber">7</span> <span class="toctext"><b> Linux PCI Subsystem</b></span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#RC_Driver_Source_Files"><span class="tocnumber">8</span> <span class="toctext">RC Driver Source Files</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Kernel_Configuration"><span class="tocnumber">9</span> <span class="toctext"><b> Kernel Configuration </b></span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#System_Resources"><span class="tocnumber">10</span> <span class="toctext"><b> System Resources</b></span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Using_PCIe_Endpoint"><span class="tocnumber">11</span> <span class="toctext"><b>Using PCIe Endpoint</b></span></a>
<ul>
<li class="toclevel-2 tocsection-12"><a href="#Ensuring_PCIe_System_Initialization"><span class="tocnumber">11.1</span> <span class="toctext"><b>Ensuring PCIe System Initialization</b></span></a></li>
<li class="toclevel-2 tocsection-13"><a href="#Selecting_the_EP_Driver"><span class="tocnumber">11.2</span> <span class="toctext"><b>Selecting the EP Driver</b></span></a></li>
<li class="toclevel-2 tocsection-14"><a href="#Loading_the_EP_Driver"><span class="tocnumber">11.3</span> <span class="toctext"><b>Loading the EP Driver</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-15"><a href="#Troubleshooting"><span class="tocnumber">12</span> <span class="toctext"><b>Troubleshooting</b></span></a>
<ul>
<li class="toclevel-2 tocsection-16"><a href="#Endpoint_device_not_detected"><span class="tocnumber">12.1</span> <span class="toctext">Endpoint device not detected</span></a>
<ul>
<li class="toclevel-3 tocsection-17"><a href="#Troubleshoot_100MHz_reference_clock"><span class="tocnumber">12.1.1</span> <span class="toctext">Troubleshoot 100MHz reference clock</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#Reset.2FPower_on_sequence"><span class="tocnumber">12.1.2</span> <span class="toctext">Reset/Power on sequence</span></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>This document is applicable to TI811X device.</b>
</p>
</div>
<p>TI811X device has PCI Express hardware module which can either be configured to act as a Root Complex or a PCIe Endpoint. This document caters to the Root Complex mode of operation and describes the Driver needed to configure and operate on TI811X PCI Express device as Root Complex.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 0, 0);">
<p><b>NOTE1: Support for TI811X Root Complex is added from 04.07.00.02 release, hence this document is not applicable for prior TI811X releases.</b>
</p>
</div>
<h1><span class="mw-headline" id="Scope"><b>Scope</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=2" title="Edit section: Scope">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This document covers following areas:
</p>
<ul><li>Brief background</li>
<li>Terminologies and conventions used</li>
<li>Topology</li>
<li>Features</li>
<li>Linux PCI Subsystem</li>
<li>Kernel Configuration to include RC Driver</li>
<li>System Resources used on TI811X Linux kernel</li>
<li>Setup and configurations for using PCI Express Endpoints (with example)</li></ul>
<h1><span class="mw-headline" id="Background"><b>Background</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=3" title="Edit section: Background">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>PCI Express (PCIe) is Third Generation I/O Interconnect, targeting low pin-count. It shares the concepts with earlier PCI and PCI-X and offers backwards compatibility for existing PCI software with following differences:
</p>
<ul><li>PCIe is a point-to-point interconnect</li>
<li>Serial link between devices</li>
<li>Packet based communication</li>
<li>Need PCIe switch to have connection between more than two PCIe devices</li></ul>
<h1><span class="mw-headline" id="Terminology_and_Conventions"><b>Terminology and Conventions</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=4" title="Edit section: Terminology and Conventions">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Following terminologies and conventions are used in this document:
</p><p><b>PCIe Fabric</b>
<br />A topology comprised of various PCI Express nodes, also referred as devices. A device in the fabric can be either Root Complex, Endpoint, PCIe-PCI/PCI-X Bridge or a Switch.
</p><p><b>Host</b>
<br />The entity comprising of one (or more) Central Processing Unit(s) (CPU) and resources, such as Memory (RAM) that can be shared across multiple PCIe nodes connected through a Root Complex.
</p><p><b>Root Complex (RC)</b>
<br />Root of the PCIe topology. Used to connect Host to the PCIe I/O system. In this document, we consider Root Complex module to be integrated with Host so as to form a single entity and refer as "PCI Express Root Complex" device. Contains TYPE 1 configuration header. Has capability to generate TYPE 0 configuration transactions to configure devices and TYPE 1 configuration transactions for configuring bridges.
</p><p><b>Endpoint</b>
<br />A PCI Express device/function with Type0 configuration header which either generates or terminates a PCIe transaction. This excludes PCIe-PCI bridges. Also referred as PCI Target
</p><p><b>Switch</b>
<br />A PCI Express device with single upstream port and multiple downstream ports each of which can in turn have a PCIe Endpoint, Switch or PCIe-PCI/PCI-X bridge connected.
</p><p><b>PCIe-PCI/PCI-X Bridge</b>
<br />Device with single upstream port interfacing a PCI Bus Segment to the PCIe topology.
</p><p><b>Lane</b>
<br />A pair of Tx and Rx lines between two directly connected PCIe nodes.
</p><p><b>Link</b>
<br />Interconnect between two point-to-point nodes. This can be a collection of multiple lanes. Each link can have 1, 2, 4, 8, 16 or 32 lanes, denoted as x1, x2 and so on.
</p><p><b>Port</b>
<br />Represents a PCI Express link and consists of PCIe protocol layer implementation. Each PCIe node should have at least one PCI Express Port.
</p><p><b>Root Port</b>
<br />A root complex port is called Root Port. A complete PCI Express hierarchy is spawned from a root port. An RC can have more than one root ports having distinct hierarchy domain each.
</p><p><b>Downstream</b>
<br />Any element of the fabric which is relatively farther away from RC is treated as 'Downstream'. All PCIe Switch ports which are away from RC (providing connection to nodes far away from RC) are called Downstream Ports. Also RC ports are Downstream Ports. A Downstream Flow is the communication moving away from the RC.
</p><p><b>Upstream</b>
<br />Any element of the fabric which is relatively closer towards RC is treated as 'Upstream'. All PCIe Endpoint ports (including termination points for bridges) and Switch ports, which are closer to RC are called Upstream Ports on that device. A Upstream Flow is the communication moving towards RC.
</p><p><b>PCI Enumeration Mapping</b>
<br />Since PCI Express is point to point topology, to maintain compatibility with legacy PCI Bus - Device notion used for Software Enumeration, we introduce following concepts which allow identifying various nodes and their internals (e.g., PCIe Switches) in terms of PCI devices/functions:
</p>
<ul><li>Host Bridge: A bridge, integrated into RC to have PCI compatible connection to Host. The PCI side of this bridge is Bus #0 always. This means, the device on this bus will be the host itself.</li>
<li>Virtual PCI-PCI Bridge: Each PCI Express port which is part of RC or a Switch is treated as a virtual PCI-PCI bridge. This means each port has a primary and secondary PCI bus and the downstream is mapped into the remote configuration space.
<ul><li>Root port associated virtual bridge has Bus #0 on the primary side with secondary bus on the downstream.</li>
<li>Each PCIe Switch is viewed as collection of as many virtual PCI-PCI bridges as number of downstream ports, connected to a virtual PCI bus which is actually secondary bus of another PCI-PCI bridge forming the upstream port of the switch.</li>
<li>The upstream port of each EP can either be part of the secondary bus segment of virtual PCI-PCI bridge representing downstream port of a switch or of the root port.</li></ul></li></ul>
<h1><span class="mw-headline" id="Topology"><b>Topology</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=5" title="Edit section: Topology">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section shows a typical PCI Express fabric. To set up tone of rest of the document, we also consider an example scenario involving TI811X PCI Express Root Complex. Please note that the figures shown below rely on complete understanding of the terminologies and conventions described in earlier section.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note:</b> The TI811X PCIe module has a x1 link. 
</p>
</div>
<p><a href="File_PCIe_Topology.html" class="image"><img alt="PCIe Topology.png" src="https://processors.wiki.ti.com/images/7/74/PCIe_Topology.png" width="718" height="643" /></a>
</p><p>For the rest of this document, we will consider following PCIe System with TI811X as PCIe Root.
</p><p><a href="File_PCIe_Topology_DM81XX_RC.html" class="image"><img alt="PCIe Topology DM81XX RC.png" src="https://processors.wiki.ti.com/images/9/92/PCIe_Topology_DM81XX_RC.png" width="718" height="378" /></a>
</p>
<h1><span class="mw-headline" id="Features"><b>Features</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=6" title="Edit section: Features">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Listed below are the various features supported by TI811X as a PCI Express Root Complex. 
</p>
<ul><li>Express Base Specification Revision 2.0 compliant</li>
<li>TI811X: Gen1 and Gen2 operation with x1 link supporting 5 GT/s raw transfer rate in single direction</li>
<li>Maximum outbound payload size of 128 bytes</li>
<li>Maximum inbound payload size of 256 bytes</li>
<li>Maximum remote read request size of 256 bytes</li>
<li>Support for receiving MSI and Legacy Interrupts (INTx)</li>
<li>Configurable BAR filtering, I/O filtering, configuration filtering and Completion lookup/timeout</li>
<li>PCI Express Link Power Management states except L2 state</li></ul>
<p>The PCIe Root Complex Driver facilitates following: 
</p>
<ul><li>Fits into Linux PCI Bus framework to provide PCI compatible software enumeration support</li>
<li>In addition, provides interface to Endpoint Drivers to access the respective devices detected downstream.</li>
<li>The same interface can be used by the PCI Express Port Bus Driver framework in Linux to perform AER, ASP etc handling</li>
<li>Interrupt handling facility for EP drivers either as MSI or Legacy Interrupts (INTx).</li>
<li>Access to EP I/O BARs through generic I/O accessors in Linux.</li>
<li>Seamless handling of PCIe errors</li></ul>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>Note-1:</b> Out of the above, I/O access, Port Bus Driver integration are currently untested/incomplete.<br />
<b>Note-2:</b> Since TI811X is a 32-bit host architecture, 64-bit PCIe addresses may not be directly supported and requires customization to fit into Linux framework, hence not supported currently.<br />
<b>Note-3:</b> TI811X PCIe hardware does not support hot plug and if an EP directly connected to the TI811X RC goes down (e.g., powered down or disabled), the complete PCIe h/w initialization needs to be repeated and PCI enumeration re-triggered. This is NOT SUPPORTED by the RC driver and will require code modification to handle such cases.<br />
<b>Note-4: PCIe Power Management features such as device power states and PME handling are currently not supported. Also, ASPM is disabled by default.</b>
</p>
</div>
<h1><span class="mw-headline" id="Linux_PCI_Subsystem"><b> Linux PCI Subsystem</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=7" title="Edit section: Linux PCI Subsystem">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>In Linux, the PCI implementation can roughly be divided into following main components:<br />
<b>PCI BIOS</b><br />
</p>
<ul><li>Architecture specific Linux implementation to kick off PCI bus initialization. It interfaces with PCI Host Controller code as well as the PCI Core to perform bus enumeration and allocation of resources such as memory, interrupts.</li>
<li>The successful completion of BIOS execution assures that all the PCI devices in system are assigned parts of available PCI resources and their respective drivers (referred as Slave Drivers) can take control of them using the facilities provided by PCI Core.</li>
<li>Optionally skips resource allocation (if they were assigned before Linux was booted, for example PC scenario).</li></ul>
<p><b>Host Controller (RC) Module</b><br />
</p>
<ul><li>Handles hardware (SoC + Board) specific initialization and configuration</li>
<li>Invokes PCI BIOS.</li>
<li>Should provide callback functions for BIOS as well as PCI Core, which will be called during PCI system initialization and accessing PCI bus for configuration cycles.</li>
<li>Provide resources information for available memory/IO space, INTx interrupt lines, MSI.</li>
<li>Should facilitate IO space access (as supported) through in _x_ () out _x_ ()</li>
<li>May need to provide indirect memory access (if supported by h/w) through read _x_ () write _x_ ()</li></ul>
<p><b>Core</b><br />
</p>
<ul><li>Creates and initializes the data structure tree for Bus, Devices as well as Bridges in the system. Handles Bus/Device numberings.</li>
<li>Creates device entries and proc/sysfs information</li>
<li>Provides services for BIOS and Slave Drivers</li>
<li>Hot plug support (optional/as supported by h/w).</li></ul>
<p><b>Target (EP) Driver Interface</b><br />
</p>
<ul><li>Query and initialize corresponding devices found during enumeration.</li>
<li>Provide MSI interrupt handling framework</li></ul>
<p><b>PCI Express Port Bus Support</b><br />
</p>
<ul><li>Provides Hot-Plug support (if supported)</li>
<li>Advanced Error Reporting support</li>
<li>Power Management Event support</li>
<li>Virtual Channel support to run on PCI Express Ports (if supported)</li></ul>
<h1><span class="mw-headline" id="RC_Driver_Source_Files">RC Driver Source Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=8" title="Edit section: RC Driver Source Files">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The driver files are present at following path relative to extracted kernel source directory for TI811X.
</p>
<pre>   arch/arm/mach-omap2/pcie-ti81xx.c (RC driver source)
   arch/arm/mach-omap2/pcie-ti81xx.h (RC driver private header file)
   arch/arm/mach-omap2/include/mach/pci.h (Exported macros for PCI subsystem)
</pre>
<h1><span class="mw-headline" id="Kernel_Configuration"><b> Kernel Configuration </b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=9" title="Edit section: Kernel Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The TI811X EVM kernel configurations enable Root Complex support by default. To set default configuration, execute following command from TI811X kernel source directory on Linux Build Host (you may need to set CROSS_COMPILE with the tool chain/path as appropriate):
</p>
<ul><li>For TI811X</li></ul>
<pre>  $ make CROSS_COMPILE=arm-none-linux-gnueabi- ARCH=arm ti811x_evm_defconfig
</pre>
<p>Further, you can view/modify the support by entering into interactive configuration as:
</p>
<pre>  $ make CROSS_COMPILE=arm-none-linux-gnueabi- ARCH=arm menuconfig
</pre>
From on screen menu, navigate by pressing ENTER or SPACE key on entries marked with '---&gt;' and selecting appropriate configurations marked with '[*]' by pressing Y key as shown below. Note that a '*' inside the box '[ ]' indicates the corresponding option is enabled and pressing SPACE key again will disable corresponding option (empty box).<pre>    General setup  ---&gt;
[*] Enable loadable module support  ---&gt;
-*- Enable the block layer  ---&gt;
    System Type  ---&gt; 
    '''Bus support  ---&gt;'''
   ...
   ...</pre>
<p>After entering inside "Bus Support":
</p>
<pre>'''[*] PCI support'''
'''[*] Message Signaled Interrupts (MSI and MSI-X)'''
[ ] PCI Debugging
&lt; &gt; PCI Stub driver
[ ] PCI IOV support
...</pre>
<p><b>Note 1:</b> PCIe bus support cannot be built as module.<br />
<b>Note 2:</b> You can disable MSI support by pressing 'N' for "Message Signaled Interrupts (MSI and MSI-X)" option above (default configuration has MSI support enabled).
</p><p><i>In case you are facing any issues</i> with PCI/e system initialization/configuration, enable debugging:
</p>
<pre>[*] PCI support
[*] Message Signaled Interrupts (MSI and MSI-X)
'''[*] PCI Debugging'''
&lt; &gt; PCI Stub driver
[ ] PCI IOV support
...</pre>
<p><b>Note:</b> Make sure to append "debug" to the bootargs to see the verbose messages during boot (you may also want to turn on low level debugging and append "earlyprintk" to kernel boot arguments).
</p>
<h1><span class="mw-headline" id="System_Resources"><b> System Resources</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=10" title="Edit section: System Resources">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The RC Driver reserves following resources:<br />
<b>Outbound Memory</b><br />
This memory window (address space) is used for memory transactions over PCIe initiated from the Root Complex.
</p>
<ul><li>0x20000000-0x2FFFFFFF: Assigned as 256MB Non-Prefetch memory</li>
<li>Note that the address and size of the above window is fixed since it corresponds to PCIe slave port on the h/w</li></ul>
<p><b>I/O Window</b><br />
Since ARM architecture does not have I/O bus for I/O access, we reserve a memory window to perform PCIe I/O to EPs supporting I/O.
</p>
<ul><li>0x40000000-0x402FFFFF: Used as 3MB I/O window</li>
<li>Note that the selection of the I/O space is done such that it does not conflict with the normal memory mapped space to allow software to distinguish between PCIe I/O and normal memory mapped access.</li></ul>
<p><b>Inbound Memory</b><br />
This memory is used to map TI811X RAM so as to enable external masters (EP) to have access.
</p>
<ul><li>Generally this should be the complete RAM available to kernel. Currently whole 512MB DDR space starting from 0x80000000 is provided for inbound memory access.</li></ul>
<p>You can change this by updating ti81xx_pcie_resources data in arch/arm/mach-omap2/devices.c for "pcie-inbound0" resource:
</p>
<pre>        {
               /* Inbound memory window */
               .name           = "pcie-inbound0",
               .start          = PHYS_OFFSET,
               .end            = PHYS_OFFSET + <b>SZ_2G</b> - 1,
               .flags          = IORESOURCE_MEM,
       },
</pre>
<p>E.g., to enable access to 512MB memory, replace SZ_2G with SZ_512M above.
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(21, 27, 84);">
<p><b>CAUTION:</b> When changing inbound window/size, ensure that it covers valid RAM range as seen by the kernel else the EP devices may not be able to do DMA. 
</p>
</div>
<p><b>Interrupt Lines</b><br />
TI811X uses interrupt line 48 for legacy interrupts and 49 for MSI interrupts. Interrupt multiplexing is handled by Root Complex Driver with Linux PCI Framework to allow multiple EPs sharing same interrupt lines.
</p>
<h1><span class="mw-headline" id="Using_PCIe_Endpoint"><b>Using PCIe Endpoint</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=11" title="Edit section: Using PCIe Endpoint">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section describes setup and configuration for using PCIe Endpoint in the PCI system. We will consider an example with Broadcom NetXtreme BCM5751 based Gigabit Ethernet Controller card as a PCIe Endpoint. 
</p><p>Note that, though we consider a single EP, most of the description covered below is applicable to any system involving TI811X with PCIe Switch and/or PCIe-PCI bridge devices having multiple PCIe Endpoints and/or PCI Target Devices. 
</p>
<div style="padding: 5px; background: none repeat scroll 0% 0% rgb(238, 238, 238); color: rgb(255, 0, 0);">
<p><b>IMPORTANT NOTE:</b> Since TI811X RC supports maximum remote read request size (MRRQS) as 256 bytes, ensure that the EP driver/device you are using doesn't set read request size more than this value. If it does, then modify the driver to set read request size to 256 bytes before building it. Ensuring Maximum Read Request size within 256 Byte limit is required even for any intermediate Switch/Bridge devices in the fabric.
</p>
</div> 
<ul><li><b>TIP 1:</b> You can search for <tt>pcie_set_readrq</tt> calls inside driver file(s) and ensure that the second argument doesn't exceed 256. In case of setting for Switch/Bridge devices, there may not be any driver running on the RC for the same, so you will need to use PCI Config Write to Device Control Register (offset 0x78) of the respective devices to limit MRRQS. This can be done as part of a 'quirk' to call pcie_set_readrq() on PCI VENDOR and DEVICE ID match for that particular bridge/switch device added in file drivers/pci/quirks.c</li></ul>
<ul><li><b>TIP 2:</b> In case you don't have a driver for the EP device or do not desire to edit code, you can use the 'setpci' utility from the pciutils package (assuming it is installed on your filesystem) to change the MRRQS value on the respective EP device(s) as below.</li></ul>
<p>If the PCI Express Capabilities structure on the EP device @01:00.0 is at offset 0x70, use the command as below to set the MRRQS field in Device Control register (bits 14:12 at offset 0x8 from PCIe Capabilities structure):
</p>
<pre># setpci -v -s 01:00.0 78.W=0x1000:0x7000
0000:01:00.0 @78 3810-&gt;(1000:7000)-&gt;1810
</pre>
<p>In addition, ensure the following:
</p>
<ol><li>Since PCI I/O is not supported currently, you will need to ensure the use of memory mapped I/O for data transfer between RC and EP. Since PCI I/O is optional as per specification, most of the EP drivers would either use memory mapped I/O by default or support setting configuration to use memory mapped I/O instead of PCI I/O through use of driver/module parameter. Check respective EP driver manual for specific details about using memory mapped I/O.</li>
<li>RC driver prior to release 04.00.00.12 didn't have full MSI handling support and required a patch to enable the same. If you face any issues with data transfer when using older releases, check if the default interrupt mode used for EP is MSI based interrupts. If so, try changing the interrupt mode to Legacy IRQ based. Note that if there is no driver/module parameter then you might need to modify the EP driver for this <b>or modify the TI811X kernel configuration to disable MSI support and rebuild the kernel.</b></li></ol>
<p><br /> 
</p>
<h3><span class="mw-headline" id="Ensuring_PCIe_System_Initialization"><b>Ensuring PCIe System Initialization</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=12" title="Edit section: Ensuring PCIe System Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Before proceeding to using PCIe Endpoint in the system, we must ensure that the PCIe RC is up and has detected and configured all PCIe/PCI targets present in the PCIe fabric. Steps mentioned below should be carried out before actually accessing the targets as described in subsequent subsections. 
</p>
<ul><li>Check that the desired PCIe card is interested in on-board PCIe Slot.</li>
<li>Boot-up the TI811X PCIe RC. Refer <a href="TI811X_PSP_User_Guide.html" title="TI811X PSP User Guide">TI811X PSP User Guide</a> for details about booting the kernel.</li>
<li>Ensure that the PCI Enumeration is successful and the concerned EP is detected and configured. You can use either of the methods in subsequent points.</li>
<li>Use 'lspci' command at TI811X Linux prompt to see all PCI devices in the system</li></ul>
<pre>TI811X_EVM# lspci -v
00:00.0 Class 0604: Device 104c:b801 (rev 01)
       Flags: bus master, fast devsel, latency 0
       Memory at &lt;ignored&gt; (32-bit, non-prefetchable)
       Memory at &lt;ignored&gt; (32-bit, prefetchable)
       Bus: primary=00, secondary=01, subordinate=01, sec-latency=0
       Memory behind bridge: 20000000-200fffff
       Capabilities: [40] Power Management version 3
       Capabilities: [50] MSI: Enable- Count=1/1 Maskable- 64bit+
       Capabilities: [70] Express Root Port (Slot-), MSI 00
       Capabilities: [100] Advanced Error Reporting
01:00.0 Class 0200: Device 14e4:1677
       Subsystem: Device 14e4:1677
       Flags: fast devsel, IRQ 48
       Memory at 20000000 (64-bit, non-prefetchable) [disabled] [size=64K]
       Capabilities: [48] Power Management version 2
       Capabilities: [50] Vital Product Data
       Capabilities: [58] MSI: Enable- Count=1/8 Maskable- 64bit+
       Capabilities: [d0] Express Endpoint, MSI 00
       Capabilities: [100] Advanced Error Reporting
       Capabilities: [13c] Virtual Channel
</pre>
<ul><li>The above output shows following devices are in the system</li></ul>
<pre>00:00.0 =&gt; TI811X PCIe RC Host
01:00.0 =&gt; Broadcom Corporation NetXtreme BCM5751 Gigabit Ethernet PCI Express Endpoint
</pre>
<ul><li>Notice that TI811X Host is itself detected as one of the PCI devices. This is expected.</li>
<li>If 'lspci' utility is not available, then <tt>/sys/bus/pci/devices/</tt> directory can be examined to get raw information about PCI devices found, such as vendor ID, device ID etc.</li></ul>
<h3><span class="mw-headline" id="Selecting_the_EP_Driver"><b>Selecting the EP Driver</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=13" title="Edit section: Selecting the EP Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Once it is ensured that the expected device(s) are detected fine, enable the driver for the EP in kernel configuration</li>
<li>If you don't readily know about which driver to be used, you can get the Vendor ID and device ID values for the device as follows:</li></ul>
<pre>TI811X_EVM# cat /sys/bus/pci/devices/0000\:01\:00.0/vendor
0x14e4
TI811X_EVM# cat /sys/bus/pci/devices/0000\:01\:00.0/device
0x1677
</pre>
<ul><li>The above values can be used to search in kernel 'drivers' directory. In our case, we know that it is a network device, so we use following to search the device ID in TI811X kernel source tree on Linux Build Host:</li></ul>
<pre>$ grep -nrs 1677 include/linux/pci_ids.h
2084:#define PCI_DEVICE_ID_TIGON3_5751  0x1677
</pre>
<ul><li>The above output indicates that the device with ID 0x1677 is identified with macro PCI_DEVICE_ID_TIGON3_5751</li>
<li>Now use this macro to search inside 'drivers/net' directory of TI811X kernel source</li></ul>
<pre>$ grep -nrs PCI_DEVICE_ID_TIGON3_5751 drivers/net/*
drivers/net/tg3.c:229:  {PCI_DEVICE(PCI_VENDOR_ID_BROADCOM, PCI_DEVICE_ID_TIGON3_5751)},
...
</pre>
<ul><li>As mentioned at the beginning of this section, opening tg3.c shows this driver sets R-RREQ as 4096, so we need to edit all occurrences of <tt>pcie_set_readrq</tt> to pass 256 instead of 4096 and save the file.</li>
<li>Now we need to find the kernel configuration option needed to enable the driver to which tg3.c file belongs and also the name of the module file
<ul><li>Checking inside drivers/net/Makefile indicates selecting CONFIG_TIGON3 builds tg3.c file and the module will be called tg3.ko</li></ul></li>
<li>Enter TI811X kernel configuration with following. Here, we assume that the default TI811X EVM configuration is set up as mentioned earlier and variables such as CROSS_COMPILE, ARCH are set appropriately.</li></ul>
<pre>$ make menuconfig
</pre>
<ul><li>From on screen menu, navigate by pressing ENTER or SPACE key on entries marked with '==&gt;' and selecting appropriate configurations marked with '[*]' by pressing Y key and configurations with '&lt;M&gt;' by pressing M key as shown below. Note that a '*' inside the box '[ ]' indicates the corresponding option is enabled. Similarly, a '*' inside '&lt; &gt;' indicates that the corresponding driver is built into kernel while 'M' inside '&lt; &gt;' indicates the driver to be built as loadable kernel module</li></ul>
<pre>[*] Networking support  ---&gt;
==&gt; Device Drivers  ---&gt;</pre> <pre>==&gt; [*] Network device support  ---&gt;</pre> 
<ul><li>After selecting above, entering inside "Network device support" shows...</li></ul>
<pre>--- Network device support
==&gt; [*]   Ethernet (1000 Mbit)  ---&gt;</pre> <pre>&lt;M&gt;   Broadcom Tigon3 support</pre> 
<ul><li>Use sequence of RIGHT ARROW key followed by ENTER key to exit the nested menu pages till you see "Do you wish to save your new kernel configuration?" dialog. Press ENTER to save the configuration and rebuild the kernel and modules as</li></ul>
<pre>$ make uImage
$ make modules
</pre>
<ul><li>Notice the output of modules build command</li></ul>
<pre>CC      drivers/net/tg3.mod.o
LD [M]  drivers/net/tg3.ko
IHEX    firmware/tigon/tg3.bin
IHEX    firmware/tigon/tg3_tso.bin
IHEX    firmware/tigon/tg3_tso5.bin
</pre>
<ul><li>From the above output, we see that kernel module tg3.ko is build. It also shows various firmware files generated for this driver. This means that this driver requires either (or all) of the firmware images to be (fully) functional.</li></ul>
<h3><span class="mw-headline" id="Loading_the_EP_Driver"><b>Loading the EP Driver</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=14" title="Edit section: Loading the EP Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>It may be possible to load the driver built with above step on already booted TI811X RC, but to avoid any configuration dependency issues, it is recommended to reboot the TI811X RC with newly built kernel.</li>
<li>Once again, ensure that the PCIe devices are detected as expected. If not, try power cycling the system.</li>
<li>Now, transfer the driver module with firmware images to the running TI811X system. You can use TFTP to get the files on TI811X EVM as follows. Note that in the example below, we assume TFTP server 172.24.190.43 is running with the concerned files copied into server's root directory.</li></ul>
<pre>TI811X_EVM # mkdir /home/pcie_rc
TI811X_EVM # cd /home/pcie_rc
TI811X_EVM # tftp -g -r tg3.ko 172.24.190.43
TI811X_EVM # tftp -g -r tg3.bin 172.24.190.43
TI811X_EVM # tftp -g -r tg3_tso.bin 172.24.190.43
</pre>
<ul><li>Note that above commands may vary depending upon the filesystem and tftp utility being used. Also, you can use different means of transferring the above file into TI811X filesystem as convenient. Assuming the files are transferred successfully and you have navigated to the directory containing the above files, use following commands to set up firmware files and load the EP driver:</li></ul>
<pre>TI811X_EVM # cp -f tg3.bin /lib/firmware
TI811X_EVM # cp -f tg3_tso.bin /lib/firmware
TI811X_EVM # insmod tg3.ko
</pre>
<ul><li>Something like following output should be seen:</li></ul>
<pre>tg3 0000:01:00.0: eth1: Link is up at 100 Mbps, full duplex
tg3 0000:01:00.0: eth1: Flow control is on for TX and on for RX</pre> 
<ul><li>The driver is successfully loaded and the Ethernet interface associated with the PCIe Card is labelled as 'eth1' on the setup in above example.</li>
<li>Notice 'lspci output now</li></ul>
<pre>TI811X_EVM # lspci  -kv -s 01:00
01:00.0 Class 0200: Device 14e4:1677 (rev 01)
       Subsystem: Device 14e4:1677
       Flags: bus master, fast devsel, latency 0, IRQ 48
       Memory at 20000000 (64-bit, non-prefetchable) [size=64K]
       Expansion ROM at &lt;ignored&gt; [disabled]
       Capabilities: [48] Power Management version 2
       Capabilities: [50] Vital Product Data
       Capabilities: [58] MSI: Enable- Count=1/8 Maskable- 64bit+
       Capabilities: [d0] Express Endpoint, MSI 00
       Capabilities: [100] Advanced Error Reporting
       Capabilities: [13c] Virtual Channel
       Kernel driver in use: tg3
</pre>
<ul><li>From this point, the PCIe EP can be used as any other (on-chip) Ethernet Interface.</li>
<li>Note that it is recommended to have this interface in different domain than TI811X EMAC interfaces. Other option could be to set up preference to this interface by setting 'metric' or bring TI811X EMAC interface(s) down so that Linux network stack will use PCIe Ethernet interface for network communications.</li>
<li>In some cases it may so happen that the interface name will be different than the one printed in during 'insmod' (e.g., due to udev rules) hence it is advised to do <tt>cat /proc/net/dev</tt> to check interface names.</li>
<li><b>Note:</b> As mentioned in the <i>Features</i> section earlier, any EP driver operation resulting into EP device directly connected to TI811X RC being powered down or disabled would cause the link to go down and complete PCIe hardware initialization needs to be repeated (requires RC driver modification) or needs system reboot. Some possible examples include <tt>ifconfig down</tt> or <tt>rmmod</tt> on the EP driver.</li></ul>
<h1><span class="mw-headline" id="Troubleshooting"><b>Troubleshooting</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=15" title="Edit section: Troubleshooting">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section lists various possible issues and how to troubleshoot them during initial setup using TI811X RC device with various combination of PCIe Endpoint devices.
</p><p>In all the cases, as a first step, it is recommended to enable PCIe debugging. Refer <i>Kernel Configuration</i> section described earlier to enable debugging.  
</p>
<h2><span class="mw-headline" id="Endpoint_device_not_detected">Endpoint device not detected</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=16" title="Edit section: Endpoint device not detected">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This issue is generally detected by one (or more) of the following observations:
</p>
<ul><li>Once the RC kernel is booted, 'lspci' command doesn't show any device.</li>
<li>The driver for the endpoint you are using reports failure to load indicating error such as "no device found to operate on".</li>
<li>You see following message for all the device from 0000:00:00 to 0000:1f:00 during boot time (need to have PCIe debugging enabled).</li></ul>
<pre>No link/device
</pre>
<p>In such case, follow the troubleshooting options (preferably in order) described in sub-sections below:
</p>
<h3><span class="mw-headline" id="Troubleshoot_100MHz_reference_clock">Troubleshoot 100MHz reference clock</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=17" title="Edit section: Troubleshoot 100MHz reference clock">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Ensure that the 100MHz reference clock (refclk) supplied to RC and EP meets PCIe specification constraints.</li>
<li>If the refclks are separate for RC and EP, make sure that they are both fixed @100MHz and do not use SSC</li>
<li>If SSC has to be used, design the system to use common clock. For example, use single 100MHz refclk to supply to RC as well as route it to the PCIe slot as output to be provided to the connected EP. Same can be carried forward to the scenario where PCIe switch and multiple EPs are involved.</li></ul>
<h3><span id="Reset/Power_on_sequence"></span><span class="mw-headline" id="Reset.2FPower_on_sequence">Reset/Power on sequence</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;section=18" title="Edit section: Reset/Power on sequence">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<ul><li>Explore changing power up sequence across RC &amp; EP(s). For example:
<ul><li>Power up EP before RC.</li>
<li><b>Note</b> that is may not be straightforward in case when using refclk sourced from RC board. That is, you will still need to ensure that the refclk is provided to the note which is powered up first</li>
<li>Also, it is possible that the h/w is configured such that a reset is applied to downstream when RC is powered up. In such case, try to isolate the downstream from this reset.</li></ul></li>
<li>Depending upon the observations in the above step, you may need to time the reset sequence for final system.</li></ul>
<p><br /> <small>DISCLAIMER: Various trademarks used in this document are copyrights of respective owners</small>
</p></div>
<!-- 
NewPP limit report
Cached time: 20201130145949
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.077 seconds
Real time usage: 0.080 seconds
Preprocessor visited node count: 167/1000000
Preprocessor generated node count: 312/1000000
Post‐expand include size: 509/2097152 bytes
Template argument size: 58/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 879/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.806      1 -total
 52.14%    1.463      1 Template:SpArticleStart
 43.37%    1.217      1 Template:SpLicenseCC-SA
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:17528-0!canonical and timestamp 20201130145949 and revision id 119535
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>TI811X PCI Express Root Complex Driver User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;oldid=119535">https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;oldid=119535</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="https://processors.wiki.ti.com/index.php?title=Category:TI811X&amp;action=edit&amp;redlink=1" class="new" title="Category:TI811X (page does not exist)">TI811X</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=TI811X+PSP+PCI+Express+Root+Complex+Driver+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;oldid=119535" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=TI811X_PSP_PCI_Express_Root_Complex_Driver_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 10 September 2012, at 01:06.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.077","walltime":"0.080","ppvisitednodes":{"value":167,"limit":1000000},"ppgeneratednodes":{"value":312,"limit":1000000},"postexpandincludesize":{"value":509,"limit":2097152},"templateargumentsize":{"value":58,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":879,"limit":5000000},"timingprofile":["100.00%    2.806      1 -total"," 52.14%    1.463      1 Template:SpArticleStart"," 43.37%    1.217      1 Template:SpLicenseCC-SA"]},"cachereport":{"timestamp":"20201130145949","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":230});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/TI811X_PCI_Express_Root_Complex_Driver_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 13:05:03 GMT -->
</html>
