<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Processor_SDK_Linux_Automotive_Display_FAQ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:27:47 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Processor SDK Linux Automotive Display FAQ - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Processor_SDK_Linux_Automotive_Display_FAQ","wgTitle":"Processor SDK Linux Automotive Display FAQ","wgCurRevisionId":232464,"wgRevisionId":232464,"wgArticleId":44530,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Processor SDK Linux Automotive"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Processor_SDK_Linux_Automotive_Display_FAQ","wgRelevantArticleId":44530,"wgRequestId":"48825065dec55b2cabb88d9c","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Processor_SDK_Linux_Automotive_Display_FAQ rootpage-Processor_SDK_Linux_Automotive_Display_FAQ skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Processor SDK Linux Automotive Display FAQ</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Weston.2FTouch"><span class="tocnumber">1</span> <span class="toctext">Weston/Touch</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Weston_Screen_Rotation"><span class="tocnumber">2</span> <span class="toctext">Weston Screen Rotation</span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#Clocking_displays"><span class="tocnumber">3</span> <span class="toctext">Clocking displays</span></a>
<ul>
<li class="toclevel-2 tocsection-4"><a href="#Clocking_LCD_with_HDMI_PLL"><span class="tocnumber">3.1</span> <span class="toctext">Clocking LCD with HDMI PLL</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Printing_clock_setup"><span class="tocnumber">3.2</span> <span class="toctext">Printing clock setup</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Clocking_two_LCD.27s_with_same_PLL"><span class="tocnumber">3.3</span> <span class="toctext">Clocking two LCD's with same PLL</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Testing_multiple_LCD_displays_on_the_EVM"><span class="tocnumber">3.4</span> <span class="toctext">Testing multiple LCD displays on the EVM</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-8"><a href="#Testing_overlays"><span class="tocnumber">4</span> <span class="toctext">Testing overlays</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Debugging_FPDLink_integration"><span class="tocnumber">5</span> <span class="toctext">Debugging FPDLink integration</span></a></li>
</ul>
</div>

<h1><span id="Weston/Touch"></span><span class="mw-headline" id="Weston.2FTouch">Weston/Touch</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=1" title="Edit section: Weston/Touch">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ol style="list-style-type: decimal;">
<li><p>Weston does not start</p>
<p>To start weston needs a pointing device either a mouse or a touch screen. If you are using only HDMI or suspect that the touch screen is not working, please connect a mouse to the EVM.</p></li>
<li><p><code>matrix-gui</code> is not responsive to touch but mouse works fine.</p>
<p>It is possible that the touch screen calibration is incorrect. To redo the calibration, run</p>
<pre>root@dra7xx-evm:~# rm $WS_CALUDEV_FILE
root@dra7xx-evm:~# sync</pre>
<p>reboot and do the calibration. This should get the touch working responsively.</p></li>
<li><p>LCD shows blank screen on first boot.</p>
<p>Weston requires touch screen calibration before starting. You will notice a small cross hair on the LCD. Please touch the location of the cross hair until the touch screen is calibrated.</p></li>
<li><p>Touch screen is not working</p>
<ol style="list-style-type: decimal;">
<li><p>Check if the touch screen was probed correctly. If touch screen is probed correctly, you should see a node for touchscreen.</p>
<pre>root@dra7xx-evm:~# ls /dev/input
by-path       event0        mice          mouse0        touchscreen0</pre>
<p>If you see the touchscreen node, run <code>evtest</code> as shown below, play with the touchscreen and check for touch events on the console output.</p>
<pre>root@dra7xx-evm:~# evtest /dev/input/touchscreen0
Testing ... (interrupt to exit)
Event: time 1493358175.185547, type 3 (EV_ABS), code 57 (ABS_MT_TRACKING_ID), value 7
Event: time 1493358175.185547, type 3 (EV_ABS), code 53 (ABS_MT_POSITION_X), value 1381
Event: time 1493358175.185547, type 3 (EV_ABS), code 54 (ABS_MT_POSITION_Y), value 225
Event: time 1493358175.185547, type 1 (EV_KEY), code 330 (BTN_TOUCH), value 1
Event: time 1493358175.185547, type 3 (EV_ABS), code 0 (ABS_X), value 1381
Event: time 1493358175.185547, type 3 (EV_ABS), code 1 (ABS_Y), value 225
Event: time 1493358175.185547, -------------- SYN_REPORT ------------
Event: time 1493358175.227251, type 3 (EV_ABS), code 53 (ABS_MT_POSITION_X), value 1384
Event: time 1493358175.227251, type 3 (EV_ABS), code 54 (ABS_MT_POSITION_Y), value 236</pre>
<p>If you do not see the touchscreen node under <code>/dev/input</code>, go to the rest of the steps.</p></li>
<li><p>Check if the touch controller was detected correctly on the I2C bus. Assuming the touch controller was on i2c0, probe for I2C devices on the bus. Check that the touch controller is detected. The address of the touch controller can be determined from the device tree.</p>
<pre>root@dra7xx-evm:~# i2cdetect -y -r 0
    0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- UU -- 
10: -- -- -- -- -- -- -- -- -- UU -- -- -- -- -- -- 
20: UU UU -- -- -- -- -- UU -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- UU -- -- -- -- -- -- -- 
40: UU -- -- -- -- -- -- -- 48 -- -- -- -- -- -- -- 
50: -- 51 -- -- -- -- -- 57 UU UU UU 5b -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --  </pre>
<p>If touch controller was not detected, please check the ribbon cable connecting the EVM and the display for loose contact or cable breaks.</p></li></ol>
</li></ol>
<h1><span class="mw-headline" id="Weston_Screen_Rotation">Weston Screen Rotation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=2" title="Edit section: Weston Screen Rotation">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Please refer to this response on the e2e forum.
</p><p><a rel="nofollow" class="external free" href="https://e2e.ti.com/support/arm/automotive_processors/f/1020/p/629004/2321041#2321041">https://e2e.ti.com/support/arm/automotive_processors/f/1020/p/629004/2321041#2321041</a>
</p>
<h1><span class="mw-headline" id="Clocking_displays">Clocking displays</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=3" title="Edit section: Clocking displays">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<h2><span class="mw-headline" id="Clocking_LCD_with_HDMI_PLL">Clocking LCD with HDMI PLL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=4" title="Edit section: Clocking LCD with HDMI PLL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If it is desired to clock one of the LCD outputs with the HDMI PLL instead of the Video PLL, the below patch can be used. Please note that HDMI needs to be disabled in the device tree and only one of the LCD outputs can use the HDMI PLL for output.
</p><p><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38396">http://review.omapzoom.org/38396</a>
</p><p>This patch is only supported on K4.4.
</p><p>The clocking architecture on K3.14 makes it cumbersome to support this same feature cleanly. As result, we do not support clocking LCD outputs with HDMI PLL on K3.14.
</p>
<h2><span class="mw-headline" id="Printing_clock_setup">Printing clock setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=5" title="Edit section: Printing clock setup">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>To understand the PLL setup at runtime, please use the script
</p>
<pre># git clone git://git.ti.com/glsdk/util-scripts.git
# sh ./util-scripts/debug/dss_clockdumps.sh
=====================DSS clock script===================
Dumps internal clocks and muxes of DSS

CTRL_CORE_DSS_PLL_CONTROL (0x4a002538) = 0x000002AB
video1 PLL&#160;:  Disabled
video2 PLL&#160;:  Disabled
HDMI   PLL&#160;:  Enabled
DSI1_A_CLK mux&#160;: DPLL HDMI
DSI1_B_CLK mux&#160;: DPLL video2
DSI1_C_CLK mux&#160;: DPLL Video1

DSS_CTRL (0x58000040) = 0x00000000
2: LCD1 clk switch&#160;:  DSS clk
3: LCD2 clk switch&#160;:  DSS clk
10: LCD3 clk switch&#160;:  DSS clk
1: func clk switch&#160;:  DSS clk
13: DPI1 output    &#160;:  HDMI

DSS_STATUS (0x5800005C) = 0x01408A81

DSI_CLK_CTRL (0x58004054) = 0x00000001

CM_DSS_CLKSTCTRL (0x4A009100) = 0x00040B03

CM_DSS_DSS_CLKCTRL (0x4A009120) = 0x00000702

========================================================
Register dump for DPLL hdmi
|----------------------------|
| Address (hex) | Data (hex) |
|----------------------------|
| 0x58040200    | 0x00000018 |
| 0x58040204    | 0x00000003 |
| 0x58040208    | 0x00000000 |
| 0x5804020C    | 0x0004A40E |
| 0x58040210    | 0x00602004 |
| 0x58040214    | 0x00001800 |
| 0x58040218    | 0x00000000 |
| 0x5804021C    | 0x00000000 |
| 0x58040220    | 0x00040000 |
|----------------------------|
Details for DPLL hdmi
PLL status &#160;:  Locked
M4 hsdiv(1)&#160;:  inactive
M5 hsdiv(2)&#160;:  inactive
M6 hsdiv(3)&#160;:  inactive
M7 hsdiv(4)&#160;:  inactive

PLL_REGM   =  594
PLL_REGN   =  7
M4 DIV     =  0
M6 DIV     =  0
M7 DIV     =  0
PLL_REGM2  =  1
PLL_REGM_F =  1
PLL_SD  =  6
HDMI_SSC_CONFIGURATION1(should be zero) 0x00000000
HDMI_SSC_CONFIGURATION2(should be zero) 0x00000000

Clock calculations (DPLL hdmi)
sysclk = 20000000
CLKOUT = sysclk * REGM / (REGM2 * (REGN + 1)) = 1485000000

========================================================
Clock O/P of MUXes
DSI1_A_CLK&#160;:  1485000000
DSI1_B_CLK&#160;:  0
DSI1_C_CLK&#160;:  0

2: LCD1 clk&#160;:  192000000
3: LCD2 clk&#160;:  192000000
10: LCD3 clk&#160;:  192000000
1: func clk&#160;:  192000000

LCD1 logic clk(/ 1 )&#160;:  192000000  pix clk(/ 2 )&#160;:  96000000
LCD2 logic clk(/ 4 )&#160;:  48000000  pix clk(/ 1 )&#160;:  48000000
LCD3 logic clk(/ 4 )&#160;:  48000000  pix clk(/ 1 )&#160;:  48000000</pre>
<h2><span id="Clocking_two_LCD's_with_same_PLL"></span><span class="mw-headline" id="Clocking_two_LCD.27s_with_same_PLL">Clocking two LCD's with same PLL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=6" title="Edit section: Clocking two LCD&#039;s with same PLL">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If you want to clock more displays than the available, one of the PLL's will need to be shared between the displays. Below is a set of patches on kernel 3.14 on J6 Eco (1 video PLL's and 1 HDMI PLL) for enabling both the LCD's from the same Video PLL.
</p>
<table>
<caption>Patches for Kernel 3.14
</caption>
<tbody><tr>
<th width="7%">No.
</th>
<th width="36%">URL
</th>
<th width="56%">Headline
</th></tr>
<tr>
<td>1
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/37626">http://review.omapzoom.org/37626</a>
</td>
<td>omapdss: pll: fix writing M6 &amp; M7 divs
</td></tr>
<tr>
<td>2
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/37627">http://review.omapzoom.org/37627</a>
</td>
<td>tmp:fix for VOUT1 + VOUT2 enablement to have LCD1 and LCD2
</td></tr>
<tr>
<td>3
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38278">http://review.omapzoom.org/38278</a>
</td>
<td>HACK: Enable M4 and M6 dividers always.
</td></tr>
<tr>
<td>4
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38279">http://review.omapzoom.org/38279</a>
</td>
<td>dra72: dts: enable vout2
</td></tr>
<tr>
<td>5
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38548">http://review.omapzoom.org/38548</a>
</td>
<td>HACK: read VOUT2 PLL information from Video1 PLL
</td></tr></tbody></table>
<p>The below patch set offers similar functionality on Kernel 4.4.
</p>
<table>
<caption>Patches for Kernel 4.4
</caption>
<tbody><tr>
<th width="6%">No.
</th>
<th width="35%">URL
</th>
<th width="57%">Headline
</th></tr>
<tr>
<td>1
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38519">http://review.omapzoom.org/38519</a>
</td>
<td>drm/omap: track number of times dss pll is enabled
</td></tr>
<tr>
<td>2
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38520">http://review.omapzoom.org/38520</a>
</td>
<td>drm/omap: add function to diff pll configuration
</td></tr>
<tr>
<td>3
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38521">http://review.omapzoom.org/38521</a>
</td>
<td>drm/omap: HACK: allow use of a single PLL for two displays
</td></tr>
<tr>
<td>4
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38522">http://review.omapzoom.org/38522</a>
</td>
<td>ARM: dts: dra7 evms: add dummy panels with AUO panel timings
</td></tr>
<tr>
<td>5
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38523">http://review.omapzoom.org/38523</a>
</td>
<td>ARM: dts: dra7&#160;: add dts for four displays
</td></tr>
<tr>
<td>6
</td>
<td><a rel="nofollow" class="external free" href="http://review.omapzoom.org/38524">http://review.omapzoom.org/38524</a>
</td>
<td>ARM: dts: dra76&#160;: add dts for four displays
</td></tr></tbody></table>
<p>Please ensure that you set the kernel boot argument <code>omapdrm.num_crtc</code> correctly when enabling multiple displays. The default kernel configuration is for 2 CRTC's. If you want to use 3 or 4 displays, please add <code>omapdrm.num_crtc=3</code> or <code>omapdrm.num_crtc=4</code> respectively to the kernel boot arguments.
</p>
<h2><span class="mw-headline" id="Testing_multiple_LCD_displays_on_the_EVM">Testing multiple LCD displays on the EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=7" title="Edit section: Testing multiple LCD displays on the EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>If you would like to test multiple identical LCD displays on the EVM, you can use the multiplexing option on VOUT1 to check the output of VOUT2 and VOUT3.
</p><p>To do this,
</p>
<ol><li>Setup a fake panel(s) in the device tree and connect them to the appropriate device tree ports. See <a rel="nofollow" class="external free" href="http://review.omapzoom.org/38522">http://review.omapzoom.org/38522</a>, <a rel="nofollow" class="external free" href="http://review.omapzoom.org/38523">http://review.omapzoom.org/38523</a></li>
<li>Set the clock sources so that all the panels have valid clocks. Either use the HDMI PLL for clocking one of the LCD's and modify kernel source such that same PLL clocks multiple displays using various PLL's.</li>
<li>Boot and check that the clock tree is as expected using the <code>dss_clockdumps.sh</code> script listed above.</li>
<li>Choose which output from VOUT1/2/3 goes on to LCD1 by modifying bits <code>DSS_CTRL[17:16]</code> address 0x58000040.</li></ol>
<h1><span class="mw-headline" id="Testing_overlays">Testing overlays</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=8" title="Edit section: Testing overlays">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>You can test whether a particular overlay configuration works using <code>kmstest</code>. This tool is included in the target filesystem of Processor SDK - Linux Automotive 3.02. You can also build it from source from the link <a rel="nofollow" class="external free" href="https://github.com/tomba/kmsxx/">https://github.com/tomba/kmsxx/</a> . building requires the use of CMake and CMake tool chain file. An example toolchain file can be found below.
</p><p><a rel="nofollow" class="external free" href="Processor_SDK_Linux_Automotive_Application_Notes.html#CMake">http://processors.wiki.ti.com/index.php/Processor_SDK_Linux_Automotive_Application_Notes#CMake</a>
</p><p>Below is an example running on a 1920x1200 display.
</p>
<pre>kmstest -c 0 \
-r 1920x1200 -f XR24 \
-p 0,0-640x480 -f 1920x1200 \
-p 100,100-640x480 -f 1280x960-NV12 \
-p 200,200-640x480</pre>
<p>The breakdown of the command is described below.
</p>
<ol style="list-style-type: decimal;">
<li><p>Selects the first connector for the output.</p>
<pre>kmstest -c 0 \</pre></li>
<li><p>Set the crtc format. As we are not specifying the frame buffer size, it is of the same size as the crtc.</p>
<pre>-r 1920x1200 -f XR24 \</pre></li>
<li><p>Set an overlay starting from (0,0) of size 640x480. This buffer is generated by scaling a 1920x1200 buffer.</p>
<pre>-p 0,0-640x480 -f 1920x1200 \</pre></li>
<li><p>Set an overlay starting from (100, 100) of size 640x480. This buffer is generated by scaling a 1280x960 NV12 format buffer. X and Y are both scaled down by 0.5.</p>
<pre>-p 100,100-640x480 -f 1280x960-NV12 \</pre></li>
<li><p>Set an overlay starting from (200, 200) of size 640x480. The framebuffer used is of size 640x480 as we did not specify a size.</p>
<pre>-p 200,200-640x480</pre></li></ol>
<p>Here is an example of testing two displays simultaneously.
</p>
<pre>kmstest -c 0 \
-r 1920x1200 -f XR24 \
-p 0,0-640x480 -f 1920x1200 \
-c 1 \
-r 1920x1080 \
-p 100,100-640x480 -f 320x960-NV12</pre>
<h1><span class="mw-headline" id="Debugging_FPDLink_integration">Debugging FPDLink integration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;section=9" title="Edit section: Debugging FPDLink integration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>This section is written in the context of debugging FPDLink integration in the context of a display. Some of the steps are also applicable to in the context of FPDLink capture. In the following section, please interpret
</p>
<ol><li>FPDLink serializer as the local FPDLink device i.e. on the board with the Jacinto processor</li>
<li>FPDLink deserializer as the remote FPDLink device i.e. device connected to the display</li></ol>
<p>The debug steps are as follows.
</p>
<ol style="list-style-type: decimal;">
<li><p>Ensure that the pinmux connections for the I2C lines and display data lines connecting to FPDLink serializer are setup correctly. Pinmux is usually done in MLO. You can verify pinmux settings using <code>omapconf</code>.</p>
<pre>root@dra7xx-evm:~# omapconf read 0x4A003738</pre></li>
<li><p>Verify that you are able to probe the FPDLink device. In case of the DRA74x EVM, FPDLink serializer DS90UH925Q is present on I2C2 bus with slave address of 0x1b. Please note the TRM and EVM I2C numbers are indexed from 1 while arguments to i2cdetect is indexed from 0.</p>
<pre>root@dra7xx-evm:~# i2cdetect -r -y 1
    0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:          -- -- -- -- -- -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- UU UU UU 1b -- -- -- -- 
20: -- -- -- -- -- -- UU -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- -- --</pre></li>
<li><p>Verify that you are able to read the configuration registers of the FPDLink local device i.e. serializer in case of display. Reading register 0 should return the 8 bit address of the serializer.</p>
<pre>root@dra7xx-evm:~# i2cget -y 1 0x1b 0
0x36</pre></li>
<li><p>Setup DSS to drive pixel clock from the desired output without any dependencies on backlight or board muxing.</p></li>
<li><p>Verify that the serializer is receiving the pixel clock. In case of DS90UH925Q, this can be determined by bit 2 of the &quot;General Status&quot; register (address 0xC).</p>
<pre>root@dra7xx-evm:~# i2cget -y 1 0x1b 0xc
0x04</pre>
<p>If the serializer is not receiving pixel clock, please check the pinmuxing in the SOC and any muxes on the board.</p></li>
<li><p>Once the deserializer is connected via FPDLink cable, please check that communication is established between serializer and deserializer. This can be verified by reading bit 0 of the &quot;General Status&quot; register (address 0xC). The eight bit I2C address of the serializer should also be seen in DES ID register (address 0x6).</p></li>
<li><p>The FPDLink serializer and deserializers supported are listed in the file <code>Documentation/devicetree/bindings/video/fpd3-serdes.txt</code> in the kernel tree.</p>
<ol style="list-style-type: lower-alpha;">
<li><p>Please check if your FPDLink device is supported. If not, support can be added by modifying <code>drivers/video/serdes/fpd3_serdes.c</code>.</p></li>
<li><p>Each device has the initialization sequence defined in an array. Please review the initialization sequence against the desired configuration as per your board. Here is the initialization sequence for the 921 serializer.</p>
<p>&lt;source lang="c"&gt;static const unsigned int fpd3_921_ser_init[] = {
</p>
<pre>   /* Reset entire digital block except registers */
   FPD3_SER_RESET,     0x01,
   /* back chan en, auto ack WR, i2c passthrough, rising edge pclk */
   FPD3_SER_CONFIG1,   0x8b,
</pre>
};&lt;/source&gt;</li></ol>
</li></ol>

<!-- 
NewPP limit report
Cached time: 20201130211529
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.037 seconds
Real time usage: 0.037 seconds
Preprocessor visited node count: 159/1000000
Preprocessor generated node count: 370/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 4760/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:44530-0!canonical and timestamp 20201130211529 and revision id 232464
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Processor SDK Linux Automotive Display FAQ</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Processor SDK Linux Automotive Display FAQ</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Processor SDK Linux Automotive Display FAQ</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;oldid=232464">https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;oldid=232464</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Category</a>: <ul><li><a href="Category_Processor_SDK_Linux_Automotive.html" title="Category:Processor SDK Linux Automotive">Processor SDK Linux Automotive</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Processor+SDK+Linux+Automotive+Display+FAQ" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Processor_SDK_Linux_Automotive_Display_FAQ.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Processor_SDK_Linux_Automotive_Display_FAQ.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Processor_SDK_Linux_Automotive_Display_FAQ.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Processor_SDK_Linux_Automotive_Display_FAQ.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;oldid=232464" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Processor_SDK_Linux_Automotive_Display_FAQ&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 20 December 2017, at 23:52.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.037","walltime":"0.037","ppvisitednodes":{"value":159,"limit":1000000},"ppgeneratednodes":{"value":370,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":4760,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130211529","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":227});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Processor_SDK_Linux_Automotive_Display_FAQ by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 10:27:49 GMT -->
</html>
