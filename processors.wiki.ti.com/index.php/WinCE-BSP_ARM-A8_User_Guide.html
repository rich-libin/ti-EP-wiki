<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/WinCE-BSP_ARM-A8_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:21:34 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>WinCE-BSP ARM-A8 User Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"WinCE-BSP_ARM-A8_User_Guide","wgTitle":"WinCE-BSP ARM-A8 User Guide","wgCurRevisionId":114100,"wgRevisionId":114100,"wgArticleId":7317,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["WinCE","GSG"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"WinCE-BSP_ARM-A8_User_Guide","wgRelevantArticleId":7317,"wgRequestId":"da03099bb5dc56cded80bb0b","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-WinCE-BSP_ARM-A8_User_Guide rootpage-WinCE-BSP_ARM-A8_User_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">WinCE-BSP ARM-A8 User Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><p><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a> <br />
</p>
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Requirements"><span class="tocnumber">1.1</span> <span class="toctext">Requirements</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Required_Experience"><span class="tocnumber">1.2</span> <span class="toctext">Required Experience</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Required_Software"><span class="tocnumber">1.3</span> <span class="toctext">Required Software</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Required_JTAG_Tools"><span class="tocnumber">1.4</span> <span class="toctext">Required JTAG Tools</span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Required_Network_Capabilities"><span class="tocnumber">1.5</span> <span class="toctext">Required Network Capabilities</span></a></li>
<li class="toclevel-2 tocsection-7"><a href="#Notation_Conventions"><span class="tocnumber">1.6</span> <span class="toctext">Notation Conventions</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Related_Documentation"><span class="tocnumber">1.7</span> <span class="toctext">Related Documentation</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-9"><a href="#BSP_Features"><span class="tocnumber">2</span> <span class="toctext">BSP Features</span></a>
<ul>
<li class="toclevel-2 tocsection-10"><a href="#Bootloader_.28EBOOT.29"><span class="tocnumber">2.1</span> <span class="toctext">Bootloader (EBOOT)</span></a>
<ul>
<li class="toclevel-3 tocsection-11"><a href="#Bootloader_and_Initialization_Sequence"><span class="tocnumber">2.1.1</span> <span class="toctext">Bootloader and Initialization Sequence</span></a></li>
<li class="toclevel-3 tocsection-12"><a href="#Low_Level_Initialization"><span class="tocnumber">2.1.2</span> <span class="toctext">Low Level Initialization</span></a></li>
<li class="toclevel-3 tocsection-13"><a href="#Device_Configuration_Parameters"><span class="tocnumber">2.1.3</span> <span class="toctext">Device Configuration Parameters</span></a></li>
<li class="toclevel-3 tocsection-14"><a href="#Serial_User_Interface"><span class="tocnumber">2.1.4</span> <span class="toctext">Serial User Interface</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-15"><a href="#NAND_Flash_Organization"><span class="tocnumber">2.2</span> <span class="toctext">NAND Flash Organization</span></a>
<ul>
<li class="toclevel-3 tocsection-16"><a href="#Supported_NAND_chip"><span class="tocnumber">2.2.1</span> <span class="toctext">Supported NAND chip</span></a></li>
<li class="toclevel-3 tocsection-17"><a href="#Reserved_Area_.28Bootloader.2FConfiguration_Parameters.29"><span class="tocnumber">2.2.2</span> <span class="toctext">Reserved Area (Bootloader/Configuration Parameters)</span></a></li>
<li class="toclevel-3 tocsection-18"><a href="#NAND_ECC_support"><span class="tocnumber">2.2.3</span> <span class="toctext">NAND ECC support</span></a></li>
<li class="toclevel-3 tocsection-19"><a href="#OS_Partition"><span class="tocnumber">2.2.4</span> <span class="toctext">OS Partition</span></a></li>
<li class="toclevel-3 tocsection-20"><a href="#File_System_Partition"><span class="tocnumber">2.2.5</span> <span class="toctext">File System Partition</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-21"><a href="#OAL_Features"><span class="tocnumber">2.3</span> <span class="toctext">OAL Features</span></a>
<ul>
<li class="toclevel-3 tocsection-22"><a href="#Features"><span class="tocnumber">2.3.1</span> <span class="toctext">Features</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-23"><a href="#TI_ARM_A8_Common_Drivers"><span class="tocnumber">2.4</span> <span class="toctext">TI ARM_A8 Common Drivers</span></a>
<ul>
<li class="toclevel-3 tocsection-24"><a href="#Display_Driver"><span class="tocnumber">2.4.1</span> <span class="toctext">Display Driver</span></a>
<ul>
<li class="toclevel-4 tocsection-25"><a href="#OMAP35x_EVM_Display_Modes_.28for_OMAP35xx.2FDM37xx.29"><span class="tocnumber">2.4.1.1</span> <span class="toctext">OMAP35x EVM Display Modes (for OMAP35xx/DM37xx)</span></a></li>
<li class="toclevel-4 tocsection-26"><a href="#AM35x_eXperimenter_board_Display_Modes"><span class="tocnumber">2.4.1.2</span> <span class="toctext">AM35x eXperimenter board Display Modes</span></a></li>
<li class="toclevel-4 tocsection-27"><a href="#AM335x_GP_EVM_Display_modes"><span class="tocnumber">2.4.1.3</span> <span class="toctext">AM335x GP EVM Display modes</span></a></li>
<li class="toclevel-4 tocsection-28"><a href="#AM387x_EVM_Display_modes"><span class="tocnumber">2.4.1.4</span> <span class="toctext">AM387x EVM Display modes</span></a></li>
</ul>
</li>
<li class="toclevel-3 tocsection-29"><a href="#GPIO_Driver"><span class="tocnumber">2.4.2</span> <span class="toctext">GPIO Driver</span></a></li>
<li class="toclevel-3 tocsection-30"><a href="#1-Wire.2FHDQ_Driver"><span class="tocnumber">2.4.3</span> <span class="toctext">1-Wire/HDQ Driver</span></a></li>
<li class="toclevel-3 tocsection-31"><a href="#McASP_Support_Library_.28AM387xx_and_AM33x_Only.29"><span class="tocnumber">2.4.4</span> <span class="toctext">McASP Support Library (AM387xx and AM33x Only)</span></a></li>
<li class="toclevel-3 tocsection-32"><a href="#McBSP_Driver_.28OMAP35x_and_AM35x_Only.29"><span class="tocnumber">2.4.5</span> <span class="toctext">McBSP Driver (OMAP35x and AM35x Only)</span></a></li>
<li class="toclevel-3 tocsection-33"><a href="#SPI_Driver"><span class="tocnumber">2.4.6</span> <span class="toctext">SPI Driver</span></a></li>
<li class="toclevel-3 tocsection-34"><a href="#NAND_Flash_Driver"><span class="tocnumber">2.4.7</span> <span class="toctext">NAND Flash Driver</span></a></li>
<li class="toclevel-3 tocsection-35"><a href="#NDIS_SMSC9118_Driver"><span class="tocnumber">2.4.8</span> <span class="toctext">NDIS SMSC9118 Driver</span></a></li>
<li class="toclevel-3 tocsection-36"><a href="#Notification_LED_Driver"><span class="tocnumber">2.4.9</span> <span class="toctext">Notification LED Driver</span></a></li>
<li class="toclevel-3 tocsection-37"><a href="#Power_Management_Driver"><span class="tocnumber">2.4.10</span> <span class="toctext">Power Management Driver</span></a></li>
<li class="toclevel-3 tocsection-38"><a href="#SDHC_Driver"><span class="tocnumber">2.4.11</span> <span class="toctext">SDHC Driver</span></a></li>
<li class="toclevel-3 tocsection-39"><a href="#SDMA_Driver"><span class="tocnumber">2.4.12</span> <span class="toctext">SDMA Driver</span></a></li>
<li class="toclevel-3 tocsection-40"><a href="#EDMA_Driver"><span class="tocnumber">2.4.13</span> <span class="toctext">EDMA Driver</span></a></li>
<li class="toclevel-3 tocsection-41"><a href="#Touchscreen_Driver"><span class="tocnumber">2.4.14</span> <span class="toctext">Touchscreen Driver</span></a></li>
<li class="toclevel-3 tocsection-42"><a href="#UART_Driver"><span class="tocnumber">2.4.15</span> <span class="toctext">UART Driver</span></a></li>
<li class="toclevel-3 tocsection-43"><a href="#USB_Host_Driver"><span class="tocnumber">2.4.16</span> <span class="toctext">USB Host Driver</span></a></li>
<li class="toclevel-3 tocsection-44"><a href="#USB_OTG_Driver"><span class="tocnumber">2.4.17</span> <span class="toctext">USB OTG Driver</span></a></li>
<li class="toclevel-3 tocsection-45"><a href="#A_Note_about_USB_Audio"><span class="tocnumber">2.4.18</span> <span class="toctext">A Note about USB Audio</span></a></li>
<li class="toclevel-3 tocsection-46"><a href="#Video_input.2FCamera_Driver"><span class="tocnumber">2.4.19</span> <span class="toctext">Video input/Camera Driver</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-47"><a href="#OMAP35xx_EVM_Specific_Drivers"><span class="tocnumber">2.5</span> <span class="toctext">OMAP35xx EVM Specific Drivers</span></a>
<ul>
<li class="toclevel-3 tocsection-48"><a href="#Audio_Driver"><span class="tocnumber">2.5.1</span> <span class="toctext">Audio Driver</span></a></li>
<li class="toclevel-3 tocsection-49"><a href="#Keypad_Driver"><span class="tocnumber">2.5.2</span> <span class="toctext">Keypad Driver</span></a></li>
<li class="toclevel-3 tocsection-50"><a href="#Power_Key_Driver"><span class="tocnumber">2.5.3</span> <span class="toctext">Power Key Driver</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-51"><a href="#AM35xx_EVM_Specific_Drivers"><span class="tocnumber">2.6</span> <span class="toctext">AM35xx EVM Specific Drivers</span></a>
<ul>
<li class="toclevel-3 tocsection-52"><a href="#Audio_Driver_2"><span class="tocnumber">2.6.1</span> <span class="toctext">Audio Driver</span></a></li>
<li class="toclevel-3 tocsection-53"><a href="#CAN_Driver"><span class="tocnumber">2.6.2</span> <span class="toctext">CAN Driver</span></a></li>
<li class="toclevel-3 tocsection-54"><a href="#Keypad_Driver_2"><span class="tocnumber">2.6.3</span> <span class="toctext">Keypad Driver</span></a></li>
<li class="toclevel-3 tocsection-55"><a href="#Power_Key_Driver_2"><span class="tocnumber">2.6.4</span> <span class="toctext">Power Key Driver</span></a></li>
<li class="toclevel-3 tocsection-56"><a href="#NDIS_EMAC_Driver"><span class="tocnumber">2.6.5</span> <span class="toctext">NDIS EMAC Driver</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-57"><a href="#AM387xx_EVM_Specific_Drivers"><span class="tocnumber">2.7</span> <span class="toctext">AM387xx EVM Specific Drivers</span></a>
<ul>
<li class="toclevel-3 tocsection-58"><a href="#Audio_Driver_3"><span class="tocnumber">2.7.1</span> <span class="toctext">Audio Driver</span></a></li>
<li class="toclevel-3 tocsection-59"><a href="#Display_Driver_2"><span class="tocnumber">2.7.2</span> <span class="toctext">Display Driver</span></a></li>
<li class="toclevel-3 tocsection-60"><a href="#NDIS_CPSW3G_Driver"><span class="tocnumber">2.7.3</span> <span class="toctext">NDIS CPSW3G Driver</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-61"><a href="#AM335x_EVM_Specific_Drivers"><span class="tocnumber">2.8</span> <span class="toctext">AM335x EVM Specific Drivers</span></a>
<ul>
<li class="toclevel-3 tocsection-62"><a href="#Audio_Driver_4"><span class="tocnumber">2.8.1</span> <span class="toctext">Audio Driver</span></a></li>
<li class="toclevel-3 tocsection-63"><a href="#Keypad_Driver_3"><span class="tocnumber">2.8.2</span> <span class="toctext">Keypad Driver</span></a></li>
<li class="toclevel-3 tocsection-64"><a href="#NDIS_CPSW3G_Driver_2"><span class="tocnumber">2.8.3</span> <span class="toctext">NDIS CPSW3G Driver</span></a></li>
<li class="toclevel-3 tocsection-65"><a href="#PRU_Driver"><span class="tocnumber">2.8.4</span> <span class="toctext">PRU Driver</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-66"><a href="#BSP_Installation"><span class="tocnumber">3</span> <span class="toctext">BSP Installation</span></a>
<ul>
<li class="toclevel-2 tocsection-67"><a href="#Install_Required_Software"><span class="tocnumber">3.1</span> <span class="toctext">Install Required Software</span></a></li>
<li class="toclevel-2 tocsection-68"><a href="#Installing_the_TI_ARM_A8_BSP"><span class="tocnumber">3.2</span> <span class="toctext">Installing the TI ARM_A8 BSP</span></a></li>
<li class="toclevel-2 tocsection-69"><a href="#PowerVR_Catalog"><span class="tocnumber">3.3</span> <span class="toctext">PowerVR Catalog</span></a></li>
<li class="toclevel-2 tocsection-70"><a href="#DVSDK_Catalog_.28OMAP35xx_BSP_only.29"><span class="tocnumber">3.4</span> <span class="toctext">DVSDK Catalog (OMAP35xx BSP only)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-71"><a href="#Building_Images"><span class="tocnumber">4</span> <span class="toctext">Building Images</span></a>
<ul>
<li class="toclevel-2 tocsection-72"><a href="#Create_an_OS_Design_Using_Platform_Builder"><span class="tocnumber">4.1</span> <span class="toctext">Create an OS Design Using Platform Builder</span></a>
<ul>
<li class="toclevel-3 tocsection-73"><a href="#Using_the_Sample_OS_Design"><span class="tocnumber">4.1.1</span> <span class="toctext">Using the Sample OS Design</span></a></li>
<li class="toclevel-3 tocsection-74"><a href="#Creating_a_New_OS_Design"><span class="tocnumber">4.1.2</span> <span class="toctext">Creating a New OS Design</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-75"><a href="#Building_the_BSP"><span class="tocnumber">4.2</span> <span class="toctext">Building the BSP</span></a>
<ul>
<li class="toclevel-3 tocsection-76"><a href="#Procedure"><span class="tocnumber">4.2.1</span> <span class="toctext">Procedure</span></a></li>
<li class="toclevel-3 tocsection-77"><a href="#Checking_For_Excessive_Image_Size"><span class="tocnumber">4.2.2</span> <span class="toctext">Checking For Excessive Image Size</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-78"><a href="#Output_File"><span class="tocnumber">4.3</span> <span class="toctext">Output File</span></a>
<ul>
<li class="toclevel-3 tocsection-79"><a href="#NK.BIN"><span class="tocnumber">4.3.1</span> <span class="toctext">NK.BIN</span></a></li>
<li class="toclevel-3 tocsection-80"><a href="#XLDRNAND.BIN"><span class="tocnumber">4.3.2</span> <span class="toctext">XLDRNAND.BIN</span></a></li>
<li class="toclevel-3 tocsection-81"><a href="#XLDRUART.nb0"><span class="tocnumber">4.3.3</span> <span class="toctext">XLDRUART.nb0</span></a></li>
<li class="toclevel-3 tocsection-82"><a href="#MLO"><span class="tocnumber">4.3.4</span> <span class="toctext">MLO</span></a></li>
<li class="toclevel-3 tocsection-83"><a href="#EBOOTNAND.BIN"><span class="tocnumber">4.3.5</span> <span class="toctext">EBOOTNAND.BIN</span></a></li>
<li class="toclevel-3 tocsection-84"><a href="#EBOOTSD.nb0"><span class="tocnumber">4.3.6</span> <span class="toctext">EBOOTSD.nb0</span></a></li>
<li class="toclevel-3 tocsection-85"><a href="#RAW_file"><span class="tocnumber">4.3.7</span> <span class="toctext">RAW file</span></a></li>
<li class="toclevel-3 tocsection-86"><a href="#OMAP35x-NAND.RAW"><span class="tocnumber">4.3.8</span> <span class="toctext">OMAP35x-NAND.RAW</span></a></li>
<li class="toclevel-3 tocsection-87"><a href="#AM35x-NAND.RAW"><span class="tocnumber">4.3.9</span> <span class="toctext">AM35x-NAND.RAW</span></a></li>
<li class="toclevel-3 tocsection-88"><a href="#AM33x-NAND.RAW"><span class="tocnumber">4.3.10</span> <span class="toctext">AM33x-NAND.RAW</span></a></li>
<li class="toclevel-3 tocsection-89"><a href="#AM387x-NAND.RAW"><span class="tocnumber">4.3.11</span> <span class="toctext">AM387x-NAND.RAW</span></a></li>
<li class="toclevel-3 tocsection-90"><a href="#Locating_the_Image_Files"><span class="tocnumber">4.3.12</span> <span class="toctext">Locating the Image Files</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-91"><a href="#Booting_the_EVM"><span class="tocnumber">5</span> <span class="toctext">Booting the EVM</span></a>
<ul>
<li class="toclevel-2 tocsection-92"><a href="#Boot_switch_Settings"><span class="tocnumber">5.1</span> <span class="toctext">Boot switch Settings</span></a>
<ul>
<li class="toclevel-3 tocsection-93"><a href="#OMAP35xx_EVM"><span class="tocnumber">5.1.1</span> <span class="toctext">OMAP35xx EVM</span></a></li>
<li class="toclevel-3 tocsection-94"><a href="#AM35xx_EVM"><span class="tocnumber">5.1.2</span> <span class="toctext">AM35xx EVM</span></a></li>
<li class="toclevel-3 tocsection-95"><a href="#AM387x_EVM"><span class="tocnumber">5.1.3</span> <span class="toctext">AM387x EVM</span></a></li>
<li class="toclevel-3 tocsection-96"><a href="#AM335x_EVM"><span class="tocnumber">5.1.4</span> <span class="toctext">AM335x EVM</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-97"><a href="#Booting_from_SD_Memory_Card"><span class="tocnumber">5.2</span> <span class="toctext">Booting from SD Memory Card</span></a></li>
<li class="toclevel-2 tocsection-98"><a href="#Booting_from_NAND_Flash"><span class="tocnumber">5.3</span> <span class="toctext">Booting from NAND Flash</span></a>
<ul>
<li class="toclevel-3 tocsection-99"><a href="#Flashing_the_board_.28OMAP35x_or_AM35x.29_over_UART"><span class="tocnumber">5.3.1</span> <span class="toctext">Flashing the board (OMAP35x or AM35x) over UART</span></a></li>
<li class="toclevel-3 tocsection-100"><a href="#Flashing_the_board_.28AM387x.29_over_UART"><span class="tocnumber">5.3.2</span> <span class="toctext">Flashing the board (AM387x) over UART</span></a></li>
<li class="toclevel-3 tocsection-101"><a href="#Flashing_the_board_.28AM335x.29_over_UART"><span class="tocnumber">5.3.3</span> <span class="toctext">Flashing the board (AM335x) over UART</span></a></li>
<li class="toclevel-3 tocsection-102"><a href="#Flashing_the_board_over_Platform_builder"><span class="tocnumber">5.3.4</span> <span class="toctext">Flashing the board over Platform builder</span></a></li>
<li class="toclevel-3 tocsection-103"><a href="#Flashing_the_board_through_SD_card"><span class="tocnumber">5.3.5</span> <span class="toctext">Flashing the board through SD card</span></a></li>
<li class="toclevel-3 tocsection-104"><a href="#Booting_from_NAND"><span class="tocnumber">5.3.6</span> <span class="toctext">Booting from NAND</span></a></li>
<li class="toclevel-3 tocsection-105"><a href="#Switching_to_XLDR.2FEBOOT_with_a_different_NAND_ECC_.28OMAP3530_and_AM35X_only.29"><span class="tocnumber">5.3.7</span> <span class="toctext">Switching to XLDR/EBOOT with a different NAND ECC (OMAP3530 and AM35X only)</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-106"><a href="#Loading_OS_Images"><span class="tocnumber">6</span> <span class="toctext">Loading OS Images</span></a>
<ul>
<li class="toclevel-2 tocsection-107"><a href="#EVM_Setup"><span class="tocnumber">6.1</span> <span class="toctext">EVM Setup</span></a>
<ul>
<li class="toclevel-3 tocsection-108"><a href="#Download_Images_using_Ethernet"><span class="tocnumber">6.1.1</span> <span class="toctext">Download Images using Ethernet</span></a></li>
<li class="toclevel-3 tocsection-109"><a href="#Download_Images_using_USB_RNDIS"><span class="tocnumber">6.1.2</span> <span class="toctext">Download Images using USB RNDIS</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-110"><a href="#Setup_Platform_Builder"><span class="tocnumber">6.2</span> <span class="toctext">Setup Platform Builder</span></a></li>
<li class="toclevel-2 tocsection-111"><a href="#Configure_Platform_Builder_Connectivity_Options"><span class="tocnumber">6.3</span> <span class="toctext">Configure Platform Builder Connectivity Options</span></a></li>
<li class="toclevel-2 tocsection-112"><a href="#Download_Image"><span class="tocnumber">6.4</span> <span class="toctext">Download Image</span></a></li>
<li class="toclevel-2 tocsection-113"><a href="#Load_OS_image_through_SD_card"><span class="tocnumber">6.5</span> <span class="toctext">Load OS image through SD card</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-114"><a href="#Debugging"><span class="tocnumber">7</span> <span class="toctext">Debugging</span></a>
<ul>
<li class="toclevel-2 tocsection-115"><a href="#Debugging_the_Bootloader"><span class="tocnumber">7.1</span> <span class="toctext">Debugging the Bootloader</span></a></li>
<li class="toclevel-2 tocsection-116"><a href="#Debugging_the_Operating_System"><span class="tocnumber">7.2</span> <span class="toctext">Debugging the Operating System</span></a>
<ul>
<li class="toclevel-3 tocsection-117"><a href="#Image_Configuration"><span class="tocnumber">7.2.1</span> <span class="toctext">Image Configuration</span></a></li>
<li class="toclevel-3 tocsection-118"><a href="#Ethernet_KITL"><span class="tocnumber">7.2.2</span> <span class="toctext">Ethernet KITL</span></a></li>
<li class="toclevel-3 tocsection-119"><a href="#USB_RNDIS_KITL"><span class="tocnumber">7.2.3</span> <span class="toctext">USB RNDIS KITL</span></a></li>
<li class="toclevel-3 tocsection-120"><a href="#Serial_Debug_Messages"><span class="tocnumber">7.2.4</span> <span class="toctext">Serial Debug Messages</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-121"><a href="#Getting_started"><span class="tocnumber">8</span> <span class="toctext">Getting started</span></a>
<ul>
<li class="toclevel-2 tocsection-122"><a href="#OMAP35xx_EVM_overview"><span class="tocnumber">8.1</span> <span class="toctext">OMAP35xx EVM overview</span></a></li>
<li class="toclevel-2 tocsection-123"><a href="#AM35xx_EVM_overview"><span class="tocnumber">8.2</span> <span class="toctext">AM35xx EVM overview</span></a></li>
<li class="toclevel-2 tocsection-124"><a href="#DVI_Functionality_Setup"><span class="tocnumber">8.3</span> <span class="toctext">DVI Functionality Setup</span></a></li>
<li class="toclevel-2 tocsection-125"><a href="#Flashing_the_board"><span class="tocnumber">8.4</span> <span class="toctext">Flashing the board</span></a></li>
<li class="toclevel-2 tocsection-126"><a href="#Video_Input_Functionality_Setup"><span class="tocnumber">8.5</span> <span class="toctext">Video Input Functionality Setup</span></a></li>
<li class="toclevel-2 tocsection-127"><a href="#RTC_Demo"><span class="tocnumber">8.6</span> <span class="toctext">RTC Demo</span></a>
<ul>
<li class="toclevel-3 tocsection-128"><a href="#Location_of_Test"><span class="tocnumber">8.6.1</span> <span class="toctext">Location of Test</span></a></li>
<li class="toclevel-3 tocsection-129"><a href="#Using_the_Wakeme_Application"><span class="tocnumber">8.6.2</span> <span class="toctext">Using the Wakeme Application</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-130"><a href="#CAN_Setup_and_Demo"><span class="tocnumber">8.7</span> <span class="toctext">CAN Setup and Demo</span></a>
<ul>
<li class="toclevel-3 tocsection-131"><a href="#Canbench"><span class="tocnumber">8.7.1</span> <span class="toctext">Canbench</span></a></li>
<li class="toclevel-3 tocsection-132"><a href="#CanbenchRX"><span class="tocnumber">8.7.2</span> <span class="toctext">CanbenchRX</span></a></li>
<li class="toclevel-3 tocsection-133"><a href="#CanDemoMaster.2FCanDemoEcho"><span class="tocnumber">8.7.3</span> <span class="toctext">CanDemoMaster/CanDemoEcho</span></a></li>
</ul>
</li>
</ul>
</li>
<li class="toclevel-1 tocsection-134"><a href="#Sample_Applications"><span class="tocnumber">9</span> <span class="toctext">Sample Applications</span></a>
<ul>
<li class="toclevel-2 tocsection-135"><a href="#Shell_Commands"><span class="tocnumber">9.1</span> <span class="toctext">Shell Commands</span></a></li>
<li class="toclevel-2 tocsection-136"><a href="#Silverlight_Demos"><span class="tocnumber">9.2</span> <span class="toctext">Silverlight Demos</span></a>
<ul>
<li class="toclevel-3 tocsection-137"><a href="#WinCE_6.0_BSP"><span class="tocnumber">9.2.1</span> <span class="toctext">WinCE 6.0 BSP</span></a></li>
<li class="toclevel-3 tocsection-138"><a href="#WEC7_BSP"><span class="tocnumber">9.2.2</span> <span class="toctext">WEC7 BSP</span></a></li>
</ul>
</li>
<li class="toclevel-2 tocsection-139"><a href="#PowerVR_Demos"><span class="tocnumber">9.3</span> <span class="toctext">PowerVR Demos</span></a></li>
<li class="toclevel-2 tocsection-140"><a href="#Silverlight_based_video_player_.28WEC7_only.29"><span class="tocnumber">9.4</span> <span class="toctext">Silverlight based video player (WEC7 only)</span></a></li>
<li class="toclevel-2 tocsection-141"><a href="#Sample_DShow_Player_Application_.28ceplayit.29_.28WEC7_only.29"><span class="tocnumber">9.5</span> <span class="toctext">Sample DShow Player Application (ceplayit) (WEC7 only)</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-142"><a href="#Support_for_BeagleBone"><span class="tocnumber">10</span> <span class="toctext">Support for BeagleBone</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Contents of this guide have been updated to include Release 2.30. Users of earlier releases can still use this guide but support for new platforms (AM387x and AM335x) is only available in Release 2.30.
</p><p>This document provides information for the user of the Microsoft<sup>速</sup> Windows<sup>速</sup> Embedded CE 6.0 R3 BSP (BSP) or the Microsoft速 Windows速 Embedded Compact 7 BSP (BSP) for the Texas Instruments OMAP<sup>TM</sup>35xx Evaluation Module (EVM), AM35xx Evaluation Module (EVM), AM387x EVM and AM335x General Purpose EVM. This combined offering is referred as "TI ARM_A8 BSP" in this document. Instructions are provided for installing the BSP, building images and loading images onto the EVM. 
</p>
<h3><span class="mw-headline" id="Requirements">Requirements</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=2" title="Edit section: Requirements">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There are many requirements for software, hardware, infrastructure and user experience level that should be met prior to working with EVM BSP and Windows CE. 
</p>
<h3><span class="mw-headline" id="Required_Experience">Required Experience</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=3" title="Edit section: Required Experience">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This document is not intended for novice Windows CE users. Readers unfamiliar with Windows CE are encouraged to seek training and to study the documentation included with Windows CE before using the TI_ARM_A8 BSP and related documentation. 
</p>
<h3><span class="mw-headline" id="Required_Software">Required Software</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=4" title="Edit section: Required Software">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following software must be installed prior to installing the TI ARM_A8 BSP. Note that the software must be installed in the order listed. Contact Microsoft for more information about the listed software and known issues with the installation process: 
[
For BSP 1.x: 
</p>
<dl><dd><ul><li>Visual Studio 2005 (VS2005)</li>
<li>Visual Studio SP1 (Service Pack 1)</li>
<li>Windows Embedded CE 6.0 (Plug In for Visual Studio 2005)</li>
<li>Windows CE 6.0 SP1 (Service Pack 1)</li>
<li>Windows CE 6.0 R2 Update</li>
<li>Windows CE 6.0 Cumulative Product Update Rollup Package 2009 (QFEs)</li>
<li>Windows CE 6.0 QFEs through November 2010</li></ul></dd></dl>
<dl><dd>Users new to Windows Embedded CE6 can obtain evaluation versions of the required software from Microsoft <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/embedded/aa731407.aspx">http://msdn.microsoft.com/en-us/embedded/aa731407.aspx here</a>.</dd></dl>
<p>For BSP&#160;2.x 
</p>
<dl><dd><ul><li>Microsoft Visual Studio 2008 Professional Edition<br /></li>
<li>Microsoft Visual Studio 2008 Professional Service Pack 1<br /></li>
<li>Windows Embedded Compact 7<br /></li>
<li>Windows Embedded Compact 7 Updates - update 1 to update 4 (Oct 2011)<br /></li></ul></dd></dl>
<h3><span class="mw-headline" id="Required_JTAG_Tools">Required JTAG Tools</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=5" title="Edit section: Required JTAG Tools">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>There are no JTAG tools required for use with above mentioned EVMs. Texas Instruments provides a tool that can be used to communicate with the internal boot ROM on the OMAP35xx processor called <u>pserial</u>. This tool can be used to program the bootloader into the EVM if there is no functional bootloader available. 
</p>
<h3><span class="mw-headline" id="Required_Network_Capabilities">Required Network Capabilities</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=6" title="Edit section: Required Network Capabilities">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The EVM supports communications with the development PC running Platform Builder using either Ethernet or USB RNDIS. Platform Builder requires the device to be on the same subnet as the development PC. The bootloader and kernel support both manual and dynamic IP address assignment. DHCP is enabled by default; this can be changed using the bootloader menu. 
</p>
<h3><span class="mw-headline" id="Notation_Conventions">Notation Conventions</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=7" title="Edit section: Notation Conventions">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following section describes terms used in this document. 
</p><p><span style="color: teal;"> <b>  CPU Name </b> </span> 
</p><p>This document is written to support a number of EVMs mentioned above. The term OMAP35xx will be used to indicate one of the CPU names (OMAP35xx family and AM/DM37x family) supported by the OMAP35xx EVM; AM35xx, AM387x and AM335x will be used to indicate one of the CPU names supported by their respective EVMs. When working with a particular CPU type, the term OMAP3530 should be understood as being the name of the CPU. 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td><b>CPU family</b>
</td>
<td><b>EVM</b>
</td>
<td><b>Supported CPU name</b>
</td></tr>
<tr>
<td>OMAP35xx
</td>
<td>OMAP35xx EVM
</td>
<td>OMAP3503/3515/3525/3530
</td></tr>
<tr>
<td>AM/DM37xx
</td>
<td>OMAP35xx EVM
</td>
<td>DM3730/3725, AM3715/3703
</td></tr>
<tr>
<td>AM35xx
</td>
<td>AM35xx EVM
</td>
<td>AM3517/3505
</td></tr>
<tr>
<td>AM387x
</td>
<td>AM387x EVM (Baseboard only)
</td>
<td>AM387x
</td></tr>
<tr>
<td>AM335x
</td>
<td>AM335x EVM (General Purpose, Profile 0)
</td>
<td>AM335x
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  BSP Folder </b> </span> 
</p><p>This document is written to support the following EVMs: <br /> 
</p>
<dl><dd><ul><li>OMAP35x EVM <br /></li></ul></dd></dl>
<dl><dd><ul><li>AM35x EVM <br /></li></ul></dd></dl>
<dl><dd><ul><li>AM387x EVM <br /></li></ul></dd></dl>
<dl><dd><ul><li>AM335x EVM <br /></li></ul></dd></dl>
<p>The BSP folders for these EVMs are as follows: 
</p>
<dl><dd><ul><li>OMAP35x EVM: platform/EVM_OMAP3530<br /></li>
<li>AM35x EVM: platform/AM35X_BSP<br /></li>
<li>AM387x EVM: platform/AM387x_BSP<br /></li>
<li>AM335x EVM: platform/AM33x_BSP<br /></li></ul></dd></dl>
<p>In this document, the term BSP Folder will be used to refer to one of the above folders depending upon the context.<br /> 
</p><p><span style="color: teal;"> <b>  TI EVM </b> </span> 
</p><p>When not explicitly specified, TI EVM refers to any of the above mentioned EVMs. 
</p><p>OMAP35xx EVM also includes support for AM37x/DM37x processor family. 
</p><p><span style="color: teal;"> <b>  WINCE OS </b> </span> 
</p><p>When not explicitly specified, this content applies to both WinCE 6.0 R3 and WEC 7. For demonstration purposes, CE6 examples may be used. Unless otherwise specified in that section, similar principles apply for WEC 7 for those examples. Please use ARMV7 for CE7 and ARMV4I for CE6. When version number is not explicity mentioned, then 'Windows Embedded CE' and 'WinCE' terms refer to both WinCE 6.0 and WEC 7 in this document. When version number is not explicity mentioned, then 'Visual Studio' and 'VS' terms refer to both VS2005 and VS2008 in this document. 
</p><p><span style="color: teal;"> <b>  BSP Version </b> </span> 
</p><p>BSP 1.x releases are based on Windows Embedded CE 6.0 whereas BSP 2.x releases are based on Windows Embedded Compact 7. <br />
</p><p><span style="color: teal;"> <b>  Other Terms </b> </span> 
</p><p>Knowledge of Visual Studio, Platform Builder and Windows Embedded CE terms is assumed. The user should consult Platform Builder documentation for a definition of any unfamiliar terms.
</p>
<h3><span class="mw-headline" id="Related_Documentation">Related Documentation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=8" title="Edit section: Related Documentation">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This section describes other documentation that should be referenced when working with the TI ARM_A8 BSP. 
</p><p><span style="color: teal;"> <b>  Visual Studio / Platform Builder Documentation </b> </span> 
</p><p>This documentation is the primary reference material for understanding the Windows Embedded CE development system. Familiarity with this material is essential to successful Windows CE development using the EVM. 
</p><p><span style="color: teal;"> <b>  EVM Board Schematics </b> </span> 
</p><p>Schematics for the EVMs are included as part of the platform documentation. 
</p><p><br />
</p>
<h2><span class="mw-headline" id="BSP_Features">BSP Features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=9" title="Edit section: BSP Features">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This chapter discusses features of the TI ARM_A8 BSP. 
</p>
<h3><span id="Bootloader_(EBOOT)"></span><span class="mw-headline" id="Bootloader_.28EBOOT.29">Bootloader (EBOOT)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=10" title="Edit section: Bootloader (EBOOT)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Bootloader_and_Initialization_Sequence">Bootloader and Initialization Sequence</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=11" title="Edit section: Bootloader and Initialization Sequence">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The TI EVM board boots from Flash memory using the internal boot ROM of the TI ARM_A8 processor. The bootloader architecture consists of an initial bootstrap loader called the XLDR and a secondary loader called EBOOT. The internal boot ROM performs a minimum hardware setup, and then copies the XLDR from the first good block of Flash memory to a fixed location in internal SRAM. The boot ROM then jumps to the entry point of the XLDR. 
</p><p>The XLDR is a BSP specific bootstrap loader whose function is to do basic hardware initialization and copy the second stage, full featured EBOOT from Flash memory into RAM for execution. The XLDRsize is limited by the size of internal SRAM and does not implement any features other than what are needed for bootstrap. 
</p><p><b>Note: the BSP only builds the XLDR in Release configurations. Debug configurations use un-optimized code libraries that cause the XLDR to exceed the allotted size.</b> 
</p><p>The primary development bootloader is called EBOOT. The primary purpose of the EBOOT loader is to load the operating system image from a specified source and launch it. EBOOT also provides a serial based user interface that allows a developer to control various aspects of the loader behavior. 
</p>
<h4><span class="mw-headline" id="Low_Level_Initialization">Low Level Initialization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=12" title="Edit section: Low Level Initialization">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Low level hardware initialization is performed in the XLDR as part of its bootstrap requirements. This includes multifunction pin configuration, clock setup, chip select timings, and DDR configuration. The file<i>SRC\BOOTLOADER\XLDR\platform.c </i>contains the routines responsible for initialization. This file must be modified for every hardware platform. The \INC directory contains a number of header files with defines that control many of the timing and memory map related initialization parameters. 
</p>
<h4><span class="mw-headline" id="Device_Configuration_Parameters">Device Configuration Parameters</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=13" title="Edit section: Device Configuration Parameters">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The bootloader provides user accessible configuration parameters that control various aspects of bootloader behavior. These parameters are primarily used during development to control where the OS image comes from, network configuration etc. Changes to the configuration parameters can optionally be saved to nonvolatile storage (Flash memory) and preserved across power cycles. The configuration parameters can be accessed by the user via the serial user interface. 
</p><p>For BSP 2.x releases, the configuration parameters can be saved and retrieved from flash even for SD bootloader. For AM335X and AM387X, instead of saving to NAND flash, you can select to save the configuration parameters to a binary file on SD card (eboot.cfg) by enabling the flag BSP_SAVE_EBOOTCFG_TO_SD in environment variable. This option is only available for SD bootloader.
</p>
<h4><span class="mw-headline" id="Serial_User_Interface">Serial User Interface</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=14" title="Edit section: Serial User Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>EBOOT supports a user interface over the serial port exposed on the TI EVMs as shown in the following table through a RS232 connector. 
</p>
<table cellspacing="1" cellpadding="1" width="600" border="1">

<tbody><tr>
<td align="center" bgcolor="#d9d9d9"><b>EVM</b>
</td>
<td align="center" bgcolor="#d9d9d9"><b>Debug port on EVM</b>
</td>
<td align="center" bgcolor="#d9d9d9"><b>CPU UART</b>
</td></tr>
<tr>
<td align="center">OMAP35x
</td>
<td align="center">main board::port3
</td>
<td align="center">UART3
</td></tr>
<tr>
<td align="center">AM35x
</td>
<td align="center">main board::port3
</td>
<td align="center">UART3
</td></tr>
<tr>
<td align="center">AM387x
</td>
<td align="center">main board::port0
</td>
<td align="center">UART0
</td></tr>
<tr>
<td align="center">AM335x
</td>
<td align="center">base board::port0
</td>
<td align="center">UART0
</td></tr></tbody></table>
<p><br />
</p><p>The actual physical CPU UART corresponding to this connector is&#160;configured to run with the following configuration: 
</p>
<ul><li>115200 baud</li>
<li>8 data bits</li>
<li>1 stop bit</li>
<li>No parity</li></ul>
<p>The UART3 connector is wired as a DTE device and requires a null modem cable to communicate with a terminal program on a Host PC. 
</p><p>Note: The available options on eboot menu depends on which eboot version is running (NAND, SD, etc)
</p><p><span style="color: teal"><b>Show Current Settings</b> </span>
</p><p>This menu option provides a summary of the current bootloader configuration parameters. These include the current bootloader and OS kernel debug transport, device name, bootloader/kernel network configuration, and Ethernet MAC address. 
</p><p>Note: the settings shown are current values and have not necessarily been saved to nonvolatile storage. If modified configuration parameters are not manually saved to flash the changes are lost on a reboot. 
</p><p><span style="color: teal"><b>Select Boot Device</b> </span>
</p><p>This menu option configures the bootloader to load the OS image from the specified source. The options include downloading an OS image from Platform Builder over Ethernet (default), USB RNDIS, SD Card or loading the image from the OS partition on NAND Flash. The available choices depend on whether its SD or NAND version of EBOOT. 
</p><p><span style="color: teal"><b>Select Debug Device</b> </span>
</p><p>This menu option configures the KITL transport that will be used in a KITL enabled OS image. The options include Ethernet (default) or USB RNDIS. 
</p><p><span style="color: teal"><b>Network Settings</b> </span>
</p><p>This menu option configures various network settings used by the bootloader and kernel transports. It also includes a mechanism to program the MAC address into the EEPROM associated with the SMSC LAN9115 network controller (OMAP35x EVM). 
</p><p>On AM35x EVM, MAC address of Internal EMAC is obtained from read only register. When booting from NAND, this MAC address can be changed and saved in NAND. 
</p><p>On AM387x and AM33x EVM, MAC address of Internal EMAC is obtained from read only register. 
</p><p>The default network configuration uses DHCP, and therefore requires a DHCP server to be present on the subnet. Note that this network configuration applies only to bootloader and OS kernel KITL network communications. The regular Ethernet NDIS miniport driver has a completely independent configuration. 
</p><p><span style="color: teal"><b>SDCard Settings</b> </span>
</p><p>This menu option is only available with SD bootloader. This option allows you to change the kernel filename (default: nk.bin) that the bootloader should use to load the kernel. 
</p><p><span style="color: teal"><b>Flash Management</b> </span>
</p><p>This menu option provides a mechanism to manage the Flash memory on the EVM. Flash blocks can be reserved, erased, etc. These options are primarily available for diagnostic purposes and should not need to be used during development. 
</p><p>This menu also contains a mechanism to do a low level Flash format. The format operation partitions the non-reserved portions of Flash (area beyond the bootloader) into an OS partition and a file system partition. The size of the OS partition is fixed in a header file in the <i>\SRC\INC </i>directory. 
</p><p>The bootloader will automatically reformat the Flash during initialization if it detects that the partition does not exist or does not match the configured size (a new bootloader flashed with a changed OS partition size parameter). 
</p><p><span style="color: teal"><b>Set Device ID</b> </span>
</p><p>This menu option provides a mechanism to set the device ID. The device ID is used for various identification purposes. It serves as an input in creating the Universally Unique Identifier (UUID), creating a hardware entropy value etc. 
</p><p><span style="color: teal"><b>Save Settings</b> </span>
</p><p>This menu option provides a mechanism to save the current settings to nonvolatile storage. The settings will be retained across power cycles. 
</p><p>Note: For BSP 1.x releases, this option is not applicable when the system is booted from SD card. For BSP 2.x, when using SD bootloader, using this option results in saving of current settings to NAND flash. 
</p><p>For AM335X and AM387X BSP, users have the option to save the settings to a binary file on SD card instead of NAND flash. They need to enable the flag BSP_SAVE_EBOOTCFG_TO_SD in environment variable and re-build BSP. When the bootloader and kernel is built with this flag set, saving the settings is a 2 step process. In the first step, the user needs to select "Save Settings" from the eboot menu. The SD bootloader will not directly save the settings to the file but will appropriately set the OAL flag. Do not reboot the board but let the kernel boot-up. In this second step, the kernel on boot-up will recognize the OAL flag and will save the settings to the file on the SD card. Now if the user reboots the board, the settings would be retrieved and restored from the file on SD card (eboot.cfg). A small application &lt;bsp&gt;_ebootCfg.exe in the kernel does the magic of saving eboot settings to the SD card.  
</p><p><span style="color: teal"><b>Enable/Disable OAL Retail Messages</b> </span>
</p><p>This menu option enables/disables output of RetailMessages (strings printed using RETAILMSG() API) onto the serial port. This is used only for NON-KITL builds. For KITL builds, the retail messages are sent to the Platform builder window. 
</p><p><span style="color: teal"><b>Select Display Resolution</b> </span>
</p><p>This menu option lets the user select which display mode to use: LCD or DVI. Moreover, user can select the desired DVI resolution. The selected value is used by bootloader and the kernel to display content. This menu option eliminates the need for different bootloader/kernel for different display resolutions. This option is available only for OMAP35x and AM35x BSPs. AM33x BSP doesnt support multiple display resolutions except for the default (LCD 800x480). AM387X BSP provides compile time options via BSP catalog to change display resolutions.  
</p><p><span style="color: teal"><b>Select OPP Mode</b> </span>
</p><p>This menu option lets the user select the CPU frequency at which the kernel will run. This is same as "do opm" command but this doesnt require DVFS to be enabled in the kernel. This is a boot-time option available for OMAP35x, AM35x and AM335x BSP only. For OMAP35x and AM35x BSPs, to change the CPU frequency once the kernel is up and running, you will have to enable DVFS during build time and use "do opm" command as before. DVFS is not supported on AM335x and AM387x. Moreover, this option is not available for AM387X BSP.
</p>
<h3><span class="mw-headline" id="NAND_Flash_Organization">NAND Flash Organization</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=15" title="Edit section: NAND Flash Organization">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The NAND Flash is divided into 3 regions: Reserved area (bootloader), OS partition, and file system partition. All regions start on NAND chip block boundaries. 
</p>
<h4><span class="mw-headline" id="Supported_NAND_chip">Supported NAND chip</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=16" title="Edit section: Supported NAND chip">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Please refer to EVM documentation to understand NAND chips populated on different platforms. Note that some versions of EVM hardware contain OneNAND flash and these devices have slightly different Flash geometry. 
</p><p><span style="color: teal;"><b>OMAP35xx EVM</b> </span> 
</p><p>The NAND chip is installed on Processor card of OMAP35xx EVM. The OMAP35xx BSP supports following NAND parts: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Manufacturer ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Device ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Blocks</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Sectors per block</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Sector Size</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Bus width</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Total Size</b>
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xBA
</td>
<td align="center">2048
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">256 Mbytes
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xBC
</td>
<td align="center">4096
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">512 Mbytes
</td></tr>
<tr>
<td align="center">0xAD (Hynix)
</td>
<td align="center">0xBC
</td>
<td align="center">4096
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">512 Mbytes
</td></tr></tbody></table>
<p><span style="color: teal;"><b>AM35xx EVM</b> </span> 
</p><p>The AM35x BSP supports following NAND parts: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Manufacturer ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Device ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Blocks</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Sectors per block</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Sector Size</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Bus width</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Total Size</b>
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xBA
</td>
<td align="center">2048
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">256 Mbytes
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xBC
</td>
<td align="center">4096
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">512 Mbytes
</td></tr></tbody></table>
<p><span style="color: teal;"><b>AM387x EVM</b> </span> 
</p><p>The AM387x BSP supports following NAND part: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Manufacturer ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Device ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Blocks</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Sectors per block</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Sector Size</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Bus width</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Total Size</b>
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xCA
</td>
<td align="center">2048
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x16
</td>
<td align="center">256 Mbytes
</td></tr></tbody></table>
<p><span style="color: teal;"><b>AM335x EVM</b> </span> 
</p><p>The AM387x BSP supports following NAND part: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Manufacturer ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Device ID</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Blocks</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Nb of Sectors per block</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Sector Size</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Bus width</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Total Size</b>
</td></tr>
<tr>
<td align="center">0x2C (Micron)
</td>
<td align="center">0xDA
</td>
<td align="center">2048
</td>
<td align="center">64
</td>
<td align="center">2048
</td>
<td align="center">x8
</td>
<td align="center">256 Mbytes
</td></tr></tbody></table>
<h4><span id="Reserved_Area_(Bootloader/Configuration_Parameters)"></span><span class="mw-headline" id="Reserved_Area_.28Bootloader.2FConfiguration_Parameters.29">Reserved Area (Bootloader/Configuration Parameters)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=17" title="Edit section: Reserved Area (Bootloader/Configuration Parameters)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The reserved area is located at the beginning of the NAND Flash and contains the XLDR, EBOOT, and configuration parameters. The size of the reserved area is dictated by the size of EBOOT and the requirements imposed on the XLDR by the internal boot ROM. 
</p><p>The internal boot ROM will attempt to load the XLDR from block 0. If an error occurs, the boot ROM will attempt to load from the next block up to a maximum of 4 blocks. This mechanism requires the XLDR to be located in each of the first 4 NAND blocks. For ease of implementation the BSP places the XLDR in the first four ===good ===blocks which could result in a copy of the XLDR being located beyond the first 4 physical blocks if a bad block is encountered. Note that the XLDR itself requires much less than a full block but the first four complete blocks are still used due to boot ROM requirements. 
</p><p>EBOOT is located in the blocks immediately following the last XLDR copy. Currently the EBOOT implementation requires 2 good blocks. Note that entire blocks must be reserved even though EBOOT may only require a small portion of the last block. 
</p><p>The configuration parameters are stored in the last page of the last EBOOT block; they do not take up an entire block themselves. The rest of the block containing EBOOT is saved and restored when the configuration parameters are updated. 
</p><p>The total number of blocks in the reserved area is the sum of the 4 XLDR blocks and the 2 EBOOT blocks, plus any bad blocks that are encountered in this region. Bad blocks are skipped and the next good block selected in the Flash algorithms. 
</p>
<h4><span class="mw-headline" id="NAND_ECC_support">NAND ECC support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=18" title="Edit section: NAND ECC support">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>There are 3 supported ECC modes by OMAP35x, AM35X BSPs: Hamming 1 bit ECC, BCH 4 bit ECC and BCH 8 bit ECC.  ECC mode can be selected through Catalog. 
</p>
<dl><dd><ul><li>Third Party \ BSP \ BSP:ARMV4I \ Drivers \ NAND \BCH 4 bit ECC</li>
<li>Third Party \ BSP \ BSP:ARMV4I \ Drivers \ NAND \BCH 8 bit ECC</li>
<li>Third Party \ BSP \ BSP:ARMV4I \ Drivers \ NAND \Hamming 1 bit ECC</li></ul></dd></dl>
<p>Please Note that only the following chip revisions support BCH 4 bit correctly: 
</p>
<dl><dd><ul><li>AM35x PG1.1 onwards</li>
<li>AM/DM37x PG1.1 onwards &#160;</li></ul></dd></dl>
<p>AM387x and AM33x BSP supports only BCH 8 bit ECC with hardware error locator (ELM) mode.
</p><p>ECC mode is determined from Eboot (compile time option), then the information is passed to Kernel. Before switching between different ECC modes, it is recommended to erase block 0-15.
</p>
<h4><span class="mw-headline" id="OS_Partition">OS Partition</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=19" title="Edit section: OS Partition">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The OS partition follows the reserved area and contains the OS image. This partition is created using the BOOTPART APIs. The partition is marked as a PART_BOOTSECTION indicating that it contains the operating system image. This partition type also prevents the Flash file system code from attempting to manage this area as part of its wear leveling algorithms. 
</p><p>The OS partition is created by the bootloader with a low level format during system initialization if it does not already exist. A low level format is also automatically performed if the bootloader detects an existing OS partition with a size different from what the bootloader expects. The OS partition size is set at compile time in the file<i>\SRC\INC\image_cfg.h</i>. 
</p><p><b>Note: A low level format destroys all data on the flash outside of the reserved area.</b> 
</p><p>The Master Boot Record (MBR) is also created during the low level format and defined to be located in the first sector past the reserved area. Therefore it is located at the beginning of the OS partition. The Master Boot Record contains information describing the layout of the NAND flash to the Flash file system driver. 
</p>
<h4><span class="mw-headline" id="File_System_Partition">File System Partition</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=20" title="Edit section: File System Partition">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The File System partition takes up the remainder of the NAND flash. It is also created during the low level format operation in the bootloader. The File System partition is marked as a FAT partition and can be automatically mounted by the operating system. 
</p>
<h3><span class="mw-headline" id="OAL_Features">OAL Features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=21" title="Edit section: OAL Features">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This section provides a brief overview of some of the significant OAL features included in the TI BSP. The BSP implements a production-quality OAL. OAL reference information is available <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee479158.aspx">here</a>. 
</p>
<h4><span class="mw-headline" id="Features">Features</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=22" title="Edit section: Features">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Summary </b></span>
</p><p>The OAL implementation includes support for the following SOC features and functionality: 
</p>
<ul><li>Boot parameters (passed from boot-loader)</li>
<li>ARM cache (instruction and data, write buffer)</li>
<li>Interrupt controller (including GPIO interrupts)</li>
<li>Timer (1ms fixed system tick)  uses Timer 1 (Timer 3 for AM335X)&#160;</li>
<li>Real Time clock from external TPS65950 chip for OMAP35xx EVM</li>
<li>Real Time clock from external S35390 chip for AM35xx EVM</li>
<li>Real Time clock from internal on-chip module for AM335X and AM387X EVMs</li>
<li>MMU</li>
<li>System IO control</li>
<li>Kernel profiler  uses Timer 2</li>
<li>Serial debug support</li>
<li>KITL connection over Ethernet (interrupt or polled transport), and USB RNDIS</li>
<li>VMINI support</li>
<li>Library abstractions (GPIO, I2C, Clocks, Pad Configuration)</li>
<li>Watchdog Timer (WDT2)</li>
<li>Power management:</li>
<li>CPU idle support (ARM wait for interrupt in OEMIdle())</li>
<li>Low-Power suspend state</li></ul>
<p><span style="color: teal"><b>Boot parameters </b></span>
</p><p>When loading the kernel, a set of parameters are passed from the bootloader to the kernel for specific configuration. These parameters are defined under the <i>BSP_ARGS</i> structure which can be found under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\INC\args.h 
</p><p>This structure content is filled up by EBOOT at the address defined by I<i>MAGE_SHARE_ARGS_CA</i> located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\INC\image_cfg.h 
</p><p>The kernel then reads this set of parameters for configuring the OAL and some features that are specific to the BSP. 
</p><p><span style="color: teal"><b>Interrupt controller</b></span> 
</p><p>&lt;span style="color: teal"&lt;/span&gt;The CPUs interrupt controller is accessed by the OAL to provide interrupt management to other OAL libraries and device drivers. The CPU specific behavior of the interrupt management is located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI\OAL\OMAP_INTR 
</p><p>For AM335X CPU this code is located under: 
</p><p>&lt;WINCEROOT&gt;\platform\common\src\soc\COMMON_TI_V1\AM33X\OAL\INTR\ 
</p><p>For AM387X CPU this code is located under: 
</p><p>&lt;WINCEROOT&gt;\platform\AM387X_BSP\SRC\oal\intr\ 
</p><p>It provides interrupt management for on chip controllers and GPIO interrupts. Drivers can create Interrupt Service Routines using the OAL interrupt management following the guidelines described <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486211.aspx">here</a>. 
</p><p><br />Custom handling of interrupts that are specific to this platform is located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\OAL\OALLIB\intr.c 
</p><p><span style="color: teal"><b>System timer </b></span>
</p><p>The scheduling mechanism of the kernel is based on a system timer running at a fixed rate of 1 kHz. The OAL provides support for generating an interrupt every millisecond using an on chip General Purpose Timer. The source code used to provide this time base is located under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI\OAL\OMAP_GTP_TIMER\TIMER\timer.c</i> 
</p><p>The General Purpose Timer used as the system timer is defined at the BSP level in the <i>BSPGetSysTimerDevice</i> function located under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\</i>&lt;BSP Folder&gt;\<i>\SRC\BSP_COMMON\BSPCFG\bspcfg.c</i> 
</p><p><span style="color: teal"><b>Real Time Clock </b></span>
</p><p>The devices local time and date are referenced as "real time", which is generated by the onboard RTC chip. On OMAP35xx EVM, the RTC is inside TPS65950 companion chip is accessed via SPI. On AM35xx EVM, the RTC is sourced from on board S35390 chip. The AM335x and AM387x use internal on-chip RTC module. The time value is read from this chip whenever the <i>OEMGetRealTime</i> function is called by the system and is modified when the kernel calls <i>OEMSetRealTime</i>. At boot-up the OAL checks from the RTC if it has a valid value and then reads it to update the systems time and date accordingly. If the RTC did not keep a valid value, which is mostly due to power shortage, then default time and date will be set. 
</p><p>The RTC is also responsible for generating interrupt on an alarm event. An application can for instance call the <i>CeRunAppAtTime</i> function to start a process at a given time. The RTC will be in charge of generating an interrupt at that given time for the kernel to run the specified application. 
</p><p>For AM35x, it is also possible to use the RTC as a wake up source for the suspend mode. This way one can put the platform to low power suspend mode and ask the RTC to generate an interrupt that will wake up the platform causing it to resume after a given amount of time. This behavior requires the <i>BSP_RTC_WAKES_CPU</i> variable to be set using the catalog item labeled "External RTC wake up". 
</p><p>For AM335x, RTC can be used as a wakeup source as well. See wiki on <a href="Power_Management_in_SA_WINCE_BSP.html" title="Power Management in SA WINCE BSP">Power Management in SA</a>.
</p><p>The source code implementing the real time mechanism using the TPS65950 can be found under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\<i>COMMON_TI_V1\TPS659XX\OALRTC\rtc.c</i> 
</p><p>The source code implementing the real time mechanism using the S35390 chip can be found under: 
</p><p><i>&lt;</i>WINCEROOT<i>&gt;\</i>PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI\OAL\S35390_OALRTC\oalrtc.c 
</p><p>The source code implementing the real time mechanism using&#160;on-chip AM335x and AM387x module&#160;can be found under: 
</p><p><i>&lt;</i>WINCEROOT<i>&gt;</i>\platform\common\src\soc\COMMON_TI_V1\COMMON_TI_AMXX\OAL\OALRTC\oalrtc.c 
</p><p><span style="color: teal"><b>Kernel Profiler </b></span>
</p><p>A high performance timer is needed by the kernel to generate Monte Carlo profiling logs. When profiling is on, an interrupt is generated at high frequency to observe the function being currently executed and provide statistics on the amount of time being spent in each function called during the profiling time. The General Purpose Timer used by the OMAP35x BSP to generate this interrupt is defined by the <i>BSPGetGPTPerfDevice</i> function under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BSP_COMMON\BSPCFG\bspcfg.c</i> 
</p><p>Refer to the following <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa935865.aspx">article</a> to learn how to use the kernel profiler: 
</p><p><span style="color: teal"><b>Serial Debug Messages </b></span>
</p><p>The OAL uses the same serial port (CPU UART3) and configuration as the bootloader for serial debug messages. All debug messages are sent to the serial port if KITL is not enabled and if the "Enable/Disable OAL Retail Messages" option has been selected in EBOOTs menu. When KITL is enabled some low level debug messages still appear on the serial port instead of over the KITL link. The regular serial driver must not be allowed to conflict with the debug serial port. The serial driver must be disabled for UART3 by unchecking the OS Design catalog item labeled "UART3 driver". However UART3 can be used a regular serial port driver if the OAL Retail messages have been disabled from EBOOT or if the <i>OEMDeinitDebugSerial</i> is called by the OAL. 
</p><p>NOTE: AM335x EVM and AM387x EVM uses UART1 as the debug serial port. 
</p><p>The serial debug port can be changed for another UART by changing the <i>debugUartCfg</i> structure inside: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BSP_COMMON\BSPCFG\bspcfg.c</i> 
</p><p>Same rules as per UART3 apply if the serial debug port is changed to another UART. 
</p><p><span style="color: teal"><b>KITL </b></span>
</p><p>The BSP supports debug connections to Platform Builder over Ethernet or USB RNDIS using the Kernel Independent Transport Layer (KITL). The KITL link allows Platform Builder to communicate with the device providing debug message services, kernel debugger support, target control, Release directory file system, and Remote Tools support. The desired KITL transport is selected via the serial bootloader menu. 
</p><p>The KITL link will be enabled when the KITL OS component is included in the image. This can be done in either debug or retail configuration by ensuring the IMGNOKITL environment variable is not set. It is important to note that if KITL is included in the image and active it requires a connection to Platform Builder running on the Host PC. 
</p><p>The network section of the bootloader serial menu provides an option to disable the KITL link even if the KITL component is included in the OS image. This allows the same image to support both KITL-enabled and regular builds. The user can decide at run time whether to activate the KITL connection or not. The KITL option is enabled by default so any image that includes KITL will attempt to connect to Platform Builder across the KITL link. 
</p><p>The KITL transports (Ethernet and USB RNDIS) are built directly into the OAL and are dedicated for use by the kernel. These transports do not use the regular NDIS miniport driver (in the case of Ethernet) or the USB Function controller driver (in the case of USB RNDIS). The regular driver must not be allowed to run simultaneously with the KITL transport or they will both contend for the same hardware resources. These drivers are automatically disabled when the KITL transport is used. 
</p><p><span style="color: teal"><b>VMINI </b></span>
</p><p>The SMSC LAN9115 or Internal NDIS miniport driver is not permitted to load if the Ethernet KITL transport is in use for that respective port. In that case, the Ethernet port would not normally be available for application use. The Virtual Miniport (VMINI) driver provides a mechanism for applications to leverage the Ethernet KITL link by exposing an NDIS miniport driver interface to the KITL transport. 
</p><p>The network portion of the bootloader serial user interface provides a mechanism for the user to control VMINI. VMINI is enabled by default and will be available when KITL is active, but can be disabled if desired. 
</p><p>VMINI requires an active KITL link meaning there must be a connection to Platform Builder running on the host PC. However the VMINI architecture is otherwise transparent to the network stack and applications. It exists simply as a network miniport driver. 
</p><p><span style="color: teal"><b>Library abstractions </b></span>
</p><p>The TI ARM_A8 BSP contains libraries providing abstraction to some widely used components such as GPIO, I2C, Clocks, and pad configuration. These libraries can be called from anywhere in the OAL and some of them are made available to drivers through the CEDDK. 
</p><p><span style="color: teal"><b>GPIO </b></span>
</p><p>This library provides functions for configuring GPIOs and managing their related interrupts. In order to use them, one must call the <i>GPIOOpen</i> function to retrieve a handle prior to using the other functions. 
</p><p>The functions available in this library are defined under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\sdk_gpio.h</i> 
</p><p><span style="color: teal"><b>I2C </b></span>
</p><p>This library provides functions for communicating over the I2C bus. In order to use them, one must call the <i>I2COpen</i> function to retrieve a handle prior to using the other functions. 
</p><p>The functions available in this library are defined under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\sdk_i2c.h</i> 
</p><p><span style="color: teal"><b>Clocks </b></span>
</p><p>This library provides functions for managing controllers clocks inside the CPU. All these functions require the device ID corresponding to the controller whose clock is to be configured. Device IDs are defined under the following header file: In OMAP35XX bsp: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\OMAP3530\INC\omap3530_clocks.h</i> 
</p><p>In AM35XX bsp: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\AM3517\INC\am3517_clocks.h</i> 
</p><p>In AM33x bsp: 
</p><p><i>&lt;WINCEROOT&gt;\platform\common\src\soc\COMMON_TI_V1\AM33X\inc\am33x_clocks.h</i> 
</p><p>In AM387x bsp: 
</p><p><i>&lt;WINCEROOT&gt;\platform\common\src\soc\COMMON_TI_V1\AM387X\inc\am387x_clocks.h</i> 
</p><p><br />The functions available in this library are defined under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\oal_clock.h</i> 
</p><p><span style="color: teal"><b>Pad Configuration </b></span>
</p><p>This library provides functions for configuring the pads of the CPU and selecting their multiplexing mode. These functions require one or an array of IDs and their associated configuration. The configurations of all the pads used by the TI ARM_A8 BSP are located at the BSP level under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\INC\bsp_padcfg.h</i> 
</p><p>As these pads are multiplexing inputs from different controllers, it is important to keep the pad configuration centralized in one place to avoid conflicts. A reservation mechanism is implemented to decrease the risk of configuring the same pad from different places in the BSP. Each pad is reserved while being configured when calling the following functions: 
</p>
<ul><li>RequestPad</li>
<li>RequestAndConfigurePad</li>
<li>RequestAndConfigurePadArray</li>
<li>RequestDevicePads</li></ul>
<p>These functions will return FALSE if any of the pad requested has already been requested before. One must release a requested pad before being able to reconfigure this same pad. The following functions are used to release the pads: 
</p>
<ul><li>ReleasePad</li>
<li>ReleasePadArray</li>
<li>ReleaseDevicePads</li></ul>
<p><b><u>WARNING:</u> </b>It is mandatory to check the return value of these functions and act accordingly if it returns failure. Not checking successful return value before using the pad could lead to a conflict and unpredictable results. 
</p><p>This library contains functions (<i>RequestDevicePads</i> and <i>ReleaseDevicePads</i>) that request and configure pads based on a controllers device ID. The device ID will be used to retrieve the controllers associated pad array in <i>bsp_padcfg.h</i> and perform the request/configure mechanism on each of these pads. 
</p><p>The association between Pad ID arrays and controllers device IDs is made in the following file: 
</p><p><i>&lt;WINCEROOT&gt;</i>\PLATFORM\&lt;BSP Folder&gt;\SRC\BSP_COMMON\BSP_PADCFG\bsp_padcfg.c 
</p><p><b><u>WARNING:</u> </b>Be careful with the <i>ConfigurePad</i> function which does not request the pad prior to configuring it. It is used by the pad configuration internal mechanism and at some early stages of the OAL initialization. It should be used carefully and must not be called from the drivers. 
</p><p>The functions of this library can be found under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\sdk_padcfg.h</i> 
</p><p><span style="color: teal"><b>CEDDK </b></span>
</p><p>The CE Driver Development Kit is a dynamic link library that provides the drivers with a set of functions encapsulating common kernel calls to simplify the use of the kernel API. This feature is detailed <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa913117.aspx">here</a>. 
</p><p>In the TI ARM_A8 BSP this DLL is customized to provide access to some of the OAL functions at the driver level. Most functions contained in the abstraction libraries described above are exposed to the drivers through the CEDDK. For a full list of these functions, refer to the following file: 
</p><p><i>&lt;WINCEROOT&gt;\WINCE600\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\CEDDK\DLL\ceddk.def</i> 
</p><p><span style="color: teal"><b>Watchdog timer </b></span> The TI ARM_A8 BSP has a watchdog timer used to automatically reset the CPU if not periodically refreshed by software, which happens in case of a software deadlock. The watchdog timer used for this purpose is defined by the <i>BPSGetWatchdogDevice</i> function located in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BSP_COMMON\BSPCFG\bspcfg.c</i> 
</p><p>For OMAP35x and AM35x BSP, the watchdog mechanism is implemented in the following OAL library: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI\OAL\OMAP_WATCHDOG\watchdog.c</i> 
</p><p><i>For AM33x CPU the watchdog mechanism is implemented in:</i> 
</p><p><i>&lt;WINCEROOT&gt;\platform\common\src\soc\COMMON_TI_V1\AM33X\OAL\WATCHDOG\watchdog.c</i> 
</p><p><i>and for AM387X in:</i> 
</p><p><i>&lt;WINCEROOT&gt;\platform\common\src\soc\COMMON_TI_V1\AM387X\OAL\WATCHDOG\watchdog.c</i> 
</p><p>The watchdog feature is not enabled by default and can be added to the build by selecting the OsDesign catalog item labeled "Internal watchdog". 
</p><p><b><u>WARNING:</u> </b>Enabling internal watchdog in debug builds will most likely result in unexpected reboots during runtime. This feature should be used only on production builds. 
</p><p><span style="color: teal"><b>Power Management </b></span>
</p><p>The OAL implements simple mechanisms to save power when no task is scheduled to run. 
</p><p><span style="color: teal"><b>CPU Idle </b></span>
</p><p>The CPU idle mechanism provides the OEM with the ability of putting the CPU core in a low power state when no code is to be executed. The TI ARM_A8 BSP uses ARMs "Wait For Interrupts" instruction to put the core to sleep while waiting for a scheduler interrupt to wake up the core and resume execution. This behavior is implemented into the <i>OEMIdle</i> function located in: 
</p>
<dl><dd><ul><li>OMAP35x EVM and AM35x EVM:</li></ul></dd></dl>
<p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI\OAL\OMAP_GTP_TIMER\TIMER\timer.c</i> 
</p>
<dl><dd><ul><li>AM335X EVM and AM387X EVM:</li></ul></dd></dl>
<p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI_AMXX\OAL\TIMER\GPTIMER\timer.c</i> 
</p><p><span style="color: teal"><b>Low-power suspend state </b></span>
</p><p><b>OMAP35x EVM and AM35x EVM</b><br />
Windows Embedded CE implements a suspend state where the whole platform is intended to be set to its lower power state while keeping RAM contents refreshed for fast recovery. The board can be put to suspend state using different means: 
</p>
<ul><li>Calling the <i>SetSystemPowerState</i> function from an application or a driver</li>
<li>Clicking "Start" then "Suspend" from Windows CEs desktop</li>
<li>Pressing the boards power button (Only if item "Power key driver" is selected from the catalog)</li></ul>
<p>Resuming from suspend state is done by configuring an interrupt as a wake-up source using the kernel IoControl named "IOCTL_HAL_ENABLE_WAKE". The TI ARM_A8 BSP comes with several drivers configured as wake-up sources: 
</p>
<ul><li>Touchscreen driver(AM35x only)</li>
<li>Power key driver</li>
<li>RTC ("External RTC wake up" must be selected from the catalog)</li>
<li>SD card removal/plugin</li></ul>
<p>The SOC specific code for implementing this feature is done in the <i>OEMPowerOff</i> function under: 
</p><p>For OMAP35xx EVM: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\OMAP3530\OAL\POWER\power.c</i> 
</p><p>For AM35xx EVM: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\AM3517\OAL\POWER\power.c</i> 
</p><p><b>AM335x EVM</b><br />
For AM335X BSP, this feature is still under development and update on its status can be found <a href="Power_Management_in_SA_WINCE_BSP.html" title="Power Management in SA WINCE BSP">here</a>
</p><p><b>AM387X EVM</b><br />
This feature is not supported.
</p><p><span style="color: teal"><b>Build Options </b></span>
</p><p>Some build options and environment variables are available for enabling or disabling some features of the OAL: 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="92%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Environment variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Catalog Item/Build option</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Effect</b>
</td></tr>
<tr>
<td>BSP_RTC_WAKES_CPU
</td>
<td>External RTC wake up
</td>
<td>Enables the ability for the RTC to wake the system up from suspend state after a specified amount of time. Available only on OMAP35x, AM35x and AM335x BSPs.
</td></tr>
<tr>
<td>BSP_&lt;bspName&gt;_WATCHDOG
</td>
<td>Internal watchdog
</td>
<td>Enables the watchdog feature in the build. &lt;bspName&gt; can be OMAP, AM33X or AM387X depending on the BSP
</td></tr>
<tr>
<td>IMGPROFILER
</td>
<td>Enable Profiling(IMGPROFILER=1)
</td>
<td>Enables MonteCarlo profiling in the build
</td></tr>
<tr>
<td>IMGNOKITL
</td>
<td>Enable KITL (no IMGNOKITL=1)
</td>
<td>When set, this variable removes KITL from the build
</td></tr></tbody></table>
<p><span style="color: teal"><b>Memory Configuration </b></span>
</p><p>The memory mapping of the runtime image is used to affect memory regions to a particular purpose. The memory configuration for each bootloaders and kernel binary can be configured from the following ".bib" files: 
</p>
<ul><li>Xloader</li></ul>
<p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BOOTLOADER\XLDR\NAND\xldrnand.bib</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BOOTLOADER\XLDR\SDMEMORY\xldrsd.bib</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BOOTLOADER\XLDR\UART\xldruart.bib</i> 
</p>
<ul><li>EBOOT</li></ul>
<p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BOOTLOADER\EBOOT\NAND\ebootnand.bib</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\BOOTLOADER\EBOOT\SDMEMORY\ebootsd.bib</i> 
</p>
<ul><li>Kernel</li></ul>
<table class="FCK&#95;_ShowTableBorders" border="0" cellspacing="2" width="100%">

<tbody><tr>
<td><i>&lt;WINCEROOT&gt;\WINCE600\PLATFORM\\&lt;BSP Folder&gt;\FILES\config.bib</i>
</td>
<td><br />
</td></tr></tbody></table>
<p>This last "config.bib" file is also used to generate kernel builds meant to be stored in NAND flash. In order to generate such a build, set the IMGNAND environment variable.
</p>
<h3><span class="mw-headline" id="TI_ARM_A8_Common_Drivers">TI ARM_A8 Common Drivers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=23" title="Edit section: TI ARM A8 Common Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>This section provides an overview of the drivers included in the TI ARM_A8 BSP. 
</p>
<h4><span class="mw-headline" id="Display_Driver">Display Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=24" title="Edit section: Display Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"><b>Supported features </b></span> 
</p><p>The display driver supports the following features: 
</p>
<ul><li>Windows GDI</li>
<li>DirectDraw</li>
<li>Hardware accelerated rotation using VRFB (only on OMAP35x, DM37x and AM35x platforms. Disabled by default but can be enabled with a catalog option)</li></ul>
<p>The display driver supports&#160;LCD panel, DVI/HDMI&#160;output and TV out (s-video/composite) on the TI EVMs as shown in the following table: 
</p>
<table width="600" cellspacing="1" cellpadding="1" border="1">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>EVM</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>LCD</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>DVI/HDMI</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>TVout</b>
</td></tr>
<tr>
<td align="center">OMAP35x/DM37x
</td>
<td align="center">480x640
</td>
<td align="center">DVI
</td>
<td align="center">s-video/composite
</td></tr>
<tr>
<td align="center">AM35x
</td>
<td align="center">480x272
</td>
<td align="center">HDMI
</td>
<td align="center">s-video/composite
</td></tr>
<tr>
<td align="center">AM387x
</td>
<td align="center">No
</td>
<td align="center">HDMI
</td>
<td align="center">s-video
</td></tr>
<tr>
<td align="center">AM335x
</td>
<td align="center">800x480
</td>
<td align="center">No
</td>
<td align="center">No
</td></tr></tbody></table>
<p>&#160; 
</p>
<h5><span id="OMAP35x_EVM_Display_Modes_(for_OMAP35xx/DM37xx)"></span><span class="mw-headline" id="OMAP35x_EVM_Display_Modes_.28for_OMAP35xx.2FDM37xx.29">OMAP35x EVM Display Modes (for OMAP35xx/DM37xx)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=25" title="Edit section: OMAP35x EVM Display Modes (for OMAP35xx/DM37xx)">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The display driver supports the following panels and resolutions:
</p>
<ul><li>Onboard LCD display  - 640x480@60 Hz</li>
<li>External DVI display  640x480@60 Hz</li>
<li>External DVI display  640x480@72 Hz</li>
<li>External DVI display  800x480@60 Hz</li>
<li>External DVI display  800x600@60 Hz</li>
<li>External DVI display  800x600@56 Hz</li>
<li>External DVI display  1024x768@60 Hz</li>
<li>External DVI display  1280x720@60 Hz</li></ul>
<p>The panel/resolution to use is configurable through EBOOTs menu item named "Select Display Resolution". 
</p><p>For LCD/DVI resolution of upto 800x600, TV out can be enabled in following ways: 
</p><p>1. At runtime, through "do tvout [on|off]" command 
</p><p>2. At compile time, through the catalog entries. 
</p><p>TV out display works in the following fashion: 
</p><p>1. When enabled, it duplicates the LCD/DVI desktop screen, provided the resolution is less than 800x600. 
</p><p>2. When enabled, if video playback is done using windows media player which uses overlays, then&#160; the video playback is seen both on LCD/DVI&#160;and TV out.&#160;Again the restriction is the clip should be less than D1 resolution 
</p><p>3. When enabled, if PowerVR/silverlight demos are run, then the outut is seen on both LCD/DVI and TV out. 
</p><p>4. If you dont want to duplicate the content on both LCD/DVI and TVout, then you will have to change the display driver (Hint: DetermineTVoutSurface()) 
</p><p>5. If TVout is enabled and the default display driver behavior is assumed, then ISP resizer cannot be used to downscale the surfaces otherwise you may see green output on TV&#160;out. The reason being ISP resizer can do only one resizing at a time but when TV&#160;out is enabled, there are 2 surfaces that need to be resized (one for LCD/DVI and other for TV out). So your only option for resizing are to use DSS h/w resizer (already implemented in display driver) or software implementation. Note that DSS h/w resizer is restricted in its capability to downsize due to pixel clock. See TRM&#160;for more details.&#160; 
</p>
<h5><span class="mw-headline" id="AM35x_eXperimenter_board_Display_Modes">AM35x eXperimenter board Display Modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=26" title="Edit section: AM35x eXperimenter board Display Modes">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The display driver supports the following panels and resolutions:
</p>
<ul><li>Onboard LCD display   - 480x272@60 Hz</li>
<li>External HDMI display  640x480@60 Hz</li>
<li>External HDMI display  640x480@72 Hz</li>
<li>External HDMI display  800x480@60 Hz</li>
<li>External HDMI display  800x600@60 Hz</li>
<li>External HDMI display  800x600@56 Hz</li>
<li>External HDMI display  1024x768@60 Hz</li>
<li>External HDMI display  1280x720@60 Hz</li></ul>
<p>The panel/resolution to use is configurable through EBOOTs menu item named "Select Display Resolution". 
</p>
<h5><span class="mw-headline" id="AM335x_GP_EVM_Display_modes">AM335x GP EVM Display modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=27" title="Edit section: AM335x GP EVM Display modes">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The display driver supports the following panels and resolutions:
</p>
<ul><li>Onboard LCD display - 800x480@60 Hz</li></ul>
<h5><span class="mw-headline" id="AM387x_EVM_Display_modes">AM387x EVM Display modes</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=28" title="Edit section: AM387x EVM Display modes">edit</a><span class="mw-editsection-bracket">]</span></span></h5>
<p>The display driver supports the following panels and resolutions:
</p>
<ul><li>External HDMI display  1280x720@60 Hz   (default)</li>
<li>External HDMI display  1920x1080@30 Hz</li>
<li>External S-Video NTSC  704x480@60 Hz</li>
<li>External S-Video PAL   704x576@50 Hz</li></ul>
<p>The display mode is compile time configured using catalog entries under Third Party-&gt;BSP-&gt;AM387X_BSP:ARMV7-&gt;Drivers-&gt;Display.
</p><p><br />
<span style="color: teal;"><b>Registry entries </b></span> 
</p><p>The registry entries for the display driver are located under: 
</p><p><u><b>AM335x BSP</b></u> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\DISPLAY\display.reg</i> 
</p><p><u><b>OMAP35x, AM35x and AM387x BSP</b></u> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\DISPLAY\DSS\dss.reg</i> 
</p>
<table cellspacing="0" cellpadding="4" border="2" style="width: 832px; height: 369px;">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>
<p>omap_dss.dll<br /> 
</p><p>am387x_display.dll<br /> 
</p><p>am33x_display.dll<br /> 
</p>
</td>
<td>
<p>Dll of the driver in OMAP35x &amp; AM35x BSP 
</p><p>Dll of the driver in AM387x BSP<br /> 
</p><p>Dll of the driver in AM335x BSP<br /> 
</p>
</td></tr>
<tr>
<td>IRQ
</td>
<td>0x19
</td>
<td>IRQ number of the DSS controller
</td></tr>
<tr>
<td>Angle
</td>
<td>0
</td>
<td>
<p>Screen rotation angle (0=&gt;0属,1=&gt;90属,2=&gt;180属) 
</p><p>This feature is only available&#160;on OMAP35x and AM35x platforms 
</p>
</td></tr>
<tr>
<td>EnableNeonBlts
</td>
<td>1
</td>
<td>Use NEON for hardware accelerated blits
</td></tr>
<tr>
<td>EnableWaitForVerticalBlank
</td>
<td>1
</td>
<td>Wait for Vsync is enabled for Overlay flipping
</td></tr>
<tr>
<td>EnableOverlay<br />
</td>
<td>1<br />
</td>
<td>Enable Overlay in display driver; Only on OMAP35x and AM35x platforms, overlay is enabled.<br />
</td></tr>
<tr>
<td>HardwareRotation<br />
</td>
<td>1<br />
</td>
<td>Enable Hardware Rotation. Only on OMAP35x and AM35x platforms, rotation is enabled.<br />
</td></tr>
<tr>
<td>DMAFill<br />
</td>
<td>1<br />
</td>
<td>
<p>Enable Color Fill through DMA. Only on OMAP35x and AM35x platforms, DMAFill is enabled. 
</p>
</td></tr>
<tr>
<td>EnableDMABlts<br />
</td>
<td>1<br />
</td>
<td>Enable DMA Blts. <br />
</td></tr></tbody></table>
<p><span style="color: teal;"><b>Limitations </b></span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"><b>Build options </b></span> 
</p><p>The following build options can be added as environment variable to configure the display driver(only on OMAP35x and AM35x platforms): 
</p>
<table width="66%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>BSP_TVOUT_ENABLE
</td>
<td>Enable display on TV output on bootup
</td></tr>
<tr>
<td>BSP_OMAP_VRFB
</td>
<td>Enable VRFB engine for Rotation
</td></tr></tbody></table>
<p><span style="color: teal;"><b>Driver API </b></span> 
</p><p>The display driver follows the API required by the GWES framework and the DDGPE sample implementation. 
</p><p>This framework is documented at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa921554.aspx">http://msdn.microsoft.com/en-us/library/aa921554.aspx</a> 
</p><p><span style="color: teal;"><b>Example usage </b></span> 
</p><p>Sample DirectDraw applications can be found under: 
</p><p><i>&lt;WINCEROOT&gt;\PUBLIC\DIRECTX\SDK\SAMPLES\DDRAW\SRC</i>
</p>
<h4><span class="mw-headline" id="GPIO_Driver">GPIO Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=29" title="Edit section: GPIO Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The OMAP35x EVM board comes with 192 on chip GPIOs and 18 GPIOs controlled by the TPS65950. The TPS65950 GPIOs are controlled through I2C and are able to generate interrupts to the CPU. 
</p><p>The AM35x Application/eXperimenter boards comes with 192 on chip GPIOs and 3 TCA6416 expander chips providing 16 GPIOs each. The GPIO expanders are controlled through I2C and are able to generate interrupts to the CPU. 
</p><p>The AM335X and AM387X SOCs have&#160;128 on-chip&#160;GPIOs each.&#160;&#160; 
</p><p>The driver allows applications to configure GPIOs as inputs or outputs and read or write their states. The GPIO driver also exposes functions to enable or disable interrupt generation from a particular pin. 
</p><p><span style="color: teal"><b>Registry entries </b></span>
</p><p><u>OMAP GPIO driver:</u> 
</p><p>The registry entries for the CPUs GPIO driver are located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\GPIO\gpio.reg 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>
<p>Omap_gpio.dll
</p>
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Index
</td>
<td>1
</td>
<td>Index of the GPIO device
</td></tr>
<tr>
<td>Order
</td>
<td>0x00
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p><i>NOTE: DLL name for AM335X BSP is am33x_gpio.dll and name for AM387X BSPs&#160;is&#160;am387x_gpio.dll</i> 
</p><p>The registry entries for the GPIO expander driver in OMAP35xx BSP are located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\ TPS659XX_GPIO \ tps659xx_gpio.reg 
</p><p><u>TPS65950 GPIO Expander:</u> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tps659xx_gpio.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Index
</td>
<td>2
</td>
<td>Index of the GPIO device
</td></tr>
<tr>
<td>Order
</td>
<td>0x00
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p>The registry entries for the GPIO expander driver in AM35xx BSP are located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\TCA6416_GPIO\tca6416_gpio.reg 
</p><p><u>GPIO Expander 1:</u> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tca6416_gpio.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Index
</td>
<td>2
</td>
<td>Index of the GPIO device
</td></tr>
<tr>
<td>Order
</td>
<td>0x00
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>I2CBaudRateIndex
</td>
<td>1
</td>
<td>Index in the I2C baudrate table (1 =&gt; 400 kHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>3
</td>
<td>I2C Bus to use for accessing the expander
</td></tr>
<tr>
<td>I2CAddress
</td>
<td>0x20
</td>
<td>I2C address of the expander on the bus
</td></tr>
<tr>
<td>IntrGpio
</td>
<td>0xA0
</td>
<td>GPIO ID of the expanders interrupt line
</td></tr></tbody></table>
<p><u>GPIO Expander 2:</u> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tca6416_gpio.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Index
</td>
<td>3
</td>
<td>Index of the GPIO device
</td></tr>
<tr>
<td>Order
</td>
<td>0x00
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>I2CBaudRateIndex
</td>
<td>1
</td>
<td>Index in the I2C baudrate table (1 =&gt; 400 kHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>3
</td>
<td>I2C Bus to use for accessing the expander
</td></tr>
<tr>
<td>I2CAddress
</td>
<td>0x21
</td>
<td>I2C address of the expander on the bus
</td></tr></tbody></table>
<p><u>GPIO Expander 3:</u> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tca6416_gpio.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Index
</td>
<td>4
</td>
<td>Index of the GPIO device
</td></tr>
<tr>
<td>Order
</td>
<td>0x00
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>I2CBaudRateIndex
</td>
<td>1
</td>
<td>Index in the I2C baudrate table (1 =&gt; 400 kHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>2
</td>
<td>I2C Bus to use for accessing the expander
</td></tr>
<tr>
<td>I2CAddress
</td>
<td>0x21
</td>
<td>I2C address of the expander on the bus
</td></tr></tbody></table>
<p><span style="color: teal"><b>Limitations </b></span>
</p><p>No documented limitations. 
</p><p><span style="color: teal"><b>Build options </b></span>
</p><p>No documented build Options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>The best way to use GPIOs from drivers and applications is to use the GPIO library provided by the CEDDK. It provides abstraction to each GPIO driver using GPIO IDs defined for both onchip and external GPIOs. 
</p><p>This API is documented in the header below: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\sdk_gpio.h</i> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Function name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>GPIOOpen
</td>
<td>Retrieve an handle on the GPIO driver
</td></tr>
<tr>
<td>GPIOClose
</td>
<td>Close the GPIO driver when done using
</td></tr>
<tr>
<td>GPIOSetBit
</td>
<td>Set the output to high level
</td></tr>
<tr>
<td>GPIOClrBit
</td>
<td>Set the output to low level
</td></tr>
<tr>
<td>GPIOGetBit
</td>
<td>Read the level of the input
</td></tr>
<tr>
<td>GPIOSetMode
</td>
<td>Configure GPIO mode
</td></tr>
<tr>
<td>GPIOGetMode
</td>
<td>Read GPIO mode
</td></tr>
<tr>
<td>GPIOPullup
</td>
<td>Enable/disable the pull-up on the GPIO
</td></tr>
<tr>
<td>GPIOPulldown
</td>
<td>Enable/disable the pull-down on the GPIO
</td></tr>
<tr>
<td>GPIOInterruptInitialize
</td>
<td>Hook up an interrupt event to the GPIO
</td></tr>
<tr>
<td>GPIOInterruptMask
</td>
<td>Mask/unmask the GPIOs interrupt
</td></tr>
<tr>
<td>GPIOInterruptDisable
</td>
<td>Disable the interrupt event when no longer needed
</td></tr>
<tr>
<td>GPIOInterruptDone
</td>
<td>Function to call when done processing a GPIO interrupt
</td></tr>
<tr>
<td>GPIOGetSystemIrq
</td>
<td>Retrieve the IRQ number corresponding to a GPIO ID
</td></tr>
<tr>
<td>GPIOInterruptWakeUp
</td>
<td>Register the GPIO as a wake up source for the system
</td></tr></tbody></table>
<p><span style="color: teal"><b>Example usage </b></span>
</p><p>Refer to the BSP specific part of the SDHC controller for a example on how to use GPIOs and processing interrupts: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\SDHC\impl\SDController.cpp</i>
</p>
<h4><span id="1-Wire/HDQ_Driver"></span><span class="mw-headline" id="1-Wire.2FHDQ_Driver">1-Wire/HDQ Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=30" title="Edit section: 1-Wire/HDQ Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The TI ARM_A8 BSP includes a 1-Wire/HDQ driver supporting the following protocols: 
</p>
<ul><li>Benchmarq HDQ protocol</li>
<li>Dallas Semiconductor 1-Wire protocol</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the 1-Wire/HDQ driver are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\HDQ\omap_hdq.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_hdq.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>9
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>priority256
</td>
<td>0x87
</td>
<td>Priority of the Interrupt Service Thread
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented Build Options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The 1-Wire/HDQ driver follows a standard stream driver interface. Use the following function to use the driver: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Function name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>CreateFile
</td>
<td>Retrieve an handle on the driver
</td></tr>
<tr>
<td>WriteFile
</td>
<td>Send data over the 1-Wire/HDQ bus
</td></tr>
<tr>
<td>ReadFile
</td>
<td>Read data from the 1-Wire/HDQ bus
</td></tr>
<tr>
<td>CloseHandle
</td>
<td>Close the drivers handle when no longer needed
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage of this driver is provided in the OMAP35x BSP. 
</p>
<h4><span id="McASP_Support_Library_(AM387xx_and_AM33x_Only)"></span><span class="mw-headline" id="McASP_Support_Library_.28AM387xx_and_AM33x_Only.29">McASP Support Library (AM387xx and AM33x Only)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=31" title="Edit section: McASP Support Library (AM387xx and AM33x Only)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b> McASP Features </b> </span>
</p>
<ul><li>Two independent clock generator modules for transmit and receive</li>
<li>Independent transmit and receive modules, each includes
<ul><li>Programmable clock and frame sync generator</li>
<li>TDM streams from 2 to 32, and 384 time slots</li>
<li>Support for time slot sizes of 8, 12, 16, 20, 24, 28, and 32 bits</li></ul></li>
<li>Wide variety of I2S and similar bit-stream format</li></ul>
<p><span style="color: teal;"> <b> Library Features </b> </span>
</p><p>The BSP includes a library to support the use of the McASP peripherals. The library is linked with drivers that use McASP. 
</p><p><span style="color: teal;"> <b> Limitations  </b> </span>
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b> Build Options  </b> </span>
</p><p>There are no build options for this library. 
</p><p><span style="color: teal;"> <b> Library API  </b> </span>
</p><p>The McASP library API is defined in the follow header: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\COMMON\src\soc\COMMON_TI_V1\COMMON_TI_AMXX\MCASP\mcasp.h
</p><p>The API is quite extensive and is not duplicated here. Refer to the McASP datasheet for the AM387x and AM33x for further information. 
</p><p><span style="color: teal;"> <b> Example Usage  </b> </span>
</p><p>The AIC3106 Audio driver in the AM387x and AM33x BSP uses the McASP library. See the Audio driver section for more details.
</p>
<h4><span id="McBSP_Driver_(OMAP35x_and_AM35x_Only)"></span><span class="mw-headline" id="McBSP_Driver_.28OMAP35x_and_AM35x_Only.29">McBSP Driver (OMAP35x and AM35x Only)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=32" title="Edit section: McBSP Driver (OMAP35x and AM35x Only)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The McBSP controller is a Multi-Channel Buffer Serial Port used to implement industry standard protocols such as PCM, TDM and I2S. The McBSP driver supports the 5 instances of the McBSP offering the following features: 
</p>
<ul><li>Data transfers using DMA channels triggered on programmable FIFO thresholds</li>
<li>SIDETONE core support (McBSP2 and 3 only)</li>
<li>Full duplex communication</li>
<li>512 bytes buffer for McBSP1, 3, 4, 5</li>
<li>5K bytes buffer for McBSP2</li>
<li>4/6 pins configuration</li>
<li>Direct Interface to industry standard devices:</li>
<li>Inter-IC sound (I2S) compliant devices</li>
<li>Pulse code modulation (PCM) compliant devices</li>
<li>Time division multiplexed (TDM) compliant devices</li>
<li>Data size from 8 to 32 bits</li>
<li>Bit reordering</li>
<li>Clock and frame-synchronization generation support</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry configuration of this driver can be found under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\MCBSP\mcbsp.reg</i> 
</p><p>The following registry keys have been defined for McBSP1. Refer to the registry file for default configuration of the other McBSP controllers. 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_mcbsp.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x13
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Port
</td>
<td>1
</td>
<td>McBSP controller instance
</td></tr>
<tr>
<td>McBSPProfile
</td>
<td>1
</td>
<td>Mode&#160;: 0-&gt;I2S Slave, 1-&gt;I2S Master, 2-&gt; TDM
</td></tr>
<tr>
<td>DmaTxSyncMap
</td>
<td>0x1F
</td>
<td>SDMA Tx Channel ID
</td></tr>
<tr>
<td>DmaRxSyncMap
</td>
<td>0x20
</td>
<td>SDMA Rx Channel ID
</td></tr>
<tr>
<td>TxPriority
</td>
<td>0x6E
</td>
<td>Tx Thread priority
</td></tr>
<tr>
<td>RxPriority
</td>
<td>0x6E
</td>
<td>Rx Thread priority
</td></tr>
<tr>
<td>TxBufferSize
</td>
<td>0x1000
</td>
<td>Tx DMA Buffer size
</td></tr>
<tr>
<td>RxBufferSize
</td>
<td>0x1000
</td>
<td>Rx DMA Buffer size
</td></tr>
<tr>
<td>UseRegistryForMcbsp
</td>
<td>1
</td>
<td>Use default (0) or registry (1) settings
</td></tr>
<tr>
<td>LoopbackMode
</td>
<td>0
</td>
<td>Enable/Disable loopback mode
</td></tr>
<tr>
<td>WordsPerFrame
</td>
<td>1
</td>
<td>Number of words per frame (1-128)
</td></tr>
<tr>
<td>WordLength
</td>
<td>0x16
</td>
<td>First Word length (8, 12, 16, 20, 24, 32)
</td></tr>
<tr>
<td>WordLength2
</td>
<td>0x16
</td>
<td>Second Word length (8, 12, 16, 20, 24, 32)
</td></tr>
<tr>
<td>ReverseModeTx
</td>
<td>0
</td>
<td>Transmit MSB first (0) or LSB first (1)
</td></tr>
<tr>
<td>DataDelayTx
</td>
<td>1
</td>
<td>Number of bits to delay Tx frames (0, 1, 2)
</td></tr>
<tr>
<td>ClockModeTx
</td>
<td>1
</td>
<td>Use internal (1) or external (0) Tx clock
</td></tr>
<tr>
<td>FrameSyncSourceTx
</td>
<td>3
</td>
<td>Tx Frame Sync source&#160;: External (0), Internal(1), Generator(3)
</td></tr>
<tr>
<td>PhaseTx
</td>
<td>1
</td>
<td>Tx Single (0) or Dual (1) phase
</td></tr>
<tr>
<td>ClockPolarityTx
</td>
<td>0
</td>
<td>Tx Data driven on rising (0) or falling (1) edge
</td></tr>
<tr>
<td>FrameSyncPolarityTx
</td>
<td>0
</td>
<td>Tx Frame sync is active high (0) or low (1)
</td></tr>
<tr>
<td>FifoThresholdTx
</td>
<td>0x7F
</td>
<td>Tx fifo threshold before triggering DMA
</td></tr>
<tr>
<td>ReverseModeRx
</td>
<td>0
</td>
<td>Receive MSB first (0) or LSB first (1)
</td></tr>
<tr>
<td>DataDelayRx
</td>
<td>1
</td>
<td>Number of bits to delay Rx frames (0, 1, 2)
</td></tr>
<tr>
<td>ClockModeRx
</td>
<td>1
</td>
<td>Use internal (1) or external (0) Rx clock
</td></tr>
<tr>
<td>FrameSyncSourceRx
</td>
<td>1
</td>
<td>Rx Frame Sync source: External(0),Internal(1)
</td></tr>
<tr>
<td>PhaseRx
</td>
<td>1
</td>
<td>Rx Single (0) or Dual (1) phase
</td></tr>
<tr>
<td>ClockPolarityRx
</td>
<td>1
</td>
<td>Rx Data driven on rising (0) or falling (1) edge
</td></tr>
<tr>
<td>FrameSyncPolarityRx
</td>
<td>0
</td>
<td>Rx Frame sync is active high (0) or low (1)
</td></tr>
<tr>
<td>FifoThresholdRx
</td>
<td>0x3F
</td>
<td>Rx fifo threshold before triggering DMA
</td></tr>
<tr>
<td>ClockSourceSrg
</td>
<td>0
</td>
<td>SRG source clock: rising CLKS (0), falling CLKS (1), CPU clock (2), CLKRI (3), CLKXI (4)
</td></tr>
<tr>
<td>FrameWidthSrg
</td>
<td>0x10
</td>
<td>SRG Frame Width (1-256)
</td></tr>
<tr>
<td>ClockDividerSrg
</td>
<td>0x43
</td>
<td>SRG Clock Divider (0-255)
</td></tr>
<tr>
<td>ClockResyncSrg
</td>
<td>0
</td>
<td>Enable SRG source clock resynchronization
</td></tr>
<tr>
<td>JustificationMode
</td>
<td>0
</td>
<td>Justify right zero fill (0), justify right sign fill (1), justify left (2)
</td></tr>
<tr>
<td>TDMWordsPerFrame
</td>
<td>1
</td>
<td>Words per frame in TDM mode (1-128)
</td></tr>
<tr>
<td>PartitionMode
</td>
<td>0
</td>
<td>TDM mode&#160;: 2-partition (0), 8-partition (1)
</td></tr>
<tr>
<td>NumOfTxChannels
</td>
<td>2
</td>
<td>Number of Tx channels to enable
</td></tr>
<tr>
<td>NumOfRxChannels
</td>
<td>2
</td>
<td>Number of Rx channels to enable
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>As the McBSP driver is entirely interrupt-driven, therefore its usage is based on callbacks provided by the calling driver. 
</p><p>The callbacks are passed to the McBSP driver using the following IoControls: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>IoControl</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>IOCTL_EXTERNAL_DRVR_REGISTER_TRANSFERCALLBACKS
</td>
<td>Register callbacks by passing an EXTERNAL_DRVR_DATA_TRANSFER_IN structure. The IoControl returns a EXTERNAL_DRVR_DATA_TRANSFER_OUT structure containing callbacks that can be called by the driver to initiate Tx/Rx commands
</td></tr>
<tr>
<td>IOCTL_EXTERNAL_DRVR_UNREGISTER_TRANSFERCALLBACKS
</td>
<td>Unregister previously registered callbacks
</td></tr></tbody></table>
<p>The callbacks are defined as follows: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Callback name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>pfnInTxCommand
</td>
<td>Pointer to a function called by the McBSP driver before issuing a Tx command
</td></tr>
<tr>
<td>pfnInRxCommand
</td>
<td>Pointer to a function called by the McBSP driver before issuing a Rx command
</td></tr>
<tr>
<td>pfnInTxPopulateBuffer<br />
</td>
<td>Pointer to a function called by the McBSP driver for the calling driver to fill up the buffer to send
</td></tr>
<tr>
<td>pfnInRxPopulateBuffer
</td>
<td>Pointer to a function called by the McBSP driver for the calling driver to copy the received data
</td></tr>
<tr>
<td>pfnMutexLock
</td>
<td>Pointer to a function called by the McBSP driver to grab/release a critical section used throughout the calling driver
</td></tr>
<tr>
<td>pfnOutRxCommand
</td>
<td>Pointer to a function called by the calling driver to initiate a Rx command in the McBSP driver
</td></tr>
<tr>
<td>pfnOutTxCommand
</td>
<td>Pointer to a function called by the calling driver to initiate a Tx command in the McBSP driver
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>The audio driver extensively uses the McBSP driver to exchange data with the codec over I2S. Refer to the audio driver for example usage: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM</i> \<i>EVM_OMAP3530\SRC\DRIVERS\TPS659XX_WAVE</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\WAVEDEV2</i>
</p>
<h4><span class="mw-headline" id="SPI_Driver">SPI Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=33" title="Edit section: SPI Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The McSPI driver of the TI ARM_A8 BSP supports the following features: 
</p>
<ul><li>McSPI controllers 1 to 4</li>
<li>Programmable word length from 4 to 32 bit</li>
<li>Master multi-channel mode (up to 4 channels)</li>
<li>Slave mode (Channel 0 only)</li>
<li>Two DMA requests per channel</li>
<li>64 bytes built-in FIFO per channel</li></ul>
<p><span style="color: teal"><b>Registry entries </b></span>
</p><p>The registry entries for configuring this driver can be edited from: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\MCSPI\mcspi.reg</i> 
</p><p>These are defined as follows: 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_mcspi.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>8
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Port
</td>
<td>1
</td>
<td>Instance number of the McSPI controller
</td></tr>
<tr>
<td>Timeout
</td>
<td>0x300
</td>
<td>Timeout value used in waiting loops
</td></tr></tbody></table>
<p><br />
</p><p><i>NOTE: The DLL name for AM335X BSP is am33x_mcspi.dll ans for AM387X BSP is am387x_mcspi.dll</i> 
</p><p>&lt;span style="color: teal"&lt;/span&gt;<span style="color: teal"><b>Limitations </b></span>
</p><p>No documented limitations. 
</p><p><span style="color: teal"><b>Build options </b></span>
</p><p>No documented build options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>The McSPI driver comes with an SDK for easier use from the drivers and applications. The API of this SDK is documented in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\INC\sdk_spi.h</i> 
</p><p>The chart below gives a brief overview of the functions exposed by this SDK. 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="94%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Function name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>SPIOpen
</td>
<td>Open the driver and retrieve an handle
</td></tr>
<tr>
<td>SPIClose
</td>
<td>Close the driver when no longer used
</td></tr>
<tr>
<td>SPILockController
</td>
<td>Put the controller in single access mode
</td></tr>
<tr>
<td>SPIUnlockController
</td>
<td>Release the controller from single access mode
</td></tr>
<tr>
<td>SPIEnableChannel
</td>
<td>Enable one channel and assert the ChipSelect
</td></tr>
<tr>
<td>SPIDisableChannel
</td>
<td>Disable one channel and deassert the ChipSelect
</td></tr>
<tr>
<td>SPIConfigure
</td>
<td>Configure one SPI channel
</td></tr>
<tr>
<td>SPISetSlaveMode
</td>
<td>Put the controller in slave mode
</td></tr>
<tr>
<td>SPIRead
</td>
<td>Read data from the slave when configured in Rx only
</td></tr>
<tr>
<td>SPIWrite
</td>
<td>Write data to the slave when configured in Tx only
</td></tr>
<tr>
<td>SPIWriteRead
</td>
<td>Write/Read data from the slave
</td></tr>
<tr>
<td>SPIAsyncWriteRead
</td>
<td>Asynchronously Write/Read data from the slave
</td></tr>
<tr>
<td align="center">SPIWaitForAsyncWriteReadComplet
</td>
<td>Returns when asynchronous transaction is complete
</td></tr></tbody></table>
<p><span style="color: teal"><b>Example usage </b></span>
</p><p>The following sample code shows how to open the SPI driver and perform a read/write transaction over channel 0 on the bus. 
</p>
<pre>#include &lt;sdk_spi.h&gt;   

DWORD  config;
HANDLE hSPI;
DWORD spiBuffer;

hSPI = SPIOpen(LSPI1:);
if (hSPI == NULL) 
{
        goto error;
}

config =   MCSPI_PHA_ODD_EDGES |
MCSPI_POL_ACTIVEHIGH |
                MCSPI_CHCONF_CLKD(5) |
                MCSPI_CSPOLARITY_ACTIVELOW |
                MCSPI_CHCONF_WL(32) |
                MCSPI_CHCONF_TRM_TXRX |
                MCSPI_CHCONF_DPE0;

if (!SPIConfigure(hSPI, 0, config)
{
        goto error;
}

spiBuffer = 0x80;
if (!SPIWriteRead(hSPI, sizeof(DWORD), &amp;spiBuffer, &amp;spiBuffer))
{
        goto error;
}

error:

if (hSPI&#160;!= NULL)
{
	SPIClose(hSPI);
}

</pre>
<h4><span class="mw-headline" id="NAND_Flash_Driver">NAND Flash Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=34" title="Edit section: NAND Flash Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The NAND Flash driver follows the FAL/FMD API such as described in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee482032.aspx">http://msdn.microsoft.com/en-us/library/ee482032.aspx</a> 
</p><p>It exposes the NAND part as a block storage device that can be used by the Storage Manager to create and manipulate files using any supported file system. In addition, the NAND Flash driver supports bad block checking and ECC correction to avoid data corruption. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for configuring the NAND Flash driver and its associated storage profile can be modified from: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\BLOCK\NAND\nand.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_nand.dll
<p>am387x_nand.dll
</p><p>am33x_nand.dll
</p>
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>4
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Profile
</td>
<td>MSFlash (EC6)
<p>FlashDisk (EC7)
</p>
</td>
<td>Storage profile to use on this storage device
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p>
<table width="82%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>IMGREGHIVE
</td>
<td>Enable persistent storage on NAND device
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The FAL/FMD model requires the storage driver to implement a minimal set of functions. These functions are described below: 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Function name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>FMD_Init
</td>
<td>Perform the NAND part initialization
</td></tr>
<tr>
<td>FMD_Deinit
</td>
<td>Deinitialize the NAND Flash driver
</td></tr>
<tr>
<td>FMD_GetInfo
</td>
<td>Return the parts physical geometry
</td></tr>
<tr>
<td>FMD_ReadSector
</td>
<td>Read one sectors data and information
</td></tr>
<tr>
<td>FMD_WriteSector
</td>
<td>Write one sectors data and/or information
</td></tr>
<tr>
<td>FMD_EraseBlock
</td>
<td>Erase one full block
</td></tr>
<tr>
<td>FMD_GetBlockStatus
</td>
<td>Return the status of one given block
</td></tr>
<tr>
<td>FMD_SetBlockStatus
</td>
<td>Writes the status of one block
</td></tr>
<tr>
<td>FMD_PowerUp
</td>
<td>Called when the platform resumes
</td></tr>
<tr>
<td>FMD_PowerDown
</td>
<td>Called when the platform goes to suspend mode
</td></tr>
<tr>
<td>FMD_OEMIoControl
</td>
<td>OEM custom IOCTL implementation
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>As the Storage Manager handles all accesses to the NAND Flash driver, the user is only allowed to configure the storage profile that will be used on top of this driver. The following registry configuration shows how to automatically mount a FAT partition on top of the NAND Flash driver. 
</p>
<pre>[HKEY_LOCAL_MACHINE\System\StorageManager\Profiles\MSFlash\FATFS]
    "Flags"=dword:14
    "MountAsBootable"=dword:1     
    "EnableWriteBack"=dword:1
    "FormatTFAT"=dword:1
IF IMGREGHIVE
    "MountAsRoot"=dword:1
    "MountPermanent"=dword:1    &#160;; Do not allow un-mounting (else we'd fail to flush the registry)
    "MountAsROM"=dword:0
    "MountHidden"=dword:0
    "CheckForFormat"=dword:1    &#160;; Ask the OAL if we should format on boot (i.e. cold reset)
ENDIF


[HKEY_LOCAL_MACHINE\System\StorageManager\Profiles\MSFlash]
   "DriverPath"="Drivers\\BuiltIn\\MSFlash"
   "LoadFlags"=dword:1
IF IMGREGHIVE
   "BootPhase"=dword:1         &#160;; Make NAND available in BootPhase1, to load the persisted registry
ELSE
   "BootPhase"=dword:0
ENDIF
   "Order"=dword:0
   "AutoMount"=dword:1
   "AutoPart"=dword:0
   "AutoFormat"=dword:0
   "DefaultFileSystem"="FATFS"
   "PartitionDriver"="mspart.dll"
   "Folder"="Mounted Volume"
</pre>
<h4><span class="mw-headline" id="NDIS_SMSC9118_Driver">NDIS SMSC9118 Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=35" title="Edit section: NDIS SMSC9118 Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The SMSC9118 driver is implemented following the NDIS specification detailed in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486267.aspx">http://msdn.microsoft.com/en-us/library/ee486267.aspx</a> 
</p><p>This driver exposes the onboard SMSC9118 chip as a network interface that can be accessed from the applicative level through the Winsock API. The EMAC controller supports the following features: 
</p>
<ul><li>Synchronous 10/100 Mbit operation</li>
<li>Parallel interface with the CPU over the GPMC bus</li>
<li>Internal SRAM storing over 200 packets</li>
<li>DMA support</li>
<li>Integrated Ethernet MAC and PHY</li>
<li>16K byte FIFO memory</li>
<li>Automatic CRC generation and checking</li>
<li>Full/Half Duplex support</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries related to the SMSC9118 driver are defined in the following file: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\SMSC9118\smsc9118.reg</i> 
</p><p>The following chart sums up the applicable registry configuration for the SMSC9118 driver: 
</p>
<table width="91%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DisplayName
</td>
<td>SMSC11X Ethernet Driver
</td>
<td>Name of the NDIS network interface
</td></tr>
<tr>
<td>Group
</td>
<td>NDIS
</td>
<td>Class of the network driver<br />
</td></tr>
<tr>
<td>ImagePath
</td>
<td>Smsc9118.dll
</td>
<td>Name of the drivers dll
</td></tr></tbody></table>
<p>Registry entries specific to the SMSC9118 driver are described below: 
</p>
<table width="92%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>SysIntr
</td>
<td>0x10
</td>
<td>Static SYSINTR assigned to the chip
</td></tr>
<tr>
<td>IoBaseAddress
</td>
<td>0x15000000
</td>
<td>Physical base address on the GPMC bus
</td></tr>
<tr>
<td>PhyAddress
</td>
<td>0x20
</td>
<td>PHY address (0x20=&gt;auto,0xFF=&gt;internal)
</td></tr>
<tr>
<td>RxDMAMode
</td>
<td>0
</td>
<td>Rx Mode (1=&gt;DMA, 0=&gt;PIO)
</td></tr>
<tr>
<td>TxDMAMode
</td>
<td>0
</td>
<td>Tx Mode (1=&gt;DMA, 0=&gt;PIO)
</td></tr>
<tr>
<td>FlowControl
</td>
<td>1
</td>
<td>Flow control enabled (1) or disabled (0)
</td></tr>
<tr>
<td>LinkMode
</td>
<td>0x7F
</td>
<td>ANEG/ASPAUSE/SPAUSE/100FD/100HD/10FD/10HD
</td></tr>
<tr>
<td>AutoMdix
</td>
<td>4
</td>
<td>Auto Mdix controlled by strap
</td></tr>
<tr>
<td>IntCfg
</td>
<td>0
</td>
<td>Value applied to HW_CFG_SRST(IRQ_POL/IRQ_TYP)
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The SMSC9118 NDIS driver is accessed at the applicative level using the Windows Sockets API described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa917471.aspx">http://msdn.microsoft.com/en-us/library/aa917471.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage provided for this driver. 
</p>
<h4><span class="mw-headline" id="Notification_LED_Driver">Notification LED Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=36" title="Edit section: Notification LED Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The notification LED driver provides GWES with support for controlling onboard LEDs as user notifications. The notification LED driver follows the driver interface described in the following MSDN entry: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee481282.aspx">http://msdn.microsoft.com/en-us/library/ee481282.aspx</a> 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries retrieved by the notification LED driver can be found in the following file: 
</p><p><u><b>AM335x BSP:</b></u> <br /> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\NLED\am33x_nled.reg</i> 
</p><p><u><b>AM387x BSP:</b></u> <br /> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\NLED\am387x_nled.reg' </i> 
</p><p><u><b>OMAP35x and AM35x BSP:</b></u><br /> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\NLED\omap_nled.reg</i> 
</p><p>It contains the following entries: 
</p>
<table width="92%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>
<p>omap_nled.dll 
</p><p>am33x_nled.dll<br /> 
</p><p>am387x_nled.dll<br /> 
</p>
</td>
<td>
<p>DLL of the driver for OMAP35x and AM35x BSP 
</p><p>DLL of the driver for AM335x BSP<br /> 
</p><p>DLL of the driver for AM387x BSP<br /> 
</p>
</td></tr>
<tr>
<td>Order
</td>
<td>0x11
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>For DM37x NLED is not supported by default OSdesign due to conflict with Display driver. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The notification LED driver can be called through the following GWES API: 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Function name</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>NLedGetDeviceInfo
</td>
<td>Return information on LED count, supported features and settings
</td></tr>
<tr>
<td>NLedSetDevice
</td>
<td>Changes settings of an NLED device
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>The example use of this driver can be found in CETK NLED&#160;test code. The test code is available from Windows Embedded compact 7 installation: 
</p><p>&lt;WINCEROOT&gt;\PRIVATE\test\BaseOS\Drivers\LED\BVT\nledtest\tests.cpp<br />
</p>
<h4><span class="mw-headline" id="Power_Management_Driver">Power Management Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=37" title="Edit section: Power Management Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>OMAP35X EVM and AM35X EVM</b><br />
</p><p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The CPU comes with built-in features dedicated to saving power consumption when possible. The TI ARM_A8 BSP includes a power management extension that brings new power saving features such as Dynamic Voltage Frequency Scaling and Smart Reflex. The following features are handled by this power management driver: 
</p>
<ul><li><u>Dynamic Voltage Frequency Scaling (DVFS):</u> Allows the OPM - operating mode(the voltage/frequency pair) to be changed while the system is operating. On AM35x processor family, DVFS is not supported, since the voltage needs to be keep constant. However the Frequency can still be changed.</li>
<li><u>CPU load Policy: </u>This power policy is configurable using registry entries and uses information about the CPU load (ratio of time the CPU spends running code as opposed to being in the CPU Idle State) to select a DVFS state for the CORE and MPU/IVA domains.</li>
<li><u>Device Monitor Policy</u>: this power policy listens for device state change and tries to ensure the OPM stays high enough for the active devices to operate correctly.</li>
<li><u>Interrupt Latency:</u> This driver provides the power manager with information regarding each drivers expected interrupt latency. This adds constraints on the power manager to better decide which lowest power mode can be achieved depending on the drivers requirements.</li>
<li><u>System State Policy</u>: this power policy provides constraints on the DVFS operating mode based on user activity.</li>
<li><u>Smart Reflex Policy</u>: this policy uses information written into write once memory (EFUSE) in OMAP35x processors during factory testing. This information describes fine tuning that can be done to the OPMs. Smart Reflex is not supported in AM35x processors.</li></ul>
<p>For more details, please refer to the following wiki page: 
</p><p><i><a rel="nofollow" class="external free" href="WinCE-TIBSP_Power_Management.html">http://processors.wiki.ti.com/index.php/WinCE-TIBSP_Power_Management</a></i> 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The Power Management extension driver is configured through the registry keys defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\PM\omap_pm.reg</i> 
</p><p><u>DVFS:</u> 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_constraintadapters.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x100
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>DVFS
</td>
<td>Name of the DVFS driver
</td></tr>
<tr>
<td>ConstraintClass
</td>
<td>1
</td>
<td>DVFS constraint class
</td></tr>
<tr>
<td>OpmInit
</td>
<td>4
</td>
<td>Operating mode to be set at platforms initialization
</td></tr>
<tr>
<td>OpmFloor
</td>
<td>1
</td>
<td>Lowest operating mode to use on this platform
</td></tr>
<tr>
<td>OpmCeiling
</td>
<td>4
</td>
<td>Highest operating mode to use on this platform
</td></tr>
<tr>
<td>CORE1Map
</td>
<td>"0","0","0","0","0"
</td>
<td>Maps each CORE OPP to an associated OPM
</td></tr>
<tr>
<td>MPU1Map
</td>
<td>"0","1","2","3","4"
</td>
<td>Maps each MPU OPP to an associated OPM
</td></tr></tbody></table>
<p><u>CPU Load:</u> 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_cpuloadpolicy.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x999
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>CPULD
</td>
<td>Name of the CPU load Policy
</td></tr>
<tr>
<td>MonitorPeriod
</td>
<td>0x1f4
</td>
<td>Period of time in milliseconds driver uses to check CPU load
</td></tr>
<tr>
<td>MonitorWindow
</td>
<td>0x7d0
</td>
<td>Periold of time in milliseconds driver uses to calculate(average) the current CPU load.
</td></tr>
<tr>
<td>InterruptThreshold
</td>
<td>0x41
</td>
<td>cpu-load for sw interrupt- 65%
</td></tr>
<tr>
<td>BootEventName
</td>
<td>"Shell_Ready"
</td>
<td>Highest operating mode to use on this platform
</td></tr>
<tr>
<td>BootTimeout
</td>
<td>0xea60
</td>
<td>60 sec max wait for bootup
</td></tr>
<tr>
<td>priority256
</td>
<td>63
</td>
<td>CPU load policy driver thread priority
</td></tr>
<tr>
<td>CeilingOpm
</td>
<td>4
</td>
<td>Maximum OPM value
</td></tr>
<tr>
<td>FloorOpm
</td>
<td>0
</td>
<td>Minimum OPM value
</td></tr>
<tr>
<td>BootOpm
</td>
<td>4
</td>
<td>Initial OPM value
</td></tr>
<tr>
<td>OpmFrequency
</td>
<td>"12C","12C","258","320","3E8","0","0","0","0","0"
</td>
<td>has one entry per operating mode in uppercase hex values, it is the supported frequency of each OPMs
</td></tr>
<tr>
<td>OpmThreshold
</td>
<td>"64","FA","1F4","2BC","3E8","0","0","0","0","0"
</td>
<td>has one entry per operating mode in uppercase hex values, it is the threshold frequency of each OPMs
</td></tr></tbody></table>
<p><u>System State:</u> 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_systemstatepolicy.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x999
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>SYSTEMSTATE
</td>
<td>Name of the System State driver
</td></tr>
<tr>
<td>UserOpm
</td>
<td>2
</td>
<td>opm = 2 for user active state
</td></tr>
<tr>
<td>priority256
</td>
<td>0x61
</td>
<td>System state driver thread priority
</td></tr></tbody></table>
<p><u>Device Monitor:</u> 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_policies.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x100
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>DEVMON
</td>
<td>Name of the Device Monitor driver
</td></tr>
<tr>
<td>SuspendState
</td>
<td>0
</td>
<td>One of the following value:<br />LATENCY_STATE_CHIP_OFF 0, CORE+MPU+OTHER = OFF",<br />LATENCY_STATE_CHIP_OSWR 1, CORE+OTHER = OSWR, MPU= CSWR",<br />LATENCY_STATE_CHIP_CSWR 2, CORE+OTHER = CSWR, MPU = CSWR",<br />LATENCY_STATE_CORE_CSWR 3, OTHER=OFF/OSWR/CSWR/INACTIVE,<br /> CORE = CSWR, MPU=CSWR",<br />LATENCY_STATE_CORE_INACTIVE 4, OTHER=OFF/OSWR/CSWR/INACTIVE,<br /> CORE = INACTIVE, MPU=CSWR",<br />LATENCY_STATE_MPU_INACTIVE 5, OTHER=OFF/OSWR/CSWR/INACTIVE,<br /> CORE+MPU = INACTIVE"<br /><br />CSWR = Clock Stopped With Retention<br />OSWR = Off State With Retention
</td></tr></tbody></table>
<p><u>Interrupt Latency:</u> 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_constraintadapters.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x100
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>INTRLAT
</td>
<td>Name of the Interrupt latency driver
</td></tr>
<tr>
<td>min
</td>
<td>0
</td>
<td>Minimum interrupt latency in ticks
</td></tr>
<tr>
<td>max
</td>
<td>0x7FFFFFFF
</td>
<td>Maximum interrupt latency in ticks
</td></tr></tbody></table>
<p><u>Smart Reflex:</u> 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>ti_policies.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x999
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Name
</td>
<td>SMARTREFLEX
</td>
<td>Name of the Smart Reflex driver
</td></tr>
<tr>
<td>SensingPeriod
</td>
<td>0x3e8
</td>
<td>Smart Reflex sensing time in milliseconds
</td></tr>
<tr>
<td>SensingDelay
</td>
<td>0x3e8
</td>
<td>Smart Reflex sensing delay in milliseconds
</td></tr>
<tr>
<td>LprOffOpm
</td>
<td>2
</td>
<td>Opm2
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>AM35x processor family does not support Smart Reflex. It doesnt support separate processor and core voltage domain and only has single core voltage domain VDD_CORE fixed at 1.2V. The max processor clock frequency derived from DPLL1 is 600MHz and can be reduced. Hence the DVFS in AM35x BSP only changes CPU operating frequency. 
</p><p>Smart Reflex driver can only be enabled when the Calibration data is available in EFUSE. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>For BSP 1.x release, in AM35x BSP, the build options for various PM drivers are enabled in AM35x_BSP.bat 
</p>
<table width="94%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>BSP_NOPMEXT
</td>
<td>Disable the Power management extension and all the associated features (DVFS,INTRLAT)
</td></tr>
<tr>
<td>BSP_NODVFS
</td>
<td>Disable Dynamic Frequency Voltage Scaling
</td></tr>
<tr>
<td>BSP_NOINTRLAT
</td>
<td>Disable Interrupt Latency module
</td></tr>
<tr>
<td>BSP_NOCPUPOLICY
</td>
<td>Disable CPU policies. Should not be disabled when DVFS is enabled.
</td></tr>
<tr>
<td>BSP_NOSYSSTATEPOLICY
</td>
<td>Disable System state policy driver
</td></tr>
<tr>
<td>BSP_NOSMARTREFLEXPOLICY
</td>
<td>Disable Smart Reflex policy driver
</td></tr></tbody></table>
<p>For BSP 1.x OMAP35x BSP and BSP 2.x (both OMAP35x and AM35x) releases, the build options for various PM drivers are enabled through Catalog, there is no documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The power management driver is based on the Windows Embedded CE power management module such as described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee497722.aspx">http://msdn.microsoft.com/en-us/library/ee497722.aspx</a> 
</p><p>The driver works standalone based on its configuration, however standard power management APIs can still be called with this extension enabled. 
</p><p><span style="color: teal;"> <b>  Example Usage </b> </span> 
</p><p>No example usage provided for this driver.
</p><p><b>AM335X EVM and AM387X EVM</b><br />
None of the PM policies and constraints (DVFS, SmartReflex, CPU load policy, etc) are supported in AM335X and AM387X BSPs. For power management support in AM335X, refer to the wiki <a href="Power_Management_in_SA_WINCE_BSP.html" title="Power Management in SA WINCE BSP">here</a>. In AM387X, only CPU idle is implemented. No other power management features are supported.
</p>
<h4><span class="mw-headline" id="SDHC_Driver">SDHC Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=38" title="Edit section: SDHC Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The TI ARM_A8 SDHC driver supports the following features: 
</p>
<ul><li>SD 2.0 compliant</li>
<li>SD High Capacity memory cards support</li>
<li>SDIO Host support<br /></li>
<li>Write-protect support</li>
<li>2 SDHC controllers/slot</li></ul>
<p>It has been written following the development concepts defined at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee484829.aspx">http://msdn.microsoft.com/en-us/library/ee484829.aspx</a> 
</p><p>It is based on the SDBUS2 driver provided since Windows Embedded CE 6.0 R2. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the SDHC driver as located under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM&lt;BSP folder&gt;\SRC\DRIVERS\SDHC\IMPL\sdhc.reg</i> 
</p><p>The following chart details these entries: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>
<p>omap_sdhc.dll 
</p><p>am33x_sdhc.dll 
</p><p>am387x_sdhc.dll 
</p>
</td>
<td>
<p>DLL of the driver for OMAP35x and AM35x BSP 
</p><p>DLL of the driver for AM335x BSP<br /> 
</p><p>DLL of the driver for AM387x BSP<br /> 
</p>
</td></tr>
<tr>
<td>Order
</td>
<td>0x21
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>SDIOPriority
</td>
<td>0xD3
</td>
<td>Priority of the controllers interrupt thread
</td></tr>
<tr>
<td>CDPriority
</td>
<td>0xD4
</td>
<td>Priority of the change detection thread
</td></tr>
<tr>
<td>BaseClockFrequency
</td>
<td>0x16e3600
</td>
<td>Max clock rate
</td></tr>
<tr>
<td>ReadWriteTimeout
</td>
<td>0x1000
</td>
<td>Timeout value in clock ticks
</td></tr>
<tr>
<td>DTOTimeout
</td>
<td>0x200
</td>
<td>Data timeout in milliseconds
</td></tr>
<tr>
<td>WakeupSources
</td>
<td>3
</td>
<td>Wake the platform up on interrupt or change detect
</td></tr>
<tr>
<td>CardDetectGPIO
</td>
<td>0x100
</td>
<td>GPIO number of the card detect pin (OMAP35x and AM35x BSP only)
</td></tr>
<tr>
<td>CardInsertedState
</td>
<td>0
</td>
<td>Active state of the card detect pin
</td></tr>
<tr>
<td>CardWPGPIO
</td>
<td>0x3F
</td>
<td>GPIO number of the write protect pin (OMAP35x and AM35x BSP only)
</td></tr>
<tr>
<td>CardWriteProtectedState
</td>
<td>1
</td>
<td>Active state of the write protect pin
</td></tr>
<tr>
<td>SlotNumber
</td>
<td>1
</td>
<td>Number of the SDHC controller instance
</td></tr>
<tr>
<td>LowVoltageSlot
</td>
<td>0
</td>
<td>High 3.3V (0) or Low 1.8V voltage slot
</td></tr>
<tr>
<td>Sdio4BitDisable
</td>
<td>0
</td>
<td>Enable(0) or disable(1) SDIO 4 bit support
</td></tr>
<tr>
<td>SdMem4BitDisable
</td>
<td>0
</td>
<td>Enable(0) or disable(1) SDMEM 4 bit support
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>On the AM35x EVM board, the "Card Detect" pin of SDHC slot 2 conflicts with the LCDs "Power Enable" pin. Therefore Display driver and SDHC slot 2 cannot be used at the same time. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>The following environment variables can be used at build time to configure the SDHC driver: 
</p>
<table width="93%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>MMCHSx_LOW_VOLTAGE
</td>
<td>Use low voltage (1.8V) on slot x
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The SDHC is a bus driver and is therefore handled by the overlying client driver depending on the type of device plugged in. Thus the client driver will expose the proper API to the application to match the devices purpose. 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage is provided for this driver.
</p>
<h4><span class="mw-headline" id="SDMA_Driver">SDMA Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=39" title="Edit section: SDMA Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>This driver provides access to the onchip SDMA controller which supports the following features: 
</p>
<ul><li>32 logical DMA channels</li>
<li>Transfer from/to memory/peripheral</li>
<li>8/16/32 but data element transfer size</li>
<li>Burst read and write</li>
<li>Up to 96 DMA requests</li>
<li>FIFO 256x32-bits wide</li></ul>
<p>This driver is available on OMAP35x and AM35x BSPs. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The SDMA driver is configured through the registry entries located in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\DMA\dma.reg</i> 
</p>
<table cellspacing="0" cellpadding="4" border="2" style="width: 946px; height: 108px;">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_sdma.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Priority256
</td>
<td>0x61
</td>
<td>Priority of the SDMA interrupt thread
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The SDMA driver is implemented as a standard stream driver exposing the following IoControls: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>IoControl</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>IOCTL_DMA_INTERRUPTDONE
</td>
<td>Called when done processing a DMA interrupt
</td></tr>
<tr>
<td>IOCTL_DMA_RESERVE_CHANNEL
</td>
<td>Reserve/configure a DMA channel
</td></tr>
<tr>
<td>IOCTL_DMA_RELEASE_CHANNEL
</td>
<td>Release a previously reserved DMA channel
</td></tr>
<tr>
<td>IOCTL_DMA_REGISTER_EVENTHANDLE
</td>
<td>Register an event for being notified of DMA interrupts
</td></tr>
<tr>
<td>IOCTL_DMA_DISABLESTANDBY
</td>
<td>Disable Standby feature of the DMA controller
</td></tr>
<tr>
<td>IOCTL_DMA_REQUEST_DEDICATED_INTERRUPT
</td>
<td>Request a dedicated interrupt for a channel
</td></tr>
<tr>
<td>IOCTL_DMA_RELEASE_DEDICATED_INTERRUPT
</td>
<td>Release dedicated interrupt of a channel
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage is provided with this driver.
</p>
<h4><span class="mw-headline" id="EDMA_Driver">EDMA Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=40" title="Edit section: EDMA Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The EDMA driver is built around the TI EDMA3 Low Level Driver 01.10 (July 2009) package. The EDMA3 LLD code has been wrapped in a Windows CE streams interface driver that handles the CE specifics such as initialization and interrupt handling. This driver is available on AM387x and AM335x BSPs.<br /> 
</p><p>The EDMA3 LLD APIs are exposed for use by drivers and the CE EDMA driver adds a few additional APIs for event handling. 
</p><p><span style="color: teal;"> <b> Registry Entries  </b> </span> 
</p><p>The EDMA driver registry entries are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\FILES\platform.reg</i> 
</p><p>The registry entries are as follows. 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td><b>Key</b>
</td>
<td><b>Value</b>
</td>
<td><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>edmadrvr.dll
</td>
<td>DLL into which the EDMA driver is built
</td></tr>
<tr>
<td>Index
</td>
<td>1
</td>
<td>Identifies the EDMA driver instance for this set of entries
</td></tr>
<tr>
<td>Order
</td>
<td>1
</td>
<td>Global order in which drivers are loaded (0 earliest). EDMA driver is used by other drivers so it is loaded early.
</td></tr>
<tr>
<td>Flags
</td>
<td>0
</td>
<td>DEVFLAGS_xxx device flags
</td></tr>
<tr>
<td>Priority256
</td>
<td>0x46
</td>
<td>IST thread priority
</td></tr></tbody></table>
<p><span style="color: teal;"> <b> Limitations  </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b> Build Options  </b> </span> 
</p><p>The EDMA region mapping registers is configured via this source file: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\EDMA\edma3cfg.c</i> 
</p><p>The region mapping register configurations are towards the end of the file. <br /> 
</p><p><span style="color: teal;"> <b> Driver API  </b> </span> 
</p><p>The driver API is defined in the follow headers: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI_AMXX\EDMA\edma.h</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI_AMXX\EDMA\edma3_drv.h</i> 
</p><p>Drivers should include the <b>edma.h</b> header. 
</p><p>The API is large and quite complex and is not reproduced here. See the comments in the header files and the EDMA datasheet for the SOC. 
</p><p><span style="color: teal;"> <b> Example Usage  </b> </span> 
</p><p>The EDMA test utility demonstrates how to use the driver interface to perform a simple memory to memory transfer: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\TEST\APPS\EDMATEST\edmatest.c</i> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\TEST\DRIVERS\EDMATEST\edma_test.c</i> 
</p><p><br />
</p>
<h4><span class="mw-headline" id="Touchscreen_Driver">Touchscreen Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=41" title="Edit section: Touchscreen Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"><b>Supported features </b></span> 
</p><p>The TI ARM_A8 BSP touch screen driver follows the DDSI interface for implementing touch screen support into GWES. The touch screen driver reference is documented in the MSDN at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485627.aspx">http://msdn.microsoft.com/en-us/library/ee485627.aspx</a> 
</p><p>The OMAP35x and AM35x Touch Screen driver implements low-level communication with the onboard TSC2046(for OMAP35xx EVM) and TSC2004(for AM35xx EVM) chip over SPI bus. It also implements sample filtering and averaging for better accurate measurement. 
</p><p>The AM335x Touch Screen driver configures the on-chip Touch screen controller and ADC to detect touch PEN UP/DOWN events and get&#160;coordinates. It implements a&#160;basic filtering and uses hardware averaging for better measurement. 
</p><p>[Update] The driver name in the bib and reg file is changed to touch.dll since transcriber looks for a dll with that particular name when launched. 
</p><p><span style="color: teal;"><b>Registry entries </b></span> 
</p><p>The registry entries below are used to configure the TSC2046 touch screen driver: 
</p><p><i>WINCEROOT\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\TOUCH\tsc2046_touch.reg</i> 
</p>
<table cellspacing="0" cellpadding="4" border="2" style="width: 928px; height: 239px;">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DriverName
</td>
<td>touch.dll
</td>
<td>DLL of the low-level part of the driver
</td></tr>
<tr>
<td>MaxCalError
</td>
<td>6
</td>
<td>Maximum calibration errors allowed
</td></tr>
<tr>
<td>PenGPIO
</td>
<td>0xAF
</td>
<td>ID of the PENIRQ GPIO
</td></tr>
<tr>
<td>PenUpDebounceMS
</td>
<td>0x28
</td>
<td>PenUp debounce time in ms (0 to disable)
</td></tr>
<tr>
<td>SampleRate
</td>
<td>
</td>
<td>Number of samples per second to acquire
</td></tr>
<tr>
<td>SPIBus
</td>
<td>SPI1:
</td>
<td>SPI bus used to access the TSC2046
</td></tr>
<tr>
<td>SPIAddr
</td>
<td>0
</td>
<td>McSPI channel to use
</td></tr>
<tr>
<td>InitialSamplesDropped
</td>
<td>2
</td>
<td>Number of samples to drop after pen detection
</td></tr></tbody></table>
<p>The registry entries below are used to configure the TSC2004 touch screen driver: 
</p><p><i>WINCEROOT\PLATFORM\AM35x_BSP\SRC\DRIVERS\TOUCH\tsc2004_touch.reg</i> 
</p>
<table cellspacing="0" cellpadding="4" border="2" style="width: 931px; height: 214px;">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DriverName
</td>
<td>tsc2004_touch.dll
</td>
<td>DLL of the low-level part of the driver
</td></tr>
<tr>
<td>MaxCalError
</td>
<td>6
</td>
<td>Maximum calibration errors allowed
</td></tr>
<tr>
<td>PenGPIO
</td>
<td>0x41
</td>
<td>ID of the PENIRQ GPIO
</td></tr>
<tr>
<td>SampleRate
</td>
<td>0x6F
</td>
<td>Number of samples per second to acquire
</td></tr>
<tr>
<td>I2CBaudrateIndex
</td>
<td>4
</td>
<td>Baudrate index of the I2C bus (4 = 3.2 MHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>1
</td>
<td>I2C bus of the TSC2004 chip
</td></tr>
<tr>
<td>I2CAddr
</td>
<td>0x4B
</td>
<td>I2C address of the TSC2004 chip
</td></tr></tbody></table>
<p>The registry entries below are used to configure the touch screen driver on AM335x: 
</p><p><i>WINCEROOT\PLATFORM\AM33x_BSP\SRC\DRIVERS\TOUCH\tsc_touch.reg</i> 
</p>
<table width="928" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DriverName
</td>
<td>touch.dll
</td>
<td>DLL of the low-level part of the driver
</td></tr>
<tr>
<td>MaxCalError
</td>
<td>6
</td>
<td>Maximum calibration errors allowed
</td></tr>
<tr>
<td>Wires
</td>
<td>4
</td>
<td>4-wires touch screen panel
</td></tr>
<tr>
<td>SampleRate
</td>
<td>
</td>
<td>Number of samples per second to acquire
</td></tr></tbody></table>
<p><br /><span style="color: teal;"><b>Limitations </b></span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"><b>Build options </b></span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"><b>Driver API </b></span> 
</p><p>The touch screen is exposed by GWES as a pointer device. No dedicated API is used for accessing the touch screen directly. 
</p><p><span style="color: teal;"><b>Example usage </b></span> 
</p><p>No example usage is provided for this driver.
</p>
<h4><span class="mw-headline" id="UART_Driver">UART Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=42" title="Edit section: UART Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The UART driver matches the serial driver requirements explained in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee483100.aspx">http://msdn.microsoft.com/en-us/library/ee483100.aspx</a> 
</p><p>The on chip UART controller supports the following features: 
</p>
<ul><li>4 UART controller instances (6 instances for AM335x and AM387x)</li>
<li>64-byte FIFO for receiver and 64-byte FIFO for transmitter</li>
<li>Programmable interrupt trigger levels for FIFOs</li>
<li>Baud rate generation from 300 bauds to 3,6 Mbauds</li>
<li>Hardware/software flow control</li>
<li>Data transmission over DMA (not supported on AM335x and AM387x)</li></ul>
<p>The upper level of the UART driver is implemented in a custom library based on Microsofts "COM_MDD2", which is located at: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\SERIAL\COM_MDD2</i> 
</p><p>This custom library brings better support for advanced power management provided by the PMEXT driver. 
</p><p><span style="color: teal"><b>Registry entries </b></span>
</p><p>The registry for the UART drivers is defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\UART\uart.reg</i> 
</p><p>Instance 1 of the UART controllers has the following configuration: 
</p>
<table style="width: 932px; height: 268px" border="2" cellspacing="0" cellpadding="4">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_uart.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>9
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>RxBuffer
</td>
<td>0x2000
</td>
<td>Rx hardware buffer size
</td></tr>
<tr>
<td>TxDmaRequest
</td>
<td>0xFFFFFFFF
</td>
<td>Tx DMA request line (0xFFFFFFFF=&gt;disable)
</td></tr>
<tr>
<td>TxDmaBufferSize
</td>
<td>0x2000
</td>
<td>Tx DMA buffer size
</td></tr>
<tr>
<td>RxDmaRequest
</td>
<td>32
</td>
<td>Rx DMA request line (0xFFFFFFFF=&gt;disable)
</td></tr>
<tr>
<td>RxDmaBufferSize
</td>
<td>0x2000
</td>
<td>Rx DMA buffer size
</td></tr>
<tr>
<td>RtsCtsEnable
</td>
<td>0
</td>
<td>Enable RTC/CTS handshake support
</td></tr>
<tr>
<td>HWMode
</td>
<td>1
</td>
<td>Use hardware auto RTC/CTS
</td></tr></tbody></table>
<p><span style="color: teal"><b>Limitations </b></span>
</p><p>The UART driver for AM335X and AM387X does not support DMA.&#160; 
</p><p><span style="color: teal"><b>Build options </b></span>
</p><p>No documented build options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>The UART driver should be used from the applicative level using Windows Embedded CEs standard serial communications functions detailed at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/bb202722.aspx">http://msdn.microsoft.com/en-us/library/bb202722.aspx</a> 
</p><p><span style="color: teal"><b>Example usage </b></span>
</p><p>No example usage is provided for this driver.
</p>
<h4><span class="mw-headline" id="USB_Host_Driver">USB Host Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=43" title="Edit section: USB Host Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The USB Host driver is based on the EHCI controller of the CPU. It exposes the USB controller as a bus driver for USB client drivers to rely on. The EHCI driver supports the following features: 
</p>
<ul><li>USB 2.0 standard compliant</li>
<li>Supports High Speed up to 480 Mbits/s</li>
<li>3 downstream ports available</li>
<li>Interface with ULPI PHY transceivers</li>
<li>USB Transceiver Less Link module</li></ul>
<p>The driver is based on the EHCI MDD provided by Microsoft available at: 
</p><p><i>&lt;WINCEROOT&gt;\PUBLIC\COMMON\OAK\DRIVERS\USB\HCD\USB20\EHCI</i> 
</p><p><span style="color: teal"><b>Registry entries </b></span>
</p><p>The registry configuration file for the USB EHCI driver is located at: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\USBHS\omap_usbhs.reg</i> 
</p>
<table style="width: 928px; height: 418px" border="2" cellspacing="0" cellpadding="4">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_ehcihcd.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x46
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Port1Mode
</td>
<td>0
</td>
<td>Port 1 mode (0=&gt;disabled,1=&gt;PHY,2=&gt;TLL)
</td></tr>
<tr>
<td>Port2Mode
</td>
<td>1
</td>
<td>Port 2 mode (0=&gt;disabled,1=&gt;PHY,2=&gt;TLL)
</td></tr>
<tr>
<td>Port3Mode
</td>
<td>0
</td>
<td>Port 3 mode (0=&gt;disabled,1=&gt;PHY,2=&gt;TLL)
</td></tr>
<tr>
<td>Port1RstGpio
</td>
<td>-
</td>
<td>Reset pin of port 1s PHY (if any)
</td></tr>
<tr>
<td>Port2RstGpio
</td>
<td>0x15
</td>
<td>Reset pin of port 2s PHY (if any)
</td></tr>
<tr>
<td>Port3RstGpio
</td>
<td>-
</td>
<td>Reset pin of port 3s PHY (if any)
</td></tr>
<tr>
<td>Port1PwrGpio
</td>
<td>-
</td>
<td>Power enable pin of port 1s PHY (if any)
</td></tr>
<tr>
<td>Port2PwrGpio
</td>
<td>0x16
</td>
<td>Power enable pin of port 2s PHY (if any)
</td></tr>
<tr>
<td>Port3PwrGpio
</td>
<td>-
</td>
<td>Power enable pin of port 3s PHY (if any)
</td></tr>
<tr>
<td>Port1PwrLevel
</td>
<td>-
</td>
<td>Power enable pin active state of port 1s PHY
</td></tr>
<tr>
<td>Port2PwrLevel
</td>
<td>1
</td>
<td>Power enable pin active state of port 2s PHY
</td></tr>
<tr>
<td>Port3PwrLevel
</td>
<td>-
</td>
<td>Power enable pin active state of port 3s PHY
</td></tr></tbody></table>
<p><span style="color: teal"><b>Limitations </b></span>
</p><p>As&#160;the AM335x and AM387x SOCs do not have EHCI&#160;controller, this section is&#160;not applicable for them.&#160; 
</p><p><span style="color: teal"><b>Build options </b></span>
</p><p>No documented build options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>The USB Host EHCI driver is implemented as a bus driver. Therefore the API used to access the USB device is dependent on the implementation of the client driver. 
</p><p><span style="color: teal"><b>Example usage </b></span>
</p><p>No example usage is provided for this driver.
</p>
<h4><span class="mw-headline" id="USB_OTG_Driver">USB OTG Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=44" title="Edit section: USB OTG Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The USB OTG driver brings the possibility of plugging both hosts and USB devices onto a single connector. The OTG mechanism will be in charge of loading the correct (Host/Device) driver accordingly. 
</p><p>It supports the features listed below: 
</p>
<ul><li>Built around the Mentor USB 2.0 OTG core</li>
<li>Supports USB 2.0 peripherals at speeds up to 480 Mbits/s (HS)</li>
<li>Supports USB 2.0 Host at speeds HS (480 Mbits/s), FS (12 Mbits/s) and LS (1.5 Mbits/s)</li>
<li>Supports all modes of transfers (control, bulk, interrupt, isochronous)</li></ul>
<p>The AM335x and AM387x have USB OTG subsystem with two ports. The AM335x EVM port 1 has micro usb connector and BSP configures this port to support the both host and device functionality. The port 2 has the&#160;host&#160;type connector and the OTG driver&#160;is configured to&#160;load the host driver only. The AM387x EVM has micro&#160;USB connectors on both ports. As the AM387x USB controller cannot do runtime ID pin detection, the USB ports statically configured as device only for the first port (USB0-OTG) and host only for the second port (USB1-OTG). The ID pin on USB1-OTG of AM387x EVM has to be grounded (Jumpers J23 and J26 needs to be shorted) to ensure that USB type A connection is detected while the board is powered up. Also the AM335x and AM387x USB subsytem has so called CPPI DMA controller, which is responsible to transfer USB packets between system memory and USB ports.&#160;There is&#160;only one&#160;CPPI DMA controller&#160;and it is shared by both ports.&#160;&#160; 
</p><p>The USB OTG driver comes in three different drivers: OTG, Host, and Device (AM335x and AM387x have additional cppi_dma driver). The OTG driver is based on the OTG MDD provided by Microsoft in the following directory: 
</p><p><i>&lt;WINCEROOT&gt;\PUBLIC\COMMON\OAK\DRIVERS\USBOTG</i> 
</p><p>By default the OTG driver is the only one to be loaded at startup, it will then load the Host or Device driver upon detection of the plugged in connector. 
</p><p><span style="color: teal"><b>Registry entries </b></span>
</p><p>The USB OTG driver is configured through the following registry files. 
</p><p><u>OTG Driver:</u> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\MUSB\MUSBOTG\musbotg.reg</i> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="100%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_musbotg.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x63
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>startupTimeout
</td>
<td>0x1388
</td>
<td>Waiting time at startup before timeout in ms
</td></tr>
<tr>
<td>DisableHighSpeed
</td>
<td>0
</td>
<td>Disable High-Speed capacity (needed by some HUBs)
</td></tr>
<tr>
<td>USBChargerHighCurrent
</td>
<td>0x1F4
</td>
<td>Number of milliamps when charging with high current
</td></tr>
<tr>
<td>USBChargerLowCurrent
</td>
<td>0x64
</td>
<td>Number of milliamps when charging with low current
</td></tr>
<tr>
<td>USBChargerNotify
</td>
<td>vbus.power.event
</td>
<td>Event to watch for charger notifications
</td></tr>
<tr>
<td>vbusDischargeTime
</td>
<td>0x50
</td>
<td>Number of milliseconds to wait before checking VBUS level after suspend
</td></tr></tbody></table>
<p><u>USB Device Driver:</u> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\MUSB\MUSBFN\musbfn.reg</i> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="100%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_musbfn.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x64
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>EnableDMA
</td>
<td>0
</td>
<td>Enable/disable DMA transfers for packets
</td></tr>
<tr>
<td>USBChargerNotify
</td>
<td>vbus.power.event
</td>
<td>Event to watch for charger notifications
</td></tr></tbody></table>
<p><u>USB Host Driver:</u> 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\MUSB\MUSBHCD\usbhcd.reg</i> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="100%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_musbhcd.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x65
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Dma
</td>
<td>1
</td>
<td>Enable/disable DMA transfers for packets
</td></tr>
<tr>
<td>MaxCurrent
</td>
<td>0x1F4
</td>
<td>Max current in milliamps provided by the host
</td></tr></tbody></table>
<p><br />
</p><p><span style="color: teal"><b>Note</b></span> 
</p><p>Relevant registry files for AM335x and AM387X BSP&#160;are located at: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\AM33X_BSP\SRC\DRIVERS\USB\USBOTG\usbotg.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM33X_BSP\SRC\DRIVERS\USB\USBFN\usbfn.reg <br /> 
&lt;WINCEROOT&gt;\PLATFORM\AM33X_BSP\SRC\DRIVERS\USB\USBH\usbh.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM33X_BSP\SRC\DRIVERS\USB\USBCDMA\usbcdma.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM387X_BSP\SRC\DRIVERS\USB\USBOTG\usbotg.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM387X_BSP\SRC\DRIVERS\USB\USBFN\usbfn.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM387X_BSP\SRC\DRIVERS\USB\USBH\usbh.reg <br />
&lt;WINCEROOT&gt;\PLATFORM\AM387X_BSP\SRC\DRIVERS\USB\USBCDMA\usbcdma.reg <br /> 
</p><p><br />
</p><p><span style="color: teal"><b>Limitations </b></span>
</p><p>The Mentor USB 2.0 OTG controller used in host mode does not support peripherals that do not comply with the USB 2.0 High Speed specification. In order to have such peripherals working on this OTG controller, one requires plugging it through a HUB that will perform the speed adaptation. Most regular USB 2.0 High Speed compliant HUBs should work. 
</p><p><span style="color: teal"><b>Build options </b></span>
</p><p>No documented build options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>No specific API is used to access the USB OTG driver as this one acts as a bus driver. The client drivers that are loaded depending on the device being plugged in will define the interface with the application layer. 
</p><p><span style="color: teal"><b>Example usage </b></span>
</p><p>No example usage provided for this driver.
</p>
<h4><span class="mw-headline" id="A_Note_about_USB_Audio">A Note about USB Audio</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=45" title="Edit section: A Note about USB Audio">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Wavplay with USB audio devices </b> </span>
</p><p>The easiest way to test USB audio is to use Microsoft provided Wavplay application. However, this application uses default audio device to play audio and does not have any means to specify output device dynamically. In order to test USB Audio feature, you will have to modify the Wavplay sample application code to explicitly set an appropriate USB-audio device index. For the OS design that comes with the BSP, this index should be '1'.
</p><p>The code for Wavplay application is located in public\common\sdk\samples\audio\wavplay\ directory. You cannot modify the code in the "public" location so you need to copy Wayplay code to your project directory and do the needed modification.
</p><p>To set the desired device index you need to modify the PlayFile function in source file wavplay.cpp file by replacing WAVE_MAPPER by the "desired index" in the following line:
</p>
<pre>   mr = waveOutOpen(&amp;hwo, <u><b>1</b></u>, pwfx, (DWORD) hevDone, NULL, CALLBACK_EVENT);
</pre>
<p><br />
</p>
<h4><span id="Video_input/Camera_Driver"></span><span class="mw-headline" id="Video_input.2FCamera_Driver">Video input/Camera Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=46" title="Edit section: Video input/Camera Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>OMAP35x EVM and AM35x EVM</b><br />
</p><p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The Video Input driver is based on the onboard TVP5146 chip that acquires video signals from various multiplexed sources then sends the video stream to the CPU over the ISP parallel bus. The Video Input driver exposes the video stream as a standard camera driver such as described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485298.aspx">http://msdn.microsoft.com/en-us/library/ee485298.aspx</a> 
</p><p>The Video Input driver is DirectShow compliant and supports the following acquisition sources: 
</p>
<ul><li>Composite</li>
<li>S-Video</li>
<li>Component</li></ul>
<p>The driver exposes the following formats: 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2" align="left">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>PIN</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Color format</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Resolution</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Bits Per Pixels</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Frames per Second</b>
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">704x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">704x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">720x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">720x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">352x240
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">352x240
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">176x120
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">176x120
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">704x576
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">704x576
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">720x576
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">720x576
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">352x288
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">352x288
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">176x144
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">176x144
</td>
<td align="center">16
</td>
<td align="center">25
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">604x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">UYVY
</td>
<td align="center">320x240
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">640x480
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr>
<tr>
<td>CAPTURE/ PREVIEW
</td>
<td align="center">YUY2
</td>
<td align="center">320x240
</td>
<td align="center">16
</td>
<td align="center">30
</td></tr></tbody></table>
<p><br /> 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the Video Input driver can be found in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\&lt;BSP&gt;\SRC\DRIVERS\CAMERA\DLL\omap_camera.reg</i> 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_camera.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x1000
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>Only interlaced input upto 480i is supported. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p>
<table width="100%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>ENABLE_DEINTERLACED_OUTPUT
</td>
<td>Even and odd fields of interlaced input are combined in the frame buffer
</td></tr>
<tr>
<td>ENABLE_YUY2
</td>
<td>Enable support for YUY2 format
</td></tr>
<tr>
<td>ENABLE_PAL
</td>
<td>Enable support for PAL resolutions and frame rates
</td></tr></tbody></table>
<p><span style="color: teal;">Note about AM35x EVM</span>:<br /> 
</p><p>There are some changes in data line connection between TVP5146 and the AM35x CCDC module in recent version of application board (1015189 Rev C). In this newer version of app board, only 8 data lines are connected between TVP5146 and CCDC module. Hence the camera driver in BSP 01.02.00 and later is modified to use PACK8 structures to store captured samples to memory. If you are using older rev of application boards (ex: 1013690, 1014473), which has 10-bit data between TVP5146 and CCDC, then you will need to modify the&#160;%_WINCEROOT%\PLATFORM\AM35X_BSP\SRC\DRIVERS\VideoInputDrv\PDD\params.h (BSP 1.X)&#160;%_WINCEROOT%\PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1\COMMON_TI\PDD\params.h (BSP 2.x) to disable the macro ENABLE_PACK8. Rebuild the camera driver.<br /> 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The Video Input driver being DirectShow compatible, it can be accessed using the DirectShow API documented at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa919874.aspx">http://msdn.microsoft.com/en-us/library/aa919874.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage provided for this driver. 
</p><p><br />
<b>AM335X EVM and AM387X EVM</b> <br />
No camera driver support in available in AM335X and AM387X BSPs.
</p>
<hr />
<h3><span class="mw-headline" id="OMAP35xx_EVM_Specific_Drivers">OMAP35xx EVM Specific Drivers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=47" title="Edit section: OMAP35xx EVM Specific Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Audio_Driver">Audio Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=48" title="Edit section: Audio Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The audio driver is based on Microsofts "Unified Audio model" model and supports the TPS65950 as the external codec. More information on this audio model can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-US/library/ee483086.aspx">http://msdn.microsoft.com/en-US/library/ee483086.aspx</a> 
</p><p>Following is the list of features supported by the codec and the driver: 
</p>
<ul><li>2-channel output line, with dedicated 3.5 jack connector</li>
<li>1-channel input line, with dedicated 3.5 jack connector</li>
<li>Configurable input gain for each channel</li>
<li>Configurable output gain for each channel</li>
<li>Mute function for output line</li></ul>
<p>The communication between the OMAP35x CPU and the TPS65950 codec is done through I2C for configuration and I2S for data communication. The OMAP35x CPU is responsible for configuring the codec through I2C to format the audio data that will be exchanged on the I2S bus. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the audio driver are located under: 
</p><p>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\TPS659XX_WAVE\tps659xx_wave.reg 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tps659xx_wave.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x20
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>ExternalPortDriver
</td>
<td>MCP2:
</td>
<td>Uses McBSP2 for I2S communication
</td></tr>
<tr>
<td>StreamAttenMax
</td>
<td>0x2C
</td>
<td>Max attenuation (-44dB for Smartphone)
</td></tr>
<tr>
<td>AudioProfile
</td>
<td>0
</td>
<td>I2S Slave-&gt;0, I2S Master-&gt;1, TDM Profile-&gt;2
</td></tr>
<tr>
<td>NumOfPlayChannels
</td>
<td>4
</td>
<td>Number of playback channels
</td></tr>
<tr>
<td>EnableAudioPlayChannels
</td>
<td>"0","2","0","2"
</td>
<td>Playback channels to enable
</td></tr>
<tr>
<td>NumOfRecChannels
</td>
<td>4
</td>
<td>Number of record channels
</td></tr>
<tr>
<td>EnableAudioRecChannels
</td>
<td>"0","1","0","1"
</td>
<td>Record channels to enable
</td></tr>
<tr>
<td>DASFHwCodecAdpaterPath
</td>
<td>hwcodecadapter.dll
</td>
<td>DLL path of the Harware codec
</td></tr>
<tr>
<td>AudioRoute
</td>
<td>6
</td>
<td>1 = Handset, 2 = Headset, 3 = Carkit (N/A), 4 = Speaker, 5 = BTHeadset (N/A), 6 = AuxHeadset
</td></tr>
<tr>
<td>HwCodecInMainMicDigitalGain
</td>
<td>0xF
</td>
<td>15dB, controls TPS659XX ATXL1PGA register
</td></tr>
<tr>
<td>HwCodecInMainMicAnalogGain
</td>
<td>4
</td>
<td>24dB, controls TPS659XX ANAMIC_GAIN register (L only)
</td></tr>
<tr>
<td>HwCodecInSubMicDigitalGain
</td>
<td>0xF
</td>
<td>15dB, controls TPS659XX ATXR1PGA register
</td></tr>
<tr>
<td>HwCodecInSubMicAnalogGain
</td>
<td>4
</td>
<td>24dB, controls TPS659XX ANAMIC_GAIN register (L only)
</td></tr>
<tr>
<td>HwCodecInHeadsetMicDigitalGain
</td>
<td>0xF
</td>
<td>15dB, controls TPS659XX ATXL1PGA register
</td></tr>
<tr>
<td>HwCodecInHeadsetMicAnalogGain
</td>
<td>2
</td>
<td>12dB, controls TPS659XX ANAMIC_GAIN register (L only)
</td></tr>
<tr>
<td>HwCodecInHeadsetAuxDigitalGain
</td>
<td>0xF
</td>
<td>15dB, controls TPS659XX ATXL1PGA, TPS659XX ATXR1PGA registers
</td></tr>
<tr>
<td>HwCodecInHeadsetAuxAnalogGain
</td>
<td>0
</td>
<td>0dB, controls TPS659XX ANAMIC_GAIN registers (L and R)
</td></tr>
<tr>
<td>HwCodecOutStereoSpeakerDigitalGain
</td>
<td>0xB5
</td>
<td>12dB coarse gain and -53dB fine gain, controls TPS659XX ARXL2PGA and ARXR2PGA registers
</td></tr>
<tr>
<td>HwCodecOutStereoSpeakerAnalogGain
</td>
<td>0
</td>
<td>12dB, controls TPS659XX ARXL2_APGA_CTL and ARXR2_APGA_CTL registers
</td></tr>
<tr>
<td>HwCodecOutStereoHeadsetDigitalGain
</td>
<td>0xBF
</td>
<td>12dB coarse gain and 0dB fine gain, controls TPS659XX ARXL2PGA and ARXR2PGA registers
</td></tr>
<tr>
<td>HwCodecOutStereoHeadsetAnalogGain
</td>
<td>0
</td>
<td>12dB, controls TPS659XX ARXL2_APGA_CTL and ARXR2_APGA_CTL registers
</td></tr>
<tr>
<td>HwCodecOutHeadsetMicDigitalGain
</td>
<td>0xAA
</td>
<td>12dB coarse gain and -21dB fine gain, controls TPS659XX ARXL2PGA and TPS659XX ARXR2PGA registers
</td></tr>
<tr>
<td>HwCodecOutHeadsetMicAnalogGain
</td>
<td>0
</td>
<td>12dB, controls TPS659XX ARXL2_APGA_CTL and ARXR2_APGA_CTL registers
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The audio driver follows the "Wave API" used by Windows Embedded CE. More information regarding this API can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485233.aspx">http://msdn.microsoft.com/en-us/library/ee485233.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>To use the examples below, you need to copy the following files from the flat release directory of your OsDesign to your board using any mean (ActiveSync, USB drive, FTP, SDCard, ): 
</p>
<ul><li>wavplay.exe</li>
<li>wavrec.exe</li>
<li>wavmixer.exe (make sure that EVM_OMAP3530\SRC\APP\WAVMIXER is included in the build)</li></ul>
<p>The following commands need to be launched from a command line window or using a Telnet connection. 
</p><p>Play a sound file: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavplay &lt;.wav file name&gt;</i>
</td></tr></tbody></table>
<p>Record sound from the line input during 5 seconds: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavrec -f &lt;output file name&gt; -t 5000</i>
</td></tr></tbody></table>
<p>Display the available mixer controls: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer l</i>
</td></tr></tbody></table>
<p>Record sound from line in for 3 seconds: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavrec -f &lt;output file name&gt; -t 3000</i>
</td></tr></tbody></table>
<p>Mute audio output: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s OUT 1 1</i>
</td></tr></tbody></table>
<p>Unmute audio output: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s OUT 1 0</i>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="Keypad_Driver">Keypad Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=49" title="Edit section: Keypad Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The keypad driver provides a set of buttons mapped to virtual keys that are managed by GWES. The OMAP35x EVM board exposes 15 push buttons that are mapped to configurable actions triggered when the buttons are pushed. GWES provides the ability for the applications to hook up events on a virtual key. Therefore virtual keys are an abstraction of the physical buttons for better portability of the applications. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the keypad driver are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\</i> <i>TPS659XX_KEYPAD \</i> <i>tps659xx_keypad.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>tps659xx_keypad.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x21
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>EnableOffKey
</td>
<td>1
</td>
<td>Pass VK_OFF to the OS
</td></tr>
<tr>
<td>EnableWake
</td>
<td>1
</td>
<td>Register the keypad as a system wake up source
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The keypad driver follows the standard Keyboard API that is used by GWES input manager. More information on Keyboard drivers can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486116.aspx">http://msdn.microsoft.com/en-us/library/ee486116.aspx</a> 
</p><p>By default, the keypad driver implements the following mapping: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Physical Button</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Virtual Key</b>
</td></tr>
<tr>
<td>S4
</td>
<td>VK_ESCAPE
</td></tr>
<tr>
<td>S5
</td>
<td>VK_TAB
</td></tr>
<tr>
<td>S6
</td>
<td>VK_THOME
</td></tr>
<tr>
<td>S7
</td>
<td>VK_TSOFT1
</td></tr>
<tr>
<td>S10
</td>
<td>VK_TSOFT2
</td></tr>
<tr>
<td>S11
</td>
<td>VK_TLEFT
</td></tr>
<tr>
<td>S12
</td>
<td>VK_SPACE
</td></tr>
<tr>
<td>S13
</td>
<td>VK_TUP
</td></tr>
<tr>
<td>S15
</td>
<td>VK_TDOWN
</td></tr>
<tr>
<td>S16
</td>
<td>VK_TBACK
</td></tr>
<tr>
<td>S17
</td>
<td>VK_TRIGHT
</td></tr>
<tr>
<td>S18
</td>
<td>VK_TACTION
</td></tr></tbody></table>
<p>This mapping can be modified from the file below: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\TPS659XX_KEYPAD\vk_map.c</i> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>The Windows Embedded CE Media Player takes advantage of the keypad driver using GWES framework. Refer to the ceplayer source code located under: 
</p><p><i>&lt;WINCEROOT&gt;\PUBLIC\DIRECTX\SDK\SAMPLES\WMP\CEPLAYER</i> 
</p>
<h4><span class="mw-headline" id="Power_Key_Driver">Power Key Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=50" title="Edit section: Power Key Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The power key driver allows the user to put the platform to suspend by pressing the PWR_ON button from the keypad during a minimum amount of time. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The keypad driver exposes its registry entries in the following file: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\EVM_OMAP3530\SRC\DRIVERS\</i> <i>TPS659XX_PWRKEY \</i> <i>tps659xx_pwrkey.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td><i>tps659xx</i> _pwrkey.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x21
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>This power key driver does not expose any API. It is a standalone driver that is functional as soon as it is loaded at startup. 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>Press the power button (labeled "PWR_ON) for more than one second and the platform will go to suspend mode. 
</p>
<hr />
<h3><span class="mw-headline" id="AM35xx_EVM_Specific_Drivers">AM35xx EVM Specific Drivers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=51" title="Edit section: AM35xx EVM Specific Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Audio_Driver_2">Audio Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=52" title="Edit section: Audio Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The audio driver is based on Microsofts "WAVEDEV2" driver model and supports Texas Instruments AIC23 codec only. More information on the WAVEDEV2 audio model can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485290.aspx">http://msdn.microsoft.com/en-us/library/ee485290.aspx</a> 
</p><p>Following is the list of features supported by the codec and the driver: 
</p>
<ul><li>2-channel output line, with dedicated 3.5 jack connector</li>
<li>2-channel input line, with dedicated 3.5 jack connector</li>
<li>Microphone input, with dedicated 3.5 jack connector</li>
<li>Configurable input gain for each channel</li>
<li>Configurable output gain for each channel</li>
<li>+20 dB boost for microphone input</li>
<li>Mute function for output line</li></ul>
<p>The AM35x Application board embeds two different AIC23 chips with a dedicated set of connectors for each codec. Note that Codec 2 does not have a "Line In" connector wired up. 
</p><p>The communication between the AM35x CPU and the AIC23 codecs is done through I2C for configuration and I2S for data communication. The AM35x CPU is responsible for configuring the codec through I2C to format the audio data that will be exchanged on the I2S bus. 
</p><p>Both codecs can be simultaneously added in the build. If only one codec is included, it will be considered as the primary sound device by the Wave API. If both of them are loaded at runtime, then Codec 2 will be the primary sound device. Codec 1 is still usable by passing its ID as the "uDeviceID" parameter to the "waveOutOpen" function. Follow this link for more details on this function: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa910393.aspx">http://msdn.microsoft.com/en-us/library/aa910393.aspx</a> 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the audio driver are located under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\WAVEDEV2\omap_wavedev2.reg</i> 
</p><p><u>Codec 1:</u> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_wavedev2.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x20
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>PortDriver
</td>
<td>MCP1:
</td>
<td>Uses McBSP1 for I2S communication
</td></tr>
<tr>
<td>I2CBaudRateIndex
</td>
<td>1
</td>
<td>Index in the I2C baudrate table (1 =&gt; 400 kHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>2
</td>
<td>I2C Bus to use for configuring the codec
</td></tr>
<tr>
<td>I2CAddress
</td>
<td>0x1A
</td>
<td>I2C address of the codec on the bus
</td></tr></tbody></table>
<p><u>Codec 2:</u> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_wavedev2.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x20
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>PortDriver
</td>
<td>MCP2:
</td>
<td>Uses McBSP2 for I2S communication
</td></tr>
<tr>
<td>I2CBaudRateIndex
</td>
<td>1
</td>
<td>Index in the I2C baudrate table (1 =&gt; 400 kHz)
</td></tr>
<tr>
<td>I2CBus
</td>
<td>2
</td>
<td>I2C Bus to use for configuring the codec
</td></tr>
<tr>
<td>I2CAddress
</td>
<td>0x1B
</td>
<td>I2C address of the codec on the bus
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>The AIC23 codec is configured as an I2S slave by default whereas the McBSP act as the master mode. The AM35x BSP does not currently support configuring the codec as the master. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The audio driver follows the "Wave API" used by Windows Embedded CE. More information regarding this API can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485233.aspx">http://msdn.microsoft.com/en-us/library/ee485233.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>To use the examples below, you need to copy the following files from the flat release directory of your OsDesign to your board using any mean (ActiveSync, USB drive, FTP, SDCard, ): 
</p>
<ul><li>wavplay.exe</li>
<li>wavrec.exe</li>
<li>wavmixer.exe (make sure that AM35x_BSP\SRC\APP\WAVMIXER is included in the build)</li></ul>
<p>The following commands need to be launched from a command line window or using a Telnet connection. 
</p><p>Play a sound file: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavplay &lt;.wav file name&gt;</i>
</td></tr></tbody></table>
<p>Record sound from the line input during 5 seconds: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavrec -f &lt;output file name&gt; -t 5000</i>
</td></tr></tbody></table>
<p>Display the available mixer controls: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer l</i>
</td></tr></tbody></table>
<p>Select Microphone as the recorder device and record for 3 seconds: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s IN 2 1</i>
</td></tr>
<tr>
<td bgcolor="#f2f2f2"><i>wavrec -f &lt;output file name&gt; -t 3000</i>
</td></tr></tbody></table>
<p>Mute audio output: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s OUT 1 1</i>
</td></tr></tbody></table>
<p>Unmute audio output: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s OUT 1 0</i>
</td></tr></tbody></table>
<p>Enable Microphone +20 dB boost: 
</p>
<table width="100%" cellspacing="0" cellpadding="10" style="border: 1px solid black;">

<tbody><tr>
<td bgcolor="#f2f2f2"><i>wavmixer s IN 3 1</i>
</td></tr></tbody></table>
<h4><span class="mw-headline" id="CAN_Driver">CAN Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=53" title="Edit section: CAN Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The BSP offers functionality for CAN communication using the J15 and J16 header pins located on the EVM application board. The CAN driver is based on the CPUs High-End CAN controller (HECC). 
</p><p>It supports the following features: 
</p>
<ul><li>Bus speed up to 1 Mbps</li>
<li>Programmable bit time according to CAN specification</li>
<li>Bus failure diagnostic</li>
<li>Automatic reply to a remote request message</li>
<li>Message filtering based on the Standard/Extended ID</li>
<li>Strobe pin feature to enable/disable the CAN transceiver</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry configuration of the CAN driver is defined under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\CAN\omap_can.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>omap_can.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>8
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>Priority
</td>
<td>0x80
</td>
<td>Priority of the interrupt service thread
</td></tr>
<tr>
<td>StrobePin
</td>
<td>0x126
</td>
<td>ID of the CAN Strobe pin
</td></tr>
<tr>
<td>StrobePinPolarity
</td>
<td>0
</td>
<td>Active state of the CAN Strobe pin
</td></tr>
<tr>
<td>BaudRate
</td>
<td>0x3D090
</td>
<td>Baud Rate of the CAN bus
</td></tr>
<tr>
<td>CanCtrlIndex
</td>
<td>0
</td>
<td>Index of the CAN controller
</td></tr>
<tr>
<td>maxRxMsg
</td>
<td>256
</td>
<td>Max number of messages stored in the receive queue
</td></tr>
<tr>
<td>TxLowMaxElem
</td>
<td>32
</td>
<td>Size of the low priority Tx message queue
</td></tr>
<tr>
<td>TxMediumMaxElem
</td>
<td>32
</td>
<td>Size of the medium priority Tx message queue
</td></tr>
<tr>
<td>TxCriticalMaxElem
</td>
<td>32
</td>
<td>Size of the high priority Tx message queue
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The driver is implemented as a standard stream driver as described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee483176.aspx">http://msdn.microsoft.com/en-us/library/ee483176.aspx</a> 
</p><p>It can be accessed using the IoControls detailed in the chart below: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>IoControl</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>IOCTL_CAN_COMMAND
</td>
<td>Send Start/Stop/Reset commands to the driver
</td></tr>
<tr>
<td>IOCTL_CAN_CONFIG
</td>
<td>Configure the CAN driver
</td></tr>
<tr>
<td>IOCTL_CAN_STATUS
</td>
<td>Get information about the drivers current status
</td></tr>
<tr>
<td>IOCTL_CAN_SEND
</td>
<td>Send one or more messages over the CAN bus
</td></tr>
<tr>
<td>IOCTL_CAN_RECEIVE
</td>
<td>Read one or more received messages
</td></tr>
<tr>
<td>IOCTL_CAN_FILTER_CONFIG
</td>
<td>Install/remove any class/subclass filter
</td></tr>
<tr>
<td>IOCTL_CAN_REMOTE_CONFIGURE_AUTO_ANSWER
</td>
<td>Set a message to automatically send on remote requests
</td></tr>
<tr>
<td>IOCTL_CAN_REMOTE_REQUEST
</td>
<td>Send a remote frame to another node on the bus
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>Below is some sample code that configures the CAN driver and sends a message over the bus. 
</p>
<pre>#include sdk_can.h

int _tmain(int argc, TCHAR *argv[], TCHAR *envp[])
{

IOCTL_CAN_COMMAND_IN cmdIn;
IOCTL_CAN_CONFIG_IN cfgIn;
IOCTL_CAN_SEND_IN sendIn;
CAN_MESSAGE msgArray[1];

// Open the CAN driver
HANDLE hCan = CreateFile(L"CAN1:",0,0,NULL,OPEN_EXISTING,0,NULL);
If (hCAN == NULL)
{
	goto error;
}

// Make sure the controller is stopped
cmdIn = STOP;
if(!DeviceIoControl(hCan,IOCTL_CAN_COMMAND,&amp;cmdIn,sizeof(cmdIn),NULL,0,NULL,NULL))
{
 goto error;
}

// Reset the controller
cmdIn = RESET;
if(!DeviceIoControl(hCan,IOCTL_CAN_COMMAND,&amp;cmdIn,sizeof(cmdIn),NULL,0,NULL,NULL))
{
 goto error;
}

// Configure the controller
cfgIn.cfgType = BAUDRATE_CFG;
cfgIn.BaudRate = 250000;
if(!DeviceIoControl(hCan,IOCTL_CAN_CONFIG,&amp;cfgIn,sizeof(cfgIn),NULL,0,NULL,NULL))
{
 goto error;
}

// Start the controller
cmdIn = START;
if(!DeviceIoControl(hCan,IOCTL_CAN_COMMAND,&amp;cmdIn,sizeof(cmdIn),NULL,0,NULL,NULL))
{
 goto error;
}
// Create a new message to send
msgArray[0].id.u32 =0;
msgArray[0].id.s_extended.id = 0x8721;
msgArray[0].id.s_extended.extended = 0x1;
msgArray[0].length = 1;
msgArray[0].MDH = 0xAA
msgArray[0].MDL = 0x55;
sendIn.priority = TXMEDIUM;
sendIn.timeout = 1000;
sendIn.nbMsg = 1;
sendIn.msgArray = msgArray;

// Send the message over the bus
if(!DeviceIoControl(hCan,IOCTL_CAN_SEND,&amp;sendIn,sizeof(sendIn),NULL,0,NULL,NULL))
{
goto error;
}

// Stop the controller
cmdIn = STOP;
if(!DeviceIoControl(hCan,IOCTL_CAN_COMMAND,&amp;cmdIn,sizeof(cmdIn),NULL,0,NULL,NULL))
{
 goto error;
}

error:

 if (hCan&#160;!= NULL)
{
  // Close the CAN driver
	CloseHandle(hCan);
}
	return 0;
}

</pre> 
<h4><span class="mw-headline" id="Keypad_Driver_2">Keypad Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=54" title="Edit section: Keypad Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The keypad driver provides a set of buttons mapped to virtual keys that are managed by GWES. The AM35x Application board exposes 10 push buttons that are mapped to configurable actions triggered when the buttons are pushed. GWES provides the ability for the applications to hook up events on a virtual key. Therefore virtual keys are an abstraction of the physical buttons for better portability of the applications. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the keypad driver are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\KEYPAD\keypad.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>keypad.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x10
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>EnableWake
</td>
<td>1
</td>
<td>Register the keypad as a system wake up source
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>As the keypad and the power key drivers share the same GPIO expander, those two drivers cannot be used simultaneously. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The keypad driver follows the standard Keyboard API that is used by GWES input manager. More information on Keyboard drivers can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486116.aspx">http://msdn.microsoft.com/en-us/library/ee486116.aspx</a> 
</p><p>By default, the keypad driver implements the following mapping: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Physical Button</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Virtual Key</b>
</td></tr>
<tr>
<td>DOWN
</td>
<td>VK_DOWN
</td></tr>
<tr>
<td>UP
</td>
<td>VK_UP
</td></tr>
<tr>
<td>MENU
</td>
<td>VK_MENU
</td></tr>
<tr>
<td>MODE
</td>
<td>VK_CONTROL
</td></tr>
<tr>
<td>SHIFT
</td>
<td>VK_LSHIFT
</td></tr>
<tr>
<td>RWD
</td>
<td>VK_LEFT
</td></tr>
<tr>
<td>FWD
</td>
<td>VK_RIGHT
</td></tr>
<tr>
<td>STOP
</td>
<td>VK_PERIOD
</td></tr>
<tr>
<td>PLAY
</td>
<td>VK_SPACE
</td></tr>
<tr>
<td>REC
</td>
<td>VK_TRECORD
</td></tr></tbody></table>
<p>This mapping can be modified from the file below: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\KEYPAD\vk_map.c</i> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>The Windows Embedded CE Media Player takes advantage of the keypad driver using GWES framework. Refer to the ceplayer source code located under: 
</p><p><i>&lt;WINCEROOT&gt;\PUBLIC\DIRECTX\SDK\SAMPLES\WMP\CEPLAYER</i> 
</p>
<h4><span class="mw-headline" id="Power_Key_Driver_2">Power Key Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=55" title="Edit section: Power Key Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The power key driver allows the user to put the platform to suspend by pressing a button from the keypad during a minimum amount of time. 
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The keypad driver exposes its registry entries in the following file: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\PWRKEY\pwrkey.reg</i> 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>pwrkey.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>8
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>priority
</td>
<td>0x80
</td>
<td>Defines the interrupt thread priority
</td></tr>
<tr>
<td>pinId
</td>
<td>0x108
</td>
<td>Defines the power key GPIO (default is MENU button)
</td></tr>
<tr>
<td>debouncePeriod
</td>
<td>0x3E8
</td>
<td>Defines for how long (in ms) the button has to be pressed
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>As the keypad and the power key drivers share the same GPIO expander, those two drivers cannot be used simultaneously. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented build options. 
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>This power key driver does not expose any API. It is a standalone driver that is functional as soon as it is loaded at startup. 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>Press the power button (default is "MENU") for more than one second and the platform will go to suspend mode. 
</p>
<h4><span class="mw-headline" id="NDIS_EMAC_Driver">NDIS EMAC Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=56" title="Edit section: NDIS EMAC Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The EMAC driver is implemented following the NDIS specification detailed in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486267.aspx">http://msdn.microsoft.com/en-us/library/ee486267.aspx</a> 
</p><p>This driver exposes the onchip EMAC controller as a network interface that can be accessed from the applicative level through the Winsock API. The EMAC controller supports the following features: 
</p>
<ul><li>Synchronous 10/100 Mbit operation</li>
<li>Dedicated CPPI DMA controller</li>
<li>Hardware error handling including CRC</li>
<li>RMII physical interface</li>
<li>MDIO module for PHY management</li>
<li>Configurable receive address matching/filtering</li>
<li>8K internal buffer descriptor memory</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The NDIS configuration registry for the EMAC driver is found under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM35x_BSP\SRC\DRIVERS\EMAC\omap_emac.reg</i> 
</p><p>The following chart sums up the applicable registry configuration for the EMAC driver: 
</p>
<table width="91%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DisplayName
</td>
<td>EMAC Miniport Driver
</td>
<td>Name of the NDIS network interface
</td></tr>
<tr>
<td>Group
</td>
<td>NDIS
</td>
<td>Class of the network driver<br />
</td></tr>
<tr>
<td>ImagePath
</td>
<td>omap_emac.dll
</td>
<td>Name of the drivers dll
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>No documented limitations. 
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p>
<table width="70%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Variable</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>SUPPORT_TWO_ETH_PORT
</td>
<td>Enable support for dual PHY
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The EMAC NDIS driver is accessed at the applicative level using the Windows Sockets API described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa917471.aspx">http://msdn.microsoft.com/en-us/library/aa917471.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage provided for this driver.
</p>
<h3><span class="mw-headline" id="AM387xx_EVM_Specific_Drivers">AM387xx EVM Specific Drivers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=57" title="Edit section: AM387xx EVM Specific Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Audio_Driver_3">Audio Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=58" title="Edit section: Audio Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Driver Features  </b></span>
</p><p>The AM387x BSP contains an audio driver for the TLV320AIC3106 Audio Codec. The driver implements the WAVEDEV2 model. Reference information is available here: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485632.aspx">http://msdn.microsoft.com/en-us/library/ee485632.aspx</a> 
</p><p>The driver supports the following feature set: 
</p>
<ul><li>Stereo playback to the <b>HP OUT</b> 3.5mm jack</li>
<li>Stereo record from the <b>MIC IN </b>3.5mm jack</li>
<li>Input and output volume control</li>
<li>Sample rates supported: 8KHz, 16KHz, 11.025KHz, 22.05KHz, 44.1KHz, 48KHz, 96KHz</li>
<li>Mono and stereo streams supported</li>
<li>8 and 16-bit sample size supported</li>
<li>McASP used to communicate with AIC3106 (I2S format with DMA support)</li>
<li>McASP configured as clock master</li></ul>
<p><span style="color: teal"><b>  Registry Entries  </b></span>
</p><p>The audio driver registry entries are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\SRC\DRIVERS\WAVEDEV2\am387x_wavedev2.reg</i> 
</p><p>The registry entries are as follows. 
</p>
<table cellspacing="0" cellpadding="4" width="100%" border="2">

<tbody><tr>
<td><b>Key</b>
</td>
<td><b>Value</b>
</td>
<td><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>wavedev2drvr.dll
</td>
<td>DLL into which the driver is built
</td></tr>
<tr>
<td>Order
</td>
<td>5
</td>
<td>Global order in which drivers are loaded (0 earliest).
</td></tr>
<tr>
<td>Priority256
</td>
<td>0x46
</td>
<td>IST priority
</td></tr>
<tr>
<td>AudioCntrlRegAddr
</td>
<td>0x48050000
</td>
<td>Base address of the McASP used
</td></tr>
<tr>
<td>IrqTx
</td>
<td>0x54
</td>
<td>McASP2 Tx interrupt number
</td></tr>
<tr>
<td>IrqRx
</td>
<td>0x55
</td>
<td>McASP2 Rx interrupt number
</td></tr>
<tr>
<td>EventIdTx
</td>
<td>0x0C
</td>
<td>EDMA event associated with McASP TX
</td></tr>
<tr>
<td>EventIdRx
</td>
<td>0x0D
</td>
<td>EDMA event associated with McASP RX
</td></tr>
<tr>
<td>EdmaEventQueue
</td>
<td>0
</td>
<td>EDMA event queue to use
</td></tr></tbody></table>
<p><span style="color: teal"><b> Limitations </b></span>
</p><p>No documented limitations. 
</p><p><span style="color: teal"><b> Build Options </b></span>
</p><p>There are no build options for this driver. 
</p><p><span style="color: teal"><b> Driver API </b></span>
</p><p>The audio driver functionality is exposed via the standard CE waveform audio APIs. 
</p><p>There are some additional custom IOCTLs implemented that support configuring the input gain. The IOCTLs are defined in the following header: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\SRC\INC\wavioctl.h</i> 
</p><p><span style="color: teal"><b> Example Usage </b></span>
</p><p>When the audio driver and Waveform Audio support are included in an OS design the following audio utilities are also built: 
</p>
<ul><li>wavplay  Plays a WAV file</li>
<li>wavrec  Records a WAV file</li>
<li>wavevol  Adjusts the audio output volume. Command line parameter is the volume between 0 and 100.</li>
<li>wavtest  Provides input gain control.</li></ul>
<p>The source code for wavevol and wavtest can be found in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\SRC\test\APPS</i> 
</p><p>Three small audio test files are also included in the BSP.  They can be found in 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\FILES</i>
</p>
<ul><li><b>test.wav</b>  Windows CE start-up sound</li>
<li><b>tones.wav</b>  10 tones at 80% amplitude</li>
<li><b>tones2.wav</b>  12 tones, an octave from middle C up, 50% amplitude</li></ul>
<p><br />
</p>
<h4><span class="mw-headline" id="Display_Driver_2">Display Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=59" title="Edit section: Display Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>For AM387x, the display subsystem is not directly controlled by the ARM-A8. Instead there is a ARM Cortex M3 (referred to as VPSS M3) running HDVPSS firmware that controls almost all aspects of display. The display driver is responsible for downloading the HDVPSS M3 firmware using an interface module called Syslink on startup. The display driver is responsible for interfacing with DDRAW/GDI/GWES on WinCE side and the VPSS M3 firmware on the other side. It communications with VPSS M3 firmware using FVID2 interface over Syslink. Syslink and VPSS M3 are only released in binary form presently.
</p><p>The WinCE display driver supports the GRPX0 pipeline of AM387x. Advanced features such as overlay support with GRPX1/GRPX2 pipelines as well as capture support are not implemented. Also software support is not implemented for vsync interrupt.
</p>
<h4><span class="mw-headline" id="NDIS_CPSW3G_Driver">NDIS CPSW3G Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=60" title="Edit section: NDIS CPSW3G Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The CPSW3G NDIS driver is implemented following the NDIS specification detailed in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486267.aspx">http://msdn.microsoft.com/en-us/library/ee486267.aspx</a> 
</p><p>This driver exposes the onchip CPSW3G switch as a network interface that can be accessed from the applicative level through the Winsock API. 
</p><p>The CPSW3G switch supports the following features: 
</p>
<ul><li>Two Ethernet ports with Selectable G/MII, RMII, and RGMII interfaces</li>
<li>Synchronous 10/100/1000 Mbit operation</li>
<li>CPPI 3.1 compliant DMA controllers</li>
<li>Hardware error handling including CRC</li>
<li>MDIO module for PHY management</li>
<li>Address Lookup Engine
<ul><li>1024 total address lookup engine (ALE) entries of VLANs and/or MAC addresses</li>
<li>VLAN support</li>
<li>Receive or destination based Multicast and Broadcast limits</li>
<li>MAC address blocking</li>
<li>Source port locking</li></ul></li>
<li>8k (2048 x 32) internal CPPI buffer descriptor memory</li>
<li>Full duplex mode supported in 10/100/1000 Mbps mode</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The NDIS configuration registry for the CPSW3G driver is found under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\SRC\DRIVERS\EMAC\cpgmacMiniport.reg</i> 
</p><p>The following chart sums up the applicable registry configuration for the CPSW3G driver: 
</p>
<table width="91%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DisplayName
</td>
<td>CPSW3G Miniport Driver
</td>
<td>Name of the NDIS network interface
</td></tr>
<tr>
<td>Group
</td>
<td>NDIS
</td>
<td>Class of the network driver<br />
</td></tr>
<tr>
<td>ImagePath
</td>
<td>am387x_cpsw3g.dll
</td>
<td>Name of the drivers dll
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>1) This version of BSP supports only single ethernet port mode.  Two ports switch mode is not supported. 
</p><p>2) CPSW3G NDIS driver and KITL ethernet driver cannot coexist.  If CPSW3G NDIS driver is enabled in Platform Builder Catalog, then KITL needs to be disabled and vice versa.
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented Build options.
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The CPSW3G NDIS driver is accessed at the applicative level using the Windows Sockets API described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa917471.aspx">http://msdn.microsoft.com/en-us/library/aa917471.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage provided for this driver.
<br />
</p>
<h3><span class="mw-headline" id="AM335x_EVM_Specific_Drivers">AM335x EVM Specific Drivers</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=61" title="Edit section: AM335x EVM Specific Drivers">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Audio_Driver_4">Audio Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=62" title="Edit section: Audio Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Driver Features  </b></span>
</p><p>The AM33x BSP contains an audio driver for the TLV320AIC3106 Audio Codec. The driver implements the WAVEDEV2 model. Reference information is available here: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee485632.aspx">http://msdn.microsoft.com/en-us/library/ee485632.aspx</a> 
</p><p>The driver supports the following feature set: 
</p>
<ul><li>Stereo playback to the <b>HP OUT</b> 3.5mm jack</li>
<li>Stereo record from the <b>LINE IN </b>3.5mm jack</li>
<li>Input and output volume control</li>
<li>Sample rates supported: 8KHz, 16KHz, 11.025KHz, 22.05KHz, 44.1KHz, 48KHz, 96KHz</li>
<li>Mono and stereo streams supported</li>
<li>8 and 16-bit sample size supported</li>
<li>McASP used to communicate with AIC3106 (I2S format with DMA support)</li>
<li>McASP configured as clock master</li></ul>
<p><span style="color: teal"><b>  Registry Entries  </b></span>
</p><p>The audio driver registry entries are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM33x_BSP\SRC\DRIVERS\WAVEDEV2\am33x_wavedev2.reg</i> 
</p><p>The registry entries are as follows. 
</p>
<table cellspacing="0" cellpadding="4" width="100%" border="2">

<tbody><tr>
<td><b>Key</b>
</td>
<td><b>Value</b>
</td>
<td><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>wavedev2drvr.dll
</td>
<td>DLL into which the driver is built
</td></tr>
<tr>
<td>Order
</td>
<td>5
</td>
<td>Global order in which drivers are loaded (0 earliest).
</td></tr>
<tr>
<td>Priority256
</td>
<td>0x46
</td>
<td>IST priority
</td></tr>
<tr>
<td>AudioCntrlRegAddr
</td>
<td>0x4803C000
</td>
<td>Base address of the McASP used
</td></tr>
<tr>
<td>IrqTx
</td>
<td>0x52
</td>
<td>McASP1 Tx interrupt number
</td></tr>
<tr>
<td>IrqRx
</td>
<td>0x53
</td>
<td>McASP1 Rx interrupt number
</td></tr>
<tr>
<td>EventIdTx
</td>
<td>0x0A
</td>
<td>EDMA event associated with McASP TX
</td></tr>
<tr>
<td>EventIdRx
</td>
<td>0x0B
</td>
<td>EDMA event associated with McASP RX
</td></tr>
<tr>
<td>EdmaEventQueue
</td>
<td>0
</td>
<td>EDMA event queue to use
</td></tr></tbody></table>
<p><span style="color: teal"><b> Limitations </b></span>
</p><p>No documented limitations. 
</p><p><span style="color: teal"><b> Build Options </b></span>
</p><p>There are no build options for this driver. 
</p><p><span style="color: teal"><b> Driver API </b></span>
</p><p>The audio driver functionality is exposed via the standard CE waveform audio APIs. 
</p><p>There are some additional custom IOCTLs implemented that support configuring the input gain. The IOCTLs are defined in the following header: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM33x_BSP\SRC\INC\wavioctl.h</i> 
</p><p><span style="color: teal"><b> Example Usage </b></span>
</p><p>When the audio driver and Waveform Audio support are included in an OS design the following audio utilities are also built: 
</p>
<ul><li>wavplay  Plays a WAV file</li>
<li>wavrec  Records a WAV file</li>
<li>wavevol  Adjusts the audio output volume. Command line parameter is the volume between 0 and 100.</li>
<li>wavtest  Provides input gain control.</li></ul>
<p>The source code for wavevol and wavtest can be found in: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM33x_BSP\SRC\test\APPS</i> 
</p><p>Three small audio test files are also included in the BSP.  They can be found in 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM33x_BSP\FILES</i>
</p>
<ul><li><b>test.wav</b>  Windows CE start-up sound</li>
<li><b>tones.wav</b>  10 tones at 80% amplitude</li>
<li><b>tones2.wav</b>  12 tones, an octave from middle C up, 50% amplitude</li></ul>
<p><br />
</p>
<h4><span class="mw-headline" id="Keypad_Driver_3">Keypad Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=63" title="Edit section: Keypad Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal"><b>Supported features </b></span>
</p><p>The keypad driver provides a set of buttons mapped to virtual keys that are managed by GWES. The AM335x GP board exposes 8 push buttons that are mapped to configurable actions triggered when the buttons are pushed. GWES provides the ability for the applications to hook up events on a virtual key. Therefore virtual keys are an abstraction of the physical buttons for better portability of the applications. 
</p><p><span style="color: teal"><b>Registry entries </b></span>
</p><p>The registry entries for the keypad driver are defined in: 
</p><p><i>&lt;WINCEROOT&gt;\platform\AM33X_BSP\SRC\DRIVERS\KEYPAD\keypad.reg</i> 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Prefix
</td>
<td>KPD.dll
</td>
<td>Prefix for device
</td></tr>
<tr>
<td>Dll
</td>
<td>keypad.dll
</td>
<td>driver dll name
</td></tr>
<tr>
<td>Index
</td>
<td>1
</td>
<td>Device Index
</td></tr>
<tr>
<td>Order
</td>
<td>0x10
</td>
<td>Global order in which drivers are loaded
</td></tr></tbody></table>
<p><br />
</p><p><span style="color: teal"><b>Limitations </b></span>
</p><p><span style="color: teal"><font color="#000000">There is no known limitaion&#160;</font></span> 
</p><p><span style="color: teal"><font color="#000000"></font><b>Build options </b></span>
</p><p>No documented build options. 
</p><p><span style="color: teal"><b>Driver API </b></span>
</p><p>The keypad driver follows the standard Keyboard API that is used by GWES input manager. More information on Keyboard drivers can be found at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486116.aspx">http://msdn.microsoft.com/en-us/library/ee486116.aspx</a> 
</p><p>By default, the keypad driver implements the following mapping: 
</p>
<table border="2" cellspacing="0" cellpadding="4" width="89%">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Physical Button</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Virtual Key</b>
</td></tr>
<tr>
<td>SW1
</td>
<td>VK_DOWN
</td></tr>
<tr>
<td>SW2
</td>
<td>VK_UP
</td></tr>
<tr>
<td>SW3
</td>
<td>VK_LEFT
</td></tr>
<tr>
<td>SW4&#160;
</td>
<td>VK_RIGHT
</td></tr>
<tr>
<td>SW5&#160;
</td>
<td>1&#160;
</td></tr>
<tr>
<td>SW6&#160;
</td>
<td>2&#160;
</td></tr>
<tr>
<td>SW9&#160;
</td>
<td>3&#160;
</td></tr>
<tr>
<td>SW10&#160;
</td>
<td>VK_RETURN
</td></tr></tbody></table>
<p>This mapping can be modified from the file below: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM33X_BSP\SRC\DRIVERS\KEYPAD\vk_map.c</i>
</p>
<h4><span class="mw-headline" id="NDIS_CPSW3G_Driver_2">NDIS CPSW3G Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=64" title="Edit section: NDIS CPSW3G Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The CPSW3G NDIS driver is implemented following the NDIS specification detailed in the following article: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/ee486267.aspx">http://msdn.microsoft.com/en-us/library/ee486267.aspx</a> 
</p><p>This driver exposes the onchip CPSW3G switch as a network interface that can be accessed from the applicative level through the Winsock API. 
</p><p>The CPSW3G switch supports the following features: 
</p>
<ul><li>Two 10/100/1000 Ethernet ports with GMII, RMII and RGMII interfaces</li>
<li>CPPI 3.1 compliant DMA controllers</li>
<li>Hardware error handling including CRC</li>
<li>MDIO module for PHY management</li>
<li>Address Lookup Engine
<ul><li>1024 addresses plus VLANs</li>
<li>VLAN support</li>
<li>Receive or destination based Multicast and Broadcast limits</li>
<li>MAC address blocking</li>
<li>Source port locking</li></ul></li>
<li>8k (2048 x 32) internal CPPI buffer descriptor memory</li></ul>
<p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The NDIS configuration registry for the CPSW3G driver is found under: 
</p><p><i>&lt;WINCEROOT&gt;\PLATFORM\AM387x_BSP\SRC\DRIVERS\EMAC\cpgmacMiniport.reg</i> 
</p><p>The following chart sums up the applicable registry configuration for the CPSW3G driver: 
</p>
<table width="91%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>DisplayName
</td>
<td>CPSW3G Miniport Driver
</td>
<td>Name of the NDIS network interface
</td></tr>
<tr>
<td>Group
</td>
<td>NDIS
</td>
<td>Class of the network driver<br />
</td></tr>
<tr>
<td>ImagePath
</td>
<td>am33x_cpsw3g.dll
</td>
<td>Name of the drivers dll
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>1) This version of BSP supports only single ethernet port mode.  Two ports switch mode is not supported. 
</p><p>2) CPSW3G NDIS driver and KITL ethernet driver cannot coexist.  If CPSW3G NDIS driver is enabled in Platform Builder Catalog, then KITL needs to be disabled and vice versa.
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented Build options.
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The CPSW3G NDIS driver is accessed at the applicative level using the Windows Sockets API described at: 
</p><p><a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/aa917471.aspx">http://msdn.microsoft.com/en-us/library/aa917471.aspx</a> 
</p><p><span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>No example usage provided for this driver.
<br />
</p>
<h4><span class="mw-headline" id="PRU_Driver">PRU Driver</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=65" title="Edit section: PRU Driver">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><span style="color: teal;"> <b>  Supported features </b> </span> 
</p><p>The PRU subsystem includes the following main features:
</p>
<ul><li>Two PRUs each with:
<ul><li>8KB program memory</li>
<li>8KB data memory</li></ul></li>
<li>12 KB general purpose shared memory</li>
<li>One Interrupt Controller (INTC)</li>
<li>16 software Events generation by 2 PRUs</li>
<li>One Ethernet MII_RT module with 2 MII ports and configurable connections to PRUs</li>
<li>One MDIO Port</li>
<li>One Industrial Ethernet Peripheral (IEP) to manage/generate Industrial Ethernet functions</li>
<li>One 16550-compatible UART with a dedicated 192 MHz clock</li>
<li>One Enhanced Capture Module (ECAP)</li></ul>
<p>The PRU driver supports only the loading of firmware to the PRU subsystem.
</p><p><span style="color: teal;"> <b>  Registry entries </b> </span> 
</p><p>The registry entries for the PRU driver are included in: 
</p><p><i>&lt;WINCEROOT&gt;\\PLATFORM\&lt;BSP Folder&gt;\SRC\DRIVERS\platform.reg</i>
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>Key</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Value</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>Dll
</td>
<td>prudrvr.dll
</td>
<td>DLL of the driver
</td></tr>
<tr>
<td>Order
</td>
<td>0x30
</td>
<td>Global order in which drivers are loaded
</td></tr>
<tr>
<td>priority256
</td>
<td>0x40
</td>
<td>Priority of the Interrupt Service Thread
</td></tr></tbody></table>
<p><span style="color: teal;"> <b>  Limitations </b> </span> 
</p><p>This version of PRU driver only demonstrates the loading of firmware to the PRU subsystem.
</p><p><span style="color: teal;"> <b>  Build options </b> </span> 
</p><p>No documented Build options.
</p><p><span style="color: teal;"> <b>  Driver API </b> </span> 
</p><p>The PRU driver is implemented as a standard stream driver exposing the following IoControls: 
</p>
<table width="89%" cellspacing="0" cellpadding="4" border="2">

<tbody><tr>
<td bgcolor="#d9d9d9" align="center"><b>IoControl</b>
</td>
<td bgcolor="#d9d9d9" align="center"><b>Description</b>
</td></tr>
<tr>
<td>PRUIOCTL_EXECUTE
</td>
<td>Called when download and execute a firmware
</td></tr>
<tr>
<td>PRUIOCTL_EXECUTE_CASE_NO
</td>
<td>Called when download and execute a firmware test case
</td></tr>
<tr>
<td>PRUIOCTL_SHOW_TEST_CASES
</td>
<td>Shows firmware test cases available
</td></tr></tbody></table>
<p><br />
<span style="color: teal;"> <b>  Example usage </b> </span> 
</p><p>A PRU download test application (prutest.exe) and a sample firmware (PRU_memCopy.fw) are provided in this version of BSP to demonstrate the firmware download.
</p><p>The sample firmware does a PRU internal memory to memory copy.  The driver verifies the memory copy is successful and prints a message.
</p><p>To execute the demonstration:
</p><p>1) Enable OAL Retail Messages in Eboot prompt
</p><p>2) Bootup the AM33x EVM
</p><p>3) telnet to the AM33x EVM
</p><p>4) At telnet prompt, type 'prutest' to see the options.
</p><p>5) Type 'prutest -i&#160;?' to see test cases
</p><p>6) Type 'prutest -i n' to execute a test case and observe the output on terminal display.
<br />
</p>
<h2><span class="mw-headline" id="BSP_Installation">BSP Installation</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=66" title="Edit section: BSP Installation">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section provides basic instructions for installation of the EVM BSP. 
</p>
<h3><span class="mw-headline" id="Install_Required_Software">Install Required Software</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=67" title="Edit section: Install Required Software">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Other software must be installed prior to installing this BSP. See section <a href="#Required_Software">Required Software</a> in this document for more information.
</p>
<h3><span class="mw-headline" id="Installing_the_TI_ARM_A8_BSP">Installing the TI ARM_A8 BSP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=68" title="Edit section: Installing the TI ARM A8 BSP">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In this release, following installers are provided for BSP: 
</p><p>1. Source for ARM-A8 processor 
</p><p>2. Demo Images for 
</p><p>&#160;&#160;&#160;&#160;   i. OMAP35xx/OMAP37xx processor(For WEC7, OMAP35xx and OMAP37xx are separate installers)<br /> 
</p><p>&#160;&#160;&#160;&#160;  ii. AM35xx processor 
</p><p>&#160;&#160;&#160;&#160; iii. AM335x processor 
</p><p>&#160;&#160;&#160;&#160;  iv. AM387x processor 
</p><p>When installing the source package, the installer prompts if the user wants to install the BSP source under _WINCEROOT (C:\WINCE600 or C:\WINCE700). If the user selects this option (default: selected), then following folders are copied under _WINCEROOT: 
</p><p>PLATFORM\AM35x_BSP 
</p><p>PLATFORM\EVM_OMAP3530 
</p><p>PLATFORM\AM33X_BSP
</p><p>PLATFORM\AM387X_BSP
</p><p>PLATFORM\COMMON\SRC\SOC\COMMON_TI_V1 
</p><p>OS-Designs\EVM_3530 
</p><p>OS-Designs\AM35x_OSDesign 
</p><p>OS-Designs\AM335X_OS
</p><p>OS-Designs\AM387X_OS
</p><p>3rdParty\dvsdk_1_11_00_02
</p><p>PUBLIC\PowerVR 
</p><p><b>IMPORTANT NOTE</b>: <span style="color: Blue">Please make sure you back up the above folders <u><b>and</b></u> delete them from WINCEROOT folder before doing the installation of BSP, otherwise the compilation of BSP may fail</span> 
</p><p>If you dont select the above option, then you need to manually copy the BSP to _WINCEROOT before compiling the BSP. The folders mentioned below can be found under &lt;BSP_INSTALL_PATH&gt;\Sources 
</p><p>The EVM_OMAP3530 folder should be copied under &lt;WINCEROOT&gt;\PLATFORM. 
</p><p>The AM35x_BSP folder should be copied under &lt;WINCEROOT&gt;\PLATFORM. 
</p><p>The AM33x_BSP folder should be copied under &lt;WINCEROOT&gt;\PLATFORM. 
</p><p>The AM387x_BSP folder should be copied under &lt;WINCEROOT&gt;\PLATFORM. 
</p><p>The COMMON_TI_V1 folder should be copied under &lt;WINCEROOT&gt;\PLATFORM\COMMON\SRC\SOC. 
</p><p>If DVSDK is needed, then copy dvsdk_wince_01_11_00_02 under &lt;WINCEROOT&gt;\3rdParty. 
</p><p>If SGX drivers are needed, then copy PowerVR under &lt;WINCEROOT&gt;\Public. 
</p><p>If sample OS-Designs are needed, copy AM335X_OS, AM387X_OS, EVM_3530 and AM35x_OSDesign under &lt;WINCEROOT&gt;\OS-Designs.
</p>
<h3><span class="mw-headline" id="PowerVR_Catalog">PowerVR Catalog</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=69" title="Edit section: PowerVR Catalog">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If PowerVR folder is copied to &lt;WINCEROOT&gt;\PUBLIC\, PowerVR Catalog items will be available in the Catalog Items View of Platform Builder in the Third Party section. 
</p><p>Note: See section in Quick Start Guide on <a href="WinCE-BSP_ARM-A8_Quick_Start_Guide.html#Selecting_the_right_version_for_PowerVR_in_OS-design" title="WinCE-BSP ARM-A8 Quick Start Guide">Selecting the right version of PowerVR</a> before building the OS-design. <br />
</p>
<h3><span id="DVSDK_Catalog_(OMAP35xx_BSP_only)"></span><span class="mw-headline" id="DVSDK_Catalog_.28OMAP35xx_BSP_only.29">DVSDK Catalog (OMAP35xx BSP only)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=70" title="Edit section: DVSDK Catalog (OMAP35xx BSP only)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If dvsdk_1_11_00_02 (or later version of dvsdk) folder is copied to &lt;WINCEROOT&gt;\3rdParty\, DVSDK Catalog items will be available in the Catalog Items View of the Platform Builder in the Third Party -&gt; Texas Instruments -&gt; Multimedia Framework section.
</p>
<h2><span class="mw-headline" id="Building_Images">Building Images</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=71" title="Edit section: Building Images">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section provides a brief overview of the steps needed to use Platform Builder to create an OS Design for the EVM BSP. Working knowledge of the Windows CE development environment and procedures is assumed. 
</p>
<h3><span class="mw-headline" id="Create_an_OS_Design_Using_Platform_Builder">Create an OS Design Using Platform Builder</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=72" title="Edit section: Create an OS Design Using Platform Builder">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Using_the_Sample_OS_Design">Using the Sample OS Design</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=73" title="Edit section: Using the Sample OS Design">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The EVM BSP includes a sample OS Design. This may be used as a starting point for creating your OS Design. Follow these steps to use the sample OS Design. 
</p><p>Locate the sample OS Design in the OS Design directory of this release. 
</p><p>Copy the folder in the &lt;WINCEROOT&gt;\OSDesigns\ directory. 
</p><p>Depending on which BSP to use, open the corresponding OSdesign solution file for the BSP from &lt;WINCEROOT&gt;\OSDesigns\
</p>
<h4><span class="mw-headline" id="Creating_a_New_OS_Design">Creating a New OS Design</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=74" title="Edit section: Creating a New OS Design">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The Platform Builder New Platform Wizard can be used to create an OS Design for use with the BSP. 
</p><p>Start Visual Studio. 
</p><p>Select <b>New -&gt;Project</b> from the <b>File</b> menu. 
</p><p>Select the Platform Builder project type. 
</p><p>Select a desired name for the new project. 
</p><p>Select OK to launch the Windows Embedded CE OS Design Wizard. 
</p><p>Select <b>EVM_OMAP3530</b> from the list of available BSPs. 
</p><p>Note that this BSP will only appear if it has been installed and the support for ARM was installed as a part of the Windows Embedded CE installation. 
</p><p>Continue the Platform Builder New Platform Wizard until complete. 
</p><p>For more information about using Platform Builder to create or modify an OS Design, consult the Platform Builder documentation. 
</p>
<h3><span class="mw-headline" id="Building_the_BSP">Building the BSP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=75" title="Edit section: Building the BSP">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Procedure">Procedure</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=76" title="Edit section: Procedure">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Start Microsoft Visual Studio using the desired OS Design (the one that includes the BSP). Use the <b>Build</b> menu, <b>Global Build Settings</b> submenu and enable the following: 
</p><p>Copy Files to Release Directory After Build 
</p><p>Make Run-Time Image After build 
</p><p>Use the <b>Project</b> menu, <b>&lt;OS Configuration Name&gt; Properties...</b> command to examine the Build Options page: 
</p>
<ul><li>If Enable Kernel Debugger or Enable KITL boxes are checked then the newly created OS image will only boot if the EVM is connected to Platform Builder using a KITL supported hardware connection.</li></ul>
<ul><li>Selecting/Deselecting "Write Run-time Image to Flash Memory" has no effect. To create NK.bin that can be flashed to NAND, please set the environment variable IMGNAND in your OS-design/Solution.</li></ul>
<p>Use the <b>Build</b> menu, <b>Build Solution</b> command to build the BSP. This operation will do a complete build including sysgen of the OS components. This operation can also be performed using the context menu in the Solution Explorer. 
</p><p><b>Note</b>: See section in Quick Start Guide on <a href="WinCE-BSP_ARM-A8_Quick_Start_Guide.html#Selecting_the_right_version_for_PowerVR_in_OS-design" title="WinCE-BSP ARM-A8 Quick Start Guide">Selecting the right version of PowerVR</a> before building the OS-design. <br /> 
</p><p>After the first successful complete build you can speed up your development cycle by limiting the build to only components that have changed. One way to do this is to navigate to your BSP in the Solution Explorer and do Targeted Builds using the context menu. 
</p><p><b>Note that any time the OS design has changed you will need to do a full rebuild that includes the sysgen step. </b>
</p>
<h4><span class="mw-headline" id="Checking_For_Excessive_Image_Size">Checking For Excessive Image Size</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=77" title="Edit section: Checking For Excessive Image Size">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The allowable size of the OS image depends on the configuration parameters in the file <i>\FILES\config.bib</i>. The final image must fit within the space allocated to the RAMIMAGE region. The space allocated to the RAM region can also be used if the AUTOSIZE option is enabled. If the size of the OS image exceeds the allowable size the image will not boot reliably. 
</p><p>Examine the output of the build log to for warnings that indicate that records were skipped when creating the .bin image. This indicates that the image did not fit in the space allocated. Unfortunately this does not generate a hard error and is easy to overlook. 
</p><p>A second restriction on the OS image is the size of the OS partition on the NAND flash chip. If you build an image that is targeted to flash it must be able to fit in the space allocated. 
</p><p><b>Note that this process applies to all image output files, including the XLDR and EBOOT. These bootloader components cant make use of the AUTOSIZE option and therefore must be able to fit entirely within the space defined for the RAMIMAGE region in their respective .BIB files. </b> 
</p>
<h3><span class="mw-headline" id="Output_File">Output File</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=78" title="Edit section: Output File">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The BSP build process produces several output files including the OS image and several bootloader files. 
</p>
<h4><span class="mw-headline" id="NK.BIN">NK.BIN</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=79" title="Edit section: NK.BIN">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The operating system image is located in a single file called NK.BIN. NK.BIN is structured in a proprietary Microsoft file format containing data records. This file cannot be executed directly by the CPU nor can it generally be programmed directly into flash. However the bootloader is designed to understand this format and it parses the data and copies it to the correct destination in memory. NK.BIN is the file that Platform Builder will download to the bootloader running on the EVM. 
</p><p>The bootloader will copy the OS image to its destination in RAM and then jump to the image entry point. At that point control has passed from the bootloader to the initialization routines in the operating system image. 
</p><p>The build process will optionally create a second operating system image file called NK.NB0. This file will only be created if the correct options are defined in the config.bib configuration file. NK.NB0 is an exact copy of the operating system image as it should exist in memory. The NK.NB0 file is normally used with JTAG equipment or other tools that directly access Flash or RAM. 
</p><p>For more detail descriptions on the Windows CE system images refers to official Microsoft Windows CE documentations. 
</p>
<h4><span class="mw-headline" id="XLDRNAND.BIN">XLDRNAND.BIN</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=80" title="Edit section: XLDRNAND.BIN">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The initial bootstrap loader is located in a single file called XLDRNAND.BIN. This file also uses the proprietary Microsoft .BIN file format. The bootloader understands this file format, and also understands the unique XLDR storage requirements in NAND Flash. 
</p><p>Platform Builder can optionally be configured to download XLDRNAND.BIN to the EVM. When the bootloader detects this file it properly programs it to the first four good blocks of NAND Flash. 
</p><p>The build process also creates the XLDRNAND.NB0 file. This file is the exact representation of the XLDR as it must appear in memory. The build process uses this file as part of the process of creating a RAW image file that can be used by the pserial.exe to program the entire bootloader. 
</p>
<h4><span class="mw-headline" id="XLDRUART.nb0">XLDRUART.nb0</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=81" title="Edit section: XLDRUART.nb0">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The initial bootstrap loader for UART is located in a single file called XLDRUART.nb0. This file also uses the proprietary Microsoft .nb0 file format. 
</p><p>XLDRUART.nb0 is used by pserial utility to initially flash the board in preparation for flashing NAND over serial. 
</p>
<h4><span class="mw-headline" id="MLO">MLO</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=82" title="Edit section: MLO">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The initial bootstrap loader is located in a single file called XLDRSD.nb0. The build process creates the MLO file from the XLDRSD.nb0. This file is the SD boot version of xldr. 
</p>
<h4><span class="mw-headline" id="EBOOTNAND.BIN">EBOOTNAND.BIN</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=83" title="Edit section: EBOOTNAND.BIN">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The primary bootloader is located in a single file called EBOOTNAND.BIN. This file also uses the proprietary Microsoft .BIN file format. 
</p><p>Platform Builder can optionally be configured to download EBOOTNAND.BIN to the EVM. When the bootloader detects this file it properly programs it to after the XLDR region in the reserved portion of NAND Flash. 
</p><p>The build process also creates the EBOOTNAND.NB0 file. This file is the exact representation of EBOOT as it must appear in memory. The build process uses this file as part of the process of creating a RAW image file that can be used by the pserialtool to program the entire bootloader region outside of bootloader control. 
</p>
<h4><span class="mw-headline" id="EBOOTSD.nb0">EBOOTSD.nb0</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=84" title="Edit section: EBOOTSD.nb0">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The build process also creates the EBOOTSD.NB0 file. This file is the exact representation of EBOOT as it must appear in memory. This file is used with MLO when booting from SD Card. 
</p>
<h4><span class="mw-headline" id="RAW_file">RAW file</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=85" title="Edit section: RAW file">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<h4><span class="mw-headline" id="OMAP35x-NAND.RAW">OMAP35x-NAND.RAW</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=86" title="Edit section: OMAP35x-NAND.RAW">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The XLDR and EBOOT are combined into a single file in a format that is suitable for programming directly into NAND flash memory. This .RAW file can be used with the pserial tool to program a functional bootloader into flash memory. 
</p>
<h4><span class="mw-headline" id="AM35x-NAND.RAW">AM35x-NAND.RAW</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=87" title="Edit section: AM35x-NAND.RAW">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The XLDR and EBOOT are combined into a single file in a format that is suitable for programming directly into NAND flash memory. This .RAW file can be used with the pserial tool to program a functional bootloader into flash memory. 
</p>
<h4><span class="mw-headline" id="AM33x-NAND.RAW">AM33x-NAND.RAW</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=88" title="Edit section: AM33x-NAND.RAW">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The XLDR and EBOOT are combined into a single file in a format that is suitable for programming directly into NAND flash memory. This .RAW file can be used with MLO.uart to program a functional bootloader into flash memory. 
</p>
<h4><span class="mw-headline" id="AM387x-NAND.RAW">AM387x-NAND.RAW</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=89" title="Edit section: AM387x-NAND.RAW">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The XLDR and EBOOT are combined into a single file in a format that is suitable for programming directly into NAND flash memory. This .RAW file can be used with XLDRUART.nb0 to program a functional bootloader into flash memory. 
</p>
<h4><span class="mw-headline" id="Locating_the_Image_Files">Locating the Image Files</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=90" title="Edit section: Locating the Image Files">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>After a successful build, the image output files will be located in the flat release directory. This directory is typically a subdirectory of the OS design directory in the top level OSDESIGNS folder. The build process copies all the files that will eventually make up the final image output files to this directory. It then uses this directory as a staging area to create the final bootloader and OS images. 
</p><p>The Platform Builder <b>Build</b> menu, <b>Open Build Window</b> command can be used to open a command window with the current directory set to the flat release directory.
</p>
<h2><span class="mw-headline" id="Booting_the_EVM">Booting the EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=91" title="Edit section: Booting the EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>There are a number of sources that the EVM can be set to automatically boot from. This chapter describes those sources. 
</p>
<h3><span class="mw-headline" id="Boot_switch_Settings">Boot switch Settings</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=92" title="Edit section: Boot switch Settings">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="OMAP35xx_EVM">OMAP35xx EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=93" title="Edit section: OMAP35xx EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>SW4 </b>on OMAP35xx EVM is used to select different boot mode. 
</p><p><span style="color: teal;"><b>Booting from SD card Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW4</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br /> 
</p><p><span style="color: teal;"><b>Booting from NAND Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW4</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br /> 
</p>
<h4><span class="mw-headline" id="AM35xx_EVM">AM35xx EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=94" title="Edit section: AM35xx EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>SW7 </b>on AM35xx EVM is used to select different boot mode. 
</p><p><span style="color: teal;"><b>Booting from SD card Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW7</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br /> 
</p><p><span style="color: teal;"><b>Booting from NAND card Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW7</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br /> 
</p>
<h4><span class="mw-headline" id="AM387x_EVM">AM387x EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=95" title="Edit section: AM387x EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>S1 and SW13 </b>on AM387x EVM are used to select different boot mode. All pins on SW13 are set to OFF mode.<br /> 
</p><p><span style="color: teal;"><b>Booting from SD card Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="12"><b>S1</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td>
<td align="center">9
</td>
<td align="center">10
</td>
<td align="center">11
</td>
<td align="center">12
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON&#160;</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br /> 
</p><p><span style="color: teal;"><b>Booting from NAND Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="12"><b>S1</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td>
<td align="center">9
</td>
<td align="center">10
</td>
<td align="center">11
</td>
<td align="center">12
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td>
<td align="center">OFF
</td></tr></tbody></table>
<p><br />
</p>
<h4><span class="mw-headline" id="AM335x_EVM">AM335x EVM</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=96" title="Edit section: AM335x EVM">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>SW3 and SW4 </b>on AM335x EVM base board are used to select different boot mode. SW3 and SW4 settings are as follows:<br /> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW4</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>&#160;
</td></tr></tbody></table>
<p><br /> <span style="color: teal;"><b>Booting from SD card Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW3</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>&#160;
</td></tr></tbody></table>
<p><br /> 
</p><p><span style="color: teal;"><b>Booting from NAND Setting </b></span> 
</p>
<table width="79%" cellspacing="0" cellpadding="4" border="2" align="center">

<tbody><tr>
<td bgcolor="#cccccc" align="center" colspan="8"><b>SW3</b> Switch Position
</td></tr>
<tr>
<td align="center">1
</td>
<td align="center">2
</td>
<td align="center">3
</td>
<td align="center">4
</td>
<td align="center">5
</td>
<td align="center">6
</td>
<td align="center">7
</td>
<td align="center">8
</td></tr>
<tr>
<td align="center"><b>ON</b>
</td>
<td align="center">OFF
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON&#160;</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON</b>
</td>
<td align="center"><b>ON&#160;</b>
</td></tr></tbody></table>
<p><br /> 
</p><p><br />
</p>
<h3><span class="mw-headline" id="Booting_from_SD_Memory_Card">Booting from SD Memory Card</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=97" title="Edit section: Booting from SD Memory Card">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The EVM is capable of booting the BSP from a correctly formatted, programmed and inserted SD memory card. Use the TI SDCard boot utility provided in this release to do so. Select MLO and then EBOOTSD.nb0 to obtain a bootable SD Card. 
</p><p>Use the switch settings mentioned in <i>Boot Switch settings</i> to boot from SD Card. 
</p>
<h3><span class="mw-headline" id="Booting_from_NAND_Flash">Booting from NAND Flash</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=98" title="Edit section: Booting from NAND Flash">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span id="Flashing_the_board_(OMAP35x_or_AM35x)_over_UART"></span><span class="mw-headline" id="Flashing_the_board_.28OMAP35x_or_AM35x.29_over_UART">Flashing the board (OMAP35x or AM35x) over UART</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=99" title="Edit section: Flashing the board (OMAP35x or AM35x) over UART">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Here are the steps needed in order to flash XLDR and EBOOT to NAND flash through serial communication. 
</p><p><span style="color: teal;"> <b>  Host Side Software utility </b> </span> 
</p><p>1) On the host side, a PC utility called <i>pserial.exe</i> is required to perform the first steps of this tutorial. If this utility is not present on the host computer, you might want to follow step 2 to 9. 
</p><p>2) Download host PC utility <a rel="nofollow" class="external text" href="http://omap-u-boot-utils.googlecode.com/files/omap-u-boot-utils-pack-r0.2.tgz">http://omap-u-boot-utils.googlecode.com/files/omap-u-boot-utils-pack-r0.2.tgz</a> 
</p><p>3) <i>pserial.exe</i> is available in the <i>bin</i> directory of the downloaded tarball for WINXP x86 32 bits. If you need to compile and build your own <i>pserial.exe</i> utility, please follow steps 4 to 9. 
</p><p>4) Unzip the <i>omap-u-boot-utils.tag-v0.2.0.tgz</i> included inside the downloaded tarball to the location of your choice. 
</p><p>5) You should now have directory called <i>nmenon-omap-u-boot-utils-1a51d6b5c5947ad94c58c266c4e735fd776d30d8</i>. 
</p><p>6) Follow instructions in the <i>Windows</i> section in <i>omap-u-boot-utils\README</i> to install <i>MinGW</i> gnu compiler and GnuWin32 applications. 
</p><p>7) Follow instructions in the <i>Windows</i> section in <i>omap-u-boot-utils\README</i> to set up your <i>PATH</i> environment variable. You may need to re-login for changes to take effect. 
</p><p>8) Start a <i>cmd</i> window and <i>cd </i>to your<i>omap-u-boot-utils </i>directorythen type <i>make</i> 
</p><p>9) This should generate <i>pserial.exe</i>. 
</p><p><span style="color: teal;"> <b>  Target Side Software </b> </span> 
</p><p>1) Build your OS Design in <i>Release</i> configuration. 
</p><p>2) Copy <i>XLDRUART.nb0</i> and <i>&lt;BSP specific&gt;-nand.raw</i> from your Flat Release Directory to your folder containing <i>pserial.exe.</i> 
</p><p><span style="color: teal;"> <b>  Flashing NAND </b> </span> 
</p><p>1) If it is OMAP35x EVM, set boot switch to boot from NAND. 
</p><p>If it is AM35x EVM, set boot switch to boot from SD card. 
</p><p>2) Connect a serial cable between the device UART port (UART3 on OMAP35xx EVM and UART on AM35x EVM) and your PCs COM1. 
</p><p>3) On PC, start a <i>cmd</i> window <i>cd </i>to your<i>pserial.exe </i>directory then run <i>pserial.exe p COM1 f XLDRUART.nb0</i> 
</p><p>4) Power up the board. The download is in progress in the <i>cmd</i> window. 
</p><p>5) When the download is done ("<i>file download completed" </i>is shown), keep the board powered<u>.</u> 
</p><p>6) Bring up HyperTerminal: Start &gt; All Programs &gt; Accessories &gt; Communications &gt; HyperTerminal. 
</p><p>7) Configure COM1 to 115200:8:None:1:None 
</p><p>8) You should now see 則 every 10 seconds on HyperTerminal. 
</p><p>9) On HyperTerminal, choose Transfer &gt; Send File 
</p><p>10) Choose Xmodem from drop down menu on Dialog box. 
</p><p>11) Browse to your<i>OMAP35xx-nand.raw </i>or<i>AM35x-nand.raw </i>fileand click <i>Send</i>. 
</p><p>12) Send progress is shown within 10 sec. This download takes about 3 minutes. 
</p><p>13) Once download is completed, turn off the board and change SW4 as follows to select NAND Flash as the boot device. 
</p><p>14) Power up the board. The board should now boot from NAND flash.
</p><p><br />
</p>
<h4><span id="Flashing_the_board_(AM387x)_over_UART"></span><span class="mw-headline" id="Flashing_the_board_.28AM387x.29_over_UART">Flashing the board (AM387x) over UART</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=100" title="Edit section: Flashing the board (AM387x) over UART">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Steps to flash XLDR and EBOOT to NAND flash through serial communication:
</p><p><span style="color: teal;"> <b>  Host Side Software utility </b> </span> 
</p><p>1) HyperTerminal is needed on the host side PC.
</p><p><span style="color: teal;"> <b>  Target Side Software </b> </span> 
</p><p>1) Build your OS Design in <i>Release</i> configuration. 
</p><p>2) <i>XLDRUART.nb0</i> and <i>AM387X-nand.raw</i> are generated in Flat Release Directory. 
</p><p><span style="color: teal;"> <b>  Flashing NAND </b> </span> 
</p><p>1) Set boot switch to boot from UART (BTMODE[4:0] = 10111). 
</p><p>2) Connect a serial cable between the device UART port and your PCs COM1. 
</p><p>3) On PC, start HyperTerminal and configure it to 115200-8-EVEN-1
</p><p>4) On HyperTerminal: Transfer &gt; Send File &gt; select Xmodem on drop down and browse to xldruart.nb0 located in Flat Release Directory.
</p><p>5) Remove any SD card from the EVM if there is any and boot up EVM. 
</p><p>6) Before 8 C's are displayed on HyperTerminal, click Send and download should begin.
</p><p>7) After xldruart.nb0 is downloaded, with EVM still running, change HyperTerminal setting to 115200-8-NONE-1 
</p><p>8) 則s should now be displayed on HyperTerminal every 10 sec.
</p><p>9) On HyperTerminal: Transfer &gt; Send File &gt; Xmodem on drop down and browse to AM387X-nand.raw in the Flat Release Directory.
</p><p>10) Click 'Send' and download should now begin. 
</p><p>11) When download is done, power off EVM
</p><p>12) Change boot switch setting to boot from NAND flash (BTMODE[4:0] = 10011)
</p><p>13) Power up the board. The board should now boot from NAND flash.
</p>
<h4><span id="Flashing_the_board_(AM335x)_over_UART"></span><span class="mw-headline" id="Flashing_the_board_.28AM335x.29_over_UART">Flashing the board (AM335x) over UART</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=101" title="Edit section: Flashing the board (AM335x) over UART">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>On AM335X, since the bootloader downloaded by ROM bootloader over UART will be put in a non-4K boundary location, which is in conflict to the EC7 requirement of bootloader's starting address must be at a 4K-boundary location, flashing AM335x board over UART can only be done by using a special MLO (MLO.uart) copied to SD card.
</p><p>Steps to flash XLDR and EBOOT to NAND flash through serial communication:
</p><p><span style="color: teal;"> <b>  Host Side Software utility </b> </span> 
</p><p>1) HyperTerminal is needed on the host side PC.
</p><p><span style="color: teal;"> <b>  Target Side Software </b> </span> 
</p><p>1) Build your OS Design in <i>Release</i> configuration. 
</p><p>2) <i>MLO.uart</i> and <i>AM33X-nand.raw</i> are generated in Flat Release Directory. 
</p><p><span style="color: teal;"> <b>  Flashing NAND </b> </span>
</p><p>1) Copy MLO.uart to SD and rename it to MLO
</p><p>2) Set Boot pin to boot from SD:  SW3[8:1]=00000001  SW4[8:1]=01000000
</p>
<pre>  (NOTE: label on sw is in reverse (as of 4Jan2012), ON is actually 0) 
</pre>
<p>3) On PC, open HyperTerminal with 115200-8-NONE-1 
</p><p>4) Boot up EVM.
</p><p>5) 則s should now be displayed on HyperTerminal every 10 sec.
</p><p>6) On HyperTerminal: Transfer &gt; Send File &gt; Xmodem on drop down and browse to AM33X-nand.raw in Flat Release Directory.
</p><p>7) Click 'Send' and download should now begin. 
</p><p>8) When download is done, power off EVM
</p><p>9) Change boot switch setting to boot from NAND flash (SW3[8:1]=00000010  SW4[8:1]=01000000)
</p><p>10) Power up the board. The board should now boot from NAND flash.
</p>
<h4><span class="mw-headline" id="Flashing_the_board_over_Platform_builder">Flashing the board over Platform builder</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=102" title="Edit section: Flashing the board over Platform builder">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>If no bootloader is present in the NAND Flash already, follow the instructions to boot from SD Card, but instead of selecting the EBOOTSD.nb0, select EBOOTNAND.nb0 as only EBOOTNAND.nb0 provides NAND flash functionality in the bootloader. Once the SD Card is properly formatted, rename EBOOTNAND.nb0 on your SD Card to EBOOTSD.nb0 so that XLDR can find it during boot time. 
</p><p>After booting the device, download any image (XLDRNAND.bin, EBOOTNAND.bin or NK.bin) to the device to flash it automatically. Make sure to have the IMGNAND environment variable set when building NK.bin if you wish to flash it. 
</p><p>Eboot has an option to flash NK.bin automatically after downloading from SD&#160;card or from Platform builder. To enable this option, select the following option from Eboot menu: 
</p><p>&#160;&#160;&#160; [Flash Management] -&gt; Enable flashing NK.bin 
</p>
<h4><span class="mw-headline" id="Flashing_the_board_through_SD_card">Flashing the board through SD card</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=103" title="Edit section: Flashing the board through SD card">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>To flash XLDR/Eboot/nk.bin from SD card, 
</p><p>1. Copy EBOOTND.bin/XLDRNAND.bin/NK.bin to SD card. 
</p><p>2. Enable flashing by select following option from Eboot menu: 
</p>
<pre>     [Flash Management] -&gt; [8]Enable flashing NK.bin  

</pre>
<p>&#160;&#160;&#160; On OMAP35x and AM35x platforms, when flashing XLDR, it is imperative that you select ONLY hamming 1 bit ECC mode since this is the ONLY mode supported by ROM code. This can be done by selecting the following option: 
</p>
<pre>   [Flash Management] -&gt; [9]Set ECC mode -&gt; 0 (hamming 1 bit ECC)

</pre>
<p>&#160;&#160;&#160; On AM387x and AM335x platforms, when flashing XLDR, it is imperative that you select ONLY BCH 8bit ELM-X ECC mode since this is the ONLY mode supported by ROM code. This can be done by selecting the following option: 
</p>
<pre>   [Flash Management] -&gt; [9]Set ECC mode -&gt; 4(BCH 8bit ELM-X)
 
</pre>
<p>3. Change the SDcard settings for image name to ebootnd.bin/xldrnand.bin/nk.bin from following Eboot Menu: 
</p>
<pre>    [SDCard Settings] -&gt; [Enter Filename]
</pre>
<p>4. Select boot from SD card: 
</p>
<pre>    [Select Boot Device] -&gt; [NK from SDCard File]
</pre>
<p>If NK.bin is loaded, after flashing, the program will continue to boot Kernel. If XLDR/EBoot is loaded, reboot is needed. 
</p><p>Please note that since OMAP35x and AM35x BootROM can only recognize Hamming 1 bit ECC, XLDR should always be flashed in 1 bit ECC mode. Eboot should be flashed in desired ECC mode. When using BCH 4 bit and BCH 8 bit XLDR/EBOOT, please use the following Eboot menu to set to Hamming 1 bit ECC mode: 
</p>
<pre>    [Flash Management] -&gt; [9]Set ECC mode -&gt; 0 (hamming 1 bit ECC)
</pre>
<p><br />
Please note that since AM387x and AM335x BootROM can only recognize BCH 8bit ELM-X ECC, XLDR should always be flashed in BCH 8bit ELM-X ECC mode. Eboot should be flashed in BCH 8bit ELM ECC mode. Please use the following Eboot menu to set to BCH 8bit ELM-X or BCH 8bit ELM ECC mode: 
</p>
<pre>    [Flash Management] -&gt; [9]Set ECC mode -&gt; 4(BCH 8bit ELM-X)
</pre>
<pre>    [Flash Management] -&gt; [9]Set ECC mode -&gt; 3(BCH 8bit ELM)
</pre>
<p>When switch from betweem ECC modes, it is recommended to erase NAND before the operation.
</p>
<h4><span class="mw-headline" id="Booting_from_NAND">Booting from NAND</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=104" title="Edit section: Booting from NAND">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Once the NAND is flashed correctly, change boot switch to select NAND Flash as the boot device and boot the board. 
</p>
<h4><span id="Switching_to_XLDR/EBOOT_with_a_different_NAND_ECC_(OMAP3530_and_AM35X_only)"></span><span class="mw-headline" id="Switching_to_XLDR.2FEBOOT_with_a_different_NAND_ECC_.28OMAP3530_and_AM35X_only.29">Switching to XLDR/EBOOT with a different NAND ECC (OMAP3530 and AM35X only)</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=105" title="Edit section: Switching to XLDR/EBOOT with a different NAND ECC (OMAP3530 and AM35X only)">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Before switch to a XLDR/EBOOT binary with a different NAND ECC (Hamming 1 bit/BCH 4 bit/ BCH 8 bit), erase block range 0-15 from the following Eboot menu: 
</p><p>[Flash Management] -&gt; Erase block range
</p>
<h2><span class="mw-headline" id="Loading_OS_Images">Loading OS Images</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=106" title="Edit section: Loading OS Images">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The bootloader included in the BSP is capable of downloading and using new bootloader and OS images. This section describes the most commonly used image download methods. A working knowledge of the Windows CE development environment and procedures is assumed. 
</p><p>The bootloader is able to communicate with Platform Builder to download updated images. This includes the operating system image as well as updated versions of the XLDR and EBOOT. 
</p><p>The bootloader can program XLDR and EBOOT images into their correct location in the reserved portion of NAND flash. It automatically programs the OS image into the OS partition or downloads it directly to RAM depending on how the image was built. 
</p>
<h3><span class="mw-headline" id="EVM_Setup">EVM Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=107" title="Edit section: EVM Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The bootloader must be configured to load an image from the Ethernet or USB RNDIS. Ethernet is the default setting if the configuration parameters have not been changed. 
</p>
<h4><span class="mw-headline" id="Download_Images_using_Ethernet">Download Images using Ethernet</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=108" title="Edit section: Download Images using Ethernet">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p><b>OMAP35x</b> <b>EVM</b><br /> 
</p>
<ul><li>Select option [2] on the serial boot menu to configure the boot device.</li>
<li>Select option [1] LAN9115 MAC.</li>
<li>Optionally save the settings.</li>
<li>Connect the EVM3530 Ethernet to the same subnet as the Host PC.<br /></li></ul>
<p><b>AM35x EVM</b> 
</p>
<ul><li>Select option [2] on the serial boot menu to configure the boot device.<br /></li>
<li>Select option [1] for Internal EMAC or option [2] for LAN9311 MAC.<br /></li>
<li>Optionally save the settings.<br /></li>
<li>Connect the internal EMAC or LAN9311 Ethernet to the same subnet as the Host PC. <br /></li></ul>
<p><b>AM335x EVM</b> 
</p>
<ul><li>Select option [2] on the serial boot menu to configure the boot device.<br /></li>
<li>Select option [1] for Internal EMAC.<br /></li>
<li>Optionally save the settings.<br /></li>
<li>Connect the internal EMAC to the same subnet as the Host PC. <br /></li></ul>
<p><b>AM387x EVM</b> 
</p>
<ul><li>Select option [2] on the serial boot menu to configure the boot device.<br /></li>
<li>Select option [1] for Internal EMAC.<br /></li>
<li>Optionally save the settings.<br /></li>
<li>Connect the internal EMAC to the same subnet as the Host PC. <br /></li></ul>
<h4><span class="mw-headline" id="Download_Images_using_USB_RNDIS">Download Images using USB RNDIS</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=109" title="Edit section: Download Images using USB RNDIS">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>This feature is only available for OMAP35x and AM35x BSPs. USB RNDIS connection requires installation of drivers on the Host PC and Host PC setup which is documented in the following article: <a rel="nofollow" class="external text" href="http://msdn.microsoft.com/en-us/library/bb500929.aspx">http://msdn.microsoft.com/en-us/library/bb500929.aspx</a><font color="#1f497d">. </font>Users must also assign a static IP address to the (RNDIS) network adaptor used to communicate with the EVM, or provide bridging between the RNDIS adaptor and the Host PCs main intranet adaptor; static IP address assignment will result in a faster boot. 
</p>
<ul><li>Select option [2] on serial boot menu to configure the boot device.</li>
<li>Select option [2] USB RNDIS Fn.</li>
<li>Save the settings.</li>
<li>Connect the EVM USB OTG port to the Host PC USB Host port.</li></ul>
<h3><span class="mw-headline" id="Setup_Platform_Builder">Setup Platform Builder</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=110" title="Edit section: Setup Platform Builder">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Platform Builder must be configured to download the OS image or bootloader file. 
</p>
<ul><li>Start Visual Studio and select the Platform Builder project containing the EVM BSP.</li>
<li>Select the desired configuration (Release/Debug).</li>
<li>Select <b>Properties</b> from the <b>Project</b> menu to bring up the project properties dialog box.</li>
<li>Expand the Configuration tree and select the General node.</li>
<li>Select the desired .BIN file from the drop down dialog box. The available options will be the .BIN files that exist in the flat release directory corresponding to the OS design.</li></ul>
<p>The default setting will be NK.BIN, allowing the OS image to be downloaded and optionally debugged. However, this mechanism allows the XLDR or EBOOT images to also be downloaded if necessary. 
</p>
<h3><span class="mw-headline" id="Configure_Platform_Builder_Connectivity_Options">Configure Platform Builder Connectivity Options</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=111" title="Edit section: Configure Platform Builder Connectivity Options">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Platform Builder must be configured to communicate with the EVM over the Ethernet connection (if using either Ethernet or USB RNDIS Fn). Platform Builder can communicate with any device on the same subnet as long as that device uses the EBOOT protocol. 
</p><p>1) Enter the Target menu, Connectivity Options , Target Device Connectivity Options. 
</p><p>2) Select Kernel Service Map to bring up the kernel services settings. 
</p><p>3) Set Target Device to CE Device. 
</p><p>4) Set Download to Ethernet. 
</p><p>5) Set <b>Transport</b> to Ethernet. This setting will be used whenever a KITL enabled image is run on the EVM. 
</p><p>6) Set <b>Debugger </b>to KdStub. This setting will be enabled the kernel debugger component when the debugger is included in the image running on the EVM. 
</p><p>7) Click the <b>Settings</b> button next to the Download box to bring up the <b>Ethernet Download Settings</b> dialog box. 
</p><p>8) Start the download operation on the EVM by selecting Option [0] (Exit and Continue). The EVM will obtain an IP address via DHCP if necessary, then start broadcasting BOOTME packets to the network. 
</p><p>9) Select the ID string corresponding to the EVM that will appear in the Ethernet Download Settings dialog box. It will be of the form EVM3530-xxxxx, where the last 5 digits are derived from the MAC address. Close the dialog box. 
</p><p><b>Note that the name under both the Download and Transport drop down boxes contain the same name that was just selected. Platform Builder will attempt to communicate with the IP address associated with this name on all subsequent connection attempts. Close the Connectivity Options dialog. </b> 
</p>
<h3><span class="mw-headline" id="Download_Image">Download Image</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=112" title="Edit section: Download Image">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Once Platform Builder has been configured to communicate with the EVM the image can be downloaded. The download operation is triggered from the EVM by broadcasting the BOOTME packet. Platform Builder listens for these packets and responds when it detects the request. 
</p><p>1) Ensure the EVM is still broadcasting BOOTME packets. Once an IP address has been obtained, it will broadcast the packets for approximately two minutes. The device will need to be reset and the download operation reinitiated if this time period has been exceeded. 
</p><p>Select <b>Attach Device</b> from the <b>Target</b> menu. The Download dialog box will appear, and the download will proceed as soon as a BOOTME packet is detected. 
</p>
<h3><span class="mw-headline" id="Load_OS_image_through_SD_card">Load OS image through SD card</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=113" title="Edit section: Load OS image through SD card">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>When booting system from SD card, NK.bin can also be loaded from SD card. 
</p><p>From Eboot main menu, select option [2]  Select Boot Device. 
</p><p>Then configure the boot device to be "NK from SDCard FILE". 
</p>
<h2><span class="mw-headline" id="Debugging">Debugging</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=114" title="Edit section: Debugging">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This section discusses the options available to debug EVM bootloader and OS images. A working knowledge of the Windows CE development environment and procedures is assumed. 
</p>
<h3><span class="mw-headline" id="Debugging_the_Bootloader">Debugging the Bootloader</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=115" title="Edit section: Debugging the Bootloader">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The bootloader does not contain a software debugger component that allows it to communicate with the kernel debugger in Platform Builder. As a result it is not possible to use breakpoints, step through code etc. The only supported debug method is the serial debug port. 
</p><p>Platform Builder provides a debugger plug-in interface called ExDI2 that allows JTAG vendors to leverage the kernel debugger features. A third party tool that supports the OMAP35xx or AM35xx processor family and the ExDI2 interface would provide the option to do bootloader source level debugging using the JTAG interface. 
</p>
<h3><span class="mw-headline" id="Debugging_the_Operating_System">Debugging the Operating System</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=116" title="Edit section: Debugging the Operating System">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Platform Builder supports source level debugging with a debugger component in the kernel. The debugger must be included in the operating system image and the image must be configured to support a KITL connection to make use of this feature. 
</p><p>An OS design typically has two configurations that are created by default when the project is created. The Debug configuration disables compiler optimizations for ease of debugging, and includes the kernel debugger and KITL components. A Release configuration enables compiler optimizations and generally does not contain the kernel debugger. These options can be changed in the Configuration Manager. 
</p><p>It is possible to include the kernel debugger and KITL in both Release and Debug configurations. These two items are kernel DLLs that are included when the image is built and have no dependencies on the Release and Debug configurations. It is sometimes useful to include the debugger and KITL in a Release configuration along with debug versions of selected modules to enable a debugging environment that is closer to a normal production environment. 
</p>
<h4><span class="mw-headline" id="Image_Configuration">Image Configuration</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=117" title="Edit section: Image Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The Kernel Independent Transport Layer driver is added to the OS image by clearing the IMGNOKITL environment variable. This is usually done in the Build Options node in the project Properties dialog. Select the desired configuration (Release or Debug) and ensure that the Enable KITL check box is set appropriately. 
</p><p>The kernel debugger is included in the image in a similar fashion. This component is controlled with the IMGNODEBUGGER environment variable. This variable is exposed in the Properties dialog with a check box as well. 
</p><p>It is important to note that an image with KITL included and enabled requires a connection to Platform Builder in order for it to boot. The operating system will hang waiting for the connection to complete if the KITL link is active. Do not include KITL in an image unless a connection to Platform Builder is available or KITL is disabled via the serial bootloader menu. 
</p>
<h4><span class="mw-headline" id="Ethernet_KITL">Ethernet KITL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=118" title="Edit section: Ethernet KITL">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The Ethernet port is normally used as the KITL transport as it provides the fastest speeds. The Ethernet port must be connected to a hub that is on the same subnet as the Host PC running Platform Builder. The Ethernet port must be selected as the Debug device using the serial bootloader menu. 
</p><p>The Ethernet KITL transport uses a dedicated set of routines to communicate with the kernel. It does not use the Ethernet NDIS miniport driver. It is critical that the Ethernet miniport driver be disabled when Ethernet KITL is in use. Failure to do so will cause the device to hang because the Ethernet driver will interfere with the KITL communications. The Ethernet NDIS miniport driver can be disabled by setting the BSP_NOETHERNET environment variable. The VMINI component can be used to expose the Ethernet KITL link to applications. 
</p>
<h4><span class="mw-headline" id="USB_RNDIS_KITL">USB RNDIS KITL</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=119" title="Edit section: USB RNDIS KITL">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The USB OTG port can also be used as the KITL transport. This port is normally used when an Ethernet port is not available. It is more difficult to set up because it requires a USB driver to be installed on the Host PC and it requires either a network bridge or Internet Connection Sharing to be enabled. USB RNDIS KITL is typically not as stable as Ethernet KITL because of the increased complexity of the interface. 
</p><p>The USB RNDIS KITL transport uses a dedicated set of routines to communicate with the kernel. It does not use the standard USB function or OTG stacks. It is critical that all USB drivers be disabled when USB RNDIS KITL is in use. The USB RNDIS KITL implementation automatically disables the standard USB drivers when KITL is active. 
</p>
<h4><span class="mw-headline" id="Serial_Debug_Messages">Serial Debug Messages</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=120" title="Edit section: Serial Debug Messages">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The serial debug port at CPU UART3 is exposed on the RS-232 connector labeled UART3 on the main board. This port will print out all debug messages until the KITL transport is loaded. After KITL is initialized only low level messages that bypass the KITL interface will be written to this port. 
</p><p>The debug port can be disabled and made available for normal application use if desired. It is important to note that the UART3 serial driver should not be loaded if this port is to be used as a debug port. The UART3 serial driver can be disabled by setting the environment variable BSP_NOCOM3. 
</p><p>It is sometimes beneficial to use serial debug messages instead of the KITL link. This option can print debug messages to the serial port much faster than they will appear over an Ethernet/USB RNIDS KITL link because of the overhead of the KITL protocol and Platform Builder synchronization. To use this feature simply remove KITL and the kernel debugger from the OS image. All messages will then be monitored with a terminal program. 
</p><p><b>Note that these messages will not appear in the Platform Builder Debug window because Platform Builder only shows the messages that come over a KITL link. </b> 
</p>
<h2><span class="mw-headline" id="Getting_started">Getting started</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=121" title="Edit section: Getting started">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This chapter is a guide for working with the Texas Instruments EVM platform mentioned at the start of this document. Hardware setup is provided. 
</p>
<h3><span class="mw-headline" id="OMAP35xx_EVM_overview">OMAP35xx EVM overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=122" title="Edit section: OMAP35xx EVM overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Here is a picture of the top view of OMAP35xx EVM board. <br /> 
</p><p><br /> 
</p><p><a href="File_Top_omap35x_evm.html" class="image"><img alt="Top omap35x evm.jpg" src="https://processors.wiki.ti.com/images/c/ce/Top_omap35x_evm.jpg" width="400" height="271" /></a>
</p>
<h3><span class="mw-headline" id="AM35xx_EVM_overview">AM35xx EVM overview</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=123" title="Edit section: AM35xx EVM overview">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Here is a picture of the AM35xx EVM board along with a brief description of the different components which are part of the eXperimenter board (on the left) and the application board (on the right). Notice the screws in the middle which hold both boards together. 
</p><p><a href="File_WinCE-BSP_ARM-A8_User_Guide_03.html" class="image"><img alt="WinCE-BSP ARM-A8 User Guide 03.png" src="https://processors.wiki.ti.com/images/7/7b/WinCE-BSP_ARM-A8_User_Guide_03.png" width="800" height="335" /></a><br /> <br /> 
</p>
<h3><span class="mw-headline" id="DVI_Functionality_Setup">DVI Functionality Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=124" title="Edit section: DVI Functionality Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Here are the steps needed in order to enable and use DVI. 
</p><p>1) On AM35xx EVM, before booting the board, make sure Switch 8 on S7 is set to "on". 
</p><p>2) For AM35xx, use the HDMI/DVI cable (HDMI end connected to EVM, DVI to monitor). For OMAP35xx, a DVI cable is required. 
</p><p>3) Boot the board. 
</p><p>4) In EBOOTs configuration menu, go to "Select Display Resolution" and choose the resolution for the DVI output among those available. 
</p><p>5) Exit the menu and load the kernel. 
</p>
<h3><span class="mw-headline" id="Flashing_the_board">Flashing the board</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=125" title="Edit section: Flashing the board">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Refer section 5.1 on how to flash NAND over serial. 
</p>
<h3><span class="mw-headline" id="Video_Input_Functionality_Setup">Video Input Functionality Setup</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=126" title="Edit section: Video Input Functionality Setup">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The video input driver supports composite, component and S-Video inputs (via TVP5146). A sample application to test video capture is also provided. 
</p><p><span style="color: teal;"> <b>  OMAP37xx/DM37xxx EVM setup </b> </span> 
</p><p>The video inputs on the OMAP35xx and DM37xx EVMs are ready to use out of the box. No additional hardware setup is required. 
</p><p><span style="color: teal;"> <b>  AM35xx EVM setup </b> </span> 
</p>
<ul><li>Before booting the board, make sure "user switches" on the application board are configured as this: 1,2: ON&#160;; 3,4: Dont care.</li>
<li>In your OSDesign, make sure VRFB driver is not selected.<br /></li>
<li>If using BSP 01.02.00 and later, use newer app board revisions (1017100 and later). See note on AM35x EVM <a href="#Video_input_Driver">here</a>. If using older rev of BSP (01.01.00 or earlier), then older rev of app boards (1013690, 1014473) should work fine. <br /></li></ul>
<p><span style="color: teal;"> <b>  Sample Test Application </b> </span> 
</p><p>CaptureTest is a DirectShow utility that can be used to capture video from the EVMs video inputs (S-Video, component and Composite) and optionally encoded into H.264 or MPEG4 format in an ASF container using TIs DSP based encoders. CaptureTest also displays performance metrics such as fps and ARM/DSP utilization. The source code for CaptureTest can be found under&#160;%WINCEROOT%\PLATFORM\&lt;BSP&gt;\SRC\APP\CAPTURETEST. 
</p><p><u>Command Line Options</u> 
</p><p>To view the command line options supported by CaptureTest, run it with the /? switch and you will see the following output: 
</p>
<pre>Usage: CaptureTest [options]
Options:
        /auto                 - auto-run graph without user input. 
        /br {bitrate}         - Specify encode bitrate in bps
                                default: 2000000 bps
        /cap {wxh@fps}        - Specify capture params in the specified format           
                                e.g. 640x480@30,default: 720x480@30
        /file {filename}      - Specify output ASF file
                                If /file option is not specified, or 
                                /venc is none, NULL sink is used
        /sd                   - output file will be created on SD card
        /nand                 - output file will be created on NAND flash
        /usb                  - output file will be created on USB storage
        /pv                   - Enable preview (disabled by default)
        /time                 - time in ms to run graph and exit app
                               (ignored if /auto is not specified)
        /venc {encoder}       - h264, mpeg4, raw or none
                                default: None
        /vin {video input}    - svideo, ypbpr or av
                                default: Composite(AV)
</pre> 
<p>Further explanation of some of the command line options: 
</p><p><b>/auto</b> - Specifying this will cause CaptureTest to run in a non-interactive mode i.e. the capture graph will run automatically after the application is executed. When used with the /time option, it facilitates running the application in batch mode from a script. By default, when /auto is not specified, the application starts in interactive mode with the filter graph stopped. To run the graph, the user must key in r inside the application window. To stop the graph when running, the user must key in the s key. If /auto is specified but /time is not specified, the graph will run indefinitely until the user presses the s key or shuts down the application. 
</p><p><b>/time</b> - It is used with /auto to specify the time duration for which the capture graph will run after which the application will shut down automatically. It is ignored if /auto is not specified. 
</p><p><b>/br</b> - The bitrate of the encoder can be specified with this option. If /br is not specified, the encode bitrate defaults to 2Mbps. 
</p><p>E.g. specifying /br 1000 means the encoder will be configured to encode at a bitrate of 1Mbps 
</p><p><b>/cap</b> - Some capture driver parameters such as capture resolution and frame rate can be changed with this option. Only parameters supported by the driver will be supported. When CaptureTest runs, it displays the capabilities advertised by the capture driver. 
</p>
<pre>CaptureTest: Capabilities of capture driver ---&gt;
CaptureTest:0 - (Video, UYVY, 720x480, 16 bpp, 30 fps, 165.888 mbps)
CaptureTest:1 - (Video, UYVY, 704x480, 16 bpp, 30 fps, 162.201 mbps)
CaptureTest:2 - (Video, UYVY, 352x240, 16 bpp, 30 fps, 40.550 mbps)
CaptureTest:3 - (Video, UYVY, 176x120, 16 bpp, 30 fps, 10.137 mbps)
CaptureTest:4 - (Video, UYVY, 720x576, 16 bpp, 25 fps, 165.888 mbps)
CaptureTest:5 - (Video, UYVY, 704x576, 16 bpp, 25 fps, 162.201 mbps)
CaptureTest:6 - (Video, UYVY, 352x288, 16 bpp, 25 fps, 40.550 mbps)
CaptureTest:7 - (Video, UYVY, 176x144, 16 bpp, 25 fps, 10.137 mbps)
CaptureTest:8 - (Video, UYVY, 640x480, 16 bpp, 30 fps, 147.456 mbps)
CaptureTest:9 - (Video, UYVY, 320x240, 16 bpp, 30 fps, 36.864 mbps)
CaptureTest: Setting capture parameters to 720x480@30fps
</pre> 
<p>By default, CaptureTest will try to set the capture parameters to 720x480 at 30fps. If this is not, supported by the capture driver, you will see an error message and the capture driver will default to capability 0 advertised by it. A current limitation of this option is that the YUV pixel format cannot be changed from the pixel format specified in capability 0. This will be fixed in a future release. 
</p><p><b>/vin</b> - This option is used to specify the video capture input port on the EVM. The following values are supported: 
</p>
<dl><dd><b>svideo</b> - S-Video port</dd></dl>
<dl><dd><b>ypbpr</b> - Component video port</dd></dl>
<dl><dd><b>av</b> - Composite video port</dd></dl>
<p><b>/venc</b> - This option is used to specify if an encoder will or will not be used to encode the captured video. The following options are supported: 
</p>
<dl><dd><b>h264</b> - Use the TI H.264 encoder. Performance stats (fps, ARM &amp; DSP utilization etc.) are printed if the "Perf" and "Stats" debug zones are enabled for TIMM.DLL and the "Stats" debug zone is enabled for H264VideoEncoder.dll.</dd></dl>
<dl><dd><b>mpeg4</b> - Use the TI MPEG4 encoder. Performance stats (fps, ARM &amp; DSP utilization etc.) are printed if the "Perf" and "Stats" debug zones are enabled for TIMM.DLL and the "Stats" debug zone is enabled for MPEG4VideoEncoder.dll..</dd></dl>
<dl><dd><b>none</b> - Dont use an encoder (no performance stats are printed).</dd></dl>
<dl><dd><b>raw</b> - CaptureTest uses a sample grabber filter to measure the time duration between consecutive frames. It prints performance stats (fps &amp; ARM utilization) based on this if the "Perf" and "Stats" debug zones are enabled for CaptureTest.exe.</dd></dl>
<p><b>/file</b> - This option is used to specify the name of a file where CaptureTest will write the encoded video in ASF container format. By default, the file will be created in the root directory \ unless an explicit path is specified. 
</p><p>E.g. \temp\clip.asf 
</p><p>A limitation of this option is that it will not parse path names with spaces even if quotes are used to encapsulate the name. 
</p><p>E.g. \"Storage Card"\clip.asf 
</p><p>To overcome this limitation, files can be stored on a SD card using the /sd switch to accompany /file. The switches /nand and /usb are also available if the output file is to be saved to NAND and USB storage respectively. 
</p><p>E.g. Specifying "/file clip.asf /sd" will save the encoded output to \Storage Card\clip.asf 
</p><p>If /file is not specified, encoded frames are sent to a Null Sink filter. 
</p><p><u>Limitations</u> 
</p>
<ul><li>Preview does not work when the BSP 1.x is built with VRFB enabled and if you dont have the CE6 Nov 2010 monthly update installed on your setup. The Nov 2010 CE6 monthly update fixes the stride issue and Preview will work with VRFB enabled after this update is applied.</li>
<li>Capturetest output is exclusively delivered as RETAILMSGs, so to view them, enable OAL retail messages in the bootloader or make sure KITL is enabled.</li>
<li>Captured YUV frames cannot be saved to a file with the /file option when /venc none or /venc raw is specified.</li>
<li>The YUV pixel format cannot be changed from the pixel format specified in capability 0. This will be fixed in a future release.</li>
<li>For BSP 2.x releases, the video encoder option is not suported.</li></ul>
<h3><span class="mw-headline" id="RTC_Demo">RTC Demo</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=127" title="Edit section: RTC Demo">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The wakeme application has been provided to test and demonstrate the RTC wakeup feature in the TI ARM_A8 BSP. Wakeme will suspend the platform for a default of 120 seconds and will then be resumed by the RTC. This timeout time is configurable in the command line execution of the application. 
</p>
<h4><span class="mw-headline" id="Location_of_Test">Location of Test</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=128" title="Edit section: Location of Test">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The wakeme rtc test can be found in the BSP test directory: 
</p><p>\PLATFORM\&lt;BSP Folder&gt;\SRC\test\wakeme 
</p>
<h4><span class="mw-headline" id="Using_the_Wakeme_Application">Using the Wakeme Application</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=129" title="Edit section: Using the Wakeme Application">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The wakeme application can be executed in one of the following ways: 
</p><p>Using built-in command line or telnet: 
</p><p>i.e.  the following will suspend the platform for 3 minutes: 
</p><p>wakeme.exe 180 
</p><p>Running the executable without arguments uses the default 120 second RTC timeout. 
</p><p>Note that the timeout specified should be greater than (atleast twice) the min RTC resolution supported by the device (10 secs for OMAP35x and 60 secs for AM35x)
</p>
<h3><span class="mw-headline" id="CAN_Setup_and_Demo">CAN Setup and Demo</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=130" title="Edit section: CAN Setup and Demo">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<h4><span class="mw-headline" id="Canbench">Canbench</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=131" title="Edit section: Canbench">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>Canbench is an application that sends data. Someone must be listening on the BUS and acknowledge the message (Kvaser CAN probe is a good tool for this). 
</p><p><span style="color: teal;"> <b>  Board Setup </b> </span> 
</p><p>Probe.DB9.7 &lt;-&gt; J36.1 
</p><p>Probe.DB9.2 &lt;-&gt; J36.2 
</p><p>Probe.DB9.3 &lt;-&gt; J36.4 
</p><p>J15.3 &#160;&lt;-&gt; J36.2 (This is the 120 Ohm line adaptation resistor) 
</p><p><span style="color: teal;"> <b>  Running the Demo </b> </span> 
</p><p>This section needs to be filled out, specifically how to use the Kvser CAN probe applications 
</p>
<h4><span class="mw-headline" id="CanbenchRX">CanbenchRX</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=132" title="Edit section: CanbenchRX">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>CanbenchRX is an application that receives data. Someone must be sending data on the BUS (Kvaser CAN probe is a good tool for this). 
</p><p><span style="color: teal;"> <b>  Board Setup </b> </span> 
</p><p>Probe.DB9.7 &lt;-&gt; J36.1 
</p><p>Probe.DB9.2 &lt;-&gt; J36.2 
</p><p>Probe.DB9.3 &lt;-&gt; J36.4 
</p><p>J15.3 &#160;&lt;-&gt; J36.2 (This is the 120 Ohm line adaptation resistor) 
</p><p><span style="color: teal;"> <b>  Running the Demo </b> </span> 
</p><p>This section needs to be filled out, specifically how to use the Kvser CAN probe applications 
</p>
<h4><span id="CanDemoMaster/CanDemoEcho"></span><span class="mw-headline" id="CanDemoMaster.2FCanDemoEcho">CanDemoMaster/CanDemoEcho</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=133" title="Edit section: CanDemoMaster/CanDemoEcho">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>CanDemoMaster is a simple echo test app for CAN. The application sends data to the bus. It also receives packets from the BUS. 
</p><p>CanDemoEcho is a simple echo test application for CAN. The application loops waiting for CAN messages. When one or more messages are received, they are sent back to the BUS. 
</p><p><span style="color: teal;"> <b>  Board Setup </b> </span> 
</p><p>Two board setup required, connected as follow: 
</p><p>B1.J15.1 &#160;&lt;-&gt; B2.J15.1 
</p><p>B1.J15.2 &#160;&lt;-&gt; B2.J15.2 
</p><p>B1.J15.4 &#160;&lt;-&gt; B2.J15.4 
</p><p>B2.J15.3 &#160;&lt;-&gt; B2.J36.2 (This is the 120 Ohm line adaptation resistor) 
</p><p>To add a probe (Such as Kvaser USBCAN II)&#160;: 
</p><p>Probe.DB9.7 &lt;-&gt; B1.J36.1 
</p><p>Probe.DB9.2 &lt;-&gt; B1.J36.2 
</p><p>Probe.DB9.3 &lt;-&gt; B1.J36.4 
</p><p>The probe should be configured in "silent" mode if possible. Otherwise the probe will ack the CAN packets (and the tests will show less errors) 
</p><p><span style="color: teal;"> <b>  Running the Demo </b> </span> 
</p><p>Run test through command line or batch script. 
</p><p>Example: Echo TX messages have higher priority (lower ID) than master Tx. Fixed baudrate. 
</p><p>Run the following command on board 1: 
</p><p>candemoecho -d10000 -b500 -idtx120 -idrx121 
</p><p>Run the following command on board 2: 
</p><p>candemomaster&#160; -d8000 -gmax1 -b500 -idtx121 -idrx120
</p>
<h2><span class="mw-headline" id="Sample_Applications">Sample Applications</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=134" title="Edit section: Sample Applications">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>This chapter mentions a few sample applications that are provided with the BSP. 
</p>
<h3><span class="mw-headline" id="Shell_Commands">Shell Commands</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=135" title="Edit section: Shell Commands">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The Windows CE shell has been extended with custom OMAP shell commands. These commands can be accessed in multiple ways: 
</p><p>For KITL build, use Target control window in Platform builder. Type&#160;? to list the commands. 
</p><p>Ex: rotate 
</p><p>This rotates the LCD screen by 90 
</p><p>For NON-KITL builds, but Telnet enabled: Telnet to the box and use "do&#160;?" command to list the available commands. The commands are same as above except that "do" needs to be appended before the command 
</p><p>Ex: do rotate 
</p><p>For NON-KITL builds with telnet disabled, use the cmd window on EVMs desktop to execute the same commands as in telnet window 
</p><p>Ex: do rotate 
</p><p>The commands that are available include dumping/modifying the registers, rotate LCD screen, turn display/TV out/DVI on and off, etc 
</p>
<h3><span class="mw-headline" id="Silverlight_Demos">Silverlight Demos</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=136" title="Edit section: Silverlight Demos">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>"Silverlight for Windows embedded" catalog entry is enabled by default in the OS designs provided by TI. Similarly hardware acceleration of Silverlight is enabled by default using the BSP_XRPLUGIN_OPENGL flag in the OSDesign environment variable. The BSP_XRPLUGIN_OPENGL flag results in the use of Microsoft's Silverlight OpenGL plugin. The Graphics acceleration for most cases will result in better rendering speed and lower CPU usages (since the work is deferred to the SGX).
</p><p>If you have your own OSDesign then make sure that the "Silverlight for Windows Embedded" catalog under "Shell and User Interface" category is enabled and that the BSP_XRPLUGIN_OPENGL environment variable is set. 
</p><p>If you want to disable hardware acceleration of Silverlight, then BSP_XRPLUGIN_OPENGL should be undefined for the platform; in which case the system will use the GDI plugin (software) for Silverlight applications.
</p>
<h4><span class="mw-headline" id="WinCE_6.0_BSP">WinCE 6.0 BSP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=137" title="Edit section: WinCE 6.0 BSP">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The OSDesign provided by default for the different platforms contain some Silvelight applications which are incorporated in the final image and are embedded in the WinCE desktop. These applications are based on Microsofts provided sample code for Silverlight with some additions made to the functionality to support rotation of the display. 
</p><p>When executing any of these applications from the desktop (Bounce, Bubbles or Carousel) the system will attempt to show it in Landscape mode to use as much as possible the display size. When the application runs it will show the number of Frames Per Second (FPS) along the CPU usage for the given application. 
</p>
<h4><span class="mw-headline" id="WEC7_BSP">WEC7 BSP</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=138" title="Edit section: WEC7 BSP">edit</a><span class="mw-editsection-bracket">]</span></span></h4>
<p>The silverlight demos (Bubbles, Bounce, Carousel) are not part of WEC7 release from Microsoft and hence not included in the WEC7 BSP release. But the files can be copied from the WinCE6 installation/WinCE6 BSP release and demos can be run using the following instructions.
</p><p><b>KITL build:</b>
</p>
<ol><li>Copy xamlperf.exe, bounce.xaml, bubbles.xaml, carousel.xaml from WinCE6 BSP release into FLATRELEASE folder.</li>
<li>Copy the .png files for each of the demos (from C:\WINCE600\PUBLIC\COMMON\OAK\FILES\XAMLPERF\BUBBLES, C:\WINCE600\PUBLIC\COMMON\OAK\FILES\XAMLPERF\BOUNCE, C:\WINCE600\PUBLIC\COMMON\OAK\FILES\XAMLPERF\CAROUSEL) into \Windows dir of the target.</li>
<li>Run the following commands for the demos.</li></ol>
<pre>  s xamlperf \Release\bounce.xaml
  s xamlperf \Release\bubbles.xaml
  s xamlperf \Release\carousel.xaml
</pre>
<p><br />
<b>Non-KITL build:</b>
</p><p>Assuming telnet is enabled.
</p>
<ol><li>Copy all the files mentioned above into \windows folder of the device (this can be done by having all the files mentioned on a SD card and then copying them to the \windows folder)</li>
<li>Then run the following commands from the telnet window(or from the cmd window on the device)</li></ol>
<pre>  xamlperf \Windows\bounce.xaml
  xamlperf \Windows\bubbles.xaml
  xamlperf \Windows\carousel.xaml
</pre>
<h3><span class="mw-headline" id="PowerVR_Demos">PowerVR Demos</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=139" title="Edit section: PowerVR Demos">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Provided in the BSP release, a directory named PowerVR-Demos contains a set of applications that can be used to validate and test the proper behavior of the PowerVR installation in the system. To run these files, any of these mechanisms can be used: 
</p><p>For KITL enabled builds: 
</p><p>Ensure that the applications are copied into the Flat Release Directory. E.g. Copy the OGLESChameleonMan.exe into <i>_WINCEROOT\OSDesigns\EVM_3530\EVM_3530\RelDir\EVM_OMAP3530_ARMV4I_Release</i> or the appropriate directory. 
</p><p>Once the file is present in the flat release directory, either from Visual Studio, use the "Target"&#160;? "Run Programs" menu to execute the desired application. 
</p><p>Or, use the Command Prompt (Alt+1) to execute the application from the command prompt (e.g. s OGLESMouse). 
</p><p>For NON_KITL builds 
</p><p>The applications need to be copied into the device. The easiest way to do this is to copy the application(s) into an SD card and use the "Start"&#160;? "Run" menu to open the SD Storage contents and execute the desired application. 
</p><p>The demos provided are built to show the performance of that particular demo in terms of FPS, which will be displayed in form of Retail Messages (e.g. the WinCE Debug Log window in Visual Studio for KITL enabled images) and can be used for reference purposes. In these the <i>eglSwapInterval</i> has been set to zero, allowing the application to render freely without waiting for any event. The Chameleon Man application has been modified so the FPS display is presented directly on the display as well, therefore it can be read for images that dont have any means to present Retail Messages. 
</p><p>The OGLESChameleonMan, OGLESMouse and OGLESVase are applications that use the OGLES1.1 standard while the OGLES2Skybox is based on the OGLES2 standard. 
</p>
<h3><span id="Silverlight_based_video_player_(WEC7_only)"></span><span class="mw-headline" id="Silverlight_based_video_player_.28WEC7_only.29">Silverlight based video player (WEC7 only) <br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=140" title="Edit section: Silverlight based video player (WEC7 only)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>If silverlight and windows video player is enabled in the Catalog, then you will be able to play video files using the silverlight video player. Just double click on the video file and silverlight video player will launch and play the file. Note there are some limitation with this player when using TI&#160;DSP&#160;based codecs. See limitations section <a href="Guidelines_for_Porting_CE6_based_DVSDK_release_to_WEC7.html#Limitations" title="Guidelines for Porting CE6 based DVSDK release to WEC7">here</a>.<br />
</p>
<h3><span id="Sample_DShow_Player_Application_(ceplayit)_(WEC7_only)"></span><span class="mw-headline" id="Sample_DShow_Player_Application_.28ceplayit.29_.28WEC7_only.29">Sample DShow Player Application (ceplayit) (WEC7 only)<br /></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=141" title="Edit section: Sample DShow Player Application (ceplayit) (WEC7 only)">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>Since silverlight based video player have few limitations on our BSP 2.x releases, the sample Dshow player application ceplayit is recommended for video playback demo purposes. Find a detialed readme.txt at&#160;%_WINCEROOT%\public\directx\sdk\samples\dshow\Players\ceplayit. This player is included by default in the sample OS-design shipped with the BSP 2.x release. To include it in your OS-design, define an environment variable <b>sysgen_dshow_sample</b> in your OS-design and add the following line to your bib file.<br />
</p>
<pre>ceplayit.exe $(_FLATRELEASEDIR)\ceplayit.exe NK 
</pre>
<p>Example Usage:
</p>
<pre>ceplayit \storage_card\demo.avi 
</pre>
<p><br /><br />
</p>
<h2><span class="mw-headline" id="Support_for_BeagleBone">Support for BeagleBone</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;section=142" title="Edit section: Support for BeagleBone">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>Release 2.30 contains preliminary support for AM335x based BeagleBone platform. This BSP has not gone through complete system test cycle and users of this BSP are expected to add features and harden the BSP as per their needs. Following features are available and have been tested:
</p>
<ol><li>Because of lack of LCD, windows desktop is seen on remote display</li>
<li>3D graphics support using PowerVR</li>
<li>Ethernet Connectivity</li>
<li>USB OTG Support (Port 0 - function only; Port 1 - host only)</li></ol>
<p>Note: Real time performance of Video and Graphics demos is not good due to remote display. This is not a chip limitation since the same applications run fine on the AM335x EVM.
</p>
<!-- 
NewPP limit report
Cached time: 20201130232957
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.572 seconds
Real time usage: 0.576 seconds
Preprocessor visited node count: 5291/1000000
Preprocessor generated node count: 11010/1000000
Postexpand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip postexpand size: 7095/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 -total
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:7317-0!canonical and timestamp 20201130232957 and revision id 114100
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>WinCE-BSP ARM-A8 User Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>WinCE-BSP ARM-A8 User Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>WinCE-BSP ARM-A8 User Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;oldid=114100">https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;oldid=114100</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_WinCE.html" title="Category:WinCE">WinCE</a></li><li><a href="Category_GSG.html" title="Category:GSG">GSG</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=WinCE-BSP+ARM-A8+User+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="WinCE-BSP_ARM-A8_User_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:WinCE-BSP_ARM-A8_User_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="WinCE-BSP_ARM-A8_User_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/WinCE-BSP_ARM-A8_User_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/WinCE-BSP_ARM-A8_User_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;oldid=114100" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=WinCE-BSP_ARM-A8_User_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 24 July 2012, at 14:29.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.572","walltime":"0.576","ppvisitednodes":{"value":5291,"limit":1000000},"ppgeneratednodes":{"value":11010,"limit":1000000},"postexpandincludesize":{"value":0,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":7095,"limit":5000000},"timingprofile":["100.00%    0.000      1 -total"]},"cachereport":{"timestamp":"20201130232957","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":252});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/WinCE-BSP_ARM-A8_User_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 04:21:40 GMT -->
</html>
