<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/Using_WL18xx_with_DM365_EVM by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:45:36 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>Using WL18xx with DM365 EVM - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Using_WL18xx_with_DM365_EVM","wgTitle":"Using WL18xx with DM365 EVM","wgCurRevisionId":196705,"wgRevisionId":196705,"wgArticleId":36552,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["DM365","Wi-Fi"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Using_WL18xx_with_DM365_EVM","wgRelevantArticleId":36552,"wgRequestId":"cff85a9c091ff501480a42d7","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-Using_WL18xx_with_DM365_EVM rootpage-Using_WL18xx_with_DM365_EVM skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">Using WL18xx with DM365 EVM</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext">Introduction</span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#Building_the_Software"><span class="tocnumber">2</span> <span class="toctext">Building the Software</span></a>
<ul>
<li class="toclevel-2 tocsection-3"><a href="#Kernel"><span class="tocnumber">2.1</span> <span class="toctext">Kernel</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#WL18xx_Software"><span class="tocnumber">2.2</span> <span class="toctext">WL18xx Software</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-5"><a href="#Testing_it_out"><span class="tocnumber">3</span> <span class="toctext">Testing it out</span></a></li>
<li class="toclevel-1 tocsection-6"><a href="#Other_Useful_Patches"><span class="tocnumber">4</span> <span class="toctext">Other Useful Patches</span></a>
<ul>
<li class="toclevel-2 tocsection-7"><a href="#Kernel_Patches_for_Bluetooth_Support"><span class="tocnumber">4.1</span> <span class="toctext">Kernel Patches for Bluetooth Support</span></a></li>
<li class="toclevel-2 tocsection-8"><a href="#Getting_PSP_3.21_to_Build_with_the_Other_Multimedia_Components"><span class="tocnumber">4.2</span> <span class="toctext">Getting PSP 3.21 to Build with the Other Multimedia Components</span></a></li>
</ul>
</li>
</ul>
</div>

<h2><span class="mw-headline" id="Introduction">Introduction</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The goal of this exercise was to get WL18xx working with a DM365 EVM.  This was intended as a stepping stone, i.e. it does <b>not</b> fully integrate all video functionality, etc.  The DM365 EVM has many different configuration options with respect to various headers, CPLD configuration settings, etc.  Some of the steps here were deliberately done "quick and dirty" to get things operational.  Consider this work as a stepping stone and not a complete product offering.
</p><p>Hardware used:
</p>
<ol><li>DM365 EVM Rev F
<dl><dd><a rel="nofollow" class="external free" href="http://www.ti.com/tool/tmdxevm365">http://www.ti.com/tool/tmdxevm365</a></dd>
<dd><a rel="nofollow" class="external free" href="http://support.spectrumdigital.com/boards/evmdm365/">http://support.spectrumdigital.com/boards/evmdm365/</a></dd></dl></li>
<li>Jorjin adapter board (COM8 header to MMC)</li>
<li>WL1837COM8 card
<dl><dd><a rel="nofollow" class="external free" href="http://www.ti.com/tool/wl1837modcom8i">http://www.ti.com/tool/wl1837modcom8i</a></dd></dl></li></ol>
<p>DM365 Board Modifications
</p>
<ul><li>Removed R73 which originally was connecting an output pin from the MSP430 to GIO0 of the DM365.</li>
<li>Connected the GIO0 pad from R73 to the WLAN_IRQ pin of the WL1837.</li>
<li>Connected J18 pin 25 (GIO29) to the WLAN_EN pin of the WL1837.</li></ul>
<p>Software used:
</p>
<ul><li>DVSDK 4.02 for DM365 EVM
<ul><li><a rel="nofollow" class="external free" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/dvsdk/DVSDK_4_00/4_02_00_06/index_FDS.html">http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/dvsdk/DVSDK_4_00/4_02_00_06/index_FDS.html</a></li>
<li>Note that this has a dependency on the Sourcery G++ Lite arm2009q1-203 toolchain, though that tool chain no longer appears to be available on the Code Sourcery web page.</li>
<li>I attempted using the TI Arago tool chain from an AM1808 SDK release but bumped into varoius build errors and had to stay on the Code Sourcery release (unfortunately).</li></ul></li>
<li>PSP 3.21 release
<ul><li>Updates to 2.6.37 kernel</li>
<li><a rel="nofollow" class="external free" href="http://software-dl.ti.com/dsps/dsps_public_sw/psp/LinuxPSP/DaVinci_03_21/03_21_00_04/index_FDS.html">http://software-dl.ti.com/dsps/dsps_public_sw/psp/LinuxPSP/DaVinci_03_21/03_21_00_04/index_FDS.html</a></li></ul></li>
<li>Kernel Patches: <a href="https://processors.wiki.ti.com/images/7/7b/Patches-psp-3.21.tar.gz" class="internal" title="Patches-psp-3.21.tar.gz">Patches-psp-3.21.tar.gz</a></li>
<li>WiLink Build Steps
<ul><li><a href="https://www.ti.com/lit/swru561" title="WL18xx WiFi Build Process">WL18xx WiFi Build Process</a></li>
<li><a href="https://www.ti.com/lit/swru561" title="WL18xx System Build Scripts">WL18xx System Build Scripts</a> -- used R8.5 tag</li></ul></li>
<li>WL18xx software patches
<ul><li><a href="https://processors.wiki.ti.com/images/0/0b/Patches-backports-2.6.37.tar.gz" class="internal" title="Patches-backports-2.6.37.tar.gz">Patches-backports-2.6.37.tar.gz</a></li>
<li><a href="https://processors.wiki.ti.com/images/f/fe/Patches-iw-2.6.37.tar.gz" class="internal" title="Patches-iw-2.6.37.tar.gz">Patches-iw-2.6.37.tar.gz</a></li></ul></li></ul>
<p>Prerequisite Knowledge
</p>
<ul><li>This page assumes you're familiar with things like building u-boot, flashing your own kernel and file system (or using NFS, etc.).</li>
<li>For help with related Linux questions you might consult <a href="Community_Linux_PSP_for_DaVinci_devices.html" title="Community Linux PSP for DaVinci devices">this page</a>.</li></ul>
<h2><span class="mw-headline" id="Building_the_Software">Building the Software</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=2" title="Edit section: Building the Software">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Kernel">Kernel</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=3" title="Edit section: Kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p><b>Install the DVSDK.</b>  Note that passing arguments "--help" to the installer will give some additional options.  For example, if you're using a more recent version of Ubuntu you'll need the "--forcehost" flag.  If you're having trouble with the installer you might try "--mode console" as well.
</p>
<pre>host$ ./dm365-dvsdk/dvsdk_dm365-evm_4_02_00_06_setuplinux --forcehost
</pre>
<p><b>Install PSP 3.21</b>.
</p>
<pre>host$ tar zxf DaVinci-PSP-SDK-03.21.00.04.tgz -C &lt;dvsdk-root&gt;
</pre>
<p><b>Move old psp to psp-old so we don't accidentally use it.</b>
</p>
<pre>host$ mv psp/ psp-old/
</pre>
<p><b>Create your file system.</b>  Remove the prebuilt modules from 2.6.32 as we will build new modules to match our 2.6.37 kernel.
</p>
<pre>host$ cd &lt;dvsdk-root&gt;
host$ mkdir wl8-filesystem
host$ sudo tar zxf filesystem/dvsdk-dm365-evm-rootfs.tar.gz -C wl8-filesystem/
host$ sudo rm -rf wl8-filesystem/lib/modules/2.6.32.17-davinci1/
</pre>
<p>At this point the directory structure looks like this:
</p>
<pre>&lt;dvsdk-root&gt;
├── bin
├── codec-engine_2_26_02_11
├── codecs-dm365_4_02_00_00
├── DaVinci-PSP-SDK-03.21.00.04
├── dm365mm-module_01_00_03
├── dmai_2_20_00_15
├── docs
├── dvsdk-demos_4_02_00_01
├── dvtb_4_20_18
├── etc
├── example-applications
├── filesystem
├── framework-components_2_26_00_01
├── gstreamer-ti_svnr919
├── linux-devkit
├── linuxutils_2_26_01_02
├── Makefile
├── psp-old
├── Rules.make
├── setup.sh
├── usr
├── wl8-filesystem
├── xdais_6_26_01_03
└── xdctools_3_16_03_36 
</pre>
<p><b>Untar the Linux source code and initialize as a git tree.</b>
</p>
<pre>host$ cd &lt;dvsdk-root&gt;/DaVinci-PSP-SDK-03.21.00.04/src/kernel
host$ tar zxf linux-03.21.00.04.tar.gz
host$ cd linux-03.21.00.04/
host$ git init
host$ git add .
host$ git commit -m "Initial commit"
host$ git checkout -b wl8-integration
host$ cd &lt;dvsdk-root&gt;
</pre>
<p><b>Edit Rules.make.</b>  We need to point to our new components.
</p>
<pre>host$ gvim Rules.make
</pre>
<p>Be sure to update the following:
</p>
<ul><li>PSP_INSTALL_DIR=$(DVSDK_INSTALL_DIR)/DaVinci-PSP-SDK-03.21.00.04</li>
<li>LINUXKERNEL_INSTALL_DIR=$(PSP_INSTALL_DIR)/src/kernel/linux-03.21.00.04</li>
<li>EXEC_DIR=$(DVSDK_INSTALL_DIR)/wl8-filesystem</li></ul>
<p>CSTOOL_DIR and CSTOOL_PREFIX should already be setup to correctly point to your tool chain by the DVSDK installer.
<br /><br />
<b>Apply patches to kernel.</b>
</p>
<pre>host$ tar zxf Patches-psp-3.21.tar.gz -C &lt;dvsdk-root&gt;/DaVinci-PSP-SDK-03.21.00.04/src/kernel/linux-03.21.00.04/
host$ cd &lt;dvsdk-root&gt;/DaVinci-PSP-SDK-03.21.00.04/src/kernel/linux-03.21.00.04/
host$ git am 00*
host$ rm 00*
</pre>
<p><b>Build kernel and modules.</b>
</p>
<pre>host$ cd &lt;dvsdk-root&gt;
host$ make linux
</pre>
<p><b>Install modules into file system.</b>
</p>
<pre>host$ sudo make linux_install
</pre>
<h3><span class="mw-headline" id="WL18xx_Software">WL18xx Software</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=4" title="Edit section: WL18xx Software">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>In short, you want to follow the directions from <a href="https://www.ti.com/lit/swru561" title="WL18xx System Build Scripts">WL18xx System Build Scripts</a>:<br />
<br />
<b>Clone the repository.</b>
</p>
<pre>host$ git clone <a rel="nofollow" class="external free" href="git://git.ti.com/wilink8-wlan/build-utilites.git">git://git.ti.com/wilink8-wlan/build-utilites.git</a>
host$ cd build-utilites/
</pre>
<p><b>Edit the path variables.</b>
</p>
<pre>host$ cp setup-env.sample setup-env
host$ vim setup-env
</pre>
<p>For example:
</p>
<ul><li>TOOLCHAIN_PATH=&lt;path-to-arm-2009q1&gt;/bin</li>
<li>ROOTFS=&lt;dvsdk-root&gt;/wl8-filesystem</li>
<li>KERNEL_PATH=&lt;dvsdk-root&gt;/DaVinci-PSP-SDK-03.21.00.04/src/kernel/linux-03.21.00.04/</li>
<li>CROSS_COMPILE=arm-none-linux-gnueabi-</li></ul>
<p><b>Download the software.</b>
</p>
<pre>host$ ./build_wl18xx.sh init R8.5
</pre>
<p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b> Do not use the "sudo" version of the script when executing the "init" step or else you will end up with source directories owned by root.
<b>Apply patches to backports.</b>
</p>
<pre>host$ tar zxf Patches-backports-2.6.37.tar.gz -C &lt;dvsdk-root&gt;/build-utilites/src/backports/
host$ cd &lt;dvsdk-root&gt;/build-utilites/src/backports/
host$ git am 00*
host$ rm 00*
</pre>
<p><b>Apply patch to iw.</b>  I believe this patch is toolchain dependent.  It's needed for the CodeSourcery arm-2009q1 toolchain that's expected by the DM365 DVSDK.
</p>
<pre>host$ tar zxf Patches-iw-2.6.37.tar.gz -C &lt;dvsdk-root&gt;/build-utilites/src/iw/
host$ cd &lt;dvsdk-root&gt;/build-utilites/src/iw/
host$ git am 00*
host$ rm 00*
</pre>
<p><b>One small fix to the build_wl18xx.sh script...</b>  At the end of the build script it verifies that all the necessary files have been properly copied to the file system.  However, the string it is looking for is slightly wrong (at least for the arm-2009q1 cross compiler from CodeSourcery).  There are 5 places in the file where you need to make the following change:
</p>
<pre>-        "ELF 32-bit LSB executable, ARM"
+        "ELF 32-bit LSB  executable, ARM"
</pre>
<p>There are two places where you need to make the following change:
</p>
<pre>-        "ELF 32-bit LSB relocatable, ARM"
+        "ELF 32-bit LSB  relocatable, ARM"
</pre>
<p>Specifically, there are two spaces after "LSB" in the strings.
</p><p><b>Build the software.</b>
</p>
<pre>host$ ./sudo_build_wl18xx.sh
</pre>
<h2><span class="mw-headline" id="Testing_it_out">Testing it out</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=5" title="Edit section: Testing it out">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<p>The first time you boot it up none of the necessary modules will load.  The best thing to do is to run:
</p>
<pre>root@dm365-evm:~# depmod -a
root@dm365-evm:~# reboot
</pre>
<p>Now when it boots you should see the modules load automatically.  You should see something like this just before the login prompt: 
</p>
<pre>Loading modules backported from Linux version R8.5-0-gcb51164
Backport generated by backports.git R8.4-2-g3db70cb
Root filesystem already rw, not remounting
Caching udev devnodes
Populating dev cachecfg80211: Calling CRDA to update world regulatory domain
cfg80211: World regulatory domain updated:
cfg80211:  DFS Master region: unset
cfg80211:   (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp), (
dfs_cac_time)
cfg80211:   (2402000 KHz - 2472000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
cfg80211:   (2457000 KHz - 2482000 KHz @ 40000 KHz), (N/A, 2000 mBm), (N/A)
cfg80211:   (2474000 KHz - 2494000 KHz @ 20000 KHz), (N/A, 2000 mBm), (N/A)
cfg80211:   (5170000 KHz - 5250000 KHz @ 160000 KHz), (N/A, 2000 mBm), (N/A)
cfg80211:   (5250000 KHz - 5330000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
cfg80211:   (5490000 KHz - 5730000 KHz @ 160000 KHz), (N/A, 2000 mBm), (0 s)
cfg80211:   (5735000 KHz - 5835000 KHz @ 80000 KHz), (N/A, 2000 mBm), (N/A)
cfg80211:   (57240000 KHz - 63720000 KHz @ 2160000 KHz), (N/A, 0 mBm), (N/A)
NET: Registered protocol family 10
wlcore: ERROR could not get configuration binary ti-connectivity/wl18xx-conf.bin
: -2
wlcore: WARNING falling back to default config
wlcore: wl18xx HW: 183x or 180x, PG 2.2 (ROM 0x11)
wlcore: loaded
wlcore: driver version: R8.5
wlcore: compilation time: Mon Jan  5 12:30:22 2015
</pre>
<p><b>NOTE:</b> <i>The drivers default to a WL1835 configuration since that's common to all variants.  However, it is recommended to generate a wl18xx-conf.bin file for your platform using the wlconf utility.  There are scripts (that run on the ARM) and further details available <a href="https://processors.wiki.ti.com/index.php?title=.INI/wlconf_Overview&amp;action=edit&amp;redlink=1" class="new" title=".INI/wlconf Overview (page does not exist)">here</a>.</i>
</p><p>Bring up the wi-fi:
</p>
<pre>root@dm365-evm:~# ifconfig wlan0 up
wlcore: PHY firmware version: Rev 8.2.0.0.224
wlcore: firmware booted (Rev 8.9.0.0.31)
ADDRCONF(NETDEV_UP): wlan0: link is not ready
</pre>
<p>Scan for access points:
</p>
<pre>root@dm365-evm:~# iw wlan0 scan | grep SSID
        SSID: BJG
        SSID: externalhotspot84
</pre>
<p>To connect to an open access point you can simply do:
</p>
<pre>root@dm365-evm:~# iw wlan0 connect BJG
wlan0: authenticate with f8:d1:11:2c:d1:78
wlan0: send auth to f8:d1:11:2c:d1:78 (try 1/3)
wlan0: authenticated
wlan0: associate with f8:d1:11:2c:d1:78 (try 1/3)
wlan0: RX AssocResp from f8:d1:11:2c:d1:78 (capab=0x421 status=0 aid=1)
wlcore: Association completed.
ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
wlan0: associated
</pre>
<p>And to get an IP address:
</p>
<pre>root@dm365-evm:~# udhcpc -i wlan0
udhcpc (v1.13.2) started
Sending discover...
Sending select for 192.168.1.101...
Lease of 192.168.1.101 obtained, lease time 7200
adding dns 192.168.1.1
</pre>
<p>You can then use ping, iperf, etc. for further testing.
</p>
<h2><span class="mw-headline" id="Other_Useful_Patches">Other Useful Patches</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=6" title="Edit section: Other Useful Patches">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<h3><span class="mw-headline" id="Kernel_Patches_for_Bluetooth_Support">Kernel Patches for Bluetooth Support</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=7" title="Edit section: Kernel Patches for Bluetooth Support">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>These patches were created to sit on top of the WLAN patches:
</p><p><a href="https://processors.wiki.ti.com/images/d/d2/Bluetooth-kernel-patches.tar.gz" class="internal" title="Bluetooth-kernel-patches.tar.gz">Bluetooth-kernel-patches.tar.gz</a>
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b> The corresponding stack needs to be acquired from TI personnel (FAE, sales, etc.).
</p>
<h3><span class="mw-headline" id="Getting_PSP_3.21_to_Build_with_the_Other_Multimedia_Components">Getting PSP 3.21 to Build with the Other Multimedia Components</span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;section=8" title="Edit section: Getting PSP 3.21 to Build with the Other Multimedia Components">edit</a><span class="mw-editsection-bracket">]</span></span></h3>
<p>The following set of patches can be used for this section: <a href="https://processors.wiki.ti.com/images/c/c1/Psp-3.21-multimedia-related-patches.tar.gz" class="internal" title="Psp-3.21-multimedia-related-patches.tar.gz">Psp-3.21-multimedia-related-patches.tar.gz</a>.
</p><p><img alt="Note" src="https://processors.wiki.ti.com/images/b/b0/Light_bulb_icon.png" title="Note" width="18" height="25" /><b>Note:</b> These patches have only been been tested to get things to build.  They have not been run-time tested.
</p>
<ol><li>Update to linuxutils_2_26_03_06
<ul><li>Download here: <a rel="nofollow" class="external free" href="http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/linuxutils/2_26_03_06/index_FDS.html">http://software-dl.ti.com/dsps/dsps_public_sw/sdo_sb/targetcontent/linuxutils/2_26_03_06/index_FDS.html</a></li>
<li>Install into your dvsdk directory and change Rules.make to point to the new directory.</li></ul></li>
<li>Export the 2.6.37 header files.  The DVSDK Rules.make defines this locations as being LINUXLIBS_INSTALL_DIR which is located at &lt;dvsdk-root&gt;/linux-devkit/arm-none-linux-gnueabi/usr.  We want to export our 2.6.37 header files to that location.
<ul><li>cd &lt;dvsdk-root&gt;/DaVinci-PSP-SDK-03.21.00.04/src/kernel/linux-03.21.00.04/</li>
<li>make headers_install INSTALL_HDR_PATH=&lt;dvsdk-root&gt;/linux-devkit/arm-none-linux-gnueabi/usr</li></ul></li>
<li>Change the search path order for dmai so that it searches our LINUXLIBS_INSTALL_DIR for header files before searching the kernel.
<ul><li>Apply 0001-Search-user-space-headers-first.patch.</li></ul></li>
<li>There are a few more errors that you bump into soon after.
<ul><li>In dmai directory apply the patch 0002-Remove-unneeded-include.patch.</li>
<li>In the 2.6.37 kernel directory apply patches 0001-Adding-missing-video-formats-back.patch and 0002-Adding-file-from-psp03.01.01.39-needed-for-dmai.patch.</li>
<li>In the dm365mm directory apply the patch 0001-Add-fixes-to-build-with-2.6.37.patch.</li>
<li>In the linuxutils_2_26_03_06 directory apply the patch 0001-Update-semaphore-to-avoid-MUTEX_LOCKED-error.patch.</li></ul></li></ol>

<!-- 
NewPP limit report
Cached time: 20201130222912
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.059 seconds
Real time usage: 0.064 seconds
Preprocessor visited node count: 43/1000000
Preprocessor generated node count: 110/1000000
Post‐expand include size: 168/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 0/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    1.820      1 -total
 87.03%    1.584      3 Template:Note
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:36552-0!canonical and timestamp 20201130222912 and revision id 196705
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Using WL18xx with DM365 EVM</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>Using WL18xx with DM365 EVM</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>Using WL18xx with DM365 EVM</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;oldid=196705">https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;oldid=196705</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_DM365.html" title="Category:DM365">DM365</a></li><li><a href="Category_Wi-Fi.html" title="Category:Wi-Fi">Wi-Fi</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=Using+WL18xx+with+DM365+EVM" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="Using_WL18xx_with_DM365_EVM.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:Using_WL18xx_with_DM365_EVM&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="Using_WL18xx_with_DM365_EVM.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/Using_WL18xx_with_DM365_EVM.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/Using_WL18xx_with_DM365_EVM.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;oldid=196705" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=Using_WL18xx_with_DM365_EVM&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 7 April 2015, at 10:23.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.059","walltime":"0.064","ppvisitednodes":{"value":43,"limit":1000000},"ppgeneratednodes":{"value":110,"limit":1000000},"postexpandincludesize":{"value":168,"limit":2097152},"templateargumentsize":{"value":0,"limit":2097152},"expansiondepth":{"value":3,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":0,"limit":5000000},"timingprofile":["100.00%    1.820      1 -total"," 87.03%    1.584      3 Template:Note"]},"cachereport":{"timestamp":"20201130222912","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":225});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/Using_WL18xx_with_DM365_EVM by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 09:45:40 GMT -->
</html>
