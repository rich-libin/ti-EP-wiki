<!DOCTYPE html>
<html class="client-nojs" lang="en" dir="ltr">

<!-- Mirrored from processors.wiki.ti.com/index.php/AM335x_McSPI_Driver%27s_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 03:49:40 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
<meta charset="UTF-8"/>
<title>AM335x McSPI Driver's Guide - Texas Instruments Wiki</title>
<script>document.documentElement.className = document.documentElement.className.replace( /(^|\s)client-nojs(\s|$)/, "$1client-js$2" );</script>
<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"AM335x_McSPI_Driver's_Guide","wgTitle":"AM335x McSPI Driver's Guide","wgCurRevisionId":90923,"wgRevisionId":90923,"wgArticleId":13497,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["AM335x","Linux","PSP"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"AM335x_McSPI_Driver's_Guide","wgRelevantArticleId":13497,"wgRequestId":"481706feef53e06935f35254","wgIsProbablyEditable":false,"wgRelevantPageIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[]});mw.loader.state({"site.styles":"ready","noscript":"ready","user.styles":"ready","user":"ready","user.options":"ready","user.tokens":"loading","mediawiki.legacy.shared":"ready","mediawiki.legacy.commonPrint":"ready","mediawiki.sectionAnchor":"ready","mediawiki.skinning.interface":"ready","skins.vector.styles":"ready"});mw.loader.implement("user.tokens@19o3a1s",function($,jQuery,require,module){/*@nomin*/mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\","csrfToken":"+\\"});
});mw.loader.load(["site","mediawiki.page.startup","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.toc","mediawiki.searchSuggest","skins.vector.js"]);});</script>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cskins.vector.styles&amp;only=styles&amp;skin=vector"/>
<script async="" src="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector"></script>
<meta name="ResourceLoaderDynamicStyles" content=""/>
<link rel="stylesheet" href="https://processors.wiki.ti.com/load.php?debug=false&amp;lang=en&amp;modules=site.styles&amp;only=styles&amp;skin=vector"/>
<meta name="generator" content="MediaWiki 1.31.6"/>
<link rel="shortcut icon" href="https://processors.wiki.ti.com/favicon.ico"/>
<link rel="search" type="application/opensearchdescription+xml" href="https://processors.wiki.ti.com/opensearch_desc.php" title="Texas Instruments Wiki (en)"/>
<link rel="EditURI" type="application/rsd+xml" href="https://processors.wiki.ti.com/api.php?action=rsd"/>
<link rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"/>
<link rel="alternate" type="application/atom+xml" title="Texas Instruments Wiki Atom feed" href="https://processors.wiki.ti.com/index.php?title=Special:RecentChanges&amp;feed=atom"/>
<!--[if lt IE 9]><script src="/load.php?debug=false&amp;lang=en&amp;modules=html5shiv&amp;only=scripts&amp;skin=Vector&amp;sync=1"></script><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr mw-hide-empty-elt ns-0 ns-subject page-AM335x_McSPI_Driver_s_Guide rootpage-AM335x_McSPI_Driver_s_Guide skin-vector action-view">		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>
			<div id="siteNotice" class="mw-body-content"><div id="localNotice" lang="en" dir="ltr"><div class="mw-parser-output"><p><br />
<span style="color:#ff0000"><b>NOTICE: The Processors Wiki will End-of-Life on January 15, 2021. It is recommended to download any files or other content you may need that are hosted on processors.wiki.ti.com. The site is now set to read only.</b></span>
</p></div></div></div><div class="mw-indicators mw-body-content">
</div>
<h1 id="firstHeading" class="firstHeading" lang="en">AM335x McSPI Driver's Guide</h1>			<div id="bodyContent" class="mw-body-content">
				<div id="siteSub" class="noprint">From Texas Instruments Wiki</div>				<div id="contentSub"></div>
								<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-head">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><div class="mw-parser-output"><div style="width:800px; text-align:justify;"> 
<div style="display:block; clear: both; margin: 10px 0px; padding: 0px; background-color: #ee1d23; text-align:right;"><a href="File_TIBanner.html" class="image"><img alt="TIBanner.png" src="https://processors.wiki.ti.com/images/c/cd/TIBanner.png" width="667" height="87" /></a></div>
<div style="display:block; margin: 5px 0px; padding: 2px 5px; font-size:1.5em; font-weight:bold; text-align:left;">AM335x McSPI Driver's Guide</div>
<div style="display:block; margin: 5px 0px; padding: 2px; color: #666666; font-size:1.0em; font-weight:bold; text-align:right;">Linux PSP</div>  
<div id="toc" class="toc"><div class="toctitle" lang="en" dir="ltr"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#Introduction"><span class="tocnumber">1</span> <span class="toctext"><b>Introduction</b></span></a></li>
<li class="toclevel-1 tocsection-2"><a href="#SPI_H.2FW_Architecture"><span class="tocnumber">2</span> <span class="toctext"><b>SPI H/W Architecture</b></span></a></li>
<li class="toclevel-1 tocsection-3"><a href="#SPI_Driver_Architecture"><span class="tocnumber">3</span> <span class="toctext"><b>SPI Driver Architecture</b></span></a></li>
<li class="toclevel-1 tocsection-4"><a href="#Driver_Configuration"><span class="tocnumber">4</span> <span class="toctext"><b>Driver Configuration</b></span></a>
<ul>
<li class="toclevel-2 tocsection-5"><a href="#Building_into_Kernel"><span class="tocnumber">4.1</span> <span class="toctext"><b>Building into Kernel</b></span></a></li>
<li class="toclevel-2 tocsection-6"><a href="#Building_as_Loadable_Kernel_Module"><span class="tocnumber">4.2</span> <span class="toctext"><b>Building as Loadable Kernel Module</b></span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-7"><a href="#Validating_SPI_Support"><span class="tocnumber">5</span> <span class="toctext"><b>Validating SPI Support</b></span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Porting_for_custom_hardware"><span class="tocnumber">6</span> <span class="toctext"><b>Porting for custom hardware</b></span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Supporting_SPI_Flashes"><span class="tocnumber">7</span> <span class="toctext"><b>Supporting SPI Flashes</b></span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#Proc_Interface"><span class="tocnumber">8</span> <span class="toctext"><b>Proc Interface</b></span></a></li>
<li class="toclevel-1 tocsection-11"><a href="#Mounting_SPI_partition_using_JFFS2"><span class="tocnumber">9</span> <span class="toctext"><b>Mounting SPI partition using JFFS2</b></span></a></li>
</ul>
</div>

<h1><span class="mw-headline" id="Introduction"><b>Introduction</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=1" title="Edit section: Introduction">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Serial interface</li></ul>
<ul><li>Synchronous</li></ul>
<ul><li>Master-slave configuration (driver supports only master mode)</li></ul>
<ul><li>Data Exchange - DMA/PIO</li></ul>
<h1><span id="SPI_H/W_Architecture"></span><span class="mw-headline" id="SPI_H.2FW_Architecture"><b>SPI H/W Architecture</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=2" title="Edit section: SPI H/W Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>McSPI is a general-purpose receive/transmit, master/slave controller that can interface with up to four slave external devices or one single external master.It allows a duplex, synchronous, serial communication between a CPU and SPI compliant external devices (Slaves and Masters). 
</p><p>The controller supports following features. 
</p>
<ul><li>Programmable master clock generation (operating from fixed 48-MHz functional clock input)</li>
<li>Up to four SPI channels</li>
<li>Two DMA requests per channel, one interrupt line<br /></li></ul>
<p><br /> <a href="File_SPI_HW_Block_Diagram.html" class="image" title="SPI HW Block Diagram.jpg"><img alt="SPI HW Block Diagram.jpg" src="https://processors.wiki.ti.com/images/4/4b/SPI_HW_Block_Diagram.jpg" width="475" height="357" /></a> 
</p><p><br /> 
</p>
<h1><span class="mw-headline" id="SPI_Driver_Architecture"><b>SPI Driver Architecture</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=3" title="Edit section: SPI Driver Architecture">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p><a href="File_Spi_driver_architecture.html" class="image" title="Spi driver architecture.jpg"><img alt="Spi driver architecture.jpg" src="https://processors.wiki.ti.com/images/9/90/Spi_driver_architecture.jpg" width="717" height="461" /></a> 
</p><p>AM335x EVM does not contain a SPI based audio codec. The reference to 'SPI Codec' above are meant to serve as an example. Use <a href="MTD_Utilities.html#MTD-Utils_User-space_tools" title="MTD Utilities"> MTD-Utils user space tools</a> to access SPI flash device from Linux console.<br /> 
</p>
<h1><span class="mw-headline" id="Driver_Configuration"><b>Driver Configuration</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=4" title="Edit section: Driver Configuration">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>SPI could be disabled/enabled from the following location during menuconfig.</li></ul>
<p>start Linux Kernel Configuration tool. 
</p>
<pre>make CROSS_COMPILE=arm-arago-linux-gnueabi- ARCH=arm menuconfig
</pre> 
<p><br /> 
</p>
<h2><span class="mw-headline" id="Building_into_Kernel"><b>Building into Kernel</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=5" title="Edit section: Building into Kernel">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<pre>  Device Drivers  ---&gt; 
         [*] SPI support  ---&gt; 
            &lt;*&gt;   McSPI driver for OMAP
</pre> 
<ul><li>Enable W25Q64 SPI flash support. This step is mandatory if for using root file-system on SPI flash.</li></ul>
<pre>Device Drivers  ---&gt; 
  &lt;*&gt; Memory Technology Device (MTD) support  ---&gt; 
         Self-contained MTD device drivers  ---&gt; 
            &lt;*&gt; Support most SPI Flash chips (AT26DF, M25P, W25X, ...)
            [*]   Use FAST_READ OPCode allowing SPI CLK &lt;= 50MHz (NEW)
</pre> 
<h2><span class="mw-headline" id="Building_as_Loadable_Kernel_Module"><b>Building as Loadable Kernel Module</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=6" title="Edit section: Building as Loadable Kernel Module">edit</a><span class="mw-editsection-bracket">]</span></span></h2>
<ul><li>Incase if you want to build the drivers as modules, use &lt;M&gt; instead of &lt;*&gt; during menuconfig while selecting the drivers (as shown below). For more information on loadable modules refer <a rel="nofollow" class="external text" href="http://tldp.org/HOWTO/Module-HOWTO/">Loadable Module HOWTO</a></li></ul>
<pre>  Device Drivers  ---&gt; 
         [*] SPI support  ---&gt; 
            &lt;M&gt;   McSPI driver for OMAP
</pre> <pre>Device Drivers  ---&gt; 
<pre>&lt;*&gt; Memory Technology Device (MTD) support  ---&gt; 
Self-contained MTD device drivers  ---&gt; 
&lt;M&gt; Support most SPI Flash chips (AT26DF, M25P, W25X, ...)
[*]   Use FAST_READ OPCode allowing SPI CLK &lt;= 50MHz (NEW)
</pre>
</pre> 
<ul><li>This step applies if the drivers are built as modules - Do "make modules" to build the McSPI driver and SPI Flash driver as module. The module should be present in "drivers/spi/omap2_mcspi.ko" and "drivers/mtd/devices/m25p80.ko". Load the driver using "insmod omap2_mcspi.ko" and "insmod m25p80.ko"</li></ul>
<h1><span class="mw-headline" id="Validating_SPI_Support"><b>Validating SPI Support</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=7" title="Edit section: Validating SPI Support">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>Use the MTD interface provided for SPI flash on the EVM to validate the SPI driver interface. The below step copies 8KiB from /dev/mtd2 partition (u-boot env) to /dev/mtd4 partition and reads the 8KiB image from /dev/mtd4 to a file and checks the md5sum. The md5sum of test.img and test1.img should be same.</li></ul>
<pre>cd /tmp
dd if=/dev/mtd2 of=test.img bs=8k count=1
md5sum test.img
flash_eraseall /dev/mtd4
cp test.img /dev/mtd4
dd if=/dev/mtd4 of=test1.img bs=8k count=1
md5sum test1.img
</pre> 
<p><br /> 
</p>
<h1><span class="mw-headline" id="Porting_for_custom_hardware"><b>Porting for custom hardware</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=8" title="Edit section: Porting for custom hardware">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ol><li><b><tt>drivers/spi/omap2_mcspi.c</tt></b> implements core SPI master functionality.
<ul><li>This file is generic hence should not be modified.</li></ul></li>
<li>Board specific customizations are available in <b><tt>arch/arm/mach-omap2/board-am35x</tt><tt>evm.c</tt></b></li>
<li>Modify device array <b><tt>am335x_spix_slave_info</tt></b> to change information on slaves connected to SPI. When adding new slave devices, ensure that <tt>num_chipselect</tt> member of the platform data for the corresponding SPI master.
<ul><li>Each member is of type <tt>spi_board_info</tt> defined in <tt>include/linux/spi.h</tt>. Each element of the device array represents one slave device.
<ol><li><b><tt>modalias</tt></b> used to match slave device to slave driver. Note that this is not the SPI master driver. Each slave needs to have its own driver. Example, SPI flash will have a MTD driver, SPI codec will have an ALSA driver etc.</li>
<li><b><tt>platform_data</tt></b> used by slave driver</li>
<li><b><tt>controller_data</tt></b> used by SPI master driver for slave specific information (of type <tt>omap2_mcspi_cs</tt>). This is used to take care of specific requirements of communicating with a given slave.</li>
<li><b><tt>bus_num</tt></b> 1 for SPI0 which is used by SPI flash in General purpose EVM&#160; &amp;&#160; bus_num 2 for SPI1 which is used by SPI flash in AUtomation motor control EVM..</li>
<li><b><tt>chip_select</tt></b> chip select number for this SPI slave</li>
<li><b><tt>max_speed_hz</tt></b> SPI bus speed.</li></ol></li></ul></li>
<li>Ensure all pins required for SPI operation are muxed correctly (especially if using GPIO for CS)</li></ol>
<p><br /> 
</p>
<h1><span class="mw-headline" id="Supporting_SPI_Flashes"><b>Supporting SPI Flashes</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=9" title="Edit section: Supporting SPI Flashes">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<ul><li>To modify partition layout on SPI flash following structure has to be modified in arch/arm/mach-omap2/board-am335xevm.c</li></ul>
<pre>struct mtd_partition am335x_spi_partitions[] = {
    /* All the partition sizes are listed in terms of NAND block size */
    {
        .name       = "SPL",
        .offset     = 0,    /* Offset = 0x0 */
        .size       = SZ_128K,
        .mask_flags = MTD_WRITEABLE,    /* force read-only */
    },
    {
        .name       = "U-Boot",
        .offset     = MTDPART_OFS_APPEND,    /* Offset = 0x20000 */
        .size       = 2 * SZ_128K,
        .mask_flags = MTD_WRITEABLE,    /* force read-only */
    },
    {
        .name       = "U-Boot Env",
        .offset     = MTDPART_OFS_APPEND,   /* Offset = 0x60000 */
        .size       = 2 * SZ_4K,
    },
    {
        .name       = "Kernel",
        .offset     = MTDPART_OFS_APPEND,   /* Offset = 0x62000 */
        .size       = 28 * SZ_128K,
    },
    {
        .name       = "File System",
        .offset     = MTDPART_OFS_APPEND,   /* Offset = 0x3e2000 */
        .size       = MTDPART_SIZ_FULL,     
    }
};

</pre> 
<ul><li>SPI Flash information is available in following structure in file <i><b>arch/arm/mach-omap2/board-am335xevm.c</b></i>. This structure should be modified to support a SPI flash. The example structure given here supports most of the SPI flashes, check <b>drivers/mtd/devices/m25p80.c</b> for support for the new SPI flash. The string constants <b>.modalias</b> and <b>.type</b> depend on device names provided in the slave driver (in our case m25p80.c). The <b>.type</b> string here selects W25Q64 SPI flash, which has to be modified in case of new SPI flash.</li></ul>
<pre>struct spi_board_info __initdata am335x_spi0_slave_info[] = {
    {
        .modalias   = "m25p80",
        .platform_data  = &amp;am335x_spi_flash,
        .irq        = -1,
        .max_speed_hz   = 24000000,
        .bus_num    = 1,
        .chip_select    = 0,
    },
};

struct spi_board_info __initdata am335x_spi1_slave_info[] = {
    {
        .modalias   = "m25p80",
        .platform_data  = &amp;am335x_spi_flash,
        .irq        = -1,
        .max_speed_hz   = 12000000,
        .bus_num    = 2,
        .chip_select    = 0,
    },
};


const struct flash_platform_data am335x_spi_flash = {

    .type       = "w25q64",
    .name       = "spi_flash",
    .parts      = am335xx_spi_partitions,
    .nr_parts   = ARRAY_SIZE(am335x_spi_partitions),
};




</pre> 
<p><br /> 
</p>
<ul><li>Check <b>drivers/mtd/devices/m25p80.c</b> does not support the new SPI flash then it has to be added to the <b>m25p_ids</b>[] list.</li></ul>
<p><br /> 
</p>
<h1><span class="mw-headline" id="Proc_Interface"><b>Proc Interface</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=10" title="Edit section: Proc Interface">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>The <code>/proc/mtd</code> kernel interface is a status interface. A lot of useful information about the SPI system can be found in the <code>/proc/mtd</code> file. 
</p>
<ul><li>Use /proc/mtd to get information on how many partitions are currently configured by the kernels flash driver.</li></ul>
<pre>    <b>target$</b> cat /proc/mtd
</pre>
<p>You should see output similar to: 
</p>
<pre>    <b>target$</b> cat /proc/mtd
   dev:    size   erasesize  name
   mtd0: 00020000 00001000 "SPL"
   mtd1: 00040000 00001000 "U-Boot"
   mtd2: 00002000 00001000 "U-Boot Env"
   mtd3: 00380000 00001000 "Kernel"
   mtd4: 0041e000 00001000 "File System"
</pre>
<p><br /> 
</p>
<h1><span class="mw-headline" id="Mounting_SPI_partition_using_JFFS2"><b>Mounting SPI partition using JFFS2</b></span><span class="mw-editsection"><span class="mw-editsection-bracket">[</span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;section=11" title="Edit section: Mounting SPI partition using JFFS2">edit</a><span class="mw-editsection-bracket">]</span></span></h1>
<p>Follow the steps mentioned in <a href="AM335x_JFFS2_Support_Guide.html#Enabling_JFFS2_support" title="AM335x JFFS2 Support Guide">Enabling_JFFS2_support</a> to recompile Linux to support JFFS2. After recompiling the kernel with JFFS2 support follw the steps below to mount the partition with JFFS2 file system. <br /> 
</p>
<pre>flash_eraseall /dev/mtd&lt;X&gt;
</pre> 
<p>Where <b>x</b> is the partition number to be erased.<br /> 
</p><p>Mount the partition using <br /> 
</p>
<pre>mount -t jffs2 /dev/mtdblock&lt;x&gt; &lt;mount_point&gt;
</pre> 
<p>Where <b>x</b> is the partition number to be erased.<br /> In the following example, partition 4 is mounted on /media/card mount point<br /> 
</p>
<pre>flash_eraseall /dev/mtd4 

mount -t jffs2 /dev/mtdblock4 /media/card
</pre> <div style="padding:5px; background: #eeeeee; color: #151B54">
<p><b>NOTE</b><br /> File system partition is available from offset 0x3E2000 with partition size of 0x41e000 (4.1 MB). So try to fit the image size below 4.1 MB. 
</p>
</div>
</div>
<!-- 
NewPP limit report
Cached time: 20201130234301
Cache expiry: 86400
Dynamic content: false
CPU time usage: 0.059 seconds
Real time usage: 0.063 seconds
Preprocessor visited node count: 142/1000000
Preprocessor generated node count: 334/1000000
Post‐expand include size: 487/2097152 bytes
Template argument size: 36/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
Unstrip recursion depth: 0/20
Unstrip post‐expand size: 3031/5000000 bytes
-->
<!--
Transclusion expansion time report (%,ms,calls,template)
100.00%    2.884      1 -total
 53.02%    1.529      1 Template:SpArticleStart
 42.65%    1.230      1 Template:SpLicenseCC-SA
-->
</div>
<!-- Saved in parser cache with key procwiki:pcache:idhash:13497-0!canonical and timestamp 20201130234301 and revision id 90923
 -->
<div class='hf-nsfooter' id='hf-nsfooter-'><table style="text-align:center; background:white; width:100%; text-align:left; height: 65px border-top: 1px solid; border-bottom: 1px solid; border-left: 1px solid; border-right: 1px solid; border-width: 1px; border-style: solid;">
<tr>
<td width="305px"><a href="File_E2e.html" class="image"><img alt="E2e.jpg" src="https://processors.wiki.ti.com/images/8/82/E2e.jpg" width="305" height="63" /></a>
</td>
<td>{{
<ol><li>switchcategory:MultiCore=</li></ol>
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>AM335x McSPI Driver&#39;s Guide</b> here.<i></i>
</p>
</td>
<td>Keystone=
<ul><li>For technical support on MultiCore devices, please post your questions in the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/c6000_multi-core_dsps/default.aspx">C6000 MultiCore Forum</a></li>
<li>For questions related to the BIOS MultiCore SDK (MCSDK), please use the <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/embedded/f/355.aspx">BIOS Forum</a></li></ul>
<p>Please post only comments related to the article <b>AM335x McSPI Driver&#39;s Guide</b> here.<i></i>
</p>
</td>
<td>C2000=<i>For technical support on the C2000 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/tms320c2000_32-bit_real-time_mcus/f/171.aspx">The C2000 Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td>DaVinci=<i>For technical support on DaVincoplease post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/davinci_digital_media_processors/default.aspx">The DaVinci Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td>MSP430=<i>For technical support on MSP430 please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/microcontrollers/msp43016-bit_ultra-low_power_mcus/default.aspx">The MSP430 Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td>OMAP35x=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td>OMAPL1=<i>For technical support on OMAP please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/dsp/omap_applications_processors/default.aspx">The OMAP Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td>MAVRK=<i>For technical support on MAVRK please post your questions on <a rel="nofollow" class="external text" href="http://e2e.ti.com/support/development_tools/mavrk/default.aspx">The MAVRK Toolbox Forum</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
</td>
<td><i>For technical support please post your questions at <a rel="nofollow" class="external text" href="http://e2e.ti.com/">http://e2e.ti.com</a>. Please post only comments about the article <b>AM335x McSPI Driver&#39;s Guide</b> here.</i>
<p>}}
</p>
</td></tr></table>
<table style="border-style:solid; border-width:1px; text-align:center; width:100%;">

<tr style="font-size:150%;">
<td rowspan="2"><a href="File_Hyperlink_blue.html" class="image"><img alt="Hyperlink blue.png" src="https://processors.wiki.ti.com/images/9/9f/Hyperlink_blue.png" width="96" height="96" /></a>
</td>
<td><b>Links</b>
</td></tr>
<tr>
<td>
<table style="text-align: left;">
<tr>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/amplifier_and_linear.page">Amplifiers &amp; Linear</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/audio/audio_overview.page">Audio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/rfif.page">Broadband RF/IF &amp; Digital Radio</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/clocksandtimers/clocks_and_timers.page">Clocks &amp; Timers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/dataconverters/data_converter.page">Data Converters</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/mems/mems.page">DLP &amp; MEMS</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/high_reliability.page">High-Reliability</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/interface/interface.page">Interface</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/logic/home_overview.page">Logic</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/powermanagement/power_portal.page">Power Management</a>
</p>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/embedded_processor.page">Processors</a>
</p>
<ul><li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/arm.page">ARM Processors</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/dsp/home.page">Digital Signal Processors (DSP)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/microcontroller/home.page">Microcontrollers (MCU)</a></li>
<li><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/omap-applications-processors/the-omap-experience.page">OMAP Applications Processors</a></li></ul>
</td>
<td style="padding-right: 10px; vertical-align: top;">
<p><a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/switches_and_multiplexers.page">Switches &amp; Multiplexers</a><br/>
<a rel="nofollow" class="external text" href="http://www.ti.com/lsds/ti/analog/temperature_sensor.page">Temperature Sensors &amp; Control ICs</a><br/>
<a rel="nofollow" class="external text" href="http://focus.ti.com/wireless/docs/wirelessoverview.tsp?familyId=2003&amp;sectionId=646&amp;tabId=2735">Wireless Connectivity</a>
</p>
</td></tr></table>
</td></tr></table>
<div id="tiPrivacy"></div>
</div></div>					<div class="printfooter">
						Retrieved from "<a dir="ltr" href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;oldid=90923">https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;oldid=90923</a>"					</div>
				<div id="catlinks" class="catlinks" data-mw="interface"><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="Special_Categories.html" title="Special:Categories">Categories</a>: <ul><li><a href="Category_AM335x.html" title="Category:AM335x">AM335x</a></li><li><a href="Category_Linux.html" title="Category:Linux">Linux</a></li><li><a href="Category_PSP.html" title="Category:PSP">PSP</a></li></ul></div></div>				<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>
			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="https://processors.wiki.ti.com/index.php?title=Special:UserLogin&amp;returnto=AM335x+McSPI+Driver%27s+Guide" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="Special_RequestAccount.html" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
							<li id="ca-nstab-main" class="selected"><span><a href="AM335x_McSPI_Driver%27s_Guide.html" title="View the content page [c]" accesskey="c">Page</a></span></li><li id="ca-talk" class="new"><span><a href="https://processors.wiki.ti.com/index.php?title=Talk:AM335x_McSPI_Driver%27s_Guide&amp;action=edit&amp;redlink=1" rel="discussion" title="Discussion about the content page (page does not exist) [t]" accesskey="t">Discussion</a></span></li>						</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-variants-label" />
						<h3 id="p-variants-label">
							<span>Variants</span>
						</h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
							<li id="ca-view" class="collapsible selected"><span><a href="AM335x_McSPI_Driver%27s_Guide.html">Read</a></span></li><li id="ca-viewsource" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=edit" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li><li id="ca-history" class="collapsible"><span><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=history" title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>						</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<input type="checkbox" class="vectorMenuCheckbox" aria-labelledby="p-cactions-label" />
						<h3 id="p-cactions-label"><span>More</span></h3>
						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>
						<form action="https://processors.wiki.ti.com/index.php" id="searchform">
							<div id="simpleSearch">
								<input type="search" name="search" placeholder="Search Texas Instruments Wiki" title="Search Texas Instruments Wiki [f]" accesskey="f" id="searchInput"/><input type="hidden" value="Special:Search" name="title"/><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton"/><input type="submit" name="go" value="Go" title="Go to a page with this exact name if it exists" id="searchButton" class="searchButton"/>							</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a class="mw-wiki-logo" href="Main_Page.html"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id="p-navigation" aria-labelledby="p-navigation-label">
			<h3 id="p-navigation-label">Navigation</h3>
			<div class="body">
								<ul>
					<li id="n-mainpage"><a href="Main_Page.html" title="Visit the main page [z]" accesskey="z">Main Page</a></li><li id="n-All-pages"><a href="Special_AllPages.html">All pages</a></li><li id="n-All-categories"><a href="Special_Categories.html">All categories</a></li><li id="n-recentchanges"><a href="Special_RecentChanges.html" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li><li id="n-randompage"><a href="Package_Reflow_Profiles.html" title="Load a random page [x]" accesskey="x">Random page</a></li><li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>				</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id="p-tb" aria-labelledby="p-tb-label">
			<h3 id="p-tb-label">Toolbox</h3>
			<div class="body">
								<ul>
					<li id="t-whatlinkshere"><a href="Special_WhatLinksHere/AM335x_McSPI_Driver%27s_Guide.html" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li><li id="t-recentchangeslinked"><a href="Special_RecentChangesLinked/AM335x_McSPI_Driver%27s_Guide.html" rel="nofollow" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li><li id="t-specialpages"><a href="Special_SpecialPages.html" title="A list of all special pages [q]" accesskey="q">Special pages</a></li><li id="t-print"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li><li id="t-permalink"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;oldid=90923" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-info"><a href="https://processors.wiki.ti.com/index.php?title=AM335x_McSPI_Driver%27s_Guide&amp;action=info" title="More information about this page">Page information</a></li>				</ul>
							</div>
		</div>
				</div>
		</div>
				<div id="footer" role="contentinfo">
						<ul id="footer-info">
								<li id="footer-info-lastmod"> This page was last edited on 3 January 2012, at 05:00.</li>
								<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike</a> unless otherwise noted.</li>
							</ul>
						<ul id="footer-places">
								<li id="footer-places-privacy"><a href="Project_Privacy_policy.html" title="Project:Privacy policy">Privacy policy</a></li>
								<li id="footer-places-about"><a href="Project_About.html" title="Project:About">About Texas Instruments Wiki</a></li>
								<li id="footer-places-disclaimer"><a href="Project_General_disclaimer.html" title="Project:General disclaimer">Disclaimers</a></li>
								<li id="footer-places-termsofservice"><a href="Project_Terms_of_Service.html" title="Project:Terms of Service">Terms of Use</a></li>
							</ul>
										<ul id="footer-icons" class="noprint">
										<li id="footer-copyrightico">
						<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="https://processors.wiki.ti.com/resources/assets/licenses/cc-by-sa.png" alt="Creative Commons Attribution-ShareAlike" width="88" height="31"/></a>					</li>
										<li id="footer-poweredbyico">
						<a href="http://www.mediawiki.org/"><img src="https://processors.wiki.ti.com/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31"/></a>					</li>
									</ul>
						<div style="clear: both;"></div>
		</div>
		<script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgPageParseReport":{"limitreport":{"cputime":"0.059","walltime":"0.063","ppvisitednodes":{"value":142,"limit":1000000},"ppgeneratednodes":{"value":334,"limit":1000000},"postexpandincludesize":{"value":487,"limit":2097152},"templateargumentsize":{"value":36,"limit":2097152},"expansiondepth":{"value":2,"limit":40},"expensivefunctioncount":{"value":0,"limit":100},"unstrip-depth":{"value":0,"limit":20},"unstrip-size":{"value":3031,"limit":5000000},"timingprofile":["100.00%    2.884      1 -total"," 53.02%    1.529      1 Template:SpArticleStart"," 42.65%    1.230      1 Template:SpLicenseCC-SA"]},"cachereport":{"timestamp":"20201130234301","ttl":86400,"transientcontent":false}}});});</script><script>(window.RLQ=window.RLQ||[]).push(function(){mw.config.set({"wgBackendResponseTime":267});});</script>
	</body>

<!-- Mirrored from processors.wiki.ti.com/index.php/AM335x_McSPI_Driver%27s_Guide by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 01 Dec 2020 03:49:43 GMT -->
</html>
